var kW=Object.defineProperty;var BW=(t,e,n)=>e in t?kW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var HA=(t,e,n)=>BW(t,typeof e!="symbol"?e+"":e,n);function zW(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function dl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qA={exports:{}},c0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i3;function GW(){if(i3)return c0;i3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var s in r)s!=="key"&&(a[s]=r[s])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:o,ref:r!==void 0?r:null,props:a}}return c0.Fragment=e,c0.jsx=n,c0.jsxs=n,c0}var r3;function VW(){return r3||(r3=1,qA.exports=GW()),qA.exports}var ee=VW(),WA={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function HW(){if(a3)return ln;a3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function A(H,ne,le){this.props=H,this.context=ne,this.refs=S,this.updater=le||b}A.prototype.isReactComponent={},A.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},A.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function R(){}R.prototype=A.prototype;function I(H,ne,le){this.props=H,this.context=ne,this.refs=S,this.updater=le||b}var N=I.prototype=new R;N.constructor=I,T(N,A.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function U(){}var k={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function L(H,ne,le){var ge=le.ref;return{$$typeof:t,type:H,key:ne,ref:ge!==void 0?ge:null,props:le}}function F(H,ne){return L(H.type,ne,H.props)}function j(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function W(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return ne[le]})}var X=/\/+/g;function Q(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?W(""+H.key):ne.toString(36)}function ae(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(U,U):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function $(H,ne,le,ge,_e){var re=typeof H;(re==="undefined"||re==="boolean")&&(H=null);var oe=!1;if(H===null)oe=!0;else switch(re){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(H.$$typeof){case t:case e:oe=!0;break;case d:return oe=H._init,$(oe(H._payload),ne,le,ge,_e)}}if(oe)return _e=_e(H),oe=ge===""?"."+Q(H,0):ge,D(_e)?(le="",oe!=null&&(le=oe.replace(X,"$&/")+"/"),$(_e,ne,le,"",function(Ce){return Ce})):_e!=null&&(j(_e)&&(_e=F(_e,le+(_e.key==null||H&&H.key===_e.key?"":(""+_e.key).replace(X,"$&/")+"/")+oe)),ne.push(_e)),1;oe=0;var Ee=ge===""?".":ge+":";if(D(H))for(var ce=0;ce<H.length;ce++)ge=H[ce],re=Ee+Q(ge,ce),oe+=$(ge,ne,le,re,_e);else if(ce=y(H),typeof ce=="function")for(H=ce.call(H),ce=0;!(ge=H.next()).done;)ge=ge.value,re=Ee+Q(ge,ce++),oe+=$(ge,ne,le,re,_e);else if(re==="object"){if(typeof H.then=="function")return $(ae(H),ne,le,ge,_e);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return oe}function ie(H,ne,le){if(H==null)return H;var ge=[],_e=0;return $(H,ge,"","",function(re){return ne.call(le,re,_e++)}),ge}function me(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var pe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},de={map:ie,forEach:function(H,ne,le){ie(H,function(){ne.apply(this,arguments)},le)},count:function(H){var ne=0;return ie(H,function(){ne++}),ne},toArray:function(H){return ie(H,function(ne){return ne})||[]},only:function(H){if(!j(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ln.Activity=p,ln.Children=de,ln.Component=A,ln.Fragment=n,ln.Profiler=r,ln.PureComponent=I,ln.StrictMode=i,ln.Suspense=u,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ln.__COMPILER_RUNTIME={__proto__:null,c:function(H){return k.H.useMemoCache(H)}},ln.cache=function(H){return function(){return H.apply(null,arguments)}},ln.cacheSignal=function(){return null},ln.cloneElement=function(H,ne,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ge=T({},H.props),_e=H.key;if(ne!=null)for(re in ne.key!==void 0&&(_e=""+ne.key),ne)!z.call(ne,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&ne.ref===void 0||(ge[re]=ne[re]);var re=arguments.length-2;if(re===1)ge.children=le;else if(1<re){for(var oe=Array(re),Ee=0;Ee<re;Ee++)oe[Ee]=arguments[Ee+2];ge.children=oe}return L(H.type,_e,ge)},ln.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},ln.createElement=function(H,ne,le){var ge,_e={},re=null;if(ne!=null)for(ge in ne.key!==void 0&&(re=""+ne.key),ne)z.call(ne,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(_e[ge]=ne[ge]);var oe=arguments.length-2;if(oe===1)_e.children=le;else if(1<oe){for(var Ee=Array(oe),ce=0;ce<oe;ce++)Ee[ce]=arguments[ce+2];_e.children=Ee}if(H&&H.defaultProps)for(ge in oe=H.defaultProps,oe)_e[ge]===void 0&&(_e[ge]=oe[ge]);return L(H,re,_e)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(H){return{$$typeof:s,render:H}},ln.isValidElement=j,ln.lazy=function(H){return{$$typeof:d,_payload:{_status:-1,_result:H},_init:me}},ln.memo=function(H,ne){return{$$typeof:c,type:H,compare:ne===void 0?null:ne}},ln.startTransition=function(H){var ne=k.T,le={};k.T=le;try{var ge=H(),_e=k.S;_e!==null&&_e(le,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(U,pe)}catch(re){pe(re)}finally{ne!==null&&le.types!==null&&(ne.types=le.types),k.T=ne}},ln.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ln.use=function(H){return k.H.use(H)},ln.useActionState=function(H,ne,le){return k.H.useActionState(H,ne,le)},ln.useCallback=function(H,ne){return k.H.useCallback(H,ne)},ln.useContext=function(H){return k.H.useContext(H)},ln.useDebugValue=function(){},ln.useDeferredValue=function(H,ne){return k.H.useDeferredValue(H,ne)},ln.useEffect=function(H,ne){return k.H.useEffect(H,ne)},ln.useEffectEvent=function(H){return k.H.useEffectEvent(H)},ln.useId=function(){return k.H.useId()},ln.useImperativeHandle=function(H,ne,le){return k.H.useImperativeHandle(H,ne,le)},ln.useInsertionEffect=function(H,ne){return k.H.useInsertionEffect(H,ne)},ln.useLayoutEffect=function(H,ne){return k.H.useLayoutEffect(H,ne)},ln.useMemo=function(H,ne){return k.H.useMemo(H,ne)},ln.useOptimistic=function(H,ne){return k.H.useOptimistic(H,ne)},ln.useReducer=function(H,ne,le){return k.H.useReducer(H,ne,le)},ln.useRef=function(H){return k.H.useRef(H)},ln.useState=function(H){return k.H.useState(H)},ln.useSyncExternalStore=function(H,ne,le){return k.H.useSyncExternalStore(H,ne,le)},ln.useTransition=function(){return k.H.useTransition()},ln.version="19.2.3",ln}var o3;function Tg(){return o3||(o3=1,WA.exports=HW()),WA.exports}var G=Tg();const ds=dl(G),qW=zW({__proto__:null,default:ds},[G]);var jA={exports:{}},f0={},XA={exports:{}},YA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3;function WW(){return s3||(s3=1,(function(t){function e($,ie){var me=$.length;$.push(ie);e:for(;0<me;){var pe=me-1>>>1,de=$[pe];if(0<r(de,ie))$[pe]=ie,$[me]=de,me=pe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ie=$[0],me=$.pop();if(me!==ie){$[0]=me;e:for(var pe=0,de=$.length,H=de>>>1;pe<H;){var ne=2*(pe+1)-1,le=$[ne],ge=ne+1,_e=$[ge];if(0>r(le,me))ge<de&&0>r(_e,le)?($[pe]=_e,$[ge]=me,pe=ge):($[pe]=le,$[ne]=me,pe=ne);else if(ge<de&&0>r(_e,me))$[pe]=_e,$[ge]=me,pe=ge;else break e}}return ie}function r($,ie){var me=$.sortIndex-ie.sortIndex;return me!==0?me:$.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],c=[],d=1,p=null,g=3,y=!1,b=!1,T=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function N($){for(var ie=n(c);ie!==null;){if(ie.callback===null)i(c);else if(ie.startTime<=$)i(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function D($){if(T=!1,N($),!b)if(n(u)!==null)b=!0,U||(U=!0,W());else{var ie=n(c);ie!==null&&ae(D,ie.startTime-$)}}var U=!1,k=-1,z=5,L=-1;function F(){return S?!0:!(t.unstable_now()-L<z)}function j(){if(S=!1,U){var $=t.unstable_now();L=$;var ie=!0;try{e:{b=!1,T&&(T=!1,R(k),k=-1),y=!0;var me=g;try{t:{for(N($),p=n(u);p!==null&&!(p.expirationTime>$&&F());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var de=pe(p.expirationTime<=$);if($=t.unstable_now(),typeof de=="function"){p.callback=de,N($),ie=!0;break t}p===n(u)&&i(u),N($)}else i(u);p=n(u)}if(p!==null)ie=!0;else{var H=n(c);H!==null&&ae(D,H.startTime-$),ie=!1}}break e}finally{p=null,g=me,y=!1}ie=void 0}}finally{ie?W():U=!1}}}var W;if(typeof I=="function")W=function(){I(j)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Q=X.port2;X.port1.onmessage=j,W=function(){Q.postMessage(null)}}else W=function(){A(j,0)};function ae($,ie){k=A(function(){$(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var me=g;g=ie;try{return $()}finally{g=me}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function($,ie){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=g;g=$;try{return ie()}finally{g=me}},t.unstable_scheduleCallback=function($,ie,me){var pe=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?pe+me:pe):me=pe,$){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=me+de,$={id:d++,callback:ie,priorityLevel:$,startTime:me,expirationTime:de,sortIndex:-1},me>pe?($.sortIndex=me,e(c,$),n(u)===null&&$===n(c)&&(T?(R(k),k=-1):T=!0,ae(D,me-pe))):($.sortIndex=de,e(u,$),b||y||(b=!0,U||(U=!0,W()))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var ie=g;return function(){var me=g;g=ie;try{return $.apply(this,arguments)}finally{g=me}}}})(YA)),YA}var l3;function zB(){return l3||(l3=1,XA.exports=WW()),XA.exports}var $A={exports:{}},za={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3;function jW(){if(u3)return za;u3=1;var t=Tg();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,c,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:c,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return za.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,za.createPortal=function(u,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(u,c,null,d)},za.flushSync=function(u){var c=o.T,d=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=c,i.p=d,i.d.f()}},za.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(u,c))},za.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},za.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var d=c.as,p=s(d,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,y=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?i.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):d==="script"&&i.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},za.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=s(c.as,c.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(u)},za.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,p=s(d,c.crossOrigin);i.d.L(u,d,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},za.preloadModule=function(u,c){if(typeof u=="string")if(c){var d=s(c.as,c.crossOrigin);i.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(u)},za.requestFormReset=function(u){i.d.r(u)},za.unstable_batchedUpdates=function(u,c){return u(c)},za.useFormState=function(u,c,d){return o.H.useFormState(u,c,d)},za.useFormStatus=function(){return o.H.useHostTransitionStatus()},za.version="19.2.3",za}var c3;function GB(){if(c3)return $A.exports;c3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$A.exports=jW(),$A.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function XW(){if(f3)return f0;f3=1;var t=zB(),e=Tg(),n=GB();function i(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,v=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(v=f.return),l=f.return;while(l)}return f.tag===3?v:null}function o(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function s(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function u(l){if(a(l)!==l)throw Error(i(188))}function c(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(i(188));return f!==l?null:l}for(var v=l,_=f;;){var C=v.return;if(C===null)break;var P=C.alternate;if(P===null){if(_=C.return,_!==null){v=_;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===v)return u(C),l;if(P===_)return u(C),f;P=P.sibling}throw Error(i(188))}if(v.return!==_.return)v=C,_=P;else{for(var V=!1,te=C.child;te;){if(te===v){V=!0,v=C,_=P;break}if(te===_){V=!0,_=C,v=P;break}te=te.sibling}if(!V){for(te=P.child;te;){if(te===v){V=!0,v=P,_=C;break}if(te===_){V=!0,_=P,v=C;break}te=te.sibling}if(!V)throw Error(i(189))}}if(v.alternate!==_)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?l:f}function d(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=d(l),f!==null)return f;l=l.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(l){return l===null||typeof l!="object"?null:(l=j&&l[j]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function Q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case T:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case U:return"SuspenseList";case L:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case R:return(l._context.displayName||"Context")+".Consumer";case N:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return f=l.displayName||null,f!==null?f:Q(l.type)||"Memo";case z:f=l._payload,l=l._init;try{return Q(l(f))}catch{}}return null}var ae=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},pe=[],de=-1;function H(l){return{current:l}}function ne(l){0>de||(l.current=pe[de],pe[de]=null,de--)}function le(l,f){de++,pe[de]=l.current,l.current=f}var ge=H(null),_e=H(null),re=H(null),oe=H(null);function Ee(l,f){switch(le(re,f),le(_e,l),le(ge,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?MD(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=MD(f),l=wD(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(ge),le(ge,l)}function ce(){ne(ge),ne(_e),ne(re)}function Ce(l){l.memoizedState!==null&&le(oe,l);var f=ge.current,v=wD(f,l.type);f!==v&&(le(_e,l),le(ge,v))}function Ue(l){_e.current===l&&(ne(ge),ne(_e)),oe.current===l&&(ne(oe),o0._currentValue=me)}var ve,ft;function Se(l){if(ve===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);ve=f&&f[1]||"",ft=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+l+ft}var Oe=!1;function Me(l,f){if(!l||Oe)return"";Oe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Qe){var qe=Qe}Reflect.construct(l,[],ct)}else{try{ct.call()}catch(Qe){qe=Qe}l.call(ct.prototype)}}else{try{throw Error()}catch(Qe){qe=Qe}(ct=l())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Qe){if(Qe&&qe&&typeof Qe.stack=="string")return[Qe.stack,qe.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=_.DetermineComponentFrameRoot(),V=P[0],te=P[1];if(V&&te){var ye=V.split(`
`),ze=te.split(`
`);for(C=_=0;_<ye.length&&!ye[_].includes("DetermineComponentFrameRoot");)_++;for(;C<ze.length&&!ze[C].includes("DetermineComponentFrameRoot");)C++;if(_===ye.length||C===ze.length)for(_=ye.length-1,C=ze.length-1;1<=_&&0<=C&&ye[_]!==ze[C];)C--;for(;1<=_&&0<=C;_--,C--)if(ye[_]!==ze[C]){if(_!==1||C!==1)do if(_--,C--,0>C||ye[_]!==ze[C]){var at=`
`+ye[_].replace(" at new "," at ");return l.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",l.displayName)),at}while(1<=_&&0<=C);break}}}finally{Oe=!1,Error.prepareStackTrace=v}return(v=l?l.displayName||l.name:"")?Se(v):""}function Je(l,f){switch(l.tag){case 26:case 27:case 5:return Se(l.type);case 16:return Se("Lazy");case 13:return l.child!==f&&f!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return Me(l.type,!1);case 11:return Me(l.type.render,!1);case 1:return Me(l.type,!0);case 31:return Se("Activity");default:return""}}function Z(l){try{var f="",v=null;do f+=Je(l,v),v=l,l=l.return;while(l);return f}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var it=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,Re=t.unstable_cancelCallback,He=t.unstable_shouldYield,Y=t.unstable_requestPaint,q=t.unstable_now,fe=t.unstable_getCurrentPriorityLevel,Le=t.unstable_ImmediatePriority,Ie=t.unstable_UserBlockingPriority,Te=t.unstable_NormalPriority,ot=t.unstable_LowPriority,rt=t.unstable_IdlePriority,mt=t.log,xt=t.unstable_setDisableYieldValue,We=null,Ke=null;function et(l){if(typeof mt=="function"&&xt(l),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(We,l)}catch{}}var ue=Math.clz32?Math.clz32:he,we=Math.log,ht=Math.LN2;function he(l){return l>>>=0,l===0?32:31-(we(l)/ht|0)|0}var Ye=256,tt=262144,vt=4194304;function nt(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Be(l,f,v){var _=l.pendingLanes;if(_===0)return 0;var C=0,P=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var te=_&134217727;return te!==0?(_=te&~P,_!==0?C=nt(_):(V&=te,V!==0?C=nt(V):v||(v=te&~l,v!==0&&(C=nt(v))))):(te=_&~P,te!==0?C=nt(te):V!==0?C=nt(V):v||(v=_&~l,v!==0&&(C=nt(v)))),C===0?0:f!==0&&f!==C&&(f&P)===0&&(P=C&-C,v=f&-f,P>=v||P===32&&(v&4194048)!==0)?f:C}function lt(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function Et(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var l=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),l}function Lt(l){for(var f=[],v=0;31>v;v++)f.push(l);return f}function vn(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function wn(l,f,v,_,C,P){var V=l.pendingLanes;l.pendingLanes=v,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=v,l.entangledLanes&=v,l.errorRecoveryDisabledLanes&=v,l.shellSuspendCounter=0;var te=l.entanglements,ye=l.expirationTimes,ze=l.hiddenUpdates;for(v=V&~v;0<v;){var at=31-ue(v),ct=1<<at;te[at]=0,ye[at]=-1;var qe=ze[at];if(qe!==null)for(ze[at]=null,at=0;at<qe.length;at++){var Qe=qe[at];Qe!==null&&(Qe.lane&=-536870913)}v&=~ct}_!==0&&Qn(l,_,0),P!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=P&~(V&~f))}function Qn(l,f,v){l.pendingLanes|=f,l.suspendedLanes&=~f;var _=31-ue(f);l.entangledLanes|=f,l.entanglements[_]=l.entanglements[_]|1073741824|v&261930}function nr(l,f){var v=l.entangledLanes|=f;for(l=l.entanglements;v;){var _=31-ue(v),C=1<<_;C&f|l[_]&f&&(l[_]|=f),v&=~C}}function Jr(l,f){var v=f&-f;return v=(v&42)!==0?1:xr(v),(v&(l.suspendedLanes|f))!==0?0:v}function xr(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Sr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function pa(){var l=ie.p;return l!==0?l:(l=window.event,l===void 0?32:KD(l.type))}function ai(l,f){var v=ie.p;try{return ie.p=l,f()}finally{ie.p=v}}var $n=Math.random().toString(36).slice(2),zn="__reactFiber$"+$n,Di="__reactProps$"+$n,Fr="__reactContainer$"+$n,ma="__reactEvents$"+$n,Zr="__reactListeners$"+$n,$a="__reactHandles$"+$n,es="__reactResources$"+$n,Ka="__reactMarker$"+$n;function So(l){delete l[zn],delete l[Di],delete l[ma],delete l[Zr],delete l[$a]}function Ra(l){var f=l[zn];if(f)return f;for(var v=l.parentNode;v;){if(f=v[Fr]||v[zn]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(l=OD(l);l!==null;){if(v=l[zn])return v;l=OD(l)}return f}l=v,v=l.parentNode}return null}function Ja(l){if(l=l[zn]||l[Fr]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function Eo(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(i(33))}function Ot(l){var f=l[es];return f||(f=l[es]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function J(l){l[Ka]=!0}var Ae=new Set,Ve={};function Fe(l,f){Pe(l,f),Pe(l+"Capture",f)}function Pe(l,f){for(Ve[l]=f,l=0;l<f.length;l++)Ae.add(f[l])}var yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),At={},pt={};function Pt(l){return it.call(pt,l)?!0:it.call(At,l)?!1:yt.test(l)?pt[l]=!0:(At[l]=!0,!1)}function Nt(l,f,v){if(Pt(f))if(v===null)l.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+v)}}function Vt(l,f,v){if(v===null)l.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+v)}}function Dt(l,f,v,_){if(_===null)l.removeAttribute(v);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(v);return}l.setAttributeNS(f,v,""+_)}}function qt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function yn(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function qn(l,f,v){var _=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var C=_.get,P=_.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return C.call(this)},set:function(V){v=""+V,P.call(this,V)}}),Object.defineProperty(l,f,{enumerable:_.enumerable}),{getValue:function(){return v},setValue:function(V){v=""+V},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Nn(l){if(!l._valueTracker){var f=yn(l)?"checked":"value";l._valueTracker=qn(l,f,""+l[f])}}function Jt(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var v=f.getValue(),_="";return l&&(_=yn(l)?l.checked?"true":"false":l.value),l=_,l!==v?(f.setValue(l),!0):!1}function Tt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var xn=/[\n"\\]/g;function Bt(l){return l.replace(xn,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Oi(l,f,v,_,C,P,V,te){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),f!=null?V==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+qt(f)):l.value!==""+qt(f)&&(l.value=""+qt(f)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),f!=null?Gn(l,V,qt(f)):v!=null?Gn(l,V,qt(v)):_!=null&&l.removeAttribute("value"),C==null&&P!=null&&(l.defaultChecked=!!P),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?l.name=""+qt(te):l.removeAttribute("name")}function Qr(l,f,v,_,C,P,V,te){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),f!=null||v!=null){if(!(P!=="submit"&&P!=="reset"||f!=null)){Nn(l);return}v=v!=null?""+qt(v):"",f=f!=null?""+qt(f):v,te||f===l.value||(l.value=f),l.defaultValue=f}_=_??C,_=typeof _!="function"&&typeof _!="symbol"&&!!_,l.checked=te?l.checked:!!_,l.defaultChecked=!!_,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Nn(l)}function Gn(l,f,v){f==="number"&&Tt(l.ownerDocument)===l||l.defaultValue===""+v||(l.defaultValue=""+v)}function Er(l,f,v,_){if(l=l.options,f){f={};for(var C=0;C<v.length;C++)f["$"+v[C]]=!0;for(v=0;v<l.length;v++)C=f.hasOwnProperty("$"+l[v].value),l[v].selected!==C&&(l[v].selected=C),C&&_&&(l[v].defaultSelected=!0)}else{for(v=""+qt(v),f=null,C=0;C<l.length;C++){if(l[C].value===v){l[C].selected=!0,_&&(l[C].defaultSelected=!0);return}f!==null||l[C].disabled||(f=l[C])}f!==null&&(f.selected=!0)}}function Cn(l,f,v){if(f!=null&&(f=""+qt(f),f!==l.value&&(l.value=f),v==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=v!=null?""+qt(v):""}function gi(l,f,v,_){if(f==null){if(_!=null){if(v!=null)throw Error(i(92));if(ae(_)){if(1<_.length)throw Error(i(93));_=_[0]}v=_}v==null&&(v=""),f=v}v=qt(f),l.defaultValue=v,_=l.textContent,_===v&&_!==""&&_!==null&&(l.value=_),Nn(l)}function vi(l,f){if(f){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=f;return}}l.textContent=f}var Vi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hi(l,f,v){var _=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?_?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":_?l.setProperty(f,v):typeof v!="number"||v===0||Vi.has(f)?f==="float"?l.cssFloat=v:l[f]=(""+v).trim():l[f]=v+"px"}function ts(l,f,v){if(f!=null&&typeof f!="object")throw Error(i(62));if(l=l.style,v!=null){for(var _ in v)!v.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?l.setProperty(_,""):_==="float"?l.cssFloat="":l[_]="");for(var C in f)_=f[C],f.hasOwnProperty(C)&&v[C]!==_&&Hi(l,C,_)}else for(var P in f)f.hasOwnProperty(P)&&Hi(l,P,f[P])}function Tr(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function To(l){return eu.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ea(){}var As=null;function Ju(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Za=null,Ao=null;function Zu(l){var f=Ja(l);if(f&&(l=f.stateNode)){var v=l[Di]||null;e:switch(l=f.stateNode,f.type){case"input":if(Oi(l,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Bt(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var _=v[f];if(_!==l&&_.form===l.form){var C=_[Di]||null;if(!C)throw Error(i(90));Oi(_,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(f=0;f<v.length;f++)_=v[f],_.form===l.form&&Jt(_)}break e;case"textarea":Cn(l,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&Er(l,!!v.multiple,f,!1)}}}var Qu=!1;function tu(l,f,v){if(Qu)return l(f,v);Qu=!0;try{var _=l(f);return _}finally{if(Qu=!1,(Za!==null||Ao!==null)&&(us(),Za&&(f=Za,l=Ao,Ao=Za=null,Zu(f),l)))for(f=0;f<l.length;f++)Zu(l[f])}}function Ms(l,f){var v=l.stateNode;if(v===null)return null;var _=v[Di]||null;if(_===null)return null;v=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(i(231,f,typeof v));return v}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ga=!1;if(Qa)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){ga=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{ga=!1}var ta=null,ec=null,ns=null;function nu(){if(ns)return ns;var l,f=ec,v=f.length,_,C="value"in ta?ta.value:ta.textContent,P=C.length;for(l=0;l<v&&f[l]===C[l];l++);var V=v-l;for(_=1;_<=V&&f[v-_]===C[P-_];_++);return ns=C.slice(l,1<_?1-_:void 0)}function iu(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function Mo(){return!0}function ru(){return!1}function yi(l){function f(v,_,C,P,V){this._reactName=v,this._targetInst=C,this.type=_,this.nativeEvent=P,this.target=V,this.currentTarget=null;for(var te in l)l.hasOwnProperty(te)&&(v=l[te],this[te]=v?v(P):P[te]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Mo:ru,this.isPropagationStopped=ru,this}return p(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),f}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=yi(is),Cs=p({},is,{view:0,detail:0}),au=yi(Cs),ou,Rs,Is,ir=p({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Is&&(Is&&l.type==="mousemove"?(ou=l.screenX-Is.screenX,Rs=l.screenY-Is.screenY):Rs=ou=0,Is=l),ou)},movementY:function(l){return"movementY"in l?l.movementY:Rs}}),Ud=yi(ir),tc=p({},ir,{dataTransfer:0}),nc=yi(tc),gf=p({},Cs,{relatedTarget:0}),vf=yi(gf),kr=p({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=yi(kr),na=p({},is,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),rs=yi(na),su=p({},is,{data:0}),_p=yi(su),bp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jg(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=E_[l])?!!f[l]:!1}function xp(){return jg}var T_=p({},Cs,{key:function(l){if(l.key){var f=bp[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=iu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?S_[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(l){return l.type==="keypress"?iu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?iu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ic=yi(T_),Sp=p({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xg=yi(Sp),Yg=p({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),A_=yi(Yg),M_=p({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),fA=yi(M_),Br=p({},ir,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),w_=yi(Br),C_=p({},is,{newState:0,oldState:0}),R_=yi(C_),I_=[9,13,27,32],rc=Qa&&"CompositionEvent"in window,yf=null;Qa&&"documentMode"in document&&(yf=document.documentMode);var Ep=Qa&&"TextEvent"in window&&!yf,$g=Qa&&(!rc||yf&&8<yf&&11>=yf),P_=" ",Fd=!1;function Tp(l,f){switch(l){case"keyup":return I_.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ac=!1;function N_(l,f){switch(l){case"compositionend":return Kg(f);case"keypress":return f.which!==32?null:(Fd=!0,P_);case"textInput":return l=f.data,l===P_&&Fd?null:l;default:return null}}function Jg(l,f){if(ac)return l==="compositionend"||!rc&&Tp(l,f)?(l=nu(),ns=ec=ta=null,ac=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return $g&&f.locale!=="ko"?null:f.data;default:return null}}var Zg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!Zg[l.type]:f==="textarea"}function Ap(l,f,v,_){Za?Ao?Ao.push(_):Ao=[_]:Za=_,f=Fb(f,"onChange"),0<f.length&&(v=new gl("onChange","change",null,v,_),l.push({event:v,listeners:f}))}var lu=null,oc=null;function D_(l){bD(l,0)}function _f(l){var f=Eo(l);if(Jt(f))return l}function ev(l,f){if(l==="change")return f}var Ps=!1;if(Qa){var kd;if(Qa){var tv="oninput"in document;if(!tv){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),tv=typeof nv.oninput=="function"}kd=tv}else kd=!1;Ps=kd&&(!document.documentMode||9<document.documentMode)}function wo(){lu&&(lu.detachEvent("onpropertychange",Bd),oc=lu=null)}function Bd(l){if(l.propertyName==="value"&&_f(oc)){var f=[];Ap(f,oc,l,Ju(l)),tu(D_,f)}}function O_(l,f,v){l==="focusin"?(wo(),lu=f,oc=v,lu.attachEvent("onpropertychange",Bd)):l==="focusout"&&wo()}function iv(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return _f(oc)}function L_(l,f){if(l==="click")return _f(f)}function U_(l,f){if(l==="input"||l==="change")return _f(f)}function rv(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var va=typeof Object.is=="function"?Object.is:rv;function bf(l,f){if(va(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var v=Object.keys(l),_=Object.keys(f);if(v.length!==_.length)return!1;for(_=0;_<v.length;_++){var C=v[_];if(!it.call(f,C)||!va(l[C],f[C]))return!1}return!0}function zd(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function xf(l,f){var v=zd(l);l=0;for(var _;v;){if(v.nodeType===3){if(_=l+v.textContent.length,l<=f&&_>=f)return{node:v,offset:f-l};l=_}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=zd(v)}}function oi(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?oi(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function F_(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=Tt(l.document);f instanceof l.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)l=f.contentWindow;else break;f=Tt(l.document)}return f}function av(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var k_=Qa&&"documentMode"in document&&11>=document.documentMode,Ns=null,Ds=null,Sf=null,Mp=!1;function Ef(l,f,v){var _=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Mp||Ns==null||Ns!==Tt(_)||(_=Ns,"selectionStart"in _&&av(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Sf&&bf(Sf,_)||(Sf=_,_=Fb(Ds,"onSelect"),0<_.length&&(f=new gl("onSelect","select",null,f,v),l.push({event:f,listeners:_}),f.target=Ns)))}function ia(l,f){var v={};return v[l.toLowerCase()]=f.toLowerCase(),v["Webkit"+l]="webkit"+f,v["Moz"+l]="moz"+f,v}var sc={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},Gd={},ov={};Qa&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function vl(l){if(Gd[l])return Gd[l];if(!sc[l])return l;var f=sc[l],v;for(v in f)if(f.hasOwnProperty(v)&&v in ov)return Gd[l]=f[v];return l}var wp=vl("animationend"),Vd=vl("animationiteration"),sv=vl("animationstart"),B_=vl("transitionrun"),dA=vl("transitionstart"),z_=vl("transitioncancel"),lv=vl("transitionend"),Co=new Map,Hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hd.push("scrollEnd");function Ro(l,f){Co.set(l,f),Fe(f,[l])}var qd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Io=[],yl=0,Ar=0;function Wd(){for(var l=yl,f=Ar=yl=0;f<l;){var v=Io[f];Io[f++]=null;var _=Io[f];Io[f++]=null;var C=Io[f];Io[f++]=null;var P=Io[f];if(Io[f++]=null,_!==null&&C!==null){var V=_.pending;V===null?C.next=C:(C.next=V.next,V.next=C),_.pending=C}P!==0&&uu(v,C,P)}}function Mr(l,f,v,_){Io[yl++]=l,Io[yl++]=f,Io[yl++]=v,Io[yl++]=_,Ar|=_,l.lanes|=_,l=l.alternate,l!==null&&(l.lanes|=_)}function Cp(l,f,v,_){return Mr(l,f,v,_),Po(l)}function ya(l,f){return Mr(l,null,null,f),Po(l)}function uu(l,f,v){l.lanes|=v;var _=l.alternate;_!==null&&(_.lanes|=v);for(var C=!1,P=l.return;P!==null;)P.childLanes|=v,_=P.alternate,_!==null&&(_.childLanes|=v),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(C=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,C&&f!==null&&(C=31-ue(v),l=P.hiddenUpdates,_=l[C],_===null?l[C]=[f]:_.push(f),f.lane=v|536870912),P):null}function Po(l){if(50<Cu)throw Cu=0,Mc=null,Error(i(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var cu={};function uv(l,f,v,_){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(l,f,v,_){return new uv(l,f,v,_)}function Rp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ia(l,f){var v=l.alternate;return v===null?(v=Ai(l.tag,f,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=f,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&65011712,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,f=l.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v.refCleanup=l.refCleanup,v}function Tf(l,f){l.flags&=65011714;var v=l.alternate;return v===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=v.childLanes,l.lanes=v.lanes,l.child=v.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=v.memoizedProps,l.memoizedState=v.memoizedState,l.updateQueue=v.updateQueue,l.type=v.type,f=v.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Os(l,f,v,_,C,P){var V=0;if(_=l,typeof l=="function")Rp(l)&&(V=1);else if(typeof l=="string")V=MW(l,v,ge.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case L:return l=Ai(31,v,f,C),l.elementType=L,l.lanes=P,l;case T:return fu(v.children,C,P,f);case S:V=8,C|=24;break;case A:return l=Ai(12,v,f,C|2),l.elementType=A,l.lanes=P,l;case D:return l=Ai(13,v,f,C),l.elementType=D,l.lanes=P,l;case U:return l=Ai(19,v,f,C),l.elementType=U,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case R:V=9;break e;case N:V=11;break e;case k:V=14;break e;case z:V=16,_=null;break e}V=29,v=Error(i(130,l===null?"null":typeof l,"")),_=null}return f=Ai(V,v,f,C),f.elementType=l,f.type=_,f.lanes=P,f}function fu(l,f,v,_){return l=Ai(7,l,_,f),l.lanes=v,l}function Ip(l,f,v){return l=Ai(6,l,null,f),l.lanes=v,l}function Af(l){var f=Ai(18,null,null,0);return f.stateNode=l,f}function Pp(l,f,v){return f=Ai(4,l.children!==null?l.children:[],l.key,f),f.lanes=v,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var jd=new WeakMap;function to(l,f){if(typeof l=="object"&&l!==null){var v=jd.get(l);return v!==void 0?v:(f={value:l,source:f,stack:Z(f)},jd.set(l,f),f)}return{value:l,source:f,stack:Z(f)}}var du=[],hu=0,Mf=null,wf=0,Pa=[],_i=0,_l=null,Mi=1,as="";function Ls(l,f){du[hu++]=wf,du[hu++]=Mf,Mf=l,wf=f}function G_(l,f,v){Pa[_i++]=Mi,Pa[_i++]=as,Pa[_i++]=_l,_l=l;var _=Mi;l=as;var C=32-ue(_)-1;_&=~(1<<C),v+=1;var P=32-ue(f)+C;if(30<P){var V=C-C%5;P=(_&(1<<V)-1).toString(32),_>>=V,C-=V,Mi=1<<32-ue(f)+C|v<<C|_,as=P+l}else Mi=1<<P|v<<C|_,as=l}function Us(l){l.return!==null&&(Ls(l,1),G_(l,1,0))}function Np(l){for(;l===Mf;)Mf=du[--hu],du[hu]=null,wf=du[--hu],du[hu]=null;for(;l===_l;)_l=Pa[--_i],Pa[_i]=null,as=Pa[--_i],Pa[_i]=null,Mi=Pa[--_i],Pa[_i]=null}function Dp(l,f){Pa[_i++]=Mi,Pa[_i++]=as,Pa[_i++]=_l,Mi=f.id,as=f.overflow,_l=l}var Li=null,si=null,Rn=!1,bl=null,no=!1,Cf=Error(i(519));function Fs(l){var f=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ks(to(f,l)),Cf}function V_(l){var f=l.stateNode,v=l.type,_=l.memoizedProps;switch(f[zn]=l,f[Di]=_,v){case"dialog":On("cancel",f),On("close",f);break;case"iframe":case"object":case"embed":On("load",f);break;case"video":case"audio":for(v=0;v<qo.length;v++)On(qo[v],f);break;case"source":On("error",f);break;case"img":case"image":case"link":On("error",f),On("load",f);break;case"details":On("toggle",f);break;case"input":On("invalid",f),Qr(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":On("invalid",f);break;case"textarea":On("invalid",f),gi(f,_.value,_.defaultValue,_.children)}v=_.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||_.suppressHydrationWarning===!0||TD(f.textContent,v)?(_.popover!=null&&(On("beforetoggle",f),On("toggle",f)),_.onScroll!=null&&On("scroll",f),_.onScrollEnd!=null&&On("scrollend",f),_.onClick!=null&&(f.onclick=ea),f=!0):f=!1,f||Fs(l,!0)}function H_(l){for(Li=l.return;Li;)switch(Li.tag){case 5:case 31:case 13:no=!1;return;case 27:case 3:no=!0;return;default:Li=Li.return}}function Rf(l){if(l!==Li)return!1;if(!Rn)return H_(l),Rn=!0,!1;var f=l.tag,v;if((v=f!==3&&f!==27)&&((v=f===5)&&(v=l.type,v=!(v!=="form"&&v!=="button")||CA(l.type,l.memoizedProps)),v=!v),v&&si&&Fs(l),H_(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));si=DD(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));si=DD(l)}else f===27?(f=si,$f(l.type)?(l=DA,DA=null,si=l):si=f):si=Li?Zs(l.stateNode.nextSibling):null;return!0}function pu(){si=Li=null,Rn=!1}function Op(){var l=bl;return l!==null&&(Fi===null?Fi=l:Fi.push.apply(Fi,l),bl=null),l}function ks(l){bl===null?bl=[l]:bl.push(l)}var If=H(null),mu=null,Bs=null;function xl(l,f,v){le(If,f._currentValue),f._currentValue=v}function zs(l){l._currentValue=If.current,ne(If)}function Lp(l,f,v){for(;l!==null;){var _=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),l===v)break;l=l.return}}function Up(l,f,v,_){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var P=C.dependencies;if(P!==null){var V=C.child;P=P.firstContext;e:for(;P!==null;){var te=P;P=C;for(var ye=0;ye<f.length;ye++)if(te.context===f[ye]){P.lanes|=v,te=P.alternate,te!==null&&(te.lanes|=v),Lp(P.return,v,l),_||(V=null);break e}P=te.next}}else if(C.tag===18){if(V=C.return,V===null)throw Error(i(341));V.lanes|=v,P=V.alternate,P!==null&&(P.lanes|=v),Lp(V,v,l),V=null}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===l){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}}function Gs(l,f,v,_){l=null;for(var C=f,P=!1;C!==null;){if(!P){if((C.flags&524288)!==0)P=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var V=C.alternate;if(V===null)throw Error(i(387));if(V=V.memoizedProps,V!==null){var te=C.type;va(C.pendingProps.value,V.value)||(l!==null?l.push(te):l=[te])}}else if(C===oe.current){if(V=C.alternate,V===null)throw Error(i(387));V.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(o0):l=[o0])}C=C.return}l!==null&&Up(f,l,v,_),f.flags|=262144}function Xd(l){for(l=l.firstContext;l!==null;){if(!va(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function gu(l){mu=l,Bs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Zt(l){return q_(mu,l)}function Pf(l,f){return mu===null&&gu(l),q_(l,f)}function q_(l,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},Bs===null){if(l===null)throw Error(i(308));Bs=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else Bs=Bs.next=f;return v}var W_=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(v,_){l.push(_)}};this.abort=function(){f.aborted=!0,l.forEach(function(v){return v()})}},hA=t.unstable_scheduleCallback,pA=t.unstable_NormalPriority,rr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cv(){return{controller:new W_,data:new Map,refCount:0}}function lc(l){l.refCount--,l.refCount===0&&hA(pA,function(){l.controller.abort()})}var io=null,Fp=0,Sl=0,No=null;function fv(l,f){if(io===null){var v=io=[];Fp=0,Sl=$e(),No={status:"pending",value:void 0,then:function(_){v.push(_)}}}return Fp++,f.then(dv,dv),f}function dv(){if(--Fp===0&&io!==null){No!==null&&(No.status="fulfilled");var l=io;io=null,Sl=0,No=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function hv(l,f){var v=[],_={status:"pending",value:null,reason:null,then:function(C){v.push(C)}};return l.then(function(){_.status="fulfilled",_.value=f;for(var C=0;C<v.length;C++)(0,v[C])(f)},function(C){for(_.status="rejected",_.reason=C,C=0;C<v.length;C++)(0,v[C])(void 0)}),_}var j_=$.S;$.S=function(l,f){e0=q(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&fv(l,f),j_!==null&&j_(l,f)};var vu=H(null);function kp(){var l=vu.current;return l!==null?l:tn.pooledCache}function Yd(l,f){f===null?le(vu,vu.current):le(vu,f.pool)}function pv(){var l=kp();return l===null?null:{parent:rr._currentValue,pool:l}}var uc=Error(i(460)),$d=Error(i(474)),dn=Error(i(542)),Bp={then:function(){}};function Na(l){return l=l.status,l==="fulfilled"||l==="rejected"}function zp(l,f,v){switch(v=l[v],v===void 0?l.push(f):v!==f&&(f.then(ea,ea),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,dc(l),l;default:if(typeof f.status=="string")f.then(ea,ea);else{if(l=tn,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=f,l.status="pending",l.then(function(_){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=_}},function(_){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,dc(l),l}throw Vs=f,uc}}function cc(l){try{var f=l._init;return f(l._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(Vs=v,uc):v}}var Vs=null;function fc(){if(Vs===null)throw Error(i(459));var l=Vs;return Vs=null,l}function dc(l){if(l===uc||l===dn)throw Error(i(483))}var hc=null,pc=0;function Kd(l){var f=pc;return pc+=1,hc===null&&(hc=[]),zp(hc,l,f)}function Do(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Nf(l,f){throw f.$$typeof===g?Error(i(525)):(l=Object.prototype.toString.call(f),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function Gp(l){function f(Ne,xe){if(l){var ke=Ne.deletions;ke===null?(Ne.deletions=[xe],Ne.flags|=16):ke.push(xe)}}function v(Ne,xe){if(!l)return null;for(;xe!==null;)f(Ne,xe),xe=xe.sibling;return null}function _(Ne){for(var xe=new Map;Ne!==null;)Ne.key!==null?xe.set(Ne.key,Ne):xe.set(Ne.index,Ne),Ne=Ne.sibling;return xe}function C(Ne,xe){return Ne=Ia(Ne,xe),Ne.index=0,Ne.sibling=null,Ne}function P(Ne,xe,ke){return Ne.index=ke,l?(ke=Ne.alternate,ke!==null?(ke=ke.index,ke<xe?(Ne.flags|=67108866,xe):ke):(Ne.flags|=67108866,xe)):(Ne.flags|=1048576,xe)}function V(Ne){return l&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function te(Ne,xe,ke,ut){return xe===null||xe.tag!==6?(xe=Ip(ke,Ne.mode,ut),xe.return=Ne,xe):(xe=C(xe,ke),xe.return=Ne,xe)}function ye(Ne,xe,ke,ut){var jt=ke.type;return jt===T?at(Ne,xe,ke.props.children,ut,ke.key):xe!==null&&(xe.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===z&&cc(jt)===xe.type)?(xe=C(xe,ke.props),Do(xe,ke),xe.return=Ne,xe):(xe=Os(ke.type,ke.key,ke.props,null,Ne.mode,ut),Do(xe,ke),xe.return=Ne,xe)}function ze(Ne,xe,ke,ut){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==ke.containerInfo||xe.stateNode.implementation!==ke.implementation?(xe=Pp(ke,Ne.mode,ut),xe.return=Ne,xe):(xe=C(xe,ke.children||[]),xe.return=Ne,xe)}function at(Ne,xe,ke,ut,jt){return xe===null||xe.tag!==7?(xe=fu(ke,Ne.mode,ut,jt),xe.return=Ne,xe):(xe=C(xe,ke),xe.return=Ne,xe)}function ct(Ne,xe,ke){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Ip(""+xe,Ne.mode,ke),xe.return=Ne,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:return ke=Os(xe.type,xe.key,xe.props,null,Ne.mode,ke),Do(ke,xe),ke.return=Ne,ke;case b:return xe=Pp(xe,Ne.mode,ke),xe.return=Ne,xe;case z:return xe=cc(xe),ct(Ne,xe,ke)}if(ae(xe)||W(xe))return xe=fu(xe,Ne.mode,ke,null),xe.return=Ne,xe;if(typeof xe.then=="function")return ct(Ne,Kd(xe),ke);if(xe.$$typeof===I)return ct(Ne,Pf(Ne,xe),ke);Nf(Ne,xe)}return null}function qe(Ne,xe,ke,ut){var jt=xe!==null?xe.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return jt!==null?null:te(Ne,xe,""+ke,ut);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===jt?ye(Ne,xe,ke,ut):null;case b:return ke.key===jt?ze(Ne,xe,ke,ut):null;case z:return ke=cc(ke),qe(Ne,xe,ke,ut)}if(ae(ke)||W(ke))return jt!==null?null:at(Ne,xe,ke,ut,null);if(typeof ke.then=="function")return qe(Ne,xe,Kd(ke),ut);if(ke.$$typeof===I)return qe(Ne,xe,Pf(Ne,ke),ut);Nf(Ne,ke)}return null}function Qe(Ne,xe,ke,ut,jt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Ne=Ne.get(ke)||null,te(xe,Ne,""+ut,jt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case y:return Ne=Ne.get(ut.key===null?ke:ut.key)||null,ye(xe,Ne,ut,jt);case b:return Ne=Ne.get(ut.key===null?ke:ut.key)||null,ze(xe,Ne,ut,jt);case z:return ut=cc(ut),Qe(Ne,xe,ke,ut,jt)}if(ae(ut)||W(ut))return Ne=Ne.get(ke)||null,at(xe,Ne,ut,jt,null);if(typeof ut.then=="function")return Qe(Ne,xe,ke,Kd(ut),jt);if(ut.$$typeof===I)return Qe(Ne,xe,ke,Pf(xe,ut),jt);Nf(xe,ut)}return null}function kt(Ne,xe,ke,ut){for(var jt=null,Wn=null,zt=xe,_n=xe=0,Un=null;zt!==null&&_n<ke.length;_n++){zt.index>_n?(Un=zt,zt=null):Un=zt.sibling;var jn=qe(Ne,zt,ke[_n],ut);if(jn===null){zt===null&&(zt=Un);break}l&&zt&&jn.alternate===null&&f(Ne,zt),xe=P(jn,xe,_n),Wn===null?jt=jn:Wn.sibling=jn,Wn=jn,zt=Un}if(_n===ke.length)return v(Ne,zt),Rn&&Ls(Ne,_n),jt;if(zt===null){for(;_n<ke.length;_n++)zt=ct(Ne,ke[_n],ut),zt!==null&&(xe=P(zt,xe,_n),Wn===null?jt=zt:Wn.sibling=zt,Wn=zt);return Rn&&Ls(Ne,_n),jt}for(zt=_(zt);_n<ke.length;_n++)Un=Qe(zt,Ne,_n,ke[_n],ut),Un!==null&&(l&&Un.alternate!==null&&zt.delete(Un.key===null?_n:Un.key),xe=P(Un,xe,_n),Wn===null?jt=Un:Wn.sibling=Un,Wn=Un);return l&&zt.forEach(function(ed){return f(Ne,ed)}),Rn&&Ls(Ne,_n),jt}function Kt(Ne,xe,ke,ut){if(ke==null)throw Error(i(151));for(var jt=null,Wn=null,zt=xe,_n=xe=0,Un=null,jn=ke.next();zt!==null&&!jn.done;_n++,jn=ke.next()){zt.index>_n?(Un=zt,zt=null):Un=zt.sibling;var ed=qe(Ne,zt,jn.value,ut);if(ed===null){zt===null&&(zt=Un);break}l&&zt&&ed.alternate===null&&f(Ne,zt),xe=P(ed,xe,_n),Wn===null?jt=ed:Wn.sibling=ed,Wn=ed,zt=Un}if(jn.done)return v(Ne,zt),Rn&&Ls(Ne,_n),jt;if(zt===null){for(;!jn.done;_n++,jn=ke.next())jn=ct(Ne,jn.value,ut),jn!==null&&(xe=P(jn,xe,_n),Wn===null?jt=jn:Wn.sibling=jn,Wn=jn);return Rn&&Ls(Ne,_n),jt}for(zt=_(zt);!jn.done;_n++,jn=ke.next())jn=Qe(zt,Ne,_n,jn.value,ut),jn!==null&&(l&&jn.alternate!==null&&zt.delete(jn.key===null?_n:jn.key),xe=P(jn,xe,_n),Wn===null?jt=jn:Wn.sibling=jn,Wn=jn);return l&&zt.forEach(function(FW){return f(Ne,FW)}),Rn&&Ls(Ne,_n),jt}function ci(Ne,xe,ke,ut){if(typeof ke=="object"&&ke!==null&&ke.type===T&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var jt=ke.key;xe!==null;){if(xe.key===jt){if(jt=ke.type,jt===T){if(xe.tag===7){v(Ne,xe.sibling),ut=C(xe,ke.props.children),ut.return=Ne,Ne=ut;break e}}else if(xe.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===z&&cc(jt)===xe.type){v(Ne,xe.sibling),ut=C(xe,ke.props),Do(ut,ke),ut.return=Ne,Ne=ut;break e}v(Ne,xe);break}else f(Ne,xe);xe=xe.sibling}ke.type===T?(ut=fu(ke.props.children,Ne.mode,ut,ke.key),ut.return=Ne,Ne=ut):(ut=Os(ke.type,ke.key,ke.props,null,Ne.mode,ut),Do(ut,ke),ut.return=Ne,Ne=ut)}return V(Ne);case b:e:{for(jt=ke.key;xe!==null;){if(xe.key===jt)if(xe.tag===4&&xe.stateNode.containerInfo===ke.containerInfo&&xe.stateNode.implementation===ke.implementation){v(Ne,xe.sibling),ut=C(xe,ke.children||[]),ut.return=Ne,Ne=ut;break e}else{v(Ne,xe);break}else f(Ne,xe);xe=xe.sibling}ut=Pp(ke,Ne.mode,ut),ut.return=Ne,Ne=ut}return V(Ne);case z:return ke=cc(ke),ci(Ne,xe,ke,ut)}if(ae(ke))return kt(Ne,xe,ke,ut);if(W(ke)){if(jt=W(ke),typeof jt!="function")throw Error(i(150));return ke=jt.call(ke),Kt(Ne,xe,ke,ut)}if(typeof ke.then=="function")return ci(Ne,xe,Kd(ke),ut);if(ke.$$typeof===I)return ci(Ne,xe,Pf(Ne,ke),ut);Nf(Ne,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,xe!==null&&xe.tag===6?(v(Ne,xe.sibling),ut=C(xe,ke),ut.return=Ne,Ne=ut):(v(Ne,xe),ut=Ip(ke,Ne.mode,ut),ut.return=Ne,Ne=ut),V(Ne)):v(Ne,xe)}return function(Ne,xe,ke,ut){try{pc=0;var jt=ci(Ne,xe,ke,ut);return hc=null,jt}catch(zt){if(zt===uc||zt===dn)throw zt;var Wn=Ai(29,zt,null,Ne.mode);return Wn.lanes=ut,Wn.return=Ne,Wn}finally{}}}var El=Gp(!0),Vp=Gp(!1),_a=!1;function Jd(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mv(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Tl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function yu(l,f,v){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(Gt&2)!==0){var C=_.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),_.pending=f,f=Po(l),uu(l,null,v),f}return Mr(l,_,f,v),Po(l)}function _u(l,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var _=f.lanes;_&=l.pendingLanes,v|=_,f.lanes=v,nr(l,v)}}function Wt(l,f){var v=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,v===_)){var C=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var V={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};P===null?C=P=V:P=P.next=V,v=v.next}while(v!==null);P===null?C=P=f:P=P.next=f}else C=P=f;v={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:_.shared,callbacks:_.callbacks},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=f:l.next=f,v.lastBaseUpdate=f}var gv=!1;function Zd(){if(gv){var l=No;if(l!==null)throw l}}function Df(l,f,v,_){gv=!1;var C=l.updateQueue;_a=!1;var P=C.firstBaseUpdate,V=C.lastBaseUpdate,te=C.shared.pending;if(te!==null){C.shared.pending=null;var ye=te,ze=ye.next;ye.next=null,V===null?P=ze:V.next=ze,V=ye;var at=l.alternate;at!==null&&(at=at.updateQueue,te=at.lastBaseUpdate,te!==V&&(te===null?at.firstBaseUpdate=ze:te.next=ze,at.lastBaseUpdate=ye))}if(P!==null){var ct=C.baseState;V=0,at=ze=ye=null,te=P;do{var qe=te.lane&-536870913,Qe=qe!==te.lane;if(Qe?(fn&qe)===qe:(_&qe)===qe){qe!==0&&qe===Sl&&(gv=!0),at!==null&&(at=at.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var kt=l,Kt=te;qe=f;var ci=v;switch(Kt.tag){case 1:if(kt=Kt.payload,typeof kt=="function"){ct=kt.call(ci,ct,qe);break e}ct=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Kt.payload,qe=typeof kt=="function"?kt.call(ci,ct,qe):kt,qe==null)break e;ct=p({},ct,qe);break e;case 2:_a=!0}}qe=te.callback,qe!==null&&(l.flags|=64,Qe&&(l.flags|=8192),Qe=C.callbacks,Qe===null?C.callbacks=[qe]:Qe.push(qe))}else Qe={lane:qe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},at===null?(ze=at=Qe,ye=ct):at=at.next=Qe,V|=qe;if(te=te.next,te===null){if(te=C.shared.pending,te===null)break;Qe=te,te=Qe.next,Qe.next=null,C.lastBaseUpdate=Qe,C.shared.pending=null}}while(!0);at===null&&(ye=ct),C.baseState=ye,C.firstBaseUpdate=ze,C.lastBaseUpdate=at,P===null&&(C.shared.lanes=0),$s|=V,l.lanes=V,l.memoizedState=ct}}function Of(l,f){if(typeof l!="function")throw Error(i(191,l));l.call(f)}function X_(l,f){var v=l.callbacks;if(v!==null)for(l.callbacks=null,l=0;l<v.length;l++)Of(v[l],f)}var Lf=H(null),Hp=H(0);function Y_(l,f){l=so,le(Hp,l),le(Lf,f),so=l|f.baseLanes}function vv(){le(Hp,so),le(Lf,Lf.current)}function Qd(){so=Hp.current,ne(Lf),ne(Hp)}var Da=H(null),ba=null;function Al(l){var f=l.alternate;le(In,In.current&1),le(Da,l),ba===null&&(f===null||Lf.current!==null||f.memoizedState!==null)&&(ba=l)}function yv(l){le(In,In.current),le(Da,l),ba===null&&(ba=l)}function $_(l){l.tag===22?(le(In,In.current),le(Da,l),ba===null&&(ba=l)):Oa()}function Oa(){le(In,In.current),le(Da,Da.current)}function qi(l){ne(Da),ba===l&&(ba=null),ne(In)}var In=H(0);function ro(l){for(var f=l;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||PA(v)||NA(v)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var bi=0,on=null,ei=null,Tn=null,Oo=!1,Uf=!1,mc=!1,qp=0,eh=0,Ff=null,_v=0;function wi(){throw Error(i(321))}function bv(l,f){if(f===null)return!1;for(var v=0;v<f.length&&v<l.length;v++)if(!va(l[v],f[v]))return!1;return!0}function Wp(l,f,v,_,C,P){return bi=P,on=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,$.H=l===null||l.memoizedState===null?wb:zv,mc=!1,P=v(_,C),mc=!1,Uf&&(P=gc(f,v,_,C)),K_(l),P}function K_(l){$.H=kf;var f=ei!==null&&ei.next!==null;if(bi=0,Tn=ei=on=null,Oo=!1,eh=0,Ff=null,f)throw Error(i(300));l===null||ar||(l=l.dependencies,l!==null&&Xd(l)&&(ar=!0))}function gc(l,f,v,_){on=l;var C=0;do{if(Uf&&(Ff=null),eh=0,Uf=!1,25<=C)throw Error(i(301));if(C+=1,Tn=ei=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}$.H=Lo,P=f(v,_)}while(Uf);return P}function vc(){var l=$.H,f=l.useState()[0];return f=typeof f.then=="function"?th(f):f,l=l.useState()[0],(ei!==null?ei.memoizedState:null)!==l&&(on.flags|=1024),f}function xv(){var l=qp!==0;return qp=0,l}function Sv(l,f,v){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~v}function Ev(l){if(Oo){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Oo=!1}bi=0,Tn=ei=on=null,Uf=!1,eh=qp=0,Ff=null}function hr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?on.memoizedState=Tn=l:Tn=Tn.next=l,Tn}function Wi(){if(ei===null){var l=on.alternate;l=l!==null?l.memoizedState:null}else l=ei.next;var f=Tn===null?on.memoizedState:Tn.next;if(f!==null)Tn=f,ei=l;else{if(l===null)throw on.alternate===null?Error(i(467)):Error(i(310));ei=l,l={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},Tn===null?on.memoizedState=Tn=l:Tn=Tn.next=l}return Tn}function jp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function th(l){var f=eh;return eh+=1,Ff===null&&(Ff=[]),l=zp(Ff,l,f),f=on,(Tn===null?f.memoizedState:Tn.next)===null&&(f=f.alternate,$.H=f===null||f.memoizedState===null?wb:zv),l}function bu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return th(l);if(l.$$typeof===I)return Zt(l)}throw Error(i(438,String(l)))}function Tv(l){var f=null,v=on.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var _=on.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=jp(),on.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(l),_=0;_<l;_++)v[_]=F;return f.index++,v}function Ml(l,f){return typeof f=="function"?f(l):f}function Xp(l){var f=Wi();return Av(f,ei,l)}function Av(l,f,v){var _=l.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=v;var C=l.baseQueue,P=_.pending;if(P!==null){if(C!==null){var V=C.next;C.next=P.next,P.next=V}f.baseQueue=C=P,_.pending=null}if(P=l.baseState,C===null)l.memoizedState=P;else{f=C.next;var te=V=null,ye=null,ze=f,at=!1;do{var ct=ze.lane&-536870913;if(ct!==ze.lane?(fn&ct)===ct:(bi&ct)===ct){var qe=ze.revertLane;if(qe===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),ct===Sl&&(at=!0);else if((bi&qe)===qe){ze=ze.next,qe===Sl&&(at=!0);continue}else ct={lane:0,revertLane:ze.revertLane,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ye===null?(te=ye=ct,V=P):ye=ye.next=ct,on.lanes|=qe,$s|=qe;ct=ze.action,mc&&v(P,ct),P=ze.hasEagerState?ze.eagerState:v(P,ct)}else qe={lane:ct,revertLane:ze.revertLane,gesture:ze.gesture,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},ye===null?(te=ye=qe,V=P):ye=ye.next=qe,on.lanes|=ct,$s|=ct;ze=ze.next}while(ze!==null&&ze!==f);if(ye===null?V=P:ye.next=te,!va(P,l.memoizedState)&&(ar=!0,at&&(v=No,v!==null)))throw v;l.memoizedState=P,l.baseState=V,l.baseQueue=ye,_.lastRenderedState=P}return C===null&&(_.lanes=0),[l.memoizedState,_.dispatch]}function Mv(l){var f=Wi(),v=f.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=l;var _=v.dispatch,C=v.pending,P=f.memoizedState;if(C!==null){v.pending=null;var V=C=C.next;do P=l(P,V.action),V=V.next;while(V!==C);va(P,f.memoizedState)||(ar=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),v.lastRenderedState=P}return[P,_]}function J_(l,f,v){var _=on,C=Wi(),P=Rn;if(P){if(v===void 0)throw Error(i(407));v=v()}else v=f();var V=!va((ei||C).memoizedState,v);if(V&&(C.memoizedState=v,ar=!0),C=C.queue,Ov(eb.bind(null,_,C,l),[l]),C.getSnapshot!==f||V||Tn!==null&&Tn.memoizedState.tag&1){if(_.flags|=2048,xu(9,{destroy:void 0},Q_.bind(null,_,C,v,f),null),tn===null)throw Error(i(349));P||(bi&127)!==0||Z_(_,f,v)}return v}function Z_(l,f,v){l.flags|=16384,l={getSnapshot:f,value:v},f=on.updateQueue,f===null?(f=jp(),on.updateQueue=f,f.stores=[l]):(v=f.stores,v===null?f.stores=[l]:v.push(l))}function Q_(l,f,v,_){f.value=v,f.getSnapshot=_,tb(f)&&nb(l)}function eb(l,f,v){return v(function(){tb(f)&&nb(l)})}function tb(l){var f=l.getSnapshot;l=l.value;try{var v=f();return!va(l,v)}catch{return!0}}function nb(l){var f=ya(l,2);f!==null&&pn(f,l,2)}function wv(l){var f=hr();if(typeof l=="function"){var v=l;if(l=v(),mc){et(!0);try{v()}finally{et(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:l},f}function Cv(l,f,v,_){return l.baseState=v,Av(l,ei,typeof _=="function"?_:Ml)}function mA(l,f,v,_,C){if(Jp(l))throw Error(i(485));if(l=f.action,l!==null){var P={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){P.listeners.push(V)}};$.T!==null?v(!0):P.isTransition=!1,_(P),v=f.pending,v===null?(P.next=f.pending=P,ib(f,P)):(P.next=v.next,f.pending=v.next=P)}}function ib(l,f){var v=f.action,_=f.payload,C=l.state;if(f.isTransition){var P=$.T,V={};$.T=V;try{var te=v(C,_),ye=$.S;ye!==null&&ye(V,te),rb(l,f,te)}catch(ze){Rv(l,f,ze)}finally{P!==null&&V.types!==null&&(P.types=V.types),$.T=P}}else try{P=v(C,_),rb(l,f,P)}catch(ze){Rv(l,f,ze)}}function rb(l,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(_){ab(l,f,_)},function(_){return Rv(l,f,_)}):ab(l,f,v)}function ab(l,f,v){f.status="fulfilled",f.value=v,ob(f),l.state=v,f=l.pending,f!==null&&(v=f.next,v===f?l.pending=null:(v=v.next,f.next=v,ib(l,v)))}function Rv(l,f,v){var _=l.pending;if(l.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=v,ob(f),f=f.next;while(f!==_)}l.action=null}function ob(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function Iv(l,f){return f}function Pv(l,f){if(Rn){var v=tn.formState;if(v!==null){e:{var _=on;if(Rn){if(si){t:{for(var C=si,P=no;C.nodeType!==8;){if(!P){C=null;break t}if(C=Zs(C.nextSibling),C===null){C=null;break t}}P=C.data,C=P==="F!"||P==="F"?C:null}if(C){si=Zs(C.nextSibling),_=C.data==="F!";break e}}Fs(_)}_=!1}_&&(f=v[0])}}return v=hr(),v.memoizedState=v.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iv,lastRenderedState:f},v.queue=_,v=Tb.bind(null,on,_),_.dispatch=v,_=wv(!1),P=Bv.bind(null,on,!1,_.queue),_=hr(),C={state:f,dispatch:null,action:l,pending:null},_.queue=C,v=mA.bind(null,on,C,P,v),C.dispatch=v,_.memoizedState=l,[f,v,!1]}function sb(l){var f=Wi();return Nv(f,ei,l)}function Nv(l,f,v){if(f=Av(l,f,Iv)[0],l=Xp(Ml)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=th(f)}catch(V){throw V===uc?dn:V}else _=f;f=Wi();var C=f.queue,P=C.dispatch;return v!==f.memoizedState&&(on.flags|=2048,xu(9,{destroy:void 0},lb.bind(null,C,v),null)),[_,P,l]}function lb(l,f){l.action=f}function Dv(l){var f=Wi(),v=ei;if(v!==null)return Nv(f,v,l);Wi(),f=f.memoizedState,v=Wi();var _=v.queue.dispatch;return v.memoizedState=l,[f,_,!1]}function xu(l,f,v,_){return l={tag:l,create:v,deps:_,inst:f,next:null},f=on.updateQueue,f===null&&(f=jp(),on.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=l.next=l:(_=v.next,v.next=l,l.next=_,f.lastEffect=l),l}function Yp(){return Wi().memoizedState}function $p(l,f,v,_){var C=hr();on.flags|=l,C.memoizedState=xu(1|f,{destroy:void 0},v,_===void 0?null:_)}function Kp(l,f,v,_){var C=Wi();_=_===void 0?null:_;var P=C.memoizedState.inst;ei!==null&&_!==null&&bv(_,ei.memoizedState.deps)?C.memoizedState=xu(f,P,v,_):(on.flags|=l,C.memoizedState=xu(1|f,P,v,_))}function ub(l,f){$p(8390656,8,l,f)}function Ov(l,f){Kp(2048,8,l,f)}function cb(l){on.flags|=4;var f=on.updateQueue;if(f===null)f=jp(),on.updateQueue=f,f.events=[l];else{var v=f.events;v===null?f.events=[l]:v.push(l)}}function fb(l){var f=Wi().memoizedState;return cb({ref:f,nextImpl:l}),function(){if((Gt&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}function db(l,f){return Kp(4,2,l,f)}function hb(l,f){return Kp(4,4,l,f)}function pb(l,f){if(typeof f=="function"){l=l();var v=f(l);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function mb(l,f,v){v=v!=null?v.concat([l]):null,Kp(4,4,pb.bind(null,f,l),v)}function Lv(){}function gb(l,f){var v=Wi();f=f===void 0?null:f;var _=v.memoizedState;return f!==null&&bv(f,_[1])?_[0]:(v.memoizedState=[l,f],l)}function vb(l,f){var v=Wi();f=f===void 0?null:f;var _=v.memoizedState;if(f!==null&&bv(f,_[1]))return _[0];if(_=l(),mc){et(!0);try{l()}finally{et(!1)}}return v.memoizedState=[_,f],_}function Uv(l,f,v){return v===void 0||(bi&1073741824)!==0&&(fn&261930)===0?l.memoizedState=f:(l.memoizedState=v,l=Sn(),on.lanes|=l,$s|=l,v)}function yb(l,f,v,_){return va(v,f)?v:Lf.current!==null?(l=Uv(l,v,_),va(l,f)||(ar=!0),l):(bi&42)===0||(bi&1073741824)!==0&&(fn&261930)===0?(ar=!0,l.memoizedState=v):(l=Sn(),on.lanes|=l,$s|=l,f)}function _b(l,f,v,_,C){var P=ie.p;ie.p=P!==0&&8>P?P:8;var V=$.T,te={};$.T=te,Bv(l,!1,f,v);try{var ye=C(),ze=$.S;if(ze!==null&&ze(te,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var at=hv(ye,_);nh(l,f,at,uo(l))}else nh(l,f,_,uo(l))}catch(ct){nh(l,f,{then:function(){},status:"rejected",reason:ct},uo())}finally{ie.p=P,V!==null&&te.types!==null&&(V.types=te.types),$.T=V}}function gA(){}function Fv(l,f,v,_){if(l.tag!==5)throw Error(i(476));var C=bb(l).queue;_b(l,C,f,me,v===null?gA:function(){return xb(l),v(_)})}function bb(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:me},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:v},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function xb(l){var f=bb(l);f.next===null&&(f=l.alternate.memoizedState),nh(l,f.next.queue,{},uo())}function kv(){return Zt(o0)}function Sb(){return Wi().memoizedState}function Eb(){return Wi().memoizedState}function vA(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var v=uo();l=Tl(v);var _=yu(f,l,v);_!==null&&(pn(_,f,v),_u(_,f,v)),f={cache:cv()},l.payload=f;return}f=f.return}}function yA(l,f,v){var _=uo();v={lane:_,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Jp(l)?Ab(f,v):(v=Cp(l,f,v,_),v!==null&&(pn(v,l,_),Mb(v,f,_)))}function Tb(l,f,v){var _=uo();nh(l,f,v,_)}function nh(l,f,v,_){var C={lane:_,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(Jp(l))Ab(f,C);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var V=f.lastRenderedState,te=P(V,v);if(C.hasEagerState=!0,C.eagerState=te,va(te,V))return Mr(l,f,C,0),tn===null&&Wd(),!1}catch{}finally{}if(v=Cp(l,f,C,_),v!==null)return pn(v,l,_),Mb(v,f,_),!0}return!1}function Bv(l,f,v,_){if(_={lane:2,revertLane:$e(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Jp(l)){if(f)throw Error(i(479))}else f=Cp(l,v,_,2),f!==null&&pn(f,l,2)}function Jp(l){var f=l.alternate;return l===on||f!==null&&f===on}function Ab(l,f){Uf=Oo=!0;var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}function Mb(l,f,v){if((v&4194048)!==0){var _=f.lanes;_&=l.pendingLanes,v|=_,f.lanes=v,nr(l,v)}}var kf={readContext:Zt,use:bu,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useLayoutEffect:wi,useInsertionEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useSyncExternalStore:wi,useId:wi,useHostTransitionStatus:wi,useFormState:wi,useActionState:wi,useOptimistic:wi,useMemoCache:wi,useCacheRefresh:wi};kf.useEffectEvent=wi;var wb={readContext:Zt,use:bu,useCallback:function(l,f){return hr().memoizedState=[l,f===void 0?null:f],l},useContext:Zt,useEffect:ub,useImperativeHandle:function(l,f,v){v=v!=null?v.concat([l]):null,$p(4194308,4,pb.bind(null,f,l),v)},useLayoutEffect:function(l,f){return $p(4194308,4,l,f)},useInsertionEffect:function(l,f){$p(4,2,l,f)},useMemo:function(l,f){var v=hr();f=f===void 0?null:f;var _=l();if(mc){et(!0);try{l()}finally{et(!1)}}return v.memoizedState=[_,f],_},useReducer:function(l,f,v){var _=hr();if(v!==void 0){var C=v(f);if(mc){et(!0);try{v(f)}finally{et(!1)}}}else C=f;return _.memoizedState=_.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},_.queue=l,l=l.dispatch=yA.bind(null,on,l),[_.memoizedState,l]},useRef:function(l){var f=hr();return l={current:l},f.memoizedState=l},useState:function(l){l=wv(l);var f=l.queue,v=Tb.bind(null,on,f);return f.dispatch=v,[l.memoizedState,v]},useDebugValue:Lv,useDeferredValue:function(l,f){var v=hr();return Uv(v,l,f)},useTransition:function(){var l=wv(!1);return l=_b.bind(null,on,l.queue,!0,!1),hr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,v){var _=on,C=hr();if(Rn){if(v===void 0)throw Error(i(407));v=v()}else{if(v=f(),tn===null)throw Error(i(349));(fn&127)!==0||Z_(_,f,v)}C.memoizedState=v;var P={value:v,getSnapshot:f};return C.queue=P,ub(eb.bind(null,_,P,l),[l]),_.flags|=2048,xu(9,{destroy:void 0},Q_.bind(null,_,P,v,f),null),v},useId:function(){var l=hr(),f=tn.identifierPrefix;if(Rn){var v=as,_=Mi;v=(_&~(1<<32-ue(_)-1)).toString(32)+v,f="_"+f+"R_"+v,v=qp++,0<v&&(f+="H"+v.toString(32)),f+="_"}else v=_v++,f="_"+f+"r_"+v.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:kv,useFormState:Pv,useActionState:Pv,useOptimistic:function(l){var f=hr();f.memoizedState=f.baseState=l;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Bv.bind(null,on,!0,v),v.dispatch=f,[l,f]},useMemoCache:Tv,useCacheRefresh:function(){return hr().memoizedState=vA.bind(null,on)},useEffectEvent:function(l){var f=hr(),v={impl:l};return f.memoizedState=v,function(){if((Gt&2)!==0)throw Error(i(440));return v.impl.apply(void 0,arguments)}}},zv={readContext:Zt,use:bu,useCallback:gb,useContext:Zt,useEffect:Ov,useImperativeHandle:mb,useInsertionEffect:db,useLayoutEffect:hb,useMemo:vb,useReducer:Xp,useRef:Yp,useState:function(){return Xp(Ml)},useDebugValue:Lv,useDeferredValue:function(l,f){var v=Wi();return yb(v,ei.memoizedState,l,f)},useTransition:function(){var l=Xp(Ml)[0],f=Wi().memoizedState;return[typeof l=="boolean"?l:th(l),f]},useSyncExternalStore:J_,useId:Sb,useHostTransitionStatus:kv,useFormState:sb,useActionState:sb,useOptimistic:function(l,f){var v=Wi();return Cv(v,ei,l,f)},useMemoCache:Tv,useCacheRefresh:Eb};zv.useEffectEvent=fb;var Lo={readContext:Zt,use:bu,useCallback:gb,useContext:Zt,useEffect:Ov,useImperativeHandle:mb,useInsertionEffect:db,useLayoutEffect:hb,useMemo:vb,useReducer:Mv,useRef:Yp,useState:function(){return Mv(Ml)},useDebugValue:Lv,useDeferredValue:function(l,f){var v=Wi();return ei===null?Uv(v,l,f):yb(v,ei.memoizedState,l,f)},useTransition:function(){var l=Mv(Ml)[0],f=Wi().memoizedState;return[typeof l=="boolean"?l:th(l),f]},useSyncExternalStore:J_,useId:Sb,useHostTransitionStatus:kv,useFormState:Dv,useActionState:Dv,useOptimistic:function(l,f){var v=Wi();return ei!==null?Cv(v,ei,l,f):(v.baseState=l,[l,v.queue.dispatch])},useMemoCache:Tv,useCacheRefresh:Eb};Lo.useEffectEvent=fb;function Zp(l,f,v,_){f=l.memoizedState,v=v(_,f),v=v==null?f:p({},f,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var ih={enqueueSetState:function(l,f,v){l=l._reactInternals;var _=uo(),C=Tl(_);C.payload=f,v!=null&&(C.callback=v),f=yu(l,C,_),f!==null&&(pn(f,l,_),_u(f,l,_))},enqueueReplaceState:function(l,f,v){l=l._reactInternals;var _=uo(),C=Tl(_);C.tag=1,C.payload=f,v!=null&&(C.callback=v),f=yu(l,C,_),f!==null&&(pn(f,l,_),_u(f,l,_))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var v=uo(),_=Tl(v);_.tag=2,f!=null&&(_.callback=f),f=yu(l,_,v),f!==null&&(pn(f,l,v),_u(f,l,v))}};function Gv(l,f,v,_,C,P,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,P,V):f.prototype&&f.prototype.isPureReactComponent?!bf(v,_)||!bf(C,P):!0}function Vv(l,f,v,_){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,_),f.state!==l&&ih.enqueueReplaceState(f,f.state,null)}function Su(l,f){var v=f;if("ref"in f){v={};for(var _ in f)_!=="ref"&&(v[_]=f[_])}if(l=l.defaultProps){v===f&&(v=p({},v));for(var C in l)v[C]===void 0&&(v[C]=l[C])}return v}function Cb(l){qd(l)}function Hv(l){console.error(l)}function qv(l){qd(l)}function Qp(l,f){try{var v=l.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function Rb(l,f,v){try{var _=l.onCaughtError;_(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Wv(l,f,v){return v=Tl(v),v.tag=3,v.payload={element:null},v.callback=function(){Qp(l,f)},v}function jv(l){return l=Tl(l),l.tag=3,l}function Ib(l,f,v,_){var C=v.type.getDerivedStateFromError;if(typeof C=="function"){var P=_.value;l.payload=function(){return C(P)},l.callback=function(){Rb(f,v,_)}}var V=v.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Rb(f,v,_),typeof C!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var te=_.stack;this.componentDidCatch(_.value,{componentStack:te!==null?te:""})})}function pr(l,f,v,_,C){if(v.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=v.alternate,f!==null&&Gs(f,v,C,!0),v=Da.current,v!==null){switch(v.tag){case 31:case 13:return ba===null?Wf():v.alternate===null&&Ci===0&&(Ci=3),v.flags&=-257,v.flags|=65536,v.lanes=C,_===Bp?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([_]):f.add(_),mh(l,_,C)),!1;case 22:return v.flags|=65536,_===Bp?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([_]):v.add(_)),mh(l,_,C)),!1}throw Error(i(435,v.tag))}return mh(l,_,C),Wf(),!1}if(Rn)return f=Da.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,_!==Cf&&(l=Error(i(422),{cause:_}),ks(to(l,v)))):(_!==Cf&&(f=Error(i(423),{cause:_}),ks(to(f,v))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,_=to(_,v),C=Wv(l.stateNode,_,C),Wt(l,C),Ci!==4&&(Ci=2)),!1;var P=Error(i(520),{cause:_});if(P=to(P,v),Ac===null?Ac=[P]:Ac.push(P),Ci!==4&&(Ci=2),f===null)return!0;_=to(_,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,l=C&-C,v.lanes|=l,l=Wv(v.stateNode,_,l),Wt(v,l),!1;case 1:if(f=v.type,P=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Yi===null||!Yi.has(P))))return v.flags|=65536,C&=-C,v.lanes|=C,C=jv(C),Ib(C,l,v,_),Wt(v,C),!1}v=v.return}while(v!==null);return!1}var em=Error(i(461)),ar=!1;function wr(l,f,v,_){f.child=l===null?Vp(f,null,v,_):El(f,l.child,v,_)}function Xv(l,f,v,_,C){v=v.render;var P=f.ref;if("ref"in _){var V={};for(var te in _)te!=="ref"&&(V[te]=_[te])}else V=_;return gu(f),_=Wp(l,f,v,V,P,C),te=xv(),l!==null&&!ar?(Sv(l,f,C),ji(l,f,C)):(Rn&&te&&Us(f),f.flags|=1,wr(l,f,_,C),f.child)}function yc(l,f,v,_,C){if(l===null){var P=v.type;return typeof P=="function"&&!Rp(P)&&P.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=P,tm(l,f,P,_,C)):(l=Os(v.type,null,_,f,f.mode,C),l.ref=f.ref,l.return=f,f.child=l)}if(P=l.child,!sm(l,C)){var V=P.memoizedProps;if(v=v.compare,v=v!==null?v:bf,v(V,_)&&l.ref===f.ref)return ji(l,f,C)}return f.flags|=1,l=Ia(P,_),l.ref=f.ref,l.return=f,f.child=l}function tm(l,f,v,_,C){if(l!==null){var P=l.memoizedProps;if(bf(P,_)&&l.ref===f.ref)if(ar=!1,f.pendingProps=_=P,sm(l,C))(l.flags&131072)!==0&&(ar=!0);else return f.lanes=l.lanes,ji(l,f,C)}return Bf(l,f,v,_,C)}function _c(l,f,v,_){var C=_.children,P=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((f.flags&128)!==0){if(P=P!==null?P.baseLanes|v:v,l!==null){for(_=f.child=l.child,C=0;_!==null;)C=C|_.lanes|_.childLanes,_=_.sibling;_=C&~P}else _=0,f.child=null;return La(l,f,P,v,_)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Yd(f,P!==null?P.cachePool:null),P!==null?Y_(f,P):vv(),$_(f);else return _=f.lanes=536870912,La(l,f,P!==null?P.baseLanes|v:v,v,_)}else P!==null?(Yd(f,P.cachePool),Y_(f,P),Oa(),f.memoizedState=null):(l!==null&&Yd(f,null),vv(),Oa());return wr(l,f,C,v),f.child}function Hs(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function La(l,f,v,_,C){var P=kp();return P=P===null?null:{parent:rr._currentValue,pool:P},f.memoizedState={baseLanes:v,cachePool:P},l!==null&&Yd(f,null),vv(),$_(f),l!==null&&Gs(l,f,_,!0),f.childLanes=C,null}function nm(l,f){return f=om({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function Pb(l,f,v){return El(f,l.child,null,v),l=nm(f,f.pendingProps),l.flags|=2,qi(f),f.memoizedState=null,l}function im(l,f,v){var _=f.pendingProps,C=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(Rn){if(_.mode==="hidden")return l=nm(f,_),f.lanes=536870912,Hs(null,l);if(yv(f),(l=si)?(l=ND(l,no),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:_l!==null?{id:Mi,overflow:as}:null,retryLane:536870912,hydrationErrors:null},v=Af(l),v.return=f,f.child=v,Li=f,si=null)):l=null,l===null)throw Fs(f);return f.lanes=536870912,null}return nm(f,_)}var P=l.memoizedState;if(P!==null){var V=P.dehydrated;if(yv(f),C)if(f.flags&256)f.flags&=-257,f=Pb(l,f,v);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(i(558));else if(ar||Gs(l,f,v,!1),C=(v&l.childLanes)!==0,ar||C){if(_=tn,_!==null&&(V=Jr(_,v),V!==0&&V!==P.retryLane))throw P.retryLane=V,ya(l,V),pn(_,l,V),em;Wf(),f=Pb(l,f,v)}else l=P.treeContext,si=Zs(V.nextSibling),Li=f,Rn=!0,bl=null,no=!1,l!==null&&Dp(f,l),f=nm(f,_),f.flags|=4096;return f}return l=Ia(l.child,{mode:_.mode,children:_.children}),l.ref=f.ref,f.child=l,l.return=f,l}function bc(l,f){var v=f.ref;if(v===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(i(284));(l===null||l.ref!==v)&&(f.flags|=4194816)}}function Bf(l,f,v,_,C){return gu(f),v=Wp(l,f,v,_,void 0,C),_=xv(),l!==null&&!ar?(Sv(l,f,C),ji(l,f,C)):(Rn&&_&&Us(f),f.flags|=1,wr(l,f,v,C),f.child)}function rh(l,f,v,_,C,P){return gu(f),f.updateQueue=null,v=gc(f,_,v,C),K_(l),_=xv(),l!==null&&!ar?(Sv(l,f,P),ji(l,f,P)):(Rn&&_&&Us(f),f.flags|=1,wr(l,f,v,P),f.child)}function rm(l,f,v,_,C){if(gu(f),f.stateNode===null){var P=cu,V=v.contextType;typeof V=="object"&&V!==null&&(P=Zt(V)),P=new v(_,P),f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=ih,f.stateNode=P,P._reactInternals=f,P=f.stateNode,P.props=_,P.state=f.memoizedState,P.refs={},Jd(f),V=v.contextType,P.context=typeof V=="object"&&V!==null?Zt(V):cu,P.state=f.memoizedState,V=v.getDerivedStateFromProps,typeof V=="function"&&(Zp(f,v,V,_),P.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(V=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),V!==P.state&&ih.enqueueReplaceState(P,P.state,null),Df(f,_,P,C),Zd(),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(l===null){P=f.stateNode;var te=f.memoizedProps,ye=Su(v,te);P.props=ye;var ze=P.context,at=v.contextType;V=cu,typeof at=="object"&&at!==null&&(V=Zt(at));var ct=v.getDerivedStateFromProps;at=typeof ct=="function"||typeof P.getSnapshotBeforeUpdate=="function",te=f.pendingProps!==te,at||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(te||ze!==V)&&Vv(f,P,_,V),_a=!1;var qe=f.memoizedState;P.state=qe,Df(f,_,P,C),Zd(),ze=f.memoizedState,te||qe!==ze||_a?(typeof ct=="function"&&(Zp(f,v,ct,_),ze=f.memoizedState),(ye=_a||Gv(f,v,ye,_,qe,ze,V))?(at||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(f.flags|=4194308)):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=ze),P.props=_,P.state=ze,P.context=V,_=ye):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{P=f.stateNode,mv(l,f),V=f.memoizedProps,at=Su(v,V),P.props=at,ct=f.pendingProps,qe=P.context,ze=v.contextType,ye=cu,typeof ze=="object"&&ze!==null&&(ye=Zt(ze)),te=v.getDerivedStateFromProps,(ze=typeof te=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==ct||qe!==ye)&&Vv(f,P,_,ye),_a=!1,qe=f.memoizedState,P.state=qe,Df(f,_,P,C),Zd();var Qe=f.memoizedState;V!==ct||qe!==Qe||_a||l!==null&&l.dependencies!==null&&Xd(l.dependencies)?(typeof te=="function"&&(Zp(f,v,te,_),Qe=f.memoizedState),(at=_a||Gv(f,v,at,_,qe,Qe,ye)||l!==null&&l.dependencies!==null&&Xd(l.dependencies))?(ze||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(_,Qe,ye),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(_,Qe,ye)),typeof P.componentDidUpdate=="function"&&(f.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof P.componentDidUpdate!="function"||V===l.memoizedProps&&qe===l.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&qe===l.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=Qe),P.props=_,P.state=Qe,P.context=ye,_=at):(typeof P.componentDidUpdate!="function"||V===l.memoizedProps&&qe===l.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&qe===l.memoizedState||(f.flags|=1024),_=!1)}return P=_,bc(l,f),_=(f.flags&128)!==0,P||_?(P=f.stateNode,v=_&&typeof v.getDerivedStateFromError!="function"?null:P.render(),f.flags|=1,l!==null&&_?(f.child=El(f,l.child,null,C),f.child=El(f,null,v,C)):wr(l,f,v,C),f.memoizedState=P.state,l=f.child):l=ji(l,f,C),l}function Nb(l,f,v,_){return pu(),f.flags|=256,wr(l,f,v,_),f.child}var Yv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ra(l){return{baseLanes:l,cachePool:pv()}}function am(l,f,v){return l=l!==null?l.childLanes&~v:0,f&&(l|=Ea),l}function Db(l,f,v){var _=f.pendingProps,C=!1,P=(f.flags&128)!==0,V;if((V=P)||(V=l!==null&&l.memoizedState===null?!1:(In.current&2)!==0),V&&(C=!0,f.flags&=-129),V=(f.flags&32)!==0,f.flags&=-33,l===null){if(Rn){if(C?Al(f):Oa(),(l=si)?(l=ND(l,no),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:_l!==null?{id:Mi,overflow:as}:null,retryLane:536870912,hydrationErrors:null},v=Af(l),v.return=f,f.child=v,Li=f,si=null)):l=null,l===null)throw Fs(f);return NA(l)?f.lanes=32:f.lanes=536870912,null}var te=_.children;return _=_.fallback,C?(Oa(),C=f.mode,te=om({mode:"hidden",children:te},C),_=fu(_,C,v,null),te.return=f,_.return=f,te.sibling=_,f.child=te,_=f.child,_.memoizedState=ra(v),_.childLanes=am(l,V,v),f.memoizedState=Yv,Hs(null,_)):(Al(f),ah(f,te))}var ye=l.memoizedState;if(ye!==null&&(te=ye.dehydrated,te!==null)){if(P)f.flags&256?(Al(f),f.flags&=-257,f=$v(l,f,v)):f.memoizedState!==null?(Oa(),f.child=l.child,f.flags|=128,f=null):(Oa(),te=_.fallback,C=f.mode,_=om({mode:"visible",children:_.children},C),te=fu(te,C,v,null),te.flags|=2,_.return=f,te.return=f,_.sibling=te,f.child=_,El(f,l.child,null,v),_=f.child,_.memoizedState=ra(v),_.childLanes=am(l,V,v),f.memoizedState=Yv,f=Hs(null,_));else if(Al(f),NA(te)){if(V=te.nextSibling&&te.nextSibling.dataset,V)var ze=V.dgst;V=ze,_=Error(i(419)),_.stack="",_.digest=V,ks({value:_,source:null,stack:null}),f=$v(l,f,v)}else if(ar||Gs(l,f,v,!1),V=(v&l.childLanes)!==0,ar||V){if(V=tn,V!==null&&(_=Jr(V,v),_!==0&&_!==ye.retryLane))throw ye.retryLane=_,ya(l,_),pn(V,l,_),em;PA(te)||Wf(),f=$v(l,f,v)}else PA(te)?(f.flags|=192,f.child=l.child,f=null):(l=ye.treeContext,si=Zs(te.nextSibling),Li=f,Rn=!0,bl=null,no=!1,l!==null&&Dp(f,l),f=ah(f,_.children),f.flags|=4096);return f}return C?(Oa(),te=_.fallback,C=f.mode,ye=l.child,ze=ye.sibling,_=Ia(ye,{mode:"hidden",children:_.children}),_.subtreeFlags=ye.subtreeFlags&65011712,ze!==null?te=Ia(ze,te):(te=fu(te,C,v,null),te.flags|=2),te.return=f,_.return=f,_.sibling=te,f.child=_,Hs(null,_),_=f.child,te=l.child.memoizedState,te===null?te=ra(v):(C=te.cachePool,C!==null?(ye=rr._currentValue,C=C.parent!==ye?{parent:ye,pool:ye}:C):C=pv(),te={baseLanes:te.baseLanes|v,cachePool:C}),_.memoizedState=te,_.childLanes=am(l,V,v),f.memoizedState=Yv,Hs(l.child,_)):(Al(f),v=l.child,l=v.sibling,v=Ia(v,{mode:"visible",children:_.children}),v.return=f,v.sibling=null,l!==null&&(V=f.deletions,V===null?(f.deletions=[l],f.flags|=16):V.push(l)),f.child=v,f.memoizedState=null,v)}function ah(l,f){return f=om({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function om(l,f){return l=Ai(22,l,null,f),l.lanes=0,l}function $v(l,f,v){return El(f,l.child,null,v),l=ah(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function Ob(l,f,v){l.lanes|=f;var _=l.alternate;_!==null&&(_.lanes|=f),Lp(l.return,f,v)}function xc(l,f,v,_,C,P){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:v,tailMode:C,treeForkCount:P}:(V.isBackwards=f,V.rendering=null,V.renderingStartTime=0,V.last=_,V.tail=v,V.tailMode=C,V.treeForkCount=P)}function Ua(l,f,v){var _=f.pendingProps,C=_.revealOrder,P=_.tail;_=_.children;var V=In.current,te=(V&2)!==0;if(te?(V=V&1|2,f.flags|=128):V&=1,le(In,V),wr(l,f,_,v),_=Rn?wf:0,!te&&l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Ob(l,v,f);else if(l.tag===19)Ob(l,v,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(v=f.child,C=null;v!==null;)l=v.alternate,l!==null&&ro(l)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),xc(f,!1,C,v,P,_);break;case"backwards":case"unstable_legacy-backwards":for(v=null,C=f.child,f.child=null;C!==null;){if(l=C.alternate,l!==null&&ro(l)===null){f.child=C;break}l=C.sibling,C.sibling=v,v=C,C=l}xc(f,!0,v,null,P,_);break;case"together":xc(f,!1,null,null,void 0,_);break;default:f.memoizedState=null}return f.child}function ji(l,f,v){if(l!==null&&(f.dependencies=l.dependencies),$s|=f.lanes,(v&f.childLanes)===0)if(l!==null){if(Gs(l,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(i(153));if(f.child!==null){for(l=f.child,v=Ia(l,l.pendingProps),f.child=v,v.return=f;l.sibling!==null;)l=l.sibling,v=v.sibling=Ia(l,l.pendingProps),v.return=f;v.sibling=null}return f.child}function sm(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Xd(l)))}function _A(l,f,v){switch(f.tag){case 3:Ee(f,f.stateNode.containerInfo),xl(f,rr,l.memoizedState.cache),pu();break;case 27:case 5:Ce(f);break;case 4:Ee(f,f.stateNode.containerInfo);break;case 10:xl(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,yv(f),null;break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Al(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Db(l,f,v):(Al(f),l=ji(l,f,v),l!==null?l.sibling:null);Al(f);break;case 19:var C=(l.flags&128)!==0;if(_=(v&f.childLanes)!==0,_||(Gs(l,f,v,!1),_=(v&f.childLanes)!==0),C){if(_)return Ua(l,f,v);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),le(In,In.current),_)break;return null;case 22:return f.lanes=0,_c(l,f,v,f.pendingProps);case 24:xl(f,rr,l.memoizedState.cache)}return ji(l,f,v)}function lm(l,f,v){if(l!==null)if(l.memoizedProps!==f.pendingProps)ar=!0;else{if(!sm(l,v)&&(f.flags&128)===0)return ar=!1,_A(l,f,v);ar=(l.flags&131072)!==0}else ar=!1,Rn&&(f.flags&1048576)!==0&&G_(f,wf,f.index);switch(f.lanes=0,f.tag){case 16:e:{var _=f.pendingProps;if(l=cc(f.elementType),f.type=l,typeof l=="function")Rp(l)?(_=Su(l,_),f.tag=1,f=rm(null,f,l,_,v)):(f.tag=0,f=Bf(null,f,l,_,v));else{if(l!=null){var C=l.$$typeof;if(C===N){f.tag=11,f=Xv(null,f,l,_,v);break e}else if(C===k){f.tag=14,f=yc(null,f,l,_,v);break e}}throw f=Q(l)||l,Error(i(306,f,""))}}return f;case 0:return Bf(l,f,f.type,f.pendingProps,v);case 1:return _=f.type,C=Su(_,f.pendingProps),rm(l,f,_,C,v);case 3:e:{if(Ee(f,f.stateNode.containerInfo),l===null)throw Error(i(387));_=f.pendingProps;var P=f.memoizedState;C=P.element,mv(l,f),Df(f,_,null,v);var V=f.memoizedState;if(_=V.cache,xl(f,rr,_),_!==P.cache&&Up(f,[rr],v,!0),Zd(),_=V.element,P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:V.cache},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){f=Nb(l,f,_,v);break e}else if(_!==C){C=to(Error(i(424)),f),ks(C),f=Nb(l,f,_,v);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(si=Zs(l.firstChild),Li=f,Rn=!0,bl=null,no=!0,v=Vp(f,null,_,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(pu(),_===C){f=ji(l,f,v);break e}wr(l,f,_,v)}f=f.child}return f;case 26:return bc(l,f),l===null?(v=kD(f.type,null,f.pendingProps,null))?f.memoizedState=v:Rn||(v=f.type,l=f.pendingProps,_=kb(re.current).createElement(v),_[zn]=f,_[Di]=l,Aa(_,v,l),J(_),f.stateNode=_):f.memoizedState=kD(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ce(f),l===null&&Rn&&(_=f.stateNode=LD(f.type,f.pendingProps,re.current),Li=f,no=!0,C=si,$f(f.type)?(DA=C,si=Zs(_.firstChild)):si=C),wr(l,f,f.pendingProps.children,v),bc(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Rn&&((C=_=si)&&(_=hW(_,f.type,f.pendingProps,no),_!==null?(f.stateNode=_,Li=f,si=Zs(_.firstChild),no=!1,C=!0):C=!1),C||Fs(f)),Ce(f),C=f.type,P=f.pendingProps,V=l!==null?l.memoizedProps:null,_=P.children,CA(C,P)?_=null:V!==null&&CA(C,V)&&(f.flags|=32),f.memoizedState!==null&&(C=Wp(l,f,vc,null,null,v),o0._currentValue=C),bc(l,f),wr(l,f,_,v),f.child;case 6:return l===null&&Rn&&((l=v=si)&&(v=pW(v,f.pendingProps,no),v!==null?(f.stateNode=v,Li=f,si=null,l=!0):l=!1),l||Fs(f)),null;case 13:return Db(l,f,v);case 4:return Ee(f,f.stateNode.containerInfo),_=f.pendingProps,l===null?f.child=El(f,null,_,v):wr(l,f,_,v),f.child;case 11:return Xv(l,f,f.type,f.pendingProps,v);case 7:return wr(l,f,f.pendingProps,v),f.child;case 8:return wr(l,f,f.pendingProps.children,v),f.child;case 12:return wr(l,f,f.pendingProps.children,v),f.child;case 10:return _=f.pendingProps,xl(f,f.type,_.value),wr(l,f,_.children,v),f.child;case 9:return C=f.type._context,_=f.pendingProps.children,gu(f),C=Zt(C),_=_(C),f.flags|=1,wr(l,f,_,v),f.child;case 14:return yc(l,f,f.type,f.pendingProps,v);case 15:return tm(l,f,f.type,f.pendingProps,v);case 19:return Ua(l,f,v);case 31:return im(l,f,v);case 22:return _c(l,f,v,f.pendingProps);case 24:return gu(f),_=Zt(rr),l===null?(C=kp(),C===null&&(C=tn,P=cv(),C.pooledCache=P,P.refCount++,P!==null&&(C.pooledCacheLanes|=v),C=P),f.memoizedState={parent:_,cache:C},Jd(f),xl(f,rr,C)):((l.lanes&v)!==0&&(mv(l,f),Df(f,null,null,v),Zd()),C=l.memoizedState,P=f.memoizedState,C.parent!==_?(C={parent:_,cache:_},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),xl(f,rr,_)):(_=P.cache,xl(f,rr,_),_!==C.cache&&Up(f,[rr],v,!0))),wr(l,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function qs(l){l.flags|=4}function oh(l,f,v,_,C){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(Ii())l.flags|=8192;else throw Vs=Bp,$d}else l.flags&=-16777217}function Kv(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!HD(f))if(Ii())l.flags|=8192;else throw Vs=Bp,$d}function wl(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?St():536870912,l.lanes|=f,hi|=f)}function Ws(l,f){if(!Rn)switch(l.tailMode){case"hidden":f=l.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var _=null;v!==null;)v.alternate!==null&&(_=v),v=v.sibling;_===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function ti(l){var f=l.alternate!==null&&l.alternate.child===l.child,v=0,_=0;if(f)for(var C=l.child;C!==null;)v|=C.lanes|C.childLanes,_|=C.subtreeFlags&65011712,_|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)v|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=_,l.childLanes=v,f}function sh(l,f,v){var _=f.pendingProps;switch(Np(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(f),null;case 1:return ti(f),null;case 3:return v=f.stateNode,_=null,l!==null&&(_=l.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),zs(rr),ce(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(Rf(f)?qs(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Op())),ti(f),null;case 26:var C=f.type,P=f.memoizedState;return l===null?(qs(f),P!==null?(ti(f),Kv(f,P)):(ti(f),oh(f,C,null,_,v))):P?P!==l.memoizedState?(qs(f),ti(f),Kv(f,P)):(ti(f),f.flags&=-16777217):(l=l.memoizedProps,l!==_&&qs(f),ti(f),oh(f,C,l,_,v)),null;case 27:if(Ue(f),v=re.current,C=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==_&&qs(f);else{if(!_){if(f.stateNode===null)throw Error(i(166));return ti(f),null}l=ge.current,Rf(f)?V_(f):(l=LD(C,_,v),f.stateNode=l,qs(f))}return ti(f),null;case 5:if(Ue(f),C=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==_&&qs(f);else{if(!_){if(f.stateNode===null)throw Error(i(166));return ti(f),null}if(P=ge.current,Rf(f))V_(f);else{var V=kb(re.current);switch(P){case 1:P=V.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:P=V.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":P=V.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":P=V.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":P=V.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof _.is=="string"?V.createElement("select",{is:_.is}):V.createElement("select"),_.multiple?P.multiple=!0:_.size&&(P.size=_.size);break;default:P=typeof _.is=="string"?V.createElement(C,{is:_.is}):V.createElement(C)}}P[zn]=f,P[Di]=_;e:for(V=f.child;V!==null;){if(V.tag===5||V.tag===6)P.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===f)break e;for(;V.sibling===null;){if(V.return===null||V.return===f)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}f.stateNode=P;e:switch(Aa(P,C,_),C){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&qs(f)}}return ti(f),oh(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,v),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==_&&qs(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(i(166));if(l=re.current,Rf(f)){if(l=f.stateNode,v=f.memoizedProps,_=null,C=Li,C!==null)switch(C.tag){case 27:case 5:_=C.memoizedProps}l[zn]=f,l=!!(l.nodeValue===v||_!==null&&_.suppressHydrationWarning===!0||TD(l.nodeValue,v)),l||Fs(f,!0)}else l=kb(l).createTextNode(_),l[zn]=f,f.stateNode=l}return ti(f),null;case 31:if(v=f.memoizedState,l===null||l.memoizedState!==null){if(_=Rf(f),v!==null){if(l===null){if(!_)throw Error(i(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));l[zn]=f}else pu(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ti(f),l=!1}else v=Op(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),l=!0;if(!l)return f.flags&256?(qi(f),f):(qi(f),null);if((f.flags&128)!==0)throw Error(i(558))}return ti(f),null;case 13:if(_=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Rf(f),_!==null&&_.dehydrated!==null){if(l===null){if(!C)throw Error(i(318));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[zn]=f}else pu(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ti(f),C=!1}else C=Op(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(qi(f),f):(qi(f),null)}return qi(f),(f.flags&128)!==0?(f.lanes=v,f):(v=_!==null,l=l!==null&&l.memoizedState!==null,v&&(_=f.child,C=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(C=_.alternate.memoizedState.cachePool.pool),P=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(P=_.memoizedState.cachePool.pool),P!==C&&(_.flags|=2048)),v!==l&&v&&(f.child.flags|=8192),wl(f,f.updateQueue),ti(f),null);case 4:return ce(),l===null&&EA(f.stateNode.containerInfo),ti(f),null;case 10:return zs(f.type),ti(f),null;case 19:if(ne(In),_=f.memoizedState,_===null)return ti(f),null;if(C=(f.flags&128)!==0,P=_.rendering,P===null)if(C)Ws(_,!1);else{if(Ci!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(P=ro(l),P!==null){for(f.flags|=128,Ws(_,!1),l=P.updateQueue,f.updateQueue=l,wl(f,l),f.subtreeFlags=0,l=v,v=f.child;v!==null;)Tf(v,l),v=v.sibling;return le(In,In.current&1|2),Rn&&Ls(f,_.treeForkCount),f.child}l=l.sibling}_.tail!==null&&q()>Xi&&(f.flags|=128,C=!0,Ws(_,!1),f.lanes=4194304)}else{if(!C)if(l=ro(P),l!==null){if(f.flags|=128,C=!0,l=l.updateQueue,f.updateQueue=l,wl(f,l),Ws(_,!0),_.tail===null&&_.tailMode==="hidden"&&!P.alternate&&!Rn)return ti(f),null}else 2*q()-_.renderingStartTime>Xi&&v!==536870912&&(f.flags|=128,C=!0,Ws(_,!1),f.lanes=4194304);_.isBackwards?(P.sibling=f.child,f.child=P):(l=_.last,l!==null?l.sibling=P:f.child=P,_.last=P)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=q(),l.sibling=null,v=In.current,le(In,C?v&1|2:v&1),Rn&&Ls(f,_.treeForkCount),l):(ti(f),null);case 22:case 23:return qi(f),Qd(),_=f.memoizedState!==null,l!==null?l.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(v&536870912)!==0&&(f.flags&128)===0&&(ti(f),f.subtreeFlags&6&&(f.flags|=8192)):ti(f),v=f.updateQueue,v!==null&&wl(f,v.retryQueue),v=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048),l!==null&&ne(vu),null;case 24:return v=null,l!==null&&(v=l.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),zs(rr),ti(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function Uo(l,f){switch(Np(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return zs(rr),ce(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Ue(f),null;case 31:if(f.memoizedState!==null){if(qi(f),f.alternate===null)throw Error(i(340));pu()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if(qi(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(i(340));pu()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return ne(In),null;case 4:return ce(),null;case 10:return zs(f.type),null;case 22:case 23:return qi(f),Qd(),l!==null&&ne(vu),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return zs(rr),null;case 25:return null;default:return null}}function ao(l,f){switch(Np(f),f.tag){case 3:zs(rr),ce();break;case 26:case 27:case 5:Ue(f);break;case 4:ce();break;case 31:f.memoizedState!==null&&qi(f);break;case 13:qi(f);break;case 19:ne(In);break;case 10:zs(f.type);break;case 22:case 23:qi(f),Qd(),l!==null&&ne(vu);break;case 24:zs(rr)}}function Fo(l,f){try{var v=f.updateQueue,_=v!==null?v.lastEffect:null;if(_!==null){var C=_.next;v=C;do{if((v.tag&l)===l){_=void 0;var P=v.create,V=v.inst;_=P(),V.destroy=_}v=v.next}while(v!==C)}}catch(te){kn(f,f.return,te)}}function zr(l,f,v){try{var _=f.updateQueue,C=_!==null?_.lastEffect:null;if(C!==null){var P=C.next;_=P;do{if((_.tag&l)===l){var V=_.inst,te=V.destroy;if(te!==void 0){V.destroy=void 0,C=f;var ye=v,ze=te;try{ze()}catch(at){kn(C,ye,at)}}}_=_.next}while(_!==P)}}catch(at){kn(f,f.return,at)}}function os(l){var f=l.updateQueue;if(f!==null){var v=l.stateNode;try{X_(f,v)}catch(_){kn(l,l.return,_)}}}function Cr(l,f,v){v.props=Su(l.type,l.memoizedProps),v.state=l.memoizedState;try{v.componentWillUnmount()}catch(_){kn(l,f,_)}}function Cl(l,f){try{var v=l.ref;if(v!==null){switch(l.tag){case 26:case 27:case 5:var _=l.stateNode;break;case 30:_=l.stateNode;break;default:_=l.stateNode}typeof v=="function"?l.refCleanup=v(_):v.current=_}}catch(C){kn(l,f,C)}}function Gr(l,f){var v=l.ref,_=l.refCleanup;if(v!==null)if(typeof _=="function")try{_()}catch(C){kn(l,f,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(C){kn(l,f,C)}else v.current=null}function lh(l){var f=l.type,v=l.memoizedProps,_=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&_.focus();break e;case"img":v.src?_.src=v.src:v.srcSet&&(_.srcset=v.srcSet)}}catch(C){kn(l,l.return,C)}}function mr(l,f,v){try{var _=l.stateNode;sW(_,l.type,v,f),_[Di]=f}catch(C){kn(l,l.return,C)}}function xi(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&$f(l.type)||l.tag===4}function An(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||xi(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&$f(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function js(l,f,v){var _=l.tag;if(_===5||_===6)l=l.stateNode,f?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(l,f):(f=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,f.appendChild(l),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=ea));else if(_!==4&&(_===27&&$f(l.type)&&(v=l.stateNode,f=null),l=l.child,l!==null))for(js(l,f,v),l=l.sibling;l!==null;)js(l,f,v),l=l.sibling}function xa(l,f,v){var _=l.tag;if(_===5||_===6)l=l.stateNode,f?v.insertBefore(l,f):v.appendChild(l);else if(_!==4&&(_===27&&$f(l.type)&&(v=l.stateNode),l=l.child,l!==null))for(xa(l,f,v),l=l.sibling;l!==null;)xa(l,f,v),l=l.sibling}function um(l){var f=l.stateNode,v=l.memoizedProps;try{for(var _=l.type,C=f.attributes;C.length;)f.removeAttributeNode(C[0]);Aa(f,_,v),f[zn]=l,f[Di]=v}catch(P){kn(l,l.return,P)}}var ko=!1,li=!1,ss=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,Rr=null;function bA(l,f){if(l=l.containerInfo,MA=Wb,l=F_(l),av(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var _=v.getSelection&&v.getSelection();if(_&&_.rangeCount!==0){v=_.anchorNode;var C=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{v.nodeType,P.nodeType}catch{v=null;break e}var V=0,te=-1,ye=-1,ze=0,at=0,ct=l,qe=null;t:for(;;){for(var Qe;ct!==v||C!==0&&ct.nodeType!==3||(te=V+C),ct!==P||_!==0&&ct.nodeType!==3||(ye=V+_),ct.nodeType===3&&(V+=ct.nodeValue.length),(Qe=ct.firstChild)!==null;)qe=ct,ct=Qe;for(;;){if(ct===l)break t;if(qe===v&&++ze===C&&(te=V),qe===P&&++at===_&&(ye=V),(Qe=ct.nextSibling)!==null)break;ct=qe,qe=ct.parentNode}ct=Qe}v=te===-1||ye===-1?null:{start:te,end:ye}}else v=null}v=v||{start:0,end:0}}else v=null;for(wA={focusedElem:l,selectionRange:v},Wb=!1,Rr=f;Rr!==null;)if(f=Rr,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,Rr=l;else for(;Rr!==null;){switch(f=Rr,P=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(v=0;v<l.length;v++)C=l[v],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,v=f,C=P.memoizedProps,P=P.memoizedState,_=v.stateNode;try{var kt=Su(v.type,C);l=_.getSnapshotBeforeUpdate(kt,P),_.__reactInternalSnapshotBeforeUpdate=l}catch(Kt){kn(v,v.return,Kt)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,v=l.nodeType,v===9)IA(l);else if(v===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":IA(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=f.sibling,l!==null){l.return=f.return,Rr=l;break}Rr=f.return}}function Si(l,f,v){var _=v.flags;switch(v.tag){case 0:case 11:case 15:Go(l,v),_&4&&Fo(5,v);break;case 1:if(Go(l,v),_&4)if(l=v.stateNode,f===null)try{l.componentDidMount()}catch(V){kn(v,v.return,V)}else{var C=Su(v.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(C,f,l.__reactInternalSnapshotBeforeUpdate)}catch(V){kn(v,v.return,V)}}_&64&&os(v),_&512&&Cl(v,v.return);break;case 3:if(Go(l,v),_&64&&(l=v.updateQueue,l!==null)){if(f=null,v.child!==null)switch(v.child.tag){case 27:case 5:f=v.child.stateNode;break;case 1:f=v.child.stateNode}try{X_(l,f)}catch(V){kn(v,v.return,V)}}break;case 27:f===null&&_&4&&um(v);case 26:case 5:Go(l,v),f===null&&_&4&&lh(v),_&512&&Cl(v,v.return);break;case 12:Go(l,v);break;case 31:Go(l,v),_&4&&Eu(l,v);break;case 13:Go(l,v),_&4&&zf(l,v),_&64&&(l=v.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(v=x.bind(null,v),mW(l,v))));break;case 22:if(_=v.memoizedState!==null||ko,!_){f=f!==null&&f.memoizedState!==null||li,C=ko;var P=li;ko=_,(li=f)&&!P?Sa(l,v,(v.subtreeFlags&8772)!==0):Go(l,v),ko=C,li=P}break;case 30:break;default:Go(l,v)}}function uh(l){var f=l.alternate;f!==null&&(l.alternate=null,uh(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&So(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Kn=null,aa=!1;function Bo(l,f,v){for(v=v.child;v!==null;)cm(l,f,v),v=v.sibling}function cm(l,f,v){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(We,v)}catch{}switch(v.tag){case 26:li||Gr(v,f),Bo(l,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:li||Gr(v,f);var _=Kn,C=aa;$f(v.type)&&(Kn=v.stateNode,aa=!1),Bo(l,f,v),i0(v.stateNode),Kn=_,aa=C;break;case 5:li||Gr(v,f);case 6:if(_=Kn,C=aa,Kn=null,Bo(l,f,v),Kn=_,aa=C,Kn!==null)if(aa)try{(Kn.nodeType===9?Kn.body:Kn.nodeName==="HTML"?Kn.ownerDocument.body:Kn).removeChild(v.stateNode)}catch(P){kn(v,f,P)}else try{Kn.removeChild(v.stateNode)}catch(P){kn(v,f,P)}break;case 18:Kn!==null&&(aa?(l=Kn,ID(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,v.stateNode),ym(l)):ID(Kn,v.stateNode));break;case 4:_=Kn,C=aa,Kn=v.stateNode.containerInfo,aa=!0,Bo(l,f,v),Kn=_,aa=C;break;case 0:case 11:case 14:case 15:zr(2,v,f),li||zr(4,v,f),Bo(l,f,v);break;case 1:li||(Gr(v,f),_=v.stateNode,typeof _.componentWillUnmount=="function"&&Cr(v,f,_)),Bo(l,f,v);break;case 21:Bo(l,f,v);break;case 22:li=(_=li)||v.memoizedState!==null,Bo(l,f,v),li=_;break;default:Bo(l,f,v)}}function Eu(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ym(l)}catch(v){kn(f,f.return,v)}}}function zf(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ym(l)}catch(v){kn(f,f.return,v)}}function Jv(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new Lb),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new Lb),f;default:throw Error(i(435,l.tag))}}function Rl(l,f){var v=Jv(l);f.forEach(function(_){if(!v.has(_)){v.add(_);var C=w.bind(null,l,_);_.then(C,C)}})}function gr(l,f){var v=f.deletions;if(v!==null)for(var _=0;_<v.length;_++){var C=v[_],P=l,V=f,te=V;e:for(;te!==null;){switch(te.tag){case 27:if($f(te.type)){Kn=te.stateNode,aa=!1;break e}break;case 5:Kn=te.stateNode,aa=!1;break e;case 3:case 4:Kn=te.stateNode.containerInfo,aa=!0;break e}te=te.return}if(Kn===null)throw Error(i(160));cm(P,V,C),Kn=null,aa=!1,P=C.alternate,P!==null&&(P.return=null),C.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)Tu(f,l),f=f.sibling}var zo=null;function Tu(l,f){var v=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:gr(f,l),vr(l),_&4&&(zr(3,l,l.return),Fo(3,l),zr(5,l,l.return));break;case 1:gr(f,l),vr(l),_&512&&(li||v===null||Gr(v,v.return)),_&64&&ko&&(l=l.updateQueue,l!==null&&(_=l.callbacks,_!==null&&(v=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=v===null?_:v.concat(_))));break;case 26:var C=zo;if(gr(f,l),vr(l),_&512&&(li||v===null||Gr(v,v.return)),_&4){var P=v!==null?v.memoizedState:null;if(_=l.memoizedState,v===null)if(_===null)if(l.stateNode===null){e:{_=l.type,v=l.memoizedProps,C=C.ownerDocument||C;t:switch(_){case"title":P=C.getElementsByTagName("title")[0],(!P||P[Ka]||P[zn]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=C.createElement(_),C.head.insertBefore(P,C.querySelector("head > title"))),Aa(P,_,v),P[zn]=l,J(P),_=P;break e;case"link":var V=GD("link","href",C).get(_+(v.href||""));if(V){for(var te=0;te<V.length;te++)if(P=V[te],P.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&P.getAttribute("rel")===(v.rel==null?null:v.rel)&&P.getAttribute("title")===(v.title==null?null:v.title)&&P.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){V.splice(te,1);break t}}P=C.createElement(_),Aa(P,_,v),C.head.appendChild(P);break;case"meta":if(V=GD("meta","content",C).get(_+(v.content||""))){for(te=0;te<V.length;te++)if(P=V[te],P.getAttribute("content")===(v.content==null?null:""+v.content)&&P.getAttribute("name")===(v.name==null?null:v.name)&&P.getAttribute("property")===(v.property==null?null:v.property)&&P.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&P.getAttribute("charset")===(v.charSet==null?null:v.charSet)){V.splice(te,1);break t}}P=C.createElement(_),Aa(P,_,v),C.head.appendChild(P);break;default:throw Error(i(468,_))}P[zn]=l,J(P),_=P}l.stateNode=_}else VD(C,l.type,l.stateNode);else l.stateNode=zD(C,_,l.memoizedProps);else P!==_?(P===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):P.count--,_===null?VD(C,l.type,l.stateNode):zD(C,_,l.memoizedProps)):_===null&&l.stateNode!==null&&mr(l,l.memoizedProps,v.memoizedProps)}break;case 27:gr(f,l),vr(l),_&512&&(li||v===null||Gr(v,v.return)),v!==null&&_&4&&mr(l,l.memoizedProps,v.memoizedProps);break;case 5:if(gr(f,l),vr(l),_&512&&(li||v===null||Gr(v,v.return)),l.flags&32){C=l.stateNode;try{vi(C,"")}catch(kt){kn(l,l.return,kt)}}_&4&&l.stateNode!=null&&(C=l.memoizedProps,mr(l,C,v!==null?v.memoizedProps:C)),_&1024&&(ss=!0);break;case 6:if(gr(f,l),vr(l),_&4){if(l.stateNode===null)throw Error(i(162));_=l.memoizedProps,v=l.stateNode;try{v.nodeValue=_}catch(kt){kn(l,l.return,kt)}}break;case 3:if(Gb=null,C=zo,zo=Bb(f.containerInfo),gr(f,l),zo=C,vr(l),_&4&&v!==null&&v.memoizedState.isDehydrated)try{ym(f.containerInfo)}catch(kt){kn(l,l.return,kt)}ss&&(ss=!1,fm(l));break;case 4:_=zo,zo=Bb(l.stateNode.containerInfo),gr(f,l),vr(l),zo=_;break;case 12:gr(f,l),vr(l);break;case 31:gr(f,l),vr(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Rl(l,_)));break;case 13:gr(f,l),vr(l),l.child.flags&8192&&l.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Gf=q()),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Rl(l,_)));break;case 22:C=l.memoizedState!==null;var ye=v!==null&&v.memoizedState!==null,ze=ko,at=li;if(ko=ze||C,li=at||ye,gr(f,l),li=at,ko=ze,vr(l),_&8192)e:for(f=l.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(v===null||ye||ko||li||Xs(l)),v=null,f=l;;){if(f.tag===5||f.tag===26){if(v===null){ye=v=f;try{if(P=ye.stateNode,C)V=P.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{te=ye.stateNode;var ct=ye.memoizedProps.style,qe=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;te.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(kt){kn(ye,ye.return,kt)}}}else if(f.tag===6){if(v===null){ye=f;try{ye.stateNode.nodeValue=C?"":ye.memoizedProps}catch(kt){kn(ye,ye.return,kt)}}}else if(f.tag===18){if(v===null){ye=f;try{var Qe=ye.stateNode;C?PD(Qe,!0):PD(ye.stateNode,!1)}catch(kt){kn(ye,ye.return,kt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=l.updateQueue,_!==null&&(v=_.retryQueue,v!==null&&(_.retryQueue=null,Rl(l,v))));break;case 19:gr(f,l),vr(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Rl(l,_)));break;case 30:break;case 21:break;default:gr(f,l),vr(l)}}function vr(l){var f=l.flags;if(f&2){try{for(var v,_=l.return;_!==null;){if(xi(_)){v=_;break}_=_.return}if(v==null)throw Error(i(160));switch(v.tag){case 27:var C=v.stateNode,P=An(l);xa(l,P,C);break;case 5:var V=v.stateNode;v.flags&32&&(vi(V,""),v.flags&=-33);var te=An(l);xa(l,te,V);break;case 3:case 4:var ye=v.stateNode.containerInfo,ze=An(l);js(l,ze,ye);break;default:throw Error(i(161))}}catch(at){kn(l,l.return,at)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function fm(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;fm(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function Go(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Si(l,f.alternate,f),f=f.sibling}function Xs(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:zr(4,f,f.return),Xs(f);break;case 1:Gr(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&Cr(f,f.return,v),Xs(f);break;case 27:i0(f.stateNode);case 26:case 5:Gr(f,f.return),Xs(f);break;case 22:f.memoizedState===null&&Xs(f);break;case 30:Xs(f);break;default:Xs(f)}l=l.sibling}}function Sa(l,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,C=l,P=f,V=P.flags;switch(P.tag){case 0:case 11:case 15:Sa(C,P,v),Fo(4,P);break;case 1:if(Sa(C,P,v),_=P,C=_.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ze){kn(_,_.return,ze)}if(_=P,C=_.updateQueue,C!==null){var te=_.stateNode;try{var ye=C.shared.hiddenCallbacks;if(ye!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ye.length;C++)Of(ye[C],te)}catch(ze){kn(_,_.return,ze)}}v&&V&64&&os(P),Cl(P,P.return);break;case 27:um(P);case 26:case 5:Sa(C,P,v),v&&_===null&&V&4&&lh(P),Cl(P,P.return);break;case 12:Sa(C,P,v);break;case 31:Sa(C,P,v),v&&V&4&&Eu(C,P);break;case 13:Sa(C,P,v),v&&V&4&&zf(C,P);break;case 22:P.memoizedState===null&&Sa(C,P,v),Cl(P,P.return);break;case 30:break;default:Sa(C,P,v)}f=f.sibling}}function Au(l,f){var v=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==v&&(l!=null&&l.refCount++,v!=null&&lc(v))}function Sc(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&lc(l))}function Vr(l,f,v,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Zv(l,f,v,_),f=f.sibling}function Zv(l,f,v,_){var C=f.flags;switch(f.tag){case 0:case 11:case 15:Vr(l,f,v,_),C&2048&&Fo(9,f);break;case 1:Vr(l,f,v,_);break;case 3:Vr(l,f,v,_),C&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&lc(l)));break;case 12:if(C&2048){Vr(l,f,v,_),l=f.stateNode;try{var P=f.memoizedProps,V=P.id,te=P.onPostCommit;typeof te=="function"&&te(V,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ye){kn(f,f.return,ye)}}else Vr(l,f,v,_);break;case 31:Vr(l,f,v,_);break;case 13:Vr(l,f,v,_);break;case 23:break;case 22:P=f.stateNode,V=f.alternate,f.memoizedState!==null?P._visibility&2?Vr(l,f,v,_):Ys(l,f):P._visibility&2?Vr(l,f,v,_):(P._visibility|=2,Hr(l,f,v,_,(f.subtreeFlags&10256)!==0||!1)),C&2048&&Au(V,f);break;case 24:Vr(l,f,v,_),C&2048&&Sc(f.alternate,f);break;default:Vr(l,f,v,_)}}function Hr(l,f,v,_,C){for(C=C&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var P=l,V=f,te=v,ye=_,ze=V.flags;switch(V.tag){case 0:case 11:case 15:Hr(P,V,te,ye,C),Fo(8,V);break;case 23:break;case 22:var at=V.stateNode;V.memoizedState!==null?at._visibility&2?Hr(P,V,te,ye,C):Ys(P,V):(at._visibility|=2,Hr(P,V,te,ye,C)),C&&ze&2048&&Au(V.alternate,V);break;case 24:Hr(P,V,te,ye,C),C&&ze&2048&&Sc(V.alternate,V);break;default:Hr(P,V,te,ye,C)}f=f.sibling}}function Ys(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=l,_=f,C=_.flags;switch(_.tag){case 22:Ys(v,_),C&2048&&Au(_.alternate,_);break;case 24:Ys(v,_),C&2048&&Sc(_.alternate,_);break;default:Ys(v,_)}f=f.sibling}}var Ec=8192;function oo(l,f,v){if(l.subtreeFlags&Ec)for(l=l.child;l!==null;)dm(l,f,v),l=l.sibling}function dm(l,f,v){switch(l.tag){case 26:oo(l,f,v),l.flags&Ec&&l.memoizedState!==null&&wW(v,zo,l.memoizedState,l.memoizedProps);break;case 5:oo(l,f,v);break;case 3:case 4:var _=zo;zo=Bb(l.stateNode.containerInfo),oo(l,f,v),zo=_;break;case 22:l.memoizedState===null&&(_=l.alternate,_!==null&&_.memoizedState!==null?(_=Ec,Ec=16777216,oo(l,f,v),Ec=_):oo(l,f,v));break;default:oo(l,f,v)}}function Tc(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function Mu(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var _=f[v];Rr=_,Ui(_,l)}Tc(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Fa(l),l=l.sibling}function Fa(l){switch(l.tag){case 0:case 11:case 15:Mu(l),l.flags&2048&&zr(9,l,l.return);break;case 3:Mu(l);break;case 12:Mu(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,ka(l)):Mu(l);break;default:Mu(l)}}function ka(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var _=f[v];Rr=_,Ui(_,l)}Tc(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:zr(8,f,f.return),ka(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,ka(f));break;default:ka(f)}l=l.sibling}}function Ui(l,f){for(;Rr!==null;){var v=Rr;switch(v.tag){case 0:case 11:case 15:zr(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var _=v.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:lc(v.memoizedState.cache)}if(_=v.child,_!==null)_.return=v,Rr=_;else e:for(v=l;Rr!==null;){_=Rr;var C=_.sibling,P=_.return;if(uh(_),_===v){Rr=null;break e}if(C!==null){C.return=P,Rr=C;break e}Rr=P}}}var Il={getCacheForType:function(l){var f=Zt(rr),v=f.data.get(l);return v===void 0&&(v=l(),f.data.set(l,v)),v},cacheSignal:function(){return Zt(rr).controller.signal}},sn=typeof WeakMap=="function"?WeakMap:Map,Gt=0,tn=null,hn=null,fn=0,Dn=0,oa=null,Vo=!1,ls=!1,Qv=!1,so=0,Ci=0,$s=0,wu=0,ch=0,Ea=0,hi=0,Ac=null,Fi=null,ki=!1,Gf=0,e0=0,Xi=1/0,Ri=null,Yi=null,Jn=0,lo=null,Vf=null,Ho=0,Hf=0,qf=null,fh=null,Cu=0,Mc=null;function uo(){return(Gt&2)!==0&&fn!==0?fn&-fn:$.T!==null?$e():pa()}function Sn(){if(Ea===0)if((fn&536870912)===0||Rn){var l=tt;tt<<=1,(tt&3932160)===0&&(tt=262144),Ea=l}else Ea=536870912;return l=Da.current,l!==null&&(l.flags|=32),Ea}function pn(l,f,v){(l===tn&&(Dn===2||Dn===9)||l.cancelPendingCommit!==null)&&(Iu(l,0),or(l,fn,Ea,!1)),vn(l,v),((Gt&2)===0||l!==tn)&&(l===tn&&((Gt&2)===0&&(wu|=v),Ci===4&&or(l,fn,Ea,!1)),gt(l))}function En(l,f,v){if((Gt&6)!==0)throw Error(i(327));var _=!v&&(f&127)===0&&(f&l.expiredLanes)===0||lt(l,f),C=_?dh(l,f):Ta(l,f,!0),P=_;do{if(C===0){ls&&!_&&or(l,f,0,!1);break}else{if(v=l.current.alternate,P&&!Zn(v)){C=Ta(l,f,!1),P=!1;continue}if(C===2){if(P=f,l.errorRecoveryDisabledLanes&P)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){f=V;e:{var te=l;C=Ac;var ye=te.current.memoizedState.isDehydrated;if(ye&&(Iu(te,V).flags|=256),V=Ta(te,V,!1),V!==2){if(Qv&&!ye){te.errorRecoveryDisabledLanes|=P,wu|=P,C=4;break e}P=Fi,Fi=C,P!==null&&(Fi===null?Fi=P:Fi.push.apply(Fi,P))}C=V}if(P=!1,C!==2)continue}}if(C===1){Iu(l,0),or(l,f,0,!0);break}e:{switch(_=l,P=C,P){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:or(_,f,Ea,!Vo);break e;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(C=Gf+300-q(),10<C)){if(or(_,f,Ea,!Vo),Be(_,0,!0)!==0)break e;Ho=f,_.timeoutHandle=CD(Mn.bind(null,_,v,Fi,Ri,ki,f,Ea,wu,hi,Vo,P,"Throttled",-0,0),C);break e}Mn(_,v,Fi,Ri,ki,f,Ea,wu,hi,Vo,P,null,-0,0)}}break}while(!0);gt(l)}function Mn(l,f,v,_,C,P,V,te,ye,ze,at,ct,qe,Qe){if(l.timeoutHandle=-1,ct=f.subtreeFlags,ct&8192||(ct&16785408)===16785408){ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},dm(f,P,ct);var kt=(P&62914560)===P?Gf-q():(P&4194048)===P?e0-q():0;if(kt=CW(ct,kt),kt!==null){Ho=P,l.cancelPendingCommit=kt(Nl.bind(null,l,f,P,v,_,C,V,te,ye,at,ct,null,qe,Qe)),or(l,P,V,!ze);return}}Nl(l,f,P,v,_,C,V,te,ye)}function Zn(l){for(var f=l;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var _=0;_<v.length;_++){var C=v[_],P=C.getSnapshot;C=C.value;try{if(!va(P(),C))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function or(l,f,v,_){f&=~ch,f&=~wu,l.suspendedLanes|=f,l.pingedLanes&=~f,_&&(l.warmLanes|=f),_=l.expirationTimes;for(var C=f;0<C;){var P=31-ue(C),V=1<<P;_[P]=-1,C&=~V}v!==0&&Qn(l,v,f)}function us(){return(Gt&6)===0?(Rt(0),!1):!0}function Ru(){if(hn!==null){if(Dn===0)var l=hn.return;else l=hn,Bs=mu=null,Ev(l),hc=null,pc=0,l=hn;for(;l!==null;)ao(l.alternate,l),l=l.return;hn=null}}function Iu(l,f){var v=l.timeoutHandle;v!==-1&&(l.timeoutHandle=-1,cW(v)),v=l.cancelPendingCommit,v!==null&&(l.cancelPendingCommit=null,v()),Ho=0,Ru(),tn=l,hn=v=Ia(l.current,null),fn=f,Dn=0,oa=null,Vo=!1,ls=lt(l,f),Qv=!1,hi=Ea=ch=wu=$s=Ci=0,Fi=Ac=null,ki=!1,(f&8)!==0&&(f|=f&32);var _=l.entangledLanes;if(_!==0)for(l=l.entanglements,_&=f;0<_;){var C=31-ue(_),P=1<<C;f|=l[C],_&=~P}return so=f,Wd(),v}function Ks(l,f){on=null,$.H=kf,f===uc||f===dn?(f=fc(),Dn=3):f===$d?(f=fc(),Dn=4):Dn=f===em?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,oa=f,hn===null&&(Ci=1,Qp(l,to(f,l.current)))}function Ii(){var l=Da.current;return l===null?!0:(fn&4194048)===fn?ba===null:(fn&62914560)===fn||(fn&536870912)!==0?l===ba:!1}function Pl(){var l=$.H;return $.H=kf,l===null?kf:l}function Pu(){var l=$.A;return $.A=Il,l}function Wf(){Ci=4,Vo||(fn&4194048)!==fn&&Da.current!==null||(ls=!0),($s&134217727)===0&&(wu&134217727)===0||tn===null||or(tn,fn,Ea,!1)}function Ta(l,f,v){var _=Gt;Gt|=2;var C=Pl(),P=Pu();(tn!==l||fn!==f)&&(Ri=null,Iu(l,f)),f=!1;var V=Ci;e:do try{if(Dn!==0&&hn!==null){var te=hn,ye=oa;switch(Dn){case 8:Ru(),V=6;break e;case 3:case 2:case 9:case 6:Da.current===null&&(f=!0);var ze=Dn;if(Dn=0,oa=null,wc(l,te,ye,ze),v&&ls){V=0;break e}break;default:ze=Dn,Dn=0,oa=null,wc(l,te,ye,ze)}}jf(),V=Ci;break}catch(at){Ks(l,at)}while(!0);return f&&l.shellSuspendCounter++,Bs=mu=null,Gt=_,$.H=C,$.A=P,hn===null&&(tn=null,fn=0,Wd()),V}function jf(){for(;hn!==null;)hm(hn)}function dh(l,f){var v=Gt;Gt|=2;var _=Pl(),C=Pu();tn!==l||fn!==f?(Ri=null,Xi=q()+500,Iu(l,f)):ls=lt(l,f);e:do try{if(Dn!==0&&hn!==null){f=hn;var P=oa;t:switch(Dn){case 1:Dn=0,oa=null,wc(l,f,P,1);break;case 2:case 9:if(Na(P)){Dn=0,oa=null,hh(f);break}f=function(){Dn!==2&&Dn!==9||tn!==l||(Dn=7),gt(l)},P.then(f,f);break e;case 3:Dn=7;break e;case 4:Dn=5;break e;case 7:Na(P)?(Dn=0,oa=null,hh(f)):(Dn=0,oa=null,wc(l,f,P,7));break;case 5:var V=null;switch(hn.tag){case 26:V=hn.memoizedState;case 5:case 27:var te=hn;if(V?HD(V):te.stateNode.complete){Dn=0,oa=null;var ye=te.sibling;if(ye!==null)hn=ye;else{var ze=te.return;ze!==null?(hn=ze,Nu(ze)):hn=null}break t}}Dn=0,oa=null,wc(l,f,P,5);break;case 6:Dn=0,oa=null,wc(l,f,P,6);break;case 8:Ru(),Ci=6;break e;default:throw Error(i(462))}}Ba();break}catch(at){Ks(l,at)}while(!0);return Bs=mu=null,$.H=_,$.A=C,Gt=v,hn!==null?0:(tn=null,fn=0,Wd(),Ci)}function Ba(){for(;hn!==null&&!He();)hm(hn)}function hm(l){var f=lm(l.alternate,l,so);l.memoizedProps=l.pendingProps,f===null?Nu(l):hn=f}function hh(l){var f=l,v=f.alternate;switch(f.tag){case 15:case 0:f=rh(v,f,f.pendingProps,f.type,void 0,fn);break;case 11:f=rh(v,f,f.pendingProps,f.type.render,f.ref,fn);break;case 5:Ev(f);default:ao(v,f),f=hn=Tf(f,so),f=lm(v,f,so)}l.memoizedProps=l.pendingProps,f===null?Nu(l):hn=f}function wc(l,f,v,_){Bs=mu=null,Ev(f),hc=null,pc=0;var C=f.return;try{if(pr(l,C,f,v,fn)){Ci=1,Qp(l,to(v,l.current)),hn=null;return}}catch(P){if(C!==null)throw hn=C,P;Ci=1,Qp(l,to(v,l.current)),hn=null;return}f.flags&32768?(Rn||_===1?l=!0:ls||(fn&536870912)!==0?l=!1:(Vo=l=!0,(_===2||_===9||_===3||_===6)&&(_=Da.current,_!==null&&_.tag===13&&(_.flags|=16384))),ph(f,l)):Nu(f)}function Nu(l){var f=l;do{if((f.flags&32768)!==0){ph(f,Vo);return}l=f.return;var v=sh(f.alternate,f,so);if(v!==null){hn=v;return}if(f=f.sibling,f!==null){hn=f;return}hn=f=l}while(f!==null);Ci===0&&(Ci=5)}function ph(l,f){do{var v=Uo(l.alternate,l);if(v!==null){v.flags&=32767,hn=v;return}if(v=l.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(l=l.sibling,l!==null)){hn=l;return}hn=l=v}while(l!==null);Ci=6,hn=null}function Nl(l,f,v,_,C,P,V,te,ye){l.cancelPendingCommit=null;do Xf();while(Jn!==0);if((Gt&6)!==0)throw Error(i(327));if(f!==null){if(f===l.current)throw Error(i(177));if(P=f.lanes|f.childLanes,P|=Ar,wn(l,v,P,V,te,ye),l===tn&&(hn=tn=null,fn=0),Vf=f,lo=l,Ho=v,Hf=P,qf=C,fh=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,O(Te,function(){return pm(),null})):(l.callbackNode=null,l.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=$.T,$.T=null,C=ie.p,ie.p=2,V=Gt,Gt|=4;try{bA(l,f,v)}finally{Gt=V,ie.p=C,$.T=_}}Jn=1,sr(),Dl(),Cc()}}function sr(){if(Jn===1){Jn=0;var l=lo,f=Vf,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=$.T,$.T=null;var _=ie.p;ie.p=2;var C=Gt;Gt|=4;try{Tu(f,l);var P=wA,V=F_(l.containerInfo),te=P.focusedElem,ye=P.selectionRange;if(V!==te&&te&&te.ownerDocument&&oi(te.ownerDocument.documentElement,te)){if(ye!==null&&av(te)){var ze=ye.start,at=ye.end;if(at===void 0&&(at=ze),"selectionStart"in te)te.selectionStart=ze,te.selectionEnd=Math.min(at,te.value.length);else{var ct=te.ownerDocument||document,qe=ct&&ct.defaultView||window;if(qe.getSelection){var Qe=qe.getSelection(),kt=te.textContent.length,Kt=Math.min(ye.start,kt),ci=ye.end===void 0?Kt:Math.min(ye.end,kt);!Qe.extend&&Kt>ci&&(V=ci,ci=Kt,Kt=V);var Ne=xf(te,Kt),xe=xf(te,ci);if(Ne&&xe&&(Qe.rangeCount!==1||Qe.anchorNode!==Ne.node||Qe.anchorOffset!==Ne.offset||Qe.focusNode!==xe.node||Qe.focusOffset!==xe.offset)){var ke=ct.createRange();ke.setStart(Ne.node,Ne.offset),Qe.removeAllRanges(),Kt>ci?(Qe.addRange(ke),Qe.extend(xe.node,xe.offset)):(ke.setEnd(xe.node,xe.offset),Qe.addRange(ke))}}}}for(ct=[],Qe=te;Qe=Qe.parentNode;)Qe.nodeType===1&&ct.push({element:Qe,left:Qe.scrollLeft,top:Qe.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<ct.length;te++){var ut=ct[te];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Wb=!!MA,wA=MA=null}finally{Gt=C,ie.p=_,$.T=v}}l.current=f,Jn=2}}function Dl(){if(Jn===2){Jn=0;var l=lo,f=Vf,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=$.T,$.T=null;var _=ie.p;ie.p=2;var C=Gt;Gt|=4;try{Si(l,f.alternate,f)}finally{Gt=C,ie.p=_,$.T=v}}Jn=3}}function Cc(){if(Jn===4||Jn===3){Jn=0,Y();var l=lo,f=Vf,v=Ho,_=fh;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Jn=5:(Jn=0,Vf=lo=null,Js(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(Yi=null),Sr(v),f=f.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(We,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=$.T,C=ie.p,ie.p=2,$.T=null;try{for(var P=l.onRecoverableError,V=0;V<_.length;V++){var te=_[V];P(te.value,{componentStack:te.stack})}}finally{$.T=f,ie.p=C}}(Ho&3)!==0&&Xf(),gt(l),C=l.pendingLanes,(v&261930)!==0&&(C&42)!==0?l===Mc?Cu++:(Cu=0,Mc=l):Cu=0,Rt(0)}}function Js(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,lc(f)))}function Xf(){return sr(),Dl(),Cc(),pm()}function pm(){if(Jn!==5)return!1;var l=lo,f=Hf;Hf=0;var v=Sr(Ho),_=$.T,C=ie.p;try{ie.p=32>v?32:v,$.T=null,v=qf,qf=null;var P=lo,V=Ho;if(Jn=0,Vf=lo=null,Ho=0,(Gt&6)!==0)throw Error(i(331));var te=Gt;if(Gt|=4,Fa(P.current),Zv(P,P.current,V,v),Gt=te,Rt(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(We,P)}catch{}return!0}finally{ie.p=C,$.T=_,Js(l,f)}}function t0(l,f,v){f=to(v,f),f=Wv(l.stateNode,f,2),l=yu(l,f,2),l!==null&&(vn(l,2),gt(l))}function kn(l,f,v){if(l.tag===3)t0(l,l,v);else for(;f!==null;){if(f.tag===3){t0(f,l,v);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Yi===null||!Yi.has(_))){l=to(v,l),v=jv(2),_=yu(f,v,2),_!==null&&(Ib(v,_,f,l),vn(_,2),gt(_));break}}f=f.return}}function mh(l,f,v){var _=l.pingCache;if(_===null){_=l.pingCache=new sn;var C=new Set;_.set(f,C)}else C=_.get(f),C===void 0&&(C=new Set,_.set(f,C));C.has(v)||(Qv=!0,C.add(v),l=h.bind(null,l,f,v),f.then(l,l))}function h(l,f,v){var _=l.pingCache;_!==null&&_.delete(f),l.pingedLanes|=l.suspendedLanes&v,l.warmLanes&=~v,tn===l&&(fn&v)===v&&(Ci===4||Ci===3&&(fn&62914560)===fn&&300>q()-Gf?(Gt&2)===0&&Iu(l,0):ch|=v,hi===fn&&(hi=0)),gt(l)}function m(l,f){f===0&&(f=St()),l=ya(l,f),l!==null&&(vn(l,f),gt(l))}function x(l){var f=l.memoizedState,v=0;f!==null&&(v=f.retryLane),m(l,v)}function w(l,f){var v=0;switch(l.tag){case 31:case 13:var _=l.stateNode,C=l.memoizedState;C!==null&&(v=C.retryLane);break;case 19:_=l.stateNode;break;case 22:_=l.stateNode._retryCache;break;default:throw Error(i(314))}_!==null&&_.delete(f),m(l,v)}function O(l,f){return je(l,f)}var B=null,K=null,be=!1,Ze=!1,dt=!1,bt=0;function gt(l){l!==K&&l.next===null&&(K===null?B=K=l:K=K.next=l),Ze=!0,be||(be=!0,De())}function Rt(l,f){if(!dt&&Ze){dt=!0;do for(var v=!1,_=B;_!==null;){if(l!==0){var C=_.pendingLanes;if(C===0)var P=0;else{var V=_.suspendedLanes,te=_.pingedLanes;P=(1<<31-ue(42|l)+1)-1,P&=C&~(V&~te),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(v=!0,Ge(_,P))}else P=fn,P=Be(_,_===tn?P:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(P&3)===0||lt(_,P)||(v=!0,Ge(_,P));_=_.next}while(v);dt=!1}}function rn(){$i()}function $i(){Ze=be=!1;var l=0;bt!==0&&uW()&&(l=bt);for(var f=q(),v=null,_=B;_!==null;){var C=_.next,P=Yf(_,f);P===0?(_.next=null,v===null?B=C:v.next=C,C===null&&(K=v)):(v=_,(l!==0||(P&3)!==0)&&(Ze=!0)),_=C}Jn!==0&&Jn!==5||Rt(l),bt!==0&&(bt=0)}function Yf(l,f){for(var v=l.suspendedLanes,_=l.pingedLanes,C=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var V=31-ue(P),te=1<<V,ye=C[V];ye===-1?((te&v)===0||(te&_)!==0)&&(C[V]=Et(te,f)):ye<=f&&(l.expiredLanes|=te),P&=~te}if(f=tn,v=fn,v=Be(l,l===f?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_=l.callbackNode,v===0||l===f&&(Dn===2||Dn===9)||l.cancelPendingCommit!==null)return _!==null&&_!==null&&Re(_),l.callbackNode=null,l.callbackPriority=0;if((v&3)===0||lt(l,v)){if(f=v&-v,f===l.callbackPriority)return f;switch(_!==null&&Re(_),Sr(v)){case 2:case 8:v=Ie;break;case 32:v=Te;break;case 268435456:v=rt;break;default:v=Te}return _=Du.bind(null,l),v=je(v,_),l.callbackPriority=f,l.callbackNode=v,f}return _!==null&&_!==null&&Re(_),l.callbackPriority=2,l.callbackNode=null,2}function Du(l,f){if(Jn!==0&&Jn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var v=l.callbackNode;if(Xf()&&l.callbackNode!==v)return null;var _=fn;return _=Be(l,l===tn?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_===0?null:(En(l,_,f),Yf(l,q()),l.callbackNode!=null&&l.callbackNode===v?Du.bind(null,l):null)}function Ge(l,f){if(Xf())return null;En(l,f,!0)}function De(){fW(function(){(Gt&6)!==0?je(Le,rn):$i()})}function $e(){if(bt===0){var l=Sl;l===0&&(l=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),bt=l}return bt}function _t(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:To(""+l)}function Xt(l,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,l.id&&v.setAttribute("form",l.id),f.parentNode.insertBefore(v,f),l=new FormData(l),v.parentNode.removeChild(v),l}function Pi(l,f,v,_,C){if(f==="submit"&&v&&v.stateNode===C){var P=_t((C[Di]||null).action),V=_.submitter;V&&(f=(f=V[Di]||null)?_t(f.formAction):V.getAttribute("formAction"),f!==null&&(P=f,V=null));var te=new gl("action","action",null,_,C);l.push({event:te,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(bt!==0){var ye=V?Xt(C,V):new FormData(C);Fv(v,{pending:!0,data:ye,method:C.method,action:P},null,ye)}}else typeof P=="function"&&(te.preventDefault(),ye=V?Xt(C,V):new FormData(C),Fv(v,{pending:!0,data:ye,method:C.method,action:P},P,ye))},currentTarget:C}]})}}for(var Yt=0;Yt<Hd.length;Yt++){var Ln=Hd[Yt],Ir=Ln.toLowerCase(),Bn=Ln[0].toUpperCase()+Ln.slice(1);Ro(Ir,"on"+Bn)}Ro(wp,"onAnimationEnd"),Ro(Vd,"onAnimationIteration"),Ro(sv,"onAnimationStart"),Ro("dblclick","onDoubleClick"),Ro("focusin","onFocus"),Ro("focusout","onBlur"),Ro(B_,"onTransitionRun"),Ro(dA,"onTransitionStart"),Ro(z_,"onTransitionCancel"),Ro(lv,"onTransitionEnd"),Pe("onMouseEnter",["mouseout","mouseover"]),Pe("onMouseLeave",["mouseout","mouseover"]),Pe("onPointerEnter",["pointerout","pointerover"]),Pe("onPointerLeave",["pointerout","pointerover"]),Fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function bD(l,f){f=(f&4)!==0;for(var v=0;v<l.length;v++){var _=l[v],C=_.event;_=_.listeners;e:{var P=void 0;if(f)for(var V=_.length-1;0<=V;V--){var te=_[V],ye=te.instance,ze=te.currentTarget;if(te=te.listener,ye!==P&&C.isPropagationStopped())break e;P=te,C.currentTarget=ze;try{P(C)}catch(at){qd(at)}C.currentTarget=null,P=ye}else for(V=0;V<_.length;V++){if(te=_[V],ye=te.instance,ze=te.currentTarget,te=te.listener,ye!==P&&C.isPropagationStopped())break e;P=te,C.currentTarget=ze;try{P(C)}catch(at){qd(at)}C.currentTarget=null,P=ye}}}}function On(l,f){var v=f[ma];v===void 0&&(v=f[ma]=new Set);var _=l+"__bubble";v.has(_)||(xD(f,l,2,!1),v.add(_))}function SA(l,f,v){var _=0;f&&(_|=4),xD(v,l,_,f)}var Ub="_reactListening"+Math.random().toString(36).slice(2);function EA(l){if(!l[Ub]){l[Ub]=!0,Ae.forEach(function(v){v!=="selectionchange"&&(xA.has(v)||SA(v,!1,l),SA(v,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Ub]||(f[Ub]=!0,SA("selectionchange",!1,f))}}function xD(l,f,v,_){switch(KD(f)){case 2:var C=PW;break;case 8:C=NW;break;default:C=kA}v=C.bind(null,f,v,l),C=void 0,!ga||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(C=!0),_?C!==void 0?l.addEventListener(f,v,{capture:!0,passive:C}):l.addEventListener(f,v,!0):C!==void 0?l.addEventListener(f,v,{passive:C}):l.addEventListener(f,v,!1)}function TA(l,f,v,_,C){var P=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var V=_.tag;if(V===3||V===4){var te=_.stateNode.containerInfo;if(te===C)break;if(V===4)for(V=_.return;V!==null;){var ye=V.tag;if((ye===3||ye===4)&&V.stateNode.containerInfo===C)return;V=V.return}for(;te!==null;){if(V=Ra(te),V===null)return;if(ye=V.tag,ye===5||ye===6||ye===26||ye===27){_=P=V;continue e}te=te.parentNode}}_=_.return}tu(function(){var ze=P,at=Ju(v),ct=[];e:{var qe=Co.get(l);if(qe!==void 0){var Qe=gl,kt=l;switch(l){case"keypress":if(iu(v)===0)break e;case"keydown":case"keyup":Qe=ic;break;case"focusin":kt="focus",Qe=vf;break;case"focusout":kt="blur",Qe=vf;break;case"beforeblur":case"afterblur":Qe=vf;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=A_;break;case wp:case Vd:case sv:Qe=eo;break;case lv:Qe=fA;break;case"scroll":case"scrollend":Qe=au;break;case"wheel":Qe=w_;break;case"copy":case"cut":case"paste":Qe=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Xg;break;case"toggle":case"beforetoggle":Qe=R_}var Kt=(f&4)!==0,ci=!Kt&&(l==="scroll"||l==="scrollend"),Ne=Kt?qe!==null?qe+"Capture":null:qe;Kt=[];for(var xe=ze,ke;xe!==null;){var ut=xe;if(ke=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||ke===null||Ne===null||(ut=Ms(xe,Ne),ut!=null&&Kt.push(n0(xe,ut,ke))),ci)break;xe=xe.return}0<Kt.length&&(qe=new Qe(qe,kt,null,v,at),ct.push({event:qe,listeners:Kt}))}}if((f&7)===0){e:{if(qe=l==="mouseover"||l==="pointerover",Qe=l==="mouseout"||l==="pointerout",qe&&v!==As&&(kt=v.relatedTarget||v.fromElement)&&(Ra(kt)||kt[Fr]))break e;if((Qe||qe)&&(qe=at.window===at?at:(qe=at.ownerDocument)?qe.defaultView||qe.parentWindow:window,Qe?(kt=v.relatedTarget||v.toElement,Qe=ze,kt=kt?Ra(kt):null,kt!==null&&(ci=a(kt),Kt=kt.tag,kt!==ci||Kt!==5&&Kt!==27&&Kt!==6)&&(kt=null)):(Qe=null,kt=ze),Qe!==kt)){if(Kt=Ud,ut="onMouseLeave",Ne="onMouseEnter",xe="mouse",(l==="pointerout"||l==="pointerover")&&(Kt=Xg,ut="onPointerLeave",Ne="onPointerEnter",xe="pointer"),ci=Qe==null?qe:Eo(Qe),ke=kt==null?qe:Eo(kt),qe=new Kt(ut,xe+"leave",Qe,v,at),qe.target=ci,qe.relatedTarget=ke,ut=null,Ra(at)===ze&&(Kt=new Kt(Ne,xe+"enter",kt,v,at),Kt.target=ke,Kt.relatedTarget=ci,ut=Kt),ci=ut,Qe&&kt)t:{for(Kt=rW,Ne=Qe,xe=kt,ke=0,ut=Ne;ut;ut=Kt(ut))ke++;ut=0;for(var jt=xe;jt;jt=Kt(jt))ut++;for(;0<ke-ut;)Ne=Kt(Ne),ke--;for(;0<ut-ke;)xe=Kt(xe),ut--;for(;ke--;){if(Ne===xe||xe!==null&&Ne===xe.alternate){Kt=Ne;break t}Ne=Kt(Ne),xe=Kt(xe)}Kt=null}else Kt=null;Qe!==null&&SD(ct,qe,Qe,Kt,!1),kt!==null&&ci!==null&&SD(ct,ci,kt,Kt,!0)}}e:{if(qe=ze?Eo(ze):window,Qe=qe.nodeName&&qe.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&qe.type==="file")var Wn=ev;else if(Qg(qe))if(Ps)Wn=U_;else{Wn=iv;var zt=O_}else Qe=qe.nodeName,!Qe||Qe.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?ze&&Tr(ze.elementType)&&(Wn=ev):Wn=L_;if(Wn&&(Wn=Wn(l,ze))){Ap(ct,Wn,v,at);break e}zt&&zt(l,qe,ze),l==="focusout"&&ze&&qe.type==="number"&&ze.memoizedProps.value!=null&&Gn(qe,"number",qe.value)}switch(zt=ze?Eo(ze):window,l){case"focusin":(Qg(zt)||zt.contentEditable==="true")&&(Ns=zt,Ds=ze,Sf=null);break;case"focusout":Sf=Ds=Ns=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,Ef(ct,v,at);break;case"selectionchange":if(k_)break;case"keydown":case"keyup":Ef(ct,v,at)}var _n;if(rc)e:{switch(l){case"compositionstart":var Un="onCompositionStart";break e;case"compositionend":Un="onCompositionEnd";break e;case"compositionupdate":Un="onCompositionUpdate";break e}Un=void 0}else ac?Tp(l,v)&&(Un="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(Un="onCompositionStart");Un&&($g&&v.locale!=="ko"&&(ac||Un!=="onCompositionStart"?Un==="onCompositionEnd"&&ac&&(_n=nu()):(ta=at,ec="value"in ta?ta.value:ta.textContent,ac=!0)),zt=Fb(ze,Un),0<zt.length&&(Un=new _p(Un,l,null,v,at),ct.push({event:Un,listeners:zt}),_n?Un.data=_n:(_n=Kg(v),_n!==null&&(Un.data=_n)))),(_n=Ep?N_(l,v):Jg(l,v))&&(Un=Fb(ze,"onBeforeInput"),0<Un.length&&(zt=new _p("onBeforeInput","beforeinput",null,v,at),ct.push({event:zt,listeners:Un}),zt.data=_n)),Pi(ct,l,ze,v,at)}bD(ct,f)})}function n0(l,f,v){return{instance:l,listener:f,currentTarget:v}}function Fb(l,f){for(var v=f+"Capture",_=[];l!==null;){var C=l,P=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||P===null||(C=Ms(l,v),C!=null&&_.unshift(n0(l,C,P)),C=Ms(l,f),C!=null&&_.push(n0(l,C,P))),l.tag===3)return _;l=l.return}return[]}function rW(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function SD(l,f,v,_,C){for(var P=f._reactName,V=[];v!==null&&v!==_;){var te=v,ye=te.alternate,ze=te.stateNode;if(te=te.tag,ye!==null&&ye===_)break;te!==5&&te!==26&&te!==27||ze===null||(ye=ze,C?(ze=Ms(v,P),ze!=null&&V.unshift(n0(v,ze,ye))):C||(ze=Ms(v,P),ze!=null&&V.push(n0(v,ze,ye)))),v=v.return}V.length!==0&&l.push({event:f,listeners:V})}var aW=/\r\n?/g,oW=/\u0000|\uFFFD/g;function ED(l){return(typeof l=="string"?l:""+l).replace(aW,`
`).replace(oW,"")}function TD(l,f){return f=ED(f),ED(l)===f}function ui(l,f,v,_,C,P){switch(v){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||vi(l,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&vi(l,""+_);break;case"className":Vt(l,"class",_);break;case"tabIndex":Vt(l,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(l,v,_);break;case"style":ts(l,_,P);break;case"data":if(f!=="object"){Vt(l,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||v!=="href")){l.removeAttribute(v);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(v);break}_=To(""+_),l.setAttribute(v,_);break;case"action":case"formAction":if(typeof _=="function"){l.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(v==="formAction"?(f!=="input"&&ui(l,f,"name",C.name,C,null),ui(l,f,"formEncType",C.formEncType,C,null),ui(l,f,"formMethod",C.formMethod,C,null),ui(l,f,"formTarget",C.formTarget,C,null)):(ui(l,f,"encType",C.encType,C,null),ui(l,f,"method",C.method,C,null),ui(l,f,"target",C.target,C,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(v);break}_=To(""+_),l.setAttribute(v,_);break;case"onClick":_!=null&&(l.onclick=ea);break;case"onScroll":_!=null&&On("scroll",l);break;case"onScrollEnd":_!=null&&On("scrollend",l);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(v=_.__html,v!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=v}}break;case"multiple":l.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":l.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){l.removeAttribute("xlink:href");break}v=To(""+_),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,""+_):l.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,""):l.removeAttribute(v);break;case"capture":case"download":_===!0?l.setAttribute(v,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(v,_):l.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?l.setAttribute(v,_):l.removeAttribute(v);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?l.removeAttribute(v):l.setAttribute(v,_);break;case"popover":On("beforetoggle",l),On("toggle",l),Nt(l,"popover",_);break;case"xlinkActuate":Dt(l,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Dt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Dt(l,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Dt(l,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Dt(l,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Dt(l,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Dt(l,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Nt(l,"is",_);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Ld.get(v)||v,Nt(l,v,_))}}function AA(l,f,v,_,C,P){switch(v){case"style":ts(l,_,P);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(v=_.__html,v!=null){if(C.children!=null)throw Error(i(60));l.innerHTML=v}}break;case"children":typeof _=="string"?vi(l,_):(typeof _=="number"||typeof _=="bigint")&&vi(l,""+_);break;case"onScroll":_!=null&&On("scroll",l);break;case"onScrollEnd":_!=null&&On("scrollend",l);break;case"onClick":_!=null&&(l.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ve.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(C=v.endsWith("Capture"),f=v.slice(2,C?v.length-7:void 0),P=l[Di]||null,P=P!=null?P[v]:null,typeof P=="function"&&l.removeEventListener(f,P,C),typeof _=="function")){typeof P!="function"&&P!==null&&(v in l?l[v]=null:l.hasAttribute(v)&&l.removeAttribute(v)),l.addEventListener(f,_,C);break e}v in l?l[v]=_:_===!0?l.setAttribute(v,""):Nt(l,v,_)}}}function Aa(l,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",l),On("load",l);var _=!1,C=!1,P;for(P in v)if(v.hasOwnProperty(P)){var V=v[P];if(V!=null)switch(P){case"src":_=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:ui(l,f,P,V,v,null)}}C&&ui(l,f,"srcSet",v.srcSet,v,null),_&&ui(l,f,"src",v.src,v,null);return;case"input":On("invalid",l);var te=P=V=C=null,ye=null,ze=null;for(_ in v)if(v.hasOwnProperty(_)){var at=v[_];if(at!=null)switch(_){case"name":C=at;break;case"type":V=at;break;case"checked":ye=at;break;case"defaultChecked":ze=at;break;case"value":P=at;break;case"defaultValue":te=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,f));break;default:ui(l,f,_,at,v,null)}}Qr(l,P,te,ye,ze,V,C,!1);return;case"select":On("invalid",l),_=V=P=null;for(C in v)if(v.hasOwnProperty(C)&&(te=v[C],te!=null))switch(C){case"value":P=te;break;case"defaultValue":V=te;break;case"multiple":_=te;default:ui(l,f,C,te,v,null)}f=P,v=V,l.multiple=!!_,f!=null?Er(l,!!_,f,!1):v!=null&&Er(l,!!_,v,!0);return;case"textarea":On("invalid",l),P=C=_=null;for(V in v)if(v.hasOwnProperty(V)&&(te=v[V],te!=null))switch(V){case"value":_=te;break;case"defaultValue":C=te;break;case"children":P=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(91));break;default:ui(l,f,V,te,v,null)}gi(l,_,C,P);return;case"option":for(ye in v)if(v.hasOwnProperty(ye)&&(_=v[ye],_!=null))switch(ye){case"selected":l.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:ui(l,f,ye,_,v,null)}return;case"dialog":On("beforetoggle",l),On("toggle",l),On("cancel",l),On("close",l);break;case"iframe":case"object":On("load",l);break;case"video":case"audio":for(_=0;_<qo.length;_++)On(qo[_],l);break;case"image":On("error",l),On("load",l);break;case"details":On("toggle",l);break;case"embed":case"source":case"link":On("error",l),On("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in v)if(v.hasOwnProperty(ze)&&(_=v[ze],_!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:ui(l,f,ze,_,v,null)}return;default:if(Tr(f)){for(at in v)v.hasOwnProperty(at)&&(_=v[at],_!==void 0&&AA(l,f,at,_,v,void 0));return}}for(te in v)v.hasOwnProperty(te)&&(_=v[te],_!=null&&ui(l,f,te,_,v,null))}function sW(l,f,v,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,P=null,V=null,te=null,ye=null,ze=null,at=null;for(Qe in v){var ct=v[Qe];if(v.hasOwnProperty(Qe)&&ct!=null)switch(Qe){case"checked":break;case"value":break;case"defaultValue":ye=ct;default:_.hasOwnProperty(Qe)||ui(l,f,Qe,null,_,ct)}}for(var qe in _){var Qe=_[qe];if(ct=v[qe],_.hasOwnProperty(qe)&&(Qe!=null||ct!=null))switch(qe){case"type":P=Qe;break;case"name":C=Qe;break;case"checked":ze=Qe;break;case"defaultChecked":at=Qe;break;case"value":V=Qe;break;case"defaultValue":te=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(i(137,f));break;default:Qe!==ct&&ui(l,f,qe,Qe,_,ct)}}Oi(l,V,te,ye,ze,at,P,C);return;case"select":Qe=V=te=qe=null;for(P in v)if(ye=v[P],v.hasOwnProperty(P)&&ye!=null)switch(P){case"value":break;case"multiple":Qe=ye;default:_.hasOwnProperty(P)||ui(l,f,P,null,_,ye)}for(C in _)if(P=_[C],ye=v[C],_.hasOwnProperty(C)&&(P!=null||ye!=null))switch(C){case"value":qe=P;break;case"defaultValue":te=P;break;case"multiple":V=P;default:P!==ye&&ui(l,f,C,P,_,ye)}f=te,v=V,_=Qe,qe!=null?Er(l,!!v,qe,!1):!!_!=!!v&&(f!=null?Er(l,!!v,f,!0):Er(l,!!v,v?[]:"",!1));return;case"textarea":Qe=qe=null;for(te in v)if(C=v[te],v.hasOwnProperty(te)&&C!=null&&!_.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:ui(l,f,te,null,_,C)}for(V in _)if(C=_[V],P=v[V],_.hasOwnProperty(V)&&(C!=null||P!=null))switch(V){case"value":qe=C;break;case"defaultValue":Qe=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==P&&ui(l,f,V,C,_,P)}Cn(l,qe,Qe);return;case"option":for(var kt in v)if(qe=v[kt],v.hasOwnProperty(kt)&&qe!=null&&!_.hasOwnProperty(kt))switch(kt){case"selected":l.selected=!1;break;default:ui(l,f,kt,null,_,qe)}for(ye in _)if(qe=_[ye],Qe=v[ye],_.hasOwnProperty(ye)&&qe!==Qe&&(qe!=null||Qe!=null))switch(ye){case"selected":l.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:ui(l,f,ye,qe,_,Qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in v)qe=v[Kt],v.hasOwnProperty(Kt)&&qe!=null&&!_.hasOwnProperty(Kt)&&ui(l,f,Kt,null,_,qe);for(ze in _)if(qe=_[ze],Qe=v[ze],_.hasOwnProperty(ze)&&qe!==Qe&&(qe!=null||Qe!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(i(137,f));break;default:ui(l,f,ze,qe,_,Qe)}return;default:if(Tr(f)){for(var ci in v)qe=v[ci],v.hasOwnProperty(ci)&&qe!==void 0&&!_.hasOwnProperty(ci)&&AA(l,f,ci,void 0,_,qe);for(at in _)qe=_[at],Qe=v[at],!_.hasOwnProperty(at)||qe===Qe||qe===void 0&&Qe===void 0||AA(l,f,at,qe,_,Qe);return}}for(var Ne in v)qe=v[Ne],v.hasOwnProperty(Ne)&&qe!=null&&!_.hasOwnProperty(Ne)&&ui(l,f,Ne,null,_,qe);for(ct in _)qe=_[ct],Qe=v[ct],!_.hasOwnProperty(ct)||qe===Qe||qe==null&&Qe==null||ui(l,f,ct,qe,_,Qe)}function AD(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lW(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,v=performance.getEntriesByType("resource"),_=0;_<v.length;_++){var C=v[_],P=C.transferSize,V=C.initiatorType,te=C.duration;if(P&&te&&AD(V)){for(V=0,te=C.responseEnd,_+=1;_<v.length;_++){var ye=v[_],ze=ye.startTime;if(ze>te)break;var at=ye.transferSize,ct=ye.initiatorType;at&&AD(ct)&&(ye=ye.responseEnd,V+=at*(ye<te?1:(te-ze)/(ye-ze)))}if(--_,f+=8*(P+V)/(C.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var MA=null,wA=null;function kb(l){return l.nodeType===9?l:l.ownerDocument}function MD(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wD(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function CA(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var RA=null;function uW(){var l=window.event;return l&&l.type==="popstate"?l===RA?!1:(RA=l,!0):(RA=null,!1)}var CD=typeof setTimeout=="function"?setTimeout:void 0,cW=typeof clearTimeout=="function"?clearTimeout:void 0,RD=typeof Promise=="function"?Promise:void 0,fW=typeof queueMicrotask=="function"?queueMicrotask:typeof RD<"u"?function(l){return RD.resolve(null).then(l).catch(dW)}:CD;function dW(l){setTimeout(function(){throw l})}function $f(l){return l==="head"}function ID(l,f){var v=f,_=0;do{var C=v.nextSibling;if(l.removeChild(v),C&&C.nodeType===8)if(v=C.data,v==="/$"||v==="/&"){if(_===0){l.removeChild(C),ym(f);return}_--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")_++;else if(v==="html")i0(l.ownerDocument.documentElement);else if(v==="head"){v=l.ownerDocument.head,i0(v);for(var P=v.firstChild;P;){var V=P.nextSibling,te=P.nodeName;P[Ka]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&P.rel.toLowerCase()==="stylesheet"||v.removeChild(P),P=V}}else v==="body"&&i0(l.ownerDocument.body);v=C}while(v);ym(f)}function PD(l,f){var v=l;l=0;do{var _=v.nextSibling;if(v.nodeType===1?f?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(f?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),_&&_.nodeType===8)if(v=_.data,v==="/$"){if(l===0)break;l--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||l++;v=_}while(v)}function IA(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":IA(v),So(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}l.removeChild(v)}}function hW(l,f,v,_){for(;l.nodeType===1;){var C=v;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(_){if(!l[Ka])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var P=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=Zs(l.nextSibling),l===null)break}return null}function pW(l,f,v){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!v||(l=Zs(l.nextSibling),l===null))return null;return l}function ND(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Zs(l.nextSibling),l===null))return null;return l}function PA(l){return l.data==="$?"||l.data==="$~"}function NA(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function mW(l,f){var v=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||v.readyState!=="loading")f();else{var _=function(){f(),v.removeEventListener("DOMContentLoaded",_)};v.addEventListener("DOMContentLoaded",_),l._reactRetry=_}}function Zs(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var DA=null;function DD(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"||v==="/&"){if(f===0)return Zs(l.nextSibling);f--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||f++}l=l.nextSibling}return null}function OD(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(f===0)return l;f--}else v!=="/$"&&v!=="/&"||f++}l=l.previousSibling}return null}function LD(l,f,v){switch(f=kb(v),l){case"html":if(l=f.documentElement,!l)throw Error(i(452));return l;case"head":if(l=f.head,!l)throw Error(i(453));return l;case"body":if(l=f.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function i0(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);So(l)}var Qs=new Map,UD=new Set;function Bb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Rc=ie.d;ie.d={f:gW,r:vW,D:yW,C:_W,L:bW,m:xW,X:EW,S:SW,M:TW};function gW(){var l=Rc.f(),f=us();return l||f}function vW(l){var f=Ja(l);f!==null&&f.tag===5&&f.type==="form"?xb(f):Rc.r(l)}var mm=typeof document>"u"?null:document;function FD(l,f,v){var _=mm;if(_&&typeof f=="string"&&f){var C=Bt(f);C='link[rel="'+l+'"][href="'+C+'"]',typeof v=="string"&&(C+='[crossorigin="'+v+'"]'),UD.has(C)||(UD.add(C),l={rel:l,crossOrigin:v,href:f},_.querySelector(C)===null&&(f=_.createElement("link"),Aa(f,"link",l),J(f),_.head.appendChild(f)))}}function yW(l){Rc.D(l),FD("dns-prefetch",l,null)}function _W(l,f){Rc.C(l,f),FD("preconnect",l,f)}function bW(l,f,v){Rc.L(l,f,v);var _=mm;if(_&&l&&f){var C='link[rel="preload"][as="'+Bt(f)+'"]';f==="image"&&v&&v.imageSrcSet?(C+='[imagesrcset="'+Bt(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(C+='[imagesizes="'+Bt(v.imageSizes)+'"]')):C+='[href="'+Bt(l)+'"]';var P=C;switch(f){case"style":P=gm(l);break;case"script":P=vm(l)}Qs.has(P)||(l=p({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:l,as:f},v),Qs.set(P,l),_.querySelector(C)!==null||f==="style"&&_.querySelector(r0(P))||f==="script"&&_.querySelector(a0(P))||(f=_.createElement("link"),Aa(f,"link",l),J(f),_.head.appendChild(f)))}}function xW(l,f){Rc.m(l,f);var v=mm;if(v&&l){var _=f&&typeof f.as=="string"?f.as:"script",C='link[rel="modulepreload"][as="'+Bt(_)+'"][href="'+Bt(l)+'"]',P=C;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=vm(l)}if(!Qs.has(P)&&(l=p({rel:"modulepreload",href:l},f),Qs.set(P,l),v.querySelector(C)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(a0(P)))return}_=v.createElement("link"),Aa(_,"link",l),J(_),v.head.appendChild(_)}}}function SW(l,f,v){Rc.S(l,f,v);var _=mm;if(_&&l){var C=Ot(_).hoistableStyles,P=gm(l);f=f||"default";var V=C.get(P);if(!V){var te={loading:0,preload:null};if(V=_.querySelector(r0(P)))te.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":f},v),(v=Qs.get(P))&&OA(l,v);var ye=V=_.createElement("link");J(ye),Aa(ye,"link",l),ye._p=new Promise(function(ze,at){ye.onload=ze,ye.onerror=at}),ye.addEventListener("load",function(){te.loading|=1}),ye.addEventListener("error",function(){te.loading|=2}),te.loading|=4,zb(V,f,_)}V={type:"stylesheet",instance:V,count:1,state:te},C.set(P,V)}}}function EW(l,f){Rc.X(l,f);var v=mm;if(v&&l){var _=Ot(v).hoistableScripts,C=vm(l),P=_.get(C);P||(P=v.querySelector(a0(C)),P||(l=p({src:l,async:!0},f),(f=Qs.get(C))&&LA(l,f),P=v.createElement("script"),J(P),Aa(P,"link",l),v.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(C,P))}}function TW(l,f){Rc.M(l,f);var v=mm;if(v&&l){var _=Ot(v).hoistableScripts,C=vm(l),P=_.get(C);P||(P=v.querySelector(a0(C)),P||(l=p({src:l,async:!0,type:"module"},f),(f=Qs.get(C))&&LA(l,f),P=v.createElement("script"),J(P),Aa(P,"link",l),v.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(C,P))}}function kD(l,f,v,_){var C=(C=re.current)?Bb(C):null;if(!C)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=gm(v.href),v=Ot(C).hoistableStyles,_=v.get(f),_||(_={type:"style",instance:null,count:0,state:null},v.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){l=gm(v.href);var P=Ot(C).hoistableStyles,V=P.get(l);if(V||(C=C.ownerDocument||C,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,V),(P=C.querySelector(r0(l)))&&!P._p&&(V.instance=P,V.state.loading=5),Qs.has(l)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Qs.set(l,v),P||AW(C,l,v,V.state))),f&&_===null)throw Error(i(528,""));return V}if(f&&_!==null)throw Error(i(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=vm(v),v=Ot(C).hoistableScripts,_=v.get(f),_||(_={type:"script",instance:null,count:0,state:null},v.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function gm(l){return'href="'+Bt(l)+'"'}function r0(l){return'link[rel="stylesheet"]['+l+"]"}function BD(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function AW(l,f,v,_){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=l.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Aa(f,"link",v),J(f),l.head.appendChild(f))}function vm(l){return'[src="'+Bt(l)+'"]'}function a0(l){return"script[async]"+l}function zD(l,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var _=l.querySelector('style[data-href~="'+Bt(v.href)+'"]');if(_)return f.instance=_,J(_),_;var C=p({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return _=(l.ownerDocument||l).createElement("style"),J(_),Aa(_,"style",C),zb(_,v.precedence,l),f.instance=_;case"stylesheet":C=gm(v.href);var P=l.querySelector(r0(C));if(P)return f.state.loading|=4,f.instance=P,J(P),P;_=BD(v),(C=Qs.get(C))&&OA(_,C),P=(l.ownerDocument||l).createElement("link"),J(P);var V=P;return V._p=new Promise(function(te,ye){V.onload=te,V.onerror=ye}),Aa(P,"link",_),f.state.loading|=4,zb(P,v.precedence,l),f.instance=P;case"script":return P=vm(v.src),(C=l.querySelector(a0(P)))?(f.instance=C,J(C),C):(_=v,(C=Qs.get(P))&&(_=p({},v),LA(_,C)),l=l.ownerDocument||l,C=l.createElement("script"),J(C),Aa(C,"link",_),l.head.appendChild(C),f.instance=C);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,zb(_,v.precedence,l));return f.instance}function zb(l,f,v){for(var _=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=_.length?_[_.length-1]:null,P=C,V=0;V<_.length;V++){var te=_[V];if(te.dataset.precedence===f)P=te;else if(P!==C)break}P?P.parentNode.insertBefore(l,P.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(l,f.firstChild))}function OA(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function LA(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var Gb=null;function GD(l,f,v){if(Gb===null){var _=new Map,C=Gb=new Map;C.set(v,_)}else C=Gb,_=C.get(v),_||(_=new Map,C.set(v,_));if(_.has(l))return _;for(_.set(l,null),v=v.getElementsByTagName(l),C=0;C<v.length;C++){var P=v[C];if(!(P[Ka]||P[zn]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var V=P.getAttribute(f)||"";V=l+V;var te=_.get(V);te?te.push(P):_.set(V,[P])}}return _}function VD(l,f,v){l=l.ownerDocument||l,l.head.insertBefore(v,f==="title"?l.querySelector("head > title"):null)}function MW(l,f,v){if(v===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function HD(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function wW(l,f,v,_){if(v.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var C=gm(_.href),P=f.querySelector(r0(C));if(P){f=P._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=Vb.bind(l),f.then(l,l)),v.state.loading|=4,v.instance=P,J(P);return}P=f.ownerDocument||f,_=BD(_),(C=Qs.get(C))&&OA(_,C),P=P.createElement("link"),J(P);var V=P;V._p=new Promise(function(te,ye){V.onload=te,V.onerror=ye}),Aa(P,"link",_),v.instance=P}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(v,f),(f=v.state.preload)&&(v.state.loading&3)===0&&(l.count++,v=Vb.bind(l),f.addEventListener("load",v),f.addEventListener("error",v))}}var UA=0;function CW(l,f){return l.stylesheets&&l.count===0&&qb(l,l.stylesheets),0<l.count||0<l.imgCount?function(v){var _=setTimeout(function(){if(l.stylesheets&&qb(l,l.stylesheets),l.unsuspend){var P=l.unsuspend;l.unsuspend=null,P()}},6e4+f);0<l.imgBytes&&UA===0&&(UA=62500*lW());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&qb(l,l.stylesheets),l.unsuspend)){var P=l.unsuspend;l.unsuspend=null,P()}},(l.imgBytes>UA?50:800)+f);return l.unsuspend=v,function(){l.unsuspend=null,clearTimeout(_),clearTimeout(C)}}:null}function Vb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Hb=null;function qb(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Hb=new Map,f.forEach(RW,l),Hb=null,Vb.call(l))}function RW(l,f){if(!(f.state.loading&4)){var v=Hb.get(l);if(v)var _=v.get(null);else{v=new Map,Hb.set(l,v);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<C.length;P++){var V=C[P];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(v.set(V.dataset.precedence,V),_=V)}_&&v.set(null,_)}C=f.instance,V=C.getAttribute("data-precedence"),P=v.get(V)||_,P===_&&v.set(null,C),v.set(V,C),this.count++,_=Vb.bind(this),C.addEventListener("load",_),C.addEventListener("error",_),P?P.parentNode.insertBefore(C,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),f.state.loading|=4}}var o0={$$typeof:I,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function IW(l,f,v,_,C,P,V,te,ye){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=_,this.onUncaughtError=C,this.onCaughtError=P,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function qD(l,f,v,_,C,P,V,te,ye,ze,at,ct){return l=new IW(l,f,v,V,ye,ze,at,ct,te),f=1,P===!0&&(f|=24),P=Ai(3,null,null,f),l.current=P,P.stateNode=l,f=cv(),f.refCount++,l.pooledCache=f,f.refCount++,P.memoizedState={element:_,isDehydrated:v,cache:f},Jd(P),l}function WD(l){return l?(l=cu,l):cu}function jD(l,f,v,_,C,P){C=WD(C),_.context===null?_.context=C:_.pendingContext=C,_=Tl(f),_.payload={element:v},P=P===void 0?null:P,P!==null&&(_.callback=P),v=yu(l,_,f),v!==null&&(pn(v,l,f),_u(v,l,f))}function XD(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<f?v:f}}function FA(l,f){XD(l,f),(l=l.alternate)&&XD(l,f)}function YD(l){if(l.tag===13||l.tag===31){var f=ya(l,67108864);f!==null&&pn(f,l,67108864),FA(l,67108864)}}function $D(l){if(l.tag===13||l.tag===31){var f=uo();f=xr(f);var v=ya(l,f);v!==null&&pn(v,l,f),FA(l,f)}}var Wb=!0;function PW(l,f,v,_){var C=$.T;$.T=null;var P=ie.p;try{ie.p=2,kA(l,f,v,_)}finally{ie.p=P,$.T=C}}function NW(l,f,v,_){var C=$.T;$.T=null;var P=ie.p;try{ie.p=8,kA(l,f,v,_)}finally{ie.p=P,$.T=C}}function kA(l,f,v,_){if(Wb){var C=BA(_);if(C===null)TA(l,f,_,jb,v),JD(l,_);else if(OW(C,l,f,v,_))_.stopPropagation();else if(JD(l,_),f&4&&-1<DW.indexOf(l)){for(;C!==null;){var P=Ja(C);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var V=nt(P.pendingLanes);if(V!==0){var te=P;for(te.pendingLanes|=2,te.entangledLanes|=2;V;){var ye=1<<31-ue(V);te.entanglements[1]|=ye,V&=~ye}gt(P),(Gt&6)===0&&(Xi=q()+500,Rt(0))}}break;case 31:case 13:te=ya(P,2),te!==null&&pn(te,P,2),us(),FA(P,2)}if(P=BA(_),P===null&&TA(l,f,_,jb,v),P===C)break;C=P}C!==null&&_.stopPropagation()}else TA(l,f,_,null,v)}}function BA(l){return l=Ju(l),zA(l)}var jb=null;function zA(l){if(jb=null,l=Ra(l),l!==null){var f=a(l);if(f===null)l=null;else{var v=f.tag;if(v===13){if(l=o(f),l!==null)return l;l=null}else if(v===31){if(l=s(f),l!==null)return l;l=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return jb=l,null}function KD(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Le:return 2;case Ie:return 8;case Te:case ot:return 32;case rt:return 268435456;default:return 32}default:return 32}}var GA=!1,Kf=null,Jf=null,Zf=null,s0=new Map,l0=new Map,Qf=[],DW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JD(l,f){switch(l){case"focusin":case"focusout":Kf=null;break;case"dragenter":case"dragleave":Jf=null;break;case"mouseover":case"mouseout":Zf=null;break;case"pointerover":case"pointerout":s0.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":l0.delete(f.pointerId)}}function u0(l,f,v,_,C,P){return l===null||l.nativeEvent!==P?(l={blockedOn:f,domEventName:v,eventSystemFlags:_,nativeEvent:P,targetContainers:[C]},f!==null&&(f=Ja(f),f!==null&&YD(f)),l):(l.eventSystemFlags|=_,f=l.targetContainers,C!==null&&f.indexOf(C)===-1&&f.push(C),l)}function OW(l,f,v,_,C){switch(f){case"focusin":return Kf=u0(Kf,l,f,v,_,C),!0;case"dragenter":return Jf=u0(Jf,l,f,v,_,C),!0;case"mouseover":return Zf=u0(Zf,l,f,v,_,C),!0;case"pointerover":var P=C.pointerId;return s0.set(P,u0(s0.get(P)||null,l,f,v,_,C)),!0;case"gotpointercapture":return P=C.pointerId,l0.set(P,u0(l0.get(P)||null,l,f,v,_,C)),!0}return!1}function ZD(l){var f=Ra(l.target);if(f!==null){var v=a(f);if(v!==null){if(f=v.tag,f===13){if(f=o(v),f!==null){l.blockedOn=f,ai(l.priority,function(){$D(v)});return}}else if(f===31){if(f=s(v),f!==null){l.blockedOn=f,ai(l.priority,function(){$D(v)});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Xb(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var v=BA(l.nativeEvent);if(v===null){v=l.nativeEvent;var _=new v.constructor(v.type,v);As=_,v.target.dispatchEvent(_),As=null}else return f=Ja(v),f!==null&&YD(f),l.blockedOn=v,!1;f.shift()}return!0}function QD(l,f,v){Xb(l)&&v.delete(f)}function LW(){GA=!1,Kf!==null&&Xb(Kf)&&(Kf=null),Jf!==null&&Xb(Jf)&&(Jf=null),Zf!==null&&Xb(Zf)&&(Zf=null),s0.forEach(QD),l0.forEach(QD)}function Yb(l,f){l.blockedOn===f&&(l.blockedOn=null,GA||(GA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,LW)))}var $b=null;function e3(l){$b!==l&&($b=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$b===l&&($b=null);for(var f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],C=l[f+2];if(typeof _!="function"){if(zA(_||v)===null)continue;break}var P=Ja(v);P!==null&&(l.splice(f,3),f-=3,Fv(P,{pending:!0,data:C,method:v.method,action:_},_,C))}}))}function ym(l){function f(ye){return Yb(ye,l)}Kf!==null&&Yb(Kf,l),Jf!==null&&Yb(Jf,l),Zf!==null&&Yb(Zf,l),s0.forEach(f),l0.forEach(f);for(var v=0;v<Qf.length;v++){var _=Qf[v];_.blockedOn===l&&(_.blockedOn=null)}for(;0<Qf.length&&(v=Qf[0],v.blockedOn===null);)ZD(v),v.blockedOn===null&&Qf.shift();if(v=(l.ownerDocument||l).$$reactFormReplay,v!=null)for(_=0;_<v.length;_+=3){var C=v[_],P=v[_+1],V=C[Di]||null;if(typeof P=="function")V||e3(v);else if(V){var te=null;if(P&&P.hasAttribute("formAction")){if(C=P,V=P[Di]||null)te=V.formAction;else if(zA(C)!==null)continue}else te=V.action;typeof te=="function"?v[_+1]=te:(v.splice(_,3),_-=3),e3(v)}}}function t3(){function l(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(V){return C=V})},focusReset:"manual",scroll:"manual"})}function f(){C!==null&&(C(),C=null),_||setTimeout(v,20)}function v(){if(!_&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(v,100),function(){_=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),C!==null&&(C(),C=null)}}}function VA(l){this._internalRoot=l}Kb.prototype.render=VA.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(i(409));var v=f.current,_=uo();jD(v,_,l,f,null,null)},Kb.prototype.unmount=VA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;jD(l.current,2,null,l,null,null),us(),f[Fr]=null}};function Kb(l){this._internalRoot=l}Kb.prototype.unstable_scheduleHydration=function(l){if(l){var f=pa();l={blockedOn:null,target:l,priority:f};for(var v=0;v<Qf.length&&f!==0&&f<Qf[v].priority;v++);Qf.splice(v,0,l),v===0&&ZD(l)}};var n3=e.version;if(n3!=="19.2.3")throw Error(i(527,n3,"19.2.3"));ie.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=c(f),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var UW={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jb.isDisabled&&Jb.supportsFiber)try{We=Jb.inject(UW),Ke=Jb}catch{}}return f0.createRoot=function(l,f){if(!r(l))throw Error(i(299));var v=!1,_="",C=Cb,P=Hv,V=qv;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError)),f=qD(l,1,!1,null,null,v,_,null,C,P,V,t3),l[Fr]=f.current,EA(l),new VA(f)},f0.hydrateRoot=function(l,f,v){if(!r(l))throw Error(i(299));var _=!1,C="",P=Cb,V=Hv,te=qv,ye=null;return v!=null&&(v.unstable_strictMode===!0&&(_=!0),v.identifierPrefix!==void 0&&(C=v.identifierPrefix),v.onUncaughtError!==void 0&&(P=v.onUncaughtError),v.onCaughtError!==void 0&&(V=v.onCaughtError),v.onRecoverableError!==void 0&&(te=v.onRecoverableError),v.formState!==void 0&&(ye=v.formState)),f=qD(l,1,!0,f,v??null,_,C,ye,P,V,te,t3),f.context=WD(null),v=f.current,_=uo(),_=xr(_),C=Tl(_),C.callback=null,yu(v,C,_),v=_,f.current.lanes=v,vn(f,v),gt(f),l[Fr]=f.current,EA(l),new Kb(f)},f0.version="19.2.3",f0}var d3;function YW(){if(d3)return jA.exports;d3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jA.exports=XW(),jA.exports}var $W=YW();const KW=dl($W);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var h3="popstate";function JW(t={}){function e(i,r){let{pathname:a,search:o,hash:s}=i.location;return UC("",{pathname:a,search:o,hash:s},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ay(r)}return QW(e,n,null,t)}function Zi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $l(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZW(){return Math.random().toString(36).substring(2,10)}function p3(t,e){return{usr:t.state,key:t.key,idx:e}}function UC(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ag(e):e,state:n,key:e&&e.key||i||ZW()}}function ay({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ag(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function QW(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,o=r.history,s="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function p(){s="POP";let S=d(),A=S==null?null:S-c;c=S,u&&u({action:s,location:T.location,delta:A})}function g(S,A){s="PUSH";let R=UC(T.location,S,A);c=d()+1;let I=p3(R,c),N=T.createHref(R);try{o.pushState(I,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(N)}a&&u&&u({action:s,location:T.location,delta:1})}function y(S,A){s="REPLACE";let R=UC(T.location,S,A);c=d();let I=p3(R,c),N=T.createHref(R);o.replaceState(I,"",N),a&&u&&u({action:s,location:T.location,delta:0})}function b(S){return ej(S)}let T={get action(){return s},get location(){return t(r,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(h3,p),u=S,()=>{r.removeEventListener(h3,p),u=null}},createHref(S){return e(r,S)},createURL:b,encodeLocation(S){let A=b(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:y,go(S){return o.go(S)}};return T}function ej(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Zi(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ay(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function VB(t,e,n="/"){return tj(t,e,n,!1)}function tj(t,e,n,i){let r=typeof e=="string"?Ag(e):e,a=Yc(r.pathname||"/",n);if(a==null)return null;let o=HB(t);nj(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let c=hj(a);s=fj(o[u],c,i)}return s}function HB(t,e=[],n=[],i="",r=!1){let a=(o,s,u=r,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(i)&&u)return;Zi(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length)}let p=qc([i,d.relativePath]),g=n.concat(d);o.children&&o.children.length>0&&(Zi(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),HB(o.children,e,g,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:uj(p,o.index),routesMeta:g})};return t.forEach((o,s)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,s);else for(let c of qB(o.path))a(o,s,!0,c)}),e}function qB(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let o=qB(i.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),r&&s.push(...o),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function nj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var ij=/^:[\w-]+$/,rj=3,aj=2,oj=1,sj=10,lj=-2,m3=t=>t==="*";function uj(t,e){let n=t.split("/"),i=n.length;return n.some(m3)&&(i+=lj),e&&(i+=aj),n.filter(r=>!m3(r)).reduce((r,a)=>r+(ij.test(a)?rj:a===""?oj:sj),i)}function cj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function fj(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",o=[];for(let s=0;s<i.length;++s){let u=i[s],c=s===i.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=NS({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),g=u.route;if(!p&&c&&n&&!i[i.length-1].route.index&&(p=NS({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:qc([a,p.pathname]),pathnameBase:vj(qc([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=qc([a,p.pathnameBase]))}return o}function NS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=dj(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((c,{paramName:d,isOptional:p},g)=>{if(d==="*"){let b=s[g]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const y=s[g];return p&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function dj(t,e=!1,n=!0){$l(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(i.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function hj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $l(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var pj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function mj(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ag(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=g3(n.substring(1),"/"):a=g3(n,e)):a=e,{pathname:a,search:yj(i),hash:_j(r)}}function g3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function KA(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WB(t){let e=gj(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function jB(t,e,n,i=!1){let r;typeof t=="string"?r=Ag(t):(r={...t},Zi(!r.pathname||!r.pathname.includes("?"),KA("?","pathname","search",r)),Zi(!r.pathname||!r.pathname.includes("#"),KA("#","pathname","hash",r)),Zi(!r.search||!r.search.includes("#"),KA("#","search","hash",r)));let a=t===""||r.pathname==="",o=a?"/":r.pathname,s;if(o==null)s=n;else{let p=e.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;r.pathname=g.join("/")}s=p>=0?e[p]:"/"}let u=mj(r,s),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var qc=t=>t.join("/").replace(/\/\/+/g,"/"),vj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_j=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,bj=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function xj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Sj(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var XB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function YB(t,e){let n=t;if(typeof n!="string"||!pj.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(XB)try{let a=new URL(window.location.href),o=n.startsWith("//")?new URL(a.protocol+n):new URL(n),s=Yc(o.pathname,e);o.origin===a.origin&&s!=null?n=s+o.search+o.hash:r=!0}catch{$l(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $B=["POST","PUT","PATCH","DELETE"];new Set($B);var Ej=["GET",...$B];new Set(Ej);var Mg=G.createContext(null);Mg.displayName="DataRouter";var wE=G.createContext(null);wE.displayName="DataRouterState";var Tj=G.createContext(!1),KB=G.createContext({isTransitioning:!1});KB.displayName="ViewTransition";var Aj=G.createContext(new Map);Aj.displayName="Fetchers";var Mj=G.createContext(null);Mj.displayName="Await";var hl=G.createContext(null);hl.displayName="Navigation";var Vy=G.createContext(null);Vy.displayName="Location";var Xu=G.createContext({outlet:null,matches:[],isDataRoute:!1});Xu.displayName="Route";var TI=G.createContext(null);TI.displayName="RouteError";var JB="REACT_ROUTER_ERROR",wj="REDIRECT",Cj="ROUTE_ERROR_RESPONSE";function Rj(t){if(t.startsWith(`${JB}:${wj}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Ij(t){if(t.startsWith(`${JB}:${Cj}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new bj(e.status,e.statusText,e.data)}catch{}}function Pj(t,{relative:e}={}){Zi(Hy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=G.useContext(hl),{hash:r,pathname:a,search:o}=qy(t,{relative:e}),s=a;return n!=="/"&&(s=a==="/"?n:qc([n,a])),i.createHref({pathname:s,search:o,hash:r})}function Hy(){return G.useContext(Vy)!=null}function sf(){return Zi(Hy(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Vy).location}var ZB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QB(t){G.useContext(hl).static||G.useLayoutEffect(t)}function wg(){let{isDataRoute:t}=G.useContext(Xu);return t?Wj():Nj()}function Nj(){Zi(Hy(),"useNavigate() may be used only in the context of a <Router> component.");let t=G.useContext(Mg),{basename:e,navigator:n}=G.useContext(hl),{matches:i}=G.useContext(Xu),{pathname:r}=sf(),a=JSON.stringify(WB(i)),o=G.useRef(!1);return QB(()=>{o.current=!0}),G.useCallback((u,c={})=>{if($l(o.current,ZB),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=jB(u,JSON.parse(a),r,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qc([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,a,r,t])}G.createContext(null);function Dj(){let{matches:t}=G.useContext(Xu),e=t[t.length-1];return e?e.params:{}}function qy(t,{relative:e}={}){let{matches:n}=G.useContext(Xu),{pathname:i}=sf(),r=JSON.stringify(WB(n));return G.useMemo(()=>jB(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function Oj(t,e){return ez(t,e)}function ez(t,e,n,i,r){var R;Zi(Hy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(hl),{matches:o}=G.useContext(Xu),s=o[o.length-1],u=s?s.params:{},c=s?s.pathname:"/",d=s?s.pathnameBase:"/",p=s&&s.route;{let I=p&&p.path||"";nz(c,!p||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let g=sf(),y;if(e){let I=typeof e=="string"?Ag(e):e;Zi(d==="/"||((R=I.pathname)==null?void 0:R.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${I.pathname}" was given in the \`location\` prop.`),y=I}else y=g;let b=y.pathname||"/",T=b;if(d!=="/"){let I=d.replace(/^\//,"").split("/");T="/"+b.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=VB(t,{pathname:T});$l(p||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),$l(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Bj(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:qc([d,a.encodeLocation?a.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:qc([d,a.encodeLocation?a.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),o,n,i,r);return e&&A?G.createElement(Vy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},A):A}function Lj(){let t=qj(),e=xj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:r},n):null,o)}var Uj=G.createElement(Lj,null),tz=class extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Ij(t.digest);n&&(t=n)}let e=t!==void 0?G.createElement(Xu.Provider,{value:this.props.routeContext},G.createElement(TI.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?G.createElement(Fj,{error:t},e):e}};tz.contextType=Tj;var JA=new WeakMap;function Fj({children:t,error:e}){let{basename:n}=G.useContext(hl);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Rj(e.digest);if(i){let r=JA.get(e);if(r)throw r;let a=YB(i.location,n);if(XB&&!JA.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw JA.set(e,o),o}return G.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function kj({routeContext:t,match:e,children:n}){let i=G.useContext(Mg);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Xu.Provider,{value:t},n)}function Bj(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Zi(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let s=!1,u=-1;if(n)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:g,errors:y}=n,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){s=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let c=n&&i?(d,p)=>{var g,y;i(d,{location:n.location,params:((y=(g=n.matches)==null?void 0:g[0])==null?void 0:y.params)??{},unstable_pattern:Sj(n.matches),errorInfo:p})}:void 0;return a.reduceRight((d,p,g)=>{let y,b=!1,T=null,S=null;n&&(y=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||Uj,s&&(u<0&&g===0?(nz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):u===g&&(b=!0,S=p.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,g+1)),R=()=>{let I;return y?I=T:b?I=S:p.route.Component?I=G.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=d,G.createElement(kj,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:I})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?G.createElement(tz,{location:n.location,revalidation:n.revalidation,component:T,error:y,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:c}):R()},null)}function AI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zj(t){let e=G.useContext(Mg);return Zi(e,AI(t)),e}function Gj(t){let e=G.useContext(wE);return Zi(e,AI(t)),e}function Vj(t){let e=G.useContext(Xu);return Zi(e,AI(t)),e}function MI(t){let e=Vj(t),n=e.matches[e.matches.length-1];return Zi(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Hj(){return MI("useRouteId")}function qj(){var i;let t=G.useContext(TI),e=Gj("useRouteError"),n=MI("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Wj(){let{router:t}=zj("useNavigate"),e=MI("useNavigate"),n=G.useRef(!1);return QB(()=>{n.current=!0}),G.useCallback(async(r,a={})=>{$l(n.current,ZB),n.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var v3={};function nz(t,e,n){!e&&!v3[t]&&(v3[t]=!0,$l(!1,n))}G.memo(jj);function jj({routes:t,future:e,state:n,onError:i}){return ez(t,void 0,n,i,e)}function F0(t){Zi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xj({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1,unstable_useTransitions:o}){Zi(!Hy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:s,navigator:r,static:a,unstable_useTransitions:o,future:{}}),[s,r,a,o]);typeof n=="string"&&(n=Ag(n));let{pathname:c="/",search:d="",hash:p="",state:g=null,key:y="default"}=n,b=G.useMemo(()=>{let T=Yc(c,s);return T==null?null:{location:{pathname:T,search:d,hash:p,state:g,key:y},navigationType:i}},[s,c,d,p,g,y,i]);return $l(b!=null,`<Router basename="${s}"> is not able to match the URL "${c}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:G.createElement(hl.Provider,{value:u},G.createElement(Vy.Provider,{children:e,value:b}))}function Yj({children:t,location:e}){return Oj(FC(t),e)}function FC(t,e=[]){let n=[];return G.Children.forEach(t,(i,r)=>{if(!G.isValidElement(i))return;let a=[...e,r];if(i.type===G.Fragment){n.push.apply(n,FC(i.props.children,a));return}Zi(i.type===F0,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zi(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=FC(i.props.children,a)),n.push(o)}),n}var gS="get",vS="application/x-www-form-urlencoded";function CE(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function $j(t){return CE(t)&&t.tagName.toLowerCase()==="button"}function Kj(t){return CE(t)&&t.tagName.toLowerCase()==="form"}function Jj(t){return CE(t)&&t.tagName.toLowerCase()==="input"}function Zj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qj(t,e){return t.button===0&&(!e||e==="_self")&&!Zj(t)}function kC(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function eX(t,e){let n=kC(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Zb=null;function tX(){if(Zb===null)try{new FormData(document.createElement("form"),0),Zb=!1}catch{Zb=!0}return Zb}var nX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZA(t){return t!=null&&!nX.has(t)?($l(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vS}"`),null):t}function iX(t,e){let n,i,r,a,o;if(Kj(t)){let s=t.getAttribute("action");i=s?Yc(s,e):null,n=t.getAttribute("method")||gS,r=ZA(t.getAttribute("enctype"))||vS,a=new FormData(t)}else if($j(t)||Jj(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(i=u?Yc(u,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||gS,r=ZA(t.getAttribute("formenctype"))||ZA(s.getAttribute("enctype"))||vS,a=new FormData(s,t),!tX()){let{name:c,type:d,value:p}=t;if(d==="image"){let g=c?`${c}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else c&&a.append(c,p)}}else{if(CE(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gS,i=null,r=vS,o=t}return a&&r==="text/plain"&&(o=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wI(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rX(t,e,n,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&Yc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function aX(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oX(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function sX(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let o=await aX(a,n);return o.links?o.links():[]}return[]}));return fX(i.flat(1).filter(oX).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function y3(t,e,n,i,r,a){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,s=(u,c)=>{var d;return n[c].pathname!==u.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||s(u,c)):a==="data"?e.filter((u,c)=>{var p;let d=i.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||s(u,c))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function lX(t,e,{includeHydrateFallback:n}={}){return uX(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function uX(t){return[...new Set(t)]}function cX(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function fX(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(cX(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function iz(){let t=G.useContext(Mg);return wI(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dX(){let t=G.useContext(wE);return wI(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var CI=G.createContext(void 0);CI.displayName="FrameworkContext";function rz(){let t=G.useContext(CI);return wI(t,"You must render this element inside a <HydratedRouter> element"),t}function hX(t,e){let n=G.useContext(CI),[i,r]=G.useState(!1),[a,o]=G.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:p}=e,g=G.useRef(null);G.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=A=>{A.forEach(R=>{o(R.isIntersecting)})},S=new IntersectionObserver(T,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[t]),G.useEffect(()=>{if(i){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[i]);let y=()=>{r(!0)},b=()=>{r(!1),o(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:d0(s,y),onBlur:d0(u,b),onMouseEnter:d0(c,y),onMouseLeave:d0(d,b),onTouchStart:d0(p,y)}]:[!1,g,{}]}function d0(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function pX({page:t,...e}){let{router:n}=iz(),i=G.useMemo(()=>VB(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?G.createElement(gX,{page:t,matches:i,...e}):null}function mX(t){let{manifest:e,routeModules:n}=rz(),[i,r]=G.useState([]);return G.useEffect(()=>{let a=!1;return sX(t,e,n).then(o=>{a||r(o)}),()=>{a=!0}},[t,e,n]),i}function gX({page:t,matches:e,...n}){let i=sf(),{future:r,manifest:a,routeModules:o}=rz(),{basename:s}=iz(),{loaderData:u,matches:c}=dX(),d=G.useMemo(()=>y3(t,e,c,a,i,"data"),[t,e,c,a,i]),p=G.useMemo(()=>y3(t,e,c,a,i,"assets"),[t,e,c,a,i]),g=G.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let T=new Set,S=!1;if(e.forEach(R=>{var N;let I=a.routes[R.route.id];!I||!I.hasLoader||(!d.some(D=>D.route.id===R.route.id)&&R.route.id in u&&((N=o[R.route.id])!=null&&N.shouldRevalidate)||I.hasClientLoader?S=!0:T.add(R.route.id))}),T.size===0)return[];let A=rX(t,s,r.unstable_trailingSlashAwareDataRequests,"data");return S&&T.size>0&&A.searchParams.set("_routes",e.filter(R=>T.has(R.route.id)).map(R=>R.route.id).join(",")),[A.pathname+A.search]},[s,r.unstable_trailingSlashAwareDataRequests,u,i,a,d,e,t,o]),y=G.useMemo(()=>lX(p,a),[p,a]),b=mX(p);return G.createElement(G.Fragment,null,g.map(T=>G.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),y.map(T=>G.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),b.map(({key:T,link:S})=>G.createElement("link",{key:T,nonce:n.nonce,...S,crossOrigin:S.crossOrigin??n.crossOrigin})))}function vX(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yX&&(window.__reactRouterVersion="7.13.0")}catch{}function _X({basename:t,children:e,unstable_useTransitions:n,window:i}){let r=G.useRef();r.current==null&&(r.current=JW({window:i,v5Compat:!0}));let a=r.current,[o,s]=G.useState({action:a.action,location:a.location}),u=G.useCallback(c=>{n===!1?s(c):G.startTransition(()=>s(c))},[n]);return G.useLayoutEffect(()=>a.listen(u),[a,u]),G.createElement(Xj,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}var az=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RE=G.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:o,state:s,target:u,to:c,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},b){let{basename:T,unstable_useTransitions:S}=G.useContext(hl),A=typeof c=="string"&&az.test(c),R=YB(c,T);c=R.to;let I=Pj(c,{relative:r}),[N,D,U]=hX(i,y),k=EX(c,{replace:o,state:s,target:u,preventScrollReset:d,relative:r,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:S});function z(F){e&&e(F),F.defaultPrevented||k(F)}let L=G.createElement("a",{...y,...U,href:R.absoluteURL||I,onClick:R.isExternal||a?e:z,ref:vX(b,D),target:u,"data-discover":!A&&n==="render"?"true":void 0});return N&&!A?G.createElement(G.Fragment,null,L,G.createElement(pX,{page:I})):L});RE.displayName="Link";var bX=G.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:o,viewTransition:s,children:u,...c},d){let p=qy(o,{relative:c.relative}),g=sf(),y=G.useContext(wE),{navigator:b,basename:T}=G.useContext(hl),S=y!=null&&RX(p)&&s===!0,A=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,R=g.pathname,I=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(R=R.toLowerCase(),I=I?I.toLowerCase():null,A=A.toLowerCase()),I&&T&&(I=Yc(I,T)||I);const N=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let D=R===A||!r&&R.startsWith(A)&&R.charAt(N)==="/",U=I!=null&&(I===A||!r&&I.startsWith(A)&&I.charAt(A.length)==="/"),k={isActive:D,isPending:U,isTransitioning:S},z=D?e:void 0,L;typeof i=="function"?L=i(k):L=[i,D?"active":null,U?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(k):a;return G.createElement(RE,{...c,"aria-current":z,className:L,ref:d,style:F,to:o,viewTransition:s},typeof u=="function"?u(k):u)});bX.displayName="NavLink";var xX=G.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:o=gS,action:s,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},b)=>{let{unstable_useTransitions:T}=G.useContext(hl),S=wX(),A=CX(s,{relative:c}),R=o.toLowerCase()==="get"?"get":"post",I=typeof s=="string"&&az.test(s),N=D=>{if(u&&u(D),D.defaultPrevented)return;D.preventDefault();let U=D.nativeEvent.submitter,k=(U==null?void 0:U.getAttribute("formmethod"))||o,z=()=>S(U||D.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:r,state:a,relative:c,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:g});T&&n!==!1?G.startTransition(()=>z()):z()};return G.createElement("form",{ref:b,method:R,action:A,onSubmit:i?u:N,...y,"data-discover":!I&&t==="render"?"true":void 0})});xX.displayName="Form";function SX(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oz(t){let e=G.useContext(Mg);return Zi(e,SX(t)),e}function EX(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s,unstable_useTransitions:u}={}){let c=wg(),d=sf(),p=qy(t,{relative:a});return G.useCallback(g=>{if(Qj(g,e)){g.preventDefault();let y=n!==void 0?n:ay(d)===ay(p),b=()=>c(t,{replace:y,state:i,preventScrollReset:r,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s});u?G.startTransition(()=>b()):b()}},[d,c,p,n,i,e,t,r,a,o,s,u])}function TX(t){$l(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(kC(t)),n=G.useRef(!1),i=sf(),r=G.useMemo(()=>eX(i.search,n.current?null:e.current),[i.search]),a=wg(),o=G.useCallback((s,u)=>{const c=kC(typeof s=="function"?s(new URLSearchParams(r)):s);n.current=!0,a("?"+c,u)},[a,r]);return[r,o]}var AX=0,MX=()=>`__${String(++AX)}__`;function wX(){let{router:t}=oz("useSubmit"),{basename:e}=G.useContext(hl),n=Hj(),i=t.fetch,r=t.navigate;return G.useCallback(async(a,o={})=>{let{action:s,method:u,encType:c,formData:d,body:p}=iX(a,e);if(o.navigate===!1){let g=o.fetcherKey||MX();await i(g,n,o.action||s,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||u,formEncType:o.encType||c,flushSync:o.flushSync})}else await r(o.action||s,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||u,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,r,e,n])}function CX(t,{relative:e}={}){let{basename:n}=G.useContext(hl),i=G.useContext(Xu);Zi(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...qy(t||".",{relative:e})},o=sf();if(t==null){a.search=o.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(d=>d==="")){s.delete("index"),u.filter(p=>p).forEach(p=>s.append("index",p));let d=s.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:qc([n,a.pathname])),ay(a)}function RX(t,{relative:e}={}){let n=G.useContext(KB);Zi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=oz("useViewTransitionState"),r=qy(t,{relative:e});if(!n.isTransitioning)return!1;let a=Yc(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Yc(n.nextLocation.pathname,i)||n.nextLocation.pathname;return NS(r.pathname,o)!=null||NS(r.pathname,a)!=null}var sz=GB();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PX=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),_3=t=>{const e=PX(t);return e.charAt(0).toUpperCase()+e.slice(1)},lz=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),NX=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:o,...s},u)=>G.createElement("svg",{ref:u,...DX,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:lz("lucide",r),...!a&&!NX(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,d])=>G.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=(t,e)=>{const n=G.forwardRef(({className:i,...r},a)=>G.createElement(OX,{ref:a,iconNode:e,className:lz(`lucide-${IX(_3(t))}`,`lucide-${t}`,i),...r}));return n.displayName=_3(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uz=Pn("arrow-left",LX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],FX=Pn("bookmark-check",UX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],b3=Pn("box",kX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zX=Pn("chart-column",BX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],QA=Pn("check",GX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],HX=Pn("chevron-left",VX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cz=Pn("chevron-right",qX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jX=Pn("circle-alert",WX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x3=Pn("circle-check-big",XX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$X=Pn("circle-x",YX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],S3=Pn("copy",KX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ZX=Pn("database",JX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fz=Pn("download",QX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],RI=Pn("external-link",eY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],dz=Pn("file-braces",tY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],E3=Pn("funnel",nY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],rY=Pn("globe",iY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],BC=Pn("history",aY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sY=Pn("info",oY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],uY=Pn("key-round",lY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hz=Pn("loader-circle",cY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dY=Pn("lock",fY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],T3=Pn("log-out",hY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pz=Pn("map-pin",pY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],gY=Pn("menu",mY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],A3=Pn("radio",vY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mz=Pn("search",yY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bY=Pn("send",_Y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],j0=Pn("shield-check",xY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],zC=Pn("tag",SY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],TY=Pn("trending-down",EY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],MY=Pn("trending-up",AY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CY=Pn("triangle-alert",wY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],IY=Pn("twitter",RY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],NY=Pn("upload",PY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],OY=Pn("user",DY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],UY=Pn("x",LY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],GC=Pn("zap",FY),kY=[{id:"BOE-A-2024-4161",title:"Ley de Presupuestos Generales del Estado para el ejercicio 2024",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-4161",category:"Economa"},{id:"BOE-A-2024-5012",title:"Reforma urgente del Mercado de Trabajo y fomento de la contratacin indefinida",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-5012",category:"Social"},{id:"BOE-A-2024-6123",title:"Regulacin de Vivienda Pblica y medidas contra el desahucio",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-6123",category:"Vivienda"},{id:"BOE-A-2024-7788",title:"Subvenciones directas a la Innovacin Digital en PYMES",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-7788",category:"Tecnologa"},{id:"BOE-A-2024-8901",title:"Modificacin de la Ley de Montes y gestin forestal sostenible",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-8901",category:"Medio Ambiente"},{id:"BOE-A-2024-9122",title:"Protocolo de actuacin contra la sequa en la cuenca del Ebro",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-9122",category:"Recursos Naturales"},{id:"BOE-A-2024-1055",title:"Plan de fomento de la Inteligencia Artificial en la Administracin Pblica",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-1055",category:"Innovacin"},{id:"BOE-A-2024-1122",title:"Ayudas extraordinarias al sector del transporte por carretera",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-1122",category:"Transportes"},{id:"BOE-A-2024-2233",title:"Regulacin del teletrabajo en las Fuerzas y Cuerpos de Seguridad",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-2233",category:"Interior"},{id:"BOE-A-2024-3344",title:"Convenio colectivo del sector de la industria cinematogrfica",url:"https://www.boe.es/diario_boe/xml.php?id=BOE-A-2024-3344",category:"Cultura"}],BY=`
Eres un Agente de Inteligencia Cvica de lite. Tu misin es desmantelar la opacidad del lenguaje legislativo espaol.
Analiza el BOE buscando:
- 'Gastos Fantasma': Partidas presupuestarias sin destino claro.
- 'Incongruencia Ideolgica': Comparar el texto con promesas electorales previas o lgica de transparencia.
- 'Impacto de Gnero y Clase': Quines son los ganadores y perdedores socioeconmicos.

Tu respuesta debe ser un objeto JSON vlido.
`;var zY={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GY,VY;function HY(){return{geminiUrl:GY,vertexUrl:VY}}function qY(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const o=HY();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:n:(a=o.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf{}function It(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function M(t,e,n){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const s=o.slice(0,-2);if(!(s in t))if(Array.isArray(n))t[s]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[s])){const u=t[s];if(Array.isArray(n))for(let c=0;c<u.length;c++){const d=u[c];M(d,e.slice(a+1),n[c])}else for(const c of u)M(c,e.slice(a+1),n)}return}else if(o.endsWith("[0]")){const s=o.slice(0,-3);s in t||(t[s]=[{}]);const u=t[s];M(u[0],e.slice(a+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function E(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const o=t[a];return Array.isArray(o)?o.map(s=>E(s,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function WY(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),o=new Set;let s=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){s=u;break}if(s!==-1&&a.length>s)for(let u=s;u<a.length;u++){const c=a[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}VC(t,r,a,0,o)}}function VC(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const o=a.slice(0,-2),s=t;if(o in s&&Array.isArray(s[o]))for(const u of s[o])VC(u,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,s=Object.keys(o).filter(c=>!c.startsWith("_")&&!r.has(c)),u={};for(const c of s)u[c]=o[c];for(const[c,d]of Object.entries(u)){const p=[];for(const g of n.slice(i))g==="*"?p.push(c):p.push(g);M(o,p,d)}for(const c of s)delete o[c]}}else{const o=t;a in o&&VC(o[a],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function II(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jY(t){const e={},n=E(t,["operationName"]);n!=null&&M(e,["operationName"],n);const i=E(t,["resourceName"]);return i!=null&&M(e,["_url","resourceName"],i),e}function XY(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response","generateVideoResponse"]);return o!=null&&M(e,["response"],$Y(o)),e}function YY(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response"]);return o!=null&&M(e,["response"],KY(o)),e}function $Y(t){const e={},n=E(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>JY(o))),M(e,["generatedVideos"],a)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&M(e,["raiMediaFilteredCount"],i);const r=E(t,["raiMediaFilteredReasons"]);return r!=null&&M(e,["raiMediaFilteredReasons"],r),e}function KY(t){const e={},n=E(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>ZY(o))),M(e,["generatedVideos"],a)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&M(e,["raiMediaFilteredCount"],i);const r=E(t,["raiMediaFilteredReasons"]);return r!=null&&M(e,["raiMediaFilteredReasons"],r),e}function JY(t){const e={},n=E(t,["video"]);return n!=null&&M(e,["video"],r$(n)),e}function ZY(t){const e={},n=E(t,["_self"]);return n!=null&&M(e,["video"],a$(n)),e}function QY(t){const e={},n=E(t,["operationName"]);return n!=null&&M(e,["_url","operationName"],n),e}function e$(t){const e={},n=E(t,["operationName"]);return n!=null&&M(e,["_url","operationName"],n),e}function t$(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response"]);return o!=null&&M(e,["response"],n$(o)),e}function n$(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["parent"]);i!=null&&M(e,["parent"],i);const r=E(t,["documentName"]);return r!=null&&M(e,["documentName"],r),e}function gz(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response"]);return o!=null&&M(e,["response"],i$(o)),e}function i$(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["parent"]);i!=null&&M(e,["parent"],i);const r=E(t,["documentName"]);return r!=null&&M(e,["documentName"],r),e}function r$(t){const e={},n=E(t,["uri"]);n!=null&&M(e,["uri"],n);const i=E(t,["encodedVideo"]);i!=null&&M(e,["videoBytes"],II(i));const r=E(t,["encoding"]);return r!=null&&M(e,["mimeType"],r),e}function a$(t){const e={},n=E(t,["gcsUri"]);n!=null&&M(e,["uri"],n);const i=E(t,["bytesBase64Encoded"]);i!=null&&M(e,["videoBytes"],II(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var M3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(M3||(M3={}));var w3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(w3||(w3={}));var C3;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(C3||(C3={}));var ur;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ur||(ur={}));var R3;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R3||(R3={}));var I3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(I3||(I3={}));var P3;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(P3||(P3={}));var N3;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(N3||(N3={}));var D3;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(D3||(D3={}));var O3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(O3||(O3={}));var L3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(L3||(L3={}));var U3;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(U3||(U3={}));var F3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(F3||(F3={}));var k3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(k3||(k3={}));var B3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(B3||(B3={}));var z3;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(z3||(z3={}));var G3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(G3||(G3={}));var V3;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(V3||(V3={}));var H3;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(H3||(H3={}));var q3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(q3||(q3={}));var W3;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(W3||(W3={}));var DS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(DS||(DS={}));var j3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(j3||(j3={}));var X3;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(X3||(X3={}));var Y3;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Y3||(Y3={}));var HC;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(HC||(HC={}));var $3;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($3||($3={}));var K3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(K3||(K3={}));var qC;(function(t){t.COLLECTION="COLLECTION"})(qC||(qC={}));var J3;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(J3||(J3={}));var Z3;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Z3||(Z3={}));var Q3;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Q3||(Q3={}));var eO;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(eO||(eO={}));var tO;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tO||(tO={}));var nO;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nO||(nO={}));var iO;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(iO||(iO={}));var rO;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rO||(rO={}));var aO;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(aO||(aO={}));var oO;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(oO||(oO={}));var sO;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(sO||(sO={}));var lO;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(lO||(lO={}));var uO;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(uO||(uO={}));var cO;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cO||(cO={}));var fO;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(fO||(fO={}));var dO;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(dO||(dO={}));var hO;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(hO||(hO={}));var pO;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pO||(pO={}));var mO;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(mO||(mO={}));var gO;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gO||(gO={}));var vO;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(vO||(vO={}));var yO;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yO||(yO={}));var _O;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_O||(_O={}));var bO;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(bO||(bO={}));var xO;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xO||(xO={}));var SO;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(SO||(SO={}));var EO;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(EO||(EO={}));var $m;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})($m||($m={}));class WC{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class h0{get text(){var e,n,i,r,a,o,s,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const g of(u=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)!==null&&u!==void 0?u:[]){for(const[y,b]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(b!==null||b!==void 0)&&p.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,i,r,a,o,s,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const p of(u=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)!==null&&u!==void 0?u:[]){for(const[g,y]of Object.entries(p))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,r,a,o,s,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,r,a,o,s,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(u=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,r,a,o,s,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(u=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class TO{}class AO{}class o${}class s${}class l${}class u${}class MO{}class wO{}class CO{}class c${}class OS{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new OS;let r;const a=e;return n?r=YY(a):r=XY(a),Object.assign(i,r),i}}class RO{}class IO{}class PO{}class NO{}class f${}class d${}class h${}class PI{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new PI,a=t$(e);return Object.assign(i,a),i}}class p${}class m${}class g${}class DO{}class v${get text(){var e,n,i;let r="",a=!1;const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(s))u!=="text"&&u!=="thought"&&c!==null&&o.push(u);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;a=!0,r+=s.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[s,u]of Object.entries(o))s!=="inlineData"&&u!==null&&a.push(s);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class y${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class NI{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new NI,a=gz(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vz(t,e){const n=Xn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function yz(t){return Array.isArray(t)?t.map(e=>LS(e)):[LS(t)]}function LS(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function _z(t){const e=LS(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bz(t){const e=LS(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OO(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function xz(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>OO(e)):[OO(t)]}function jC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function LO(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function UO(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wa(t){if(t==null)throw new Error("ContentUnion is required");return jC(t)?t:{role:"user",parts:xz(t)}}function DI(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Wa(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Wa(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Wa(n)):[Wa(e)]}function al(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(LO(t)||UO(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wa(t)]}const e=[],n=[],i=jC(t[0]);for(const r of t){const a=jC(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(LO(r)||UO(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:xz(n)}),e}function _$(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ur).includes(n[0].toUpperCase())?n[0].toUpperCase():ur.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ur).includes(i.toUpperCase())?i.toUpperCase():ur.TYPE_UNSPECIFIED})}}function ng(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&_$(t.type,e);for(const[o,s]of Object.entries(t))if(s!=null)if(o=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(ur).includes(s.toUpperCase())?s.toUpperCase():ur.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=ng(s);else if(i.includes(o)){const u=[];for(const c of s){if(c.type=="null"){e.nullable=!0;continue}u.push(ng(c))}e[o]=u}else if(r.includes(o)){const u={};for(const[c,d]of Object.entries(s))u[c]=ng(d);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=s}return e}function OI(t){return ng(t)}function LI(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function UI(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Cg(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ng(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ng(e.response));return t}function Rg(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function b$(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function uf(t,e){if(typeof e!="string")throw new Error("name must be a string");return b$(t,e,"cachedContents")}function Sz(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ad(t){return II(t)}function x$(t){return t!=null&&typeof t=="object"&&"name"in t}function S$(t){return t!=null&&typeof t=="object"&&"video"in t}function E$(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ez(t){var e;let n;if(x$(t)&&(n=t.name),!(E$(t)&&(n=t.uri,n===void 0))&&!(S$(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Tz(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Az(t){for(const e of["models","tunedModels","publisherModels"])if(T$(t,e))return t[e];return[]}function T$(t,e){return t!==null&&typeof t=="object"&&e in t}function A$(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function M$(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const o=A$(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Mz(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function w$(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function wz(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ig(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Cz(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C$(t){const e={},n=E(t,["responsesFile"]);n!=null&&M(e,["fileName"],n);const i=E(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>lK(o))),M(e,["inlinedResponses"],a)}const r=E(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["inlinedEmbedContentResponses"],a)}return e}function R$(t){const e={},n=E(t,["predictionsFormat"]);n!=null&&M(e,["format"],n);const i=E(t,["gcsDestination","outputUriPrefix"]);i!=null&&M(e,["gcsUri"],i);const r=E(t,["bigqueryDestination","outputUri"]);return r!=null&&M(e,["bigqueryUri"],r),e}function I$(t){const e={},n=E(t,["format"]);n!=null&&M(e,["predictionsFormat"],n);const i=E(t,["gcsUri"]);i!=null&&M(e,["gcsDestination","outputUriPrefix"],i);const r=E(t,["bigqueryUri"]);if(r!=null&&M(e,["bigqueryDestination","outputUri"],r),E(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(E(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function yS(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata","displayName"]);i!=null&&M(e,["displayName"],i);const r=E(t,["metadata","state"]);r!=null&&M(e,["state"],Cz(r));const a=E(t,["metadata","createTime"]);a!=null&&M(e,["createTime"],a);const o=E(t,["metadata","endTime"]);o!=null&&M(e,["endTime"],o);const s=E(t,["metadata","updateTime"]);s!=null&&M(e,["updateTime"],s);const u=E(t,["metadata","model"]);u!=null&&M(e,["model"],u);const c=E(t,["metadata","output"]);return c!=null&&M(e,["dest"],C$(wz(c))),e}function XC(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["displayName"]);i!=null&&M(e,["displayName"],i);const r=E(t,["state"]);r!=null&&M(e,["state"],Cz(r));const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["createTime"]);o!=null&&M(e,["createTime"],o);const s=E(t,["startTime"]);s!=null&&M(e,["startTime"],s);const u=E(t,["endTime"]);u!=null&&M(e,["endTime"],u);const c=E(t,["updateTime"]);c!=null&&M(e,["updateTime"],c);const d=E(t,["model"]);d!=null&&M(e,["model"],d);const p=E(t,["inputConfig"]);p!=null&&M(e,["src"],P$(p));const g=E(t,["outputConfig"]);g!=null&&M(e,["dest"],R$(wz(g)));const y=E(t,["completionStats"]);return y!=null&&M(e,["completionStats"],y),e}function P$(t){const e={},n=E(t,["instancesFormat"]);n!=null&&M(e,["format"],n);const i=E(t,["gcsSource","uris"]);i!=null&&M(e,["gcsUri"],i);const r=E(t,["bigquerySource","inputUri"]);return r!=null&&M(e,["bigqueryUri"],r),e}function N$(t,e){const n={};if(E(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=E(e,["fileName"]);i!=null&&M(n,["fileName"],i);const r=E(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>sK(t,o))),M(n,["requests","requests"],a)}return n}function D$(t){const e={},n=E(t,["format"]);n!=null&&M(e,["instancesFormat"],n);const i=E(t,["gcsUri"]);i!=null&&M(e,["gcsSource","uris"],i);const r=E(t,["bigqueryUri"]);if(r!=null&&M(e,["bigquerySource","inputUri"],r),E(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(E(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function O$(t){const e={},n=E(t,["data"]);if(n!=null&&M(e,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function L$(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function U$(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function F$(t){const e={},n=E(t,["content"]);n!=null&&M(e,["content"],n);const i=E(t,["citationMetadata"]);i!=null&&M(e,["citationMetadata"],k$(i));const r=E(t,["tokenCount"]);r!=null&&M(e,["tokenCount"],r);const a=E(t,["finishReason"]);a!=null&&M(e,["finishReason"],a);const o=E(t,["avgLogprobs"]);o!=null&&M(e,["avgLogprobs"],o);const s=E(t,["groundingMetadata"]);s!=null&&M(e,["groundingMetadata"],s);const u=E(t,["index"]);u!=null&&M(e,["index"],u);const c=E(t,["logprobsResult"]);c!=null&&M(e,["logprobsResult"],c);const d=E(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),M(e,["safetyRatings"],g)}const p=E(t,["urlContextMetadata"]);return p!=null&&M(e,["urlContextMetadata"],p),e}function k$(t){const e={},n=E(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),M(e,["citations"],i)}return e}function Rz(t){const e={},n=E(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>mK(a))),M(e,["parts"],r)}const i=E(t,["role"]);return i!=null&&M(e,["role"],i),e}function B$(t,e){const n={},i=E(t,["displayName"]);if(e!==void 0&&i!=null&&M(e,["batch","displayName"],i),E(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function z$(t,e){const n={},i=E(t,["displayName"]);e!==void 0&&i!=null&&M(e,["displayName"],i);const r=E(t,["dest"]);return e!==void 0&&r!=null&&M(e,["outputConfig"],I$(w$(r))),n}function FO(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["src"]);r!=null&&M(n,["batch","inputConfig"],N$(t,Mz(t,r)));const a=E(e,["config"]);return a!=null&&B$(a,n),n}function G$(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["model"],Xn(t,i));const r=E(e,["src"]);r!=null&&M(n,["inputConfig"],D$(Mz(t,r)));const a=E(e,["config"]);return a!=null&&z$(a,n),n}function V$(t,e){const n={},i=E(t,["displayName"]);return e!==void 0&&i!=null&&M(e,["batch","displayName"],i),n}function H$(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["src"]);r!=null&&M(n,["batch","inputConfig"],K$(t,r));const a=E(e,["config"]);return a!=null&&V$(a,n),n}function q$(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function W$(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function j$(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["name"]);i!=null&&M(e,["name"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);return a!=null&&M(e,["error"],a),e}function X$(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["name"]);i!=null&&M(e,["name"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);return a!=null&&M(e,["error"],a),e}function Y$(t,e){const n={},i=E(e,["contents"]);if(i!=null){let a=DI(t,i);Array.isArray(a)&&(a=a.map(o=>o)),M(n,["requests[]","request","content"],a)}const r=E(e,["config"]);return r!=null&&(M(n,["_self"],$$(r,n)),WY(n,{"requests[].*":"requests[].request.*"})),n}function $$(t,e){const n={},i=E(t,["taskType"]);e!==void 0&&i!=null&&M(e,["requests[]","taskType"],i);const r=E(t,["title"]);e!==void 0&&r!=null&&M(e,["requests[]","title"],r);const a=E(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&M(e,["requests[]","outputDimensionality"],a),E(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function K$(t,e){const n={},i=E(e,["fileName"]);i!=null&&M(n,["file_name"],i);const r=E(e,["inlinedRequests"]);return r!=null&&M(n,["requests"],Y$(t,r)),n}function J$(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&M(e,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function Z$(t){const e={},n=E(t,["id"]);n!=null&&M(e,["id"],n);const i=E(t,["args"]);i!=null&&M(e,["args"],i);const r=E(t,["name"]);if(r!=null&&M(e,["name"],r),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q$(t){const e={},n=E(t,["allowedFunctionNames"]);n!=null&&M(e,["allowedFunctionNames"],n);const i=E(t,["mode"]);if(i!=null&&M(e,["mode"],i),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eK(t,e,n){const i={},r=E(e,["systemInstruction"]);n!==void 0&&r!=null&&M(n,["systemInstruction"],Rz(Wa(r)));const a=E(e,["temperature"]);a!=null&&M(i,["temperature"],a);const o=E(e,["topP"]);o!=null&&M(i,["topP"],o);const s=E(e,["topK"]);s!=null&&M(i,["topK"],s);const u=E(e,["candidateCount"]);u!=null&&M(i,["candidateCount"],u);const c=E(e,["maxOutputTokens"]);c!=null&&M(i,["maxOutputTokens"],c);const d=E(e,["stopSequences"]);d!=null&&M(i,["stopSequences"],d);const p=E(e,["responseLogprobs"]);p!=null&&M(i,["responseLogprobs"],p);const g=E(e,["logprobs"]);g!=null&&M(i,["logprobs"],g);const y=E(e,["presencePenalty"]);y!=null&&M(i,["presencePenalty"],y);const b=E(e,["frequencyPenalty"]);b!=null&&M(i,["frequencyPenalty"],b);const T=E(e,["seed"]);T!=null&&M(i,["seed"],T);const S=E(e,["responseMimeType"]);S!=null&&M(i,["responseMimeType"],S);const A=E(e,["responseSchema"]);A!=null&&M(i,["responseSchema"],OI(A));const R=E(e,["responseJsonSchema"]);if(R!=null&&M(i,["responseJsonSchema"],R),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=E(e,["safetySettings"]);if(n!==void 0&&I!=null){let X=I;Array.isArray(X)&&(X=X.map(Q=>gK(Q))),M(n,["safetySettings"],X)}const N=E(e,["tools"]);if(n!==void 0&&N!=null){let X=Rg(N);Array.isArray(X)&&(X=X.map(Q=>yK(Cg(Q)))),M(n,["tools"],X)}const D=E(e,["toolConfig"]);if(n!==void 0&&D!=null&&M(n,["toolConfig"],vK(D)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=E(e,["cachedContent"]);n!==void 0&&U!=null&&M(n,["cachedContent"],uf(t,U));const k=E(e,["responseModalities"]);k!=null&&M(i,["responseModalities"],k);const z=E(e,["mediaResolution"]);z!=null&&M(i,["mediaResolution"],z);const L=E(e,["speechConfig"]);if(L!=null&&M(i,["speechConfig"],LI(L)),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=E(e,["thinkingConfig"]);F!=null&&M(i,["thinkingConfig"],F);const j=E(e,["imageConfig"]);j!=null&&M(i,["imageConfig"],oK(j));const W=E(e,["enableEnhancedCivicAnswers"]);if(W!=null&&M(i,["enableEnhancedCivicAnswers"],W),E(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function tK(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>F$(c))),M(e,["candidates"],u)}const r=E(t,["modelVersion"]);r!=null&&M(e,["modelVersion"],r);const a=E(t,["promptFeedback"]);a!=null&&M(e,["promptFeedback"],a);const o=E(t,["responseId"]);o!=null&&M(e,["responseId"],o);const s=E(t,["usageMetadata"]);return s!=null&&M(e,["usageMetadata"],s),e}function nK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function iK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],Ig(t,i)),n}function rK(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&M(e,["enableWidget"],n),e}function aK(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&M(e,["timeRangeFilter"],n),e}function oK(t){const e={},n=E(t,["aspectRatio"]);n!=null&&M(e,["aspectRatio"],n);const i=E(t,["imageSize"]);if(i!=null&&M(e,["imageSize"],i),E(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(E(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sK(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["request","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let s=al(r);Array.isArray(s)&&(s=s.map(u=>Rz(u))),M(n,["request","contents"],s)}const a=E(e,["metadata"]);a!=null&&M(n,["metadata"],a);const o=E(e,["config"]);return o!=null&&M(n,["request","generationConfig"],eK(t,o,E(n,["request"],{}))),n}function lK(t){const e={},n=E(t,["response"]);n!=null&&M(e,["response"],tK(n));const i=E(t,["error"]);return i!=null&&M(e,["error"],i),e}function uK(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);if(e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),E(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function cK(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);e!==void 0&&r!=null&&M(e,["_query","pageToken"],r);const a=E(t,["filter"]);return e!==void 0&&a!=null&&M(e,["_query","filter"],a),n}function fK(t){const e={},n=E(t,["config"]);return n!=null&&uK(n,e),e}function dK(t){const e={},n=E(t,["config"]);return n!=null&&cK(n,e),e}function hK(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>yS(o))),M(e,["batchJobs"],a)}return e}function pK(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>XC(o))),M(e,["batchJobs"],a)}return e}function mK(t){const e={},n=E(t,["mediaResolution"]);n!=null&&M(e,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&M(e,["codeExecutionResult"],i);const r=E(t,["executableCode"]);r!=null&&M(e,["executableCode"],r);const a=E(t,["fileData"]);a!=null&&M(e,["fileData"],J$(a));const o=E(t,["functionCall"]);o!=null&&M(e,["functionCall"],Z$(o));const s=E(t,["functionResponse"]);s!=null&&M(e,["functionResponse"],s);const u=E(t,["inlineData"]);u!=null&&M(e,["inlineData"],O$(u));const c=E(t,["text"]);c!=null&&M(e,["text"],c);const d=E(t,["thought"]);d!=null&&M(e,["thought"],d);const p=E(t,["thoughtSignature"]);p!=null&&M(e,["thoughtSignature"],p);const g=E(t,["videoMetadata"]);return g!=null&&M(e,["videoMetadata"],g),e}function gK(t){const e={},n=E(t,["category"]);if(n!=null&&M(e,["category"],n),E(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=E(t,["threshold"]);return i!=null&&M(e,["threshold"],i),e}function vK(t){const e={},n=E(t,["retrievalConfig"]);n!=null&&M(e,["retrievalConfig"],n);const i=E(t,["functionCallingConfig"]);return i!=null&&M(e,["functionCallingConfig"],Q$(i)),e}function yK(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&M(e,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&M(e,["fileSearch"],i);const r=E(t,["codeExecution"]);if(r!=null&&M(e,["codeExecution"],r),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=E(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),M(e,["functionDeclarations"],d)}const o=E(t,["googleMaps"]);o!=null&&M(e,["googleMaps"],rK(o));const s=E(t,["googleSearch"]);s!=null&&M(e,["googleSearch"],aK(s));const u=E(t,["googleSearchRetrieval"]);u!=null&&M(e,["googleSearchRetrieval"],u);const c=E(t,["urlContext"]);return c!=null&&M(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $c;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})($c||($c={}));class fp{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _K extends lf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fp($c.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=FO(this.apiClient,e),i=n._url,r=It("{model}:batchGenerateContent",i),s=n.batch.inputConfig.requests,u=s.requests,c=[];for(const d of u){const p=Object.assign({},d);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=g,p.request=y}c.push(p)}return s.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(o)i.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=G$(this.apiClient,e);return s=It("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>XC(d))}else{const c=FO(this.apiClient,e);return s=It("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>yS(d))}}async createEmbeddingsInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=H$(this.apiClient,e);return a=It("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>yS(u))}}async get(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=iK(this.apiClient,e);return s=It("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>XC(d))}else{const c=nK(this.apiClient,e);return s=It("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>yS(d))}}async cancel(e){var n,i,r,a;let o="",s={};if(this.apiClient.isVertexAI()){const u=U$(this.apiClient,e);o=It("batchPredictionJobs/{name}:cancel",u._url),s=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=L$(this.apiClient,e);o=It("batches/{name}:cancel",u._url),s=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=dK(e);return s=It("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=pK(d),g=new DO;return Object.assign(g,p),g})}else{const c=fK(e);return s=It("batches",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=hK(d),g=new DO;return Object.assign(g,p),g})}}async delete(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=W$(this.apiClient,e);return s=It("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>X$(d))}else{const c=q$(this.apiClient,e);return s=It("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>j$(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bK(t){const e={},n=E(t,["data"]);if(n!=null&&M(e,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function kO(t){const e={},n=E(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>HK(a))),M(e,["parts"],r)}const i=E(t,["role"]);return i!=null&&M(e,["role"],i),e}function xK(t,e){const n={},i=E(t,["ttl"]);e!==void 0&&i!=null&&M(e,["ttl"],i);const r=E(t,["expireTime"]);e!==void 0&&r!=null&&M(e,["expireTime"],r);const a=E(t,["displayName"]);e!==void 0&&a!=null&&M(e,["displayName"],a);const o=E(t,["contents"]);if(e!==void 0&&o!=null){let d=al(o);Array.isArray(d)&&(d=d.map(p=>kO(p))),M(e,["contents"],d)}const s=E(t,["systemInstruction"]);e!==void 0&&s!=null&&M(e,["systemInstruction"],kO(Wa(s)));const u=E(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>WK(p))),M(e,["tools"],d)}const c=E(t,["toolConfig"]);if(e!==void 0&&c!=null&&M(e,["toolConfig"],qK(c)),E(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function SK(t,e){const n={},i=E(t,["ttl"]);e!==void 0&&i!=null&&M(e,["ttl"],i);const r=E(t,["expireTime"]);e!==void 0&&r!=null&&M(e,["expireTime"],r);const a=E(t,["displayName"]);e!==void 0&&a!=null&&M(e,["displayName"],a);const o=E(t,["contents"]);if(e!==void 0&&o!=null){let p=al(o);Array.isArray(p)&&(p=p.map(g=>g)),M(e,["contents"],p)}const s=E(t,["systemInstruction"]);e!==void 0&&s!=null&&M(e,["systemInstruction"],Wa(s));const u=E(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>jK(g))),M(e,["tools"],p)}const c=E(t,["toolConfig"]);e!==void 0&&c!=null&&M(e,["toolConfig"],c);const d=E(t,["kmsKeyName"]);return e!==void 0&&d!=null&&M(e,["encryption_spec","kmsKeyName"],d),n}function EK(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["model"],vz(t,i));const r=E(e,["config"]);return r!=null&&xK(r,n),n}function TK(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["model"],vz(t,i));const r=E(e,["config"]);return r!=null&&SK(r,n),n}function AK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],uf(t,i)),n}function MK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],uf(t,i)),n}function wK(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function CK(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function RK(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&M(e,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function IK(t){const e={},n=E(t,["id"]);n!=null&&M(e,["id"],n);const i=E(t,["args"]);i!=null&&M(e,["args"],i);const r=E(t,["name"]);if(r!=null&&M(e,["name"],r),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PK(t){const e={},n=E(t,["allowedFunctionNames"]);n!=null&&M(e,["allowedFunctionNames"],n);const i=E(t,["mode"]);if(i!=null&&M(e,["mode"],i),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function NK(t){const e={},n=E(t,["description"]);n!=null&&M(e,["description"],n);const i=E(t,["name"]);i!=null&&M(e,["name"],i);const r=E(t,["parameters"]);r!=null&&M(e,["parameters"],r);const a=E(t,["parametersJsonSchema"]);a!=null&&M(e,["parametersJsonSchema"],a);const o=E(t,["response"]);o!=null&&M(e,["response"],o);const s=E(t,["responseJsonSchema"]);if(s!=null&&M(e,["responseJsonSchema"],s),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function DK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],uf(t,i)),n}function OK(t,e){const n={},i=E(e,["name"]);return i!=null&&M(n,["_url","name"],uf(t,i)),n}function LK(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&M(e,["enableWidget"],n),e}function UK(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&M(e,["timeRangeFilter"],n),e}function FK(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);return e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),n}function kK(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);return e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),n}function BK(t){const e={},n=E(t,["config"]);return n!=null&&FK(n,e),e}function zK(t){const e={},n=E(t,["config"]);return n!=null&&kK(n,e),e}function GK(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["cachedContents"],a)}return e}function VK(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["cachedContents"],a)}return e}function HK(t){const e={},n=E(t,["mediaResolution"]);n!=null&&M(e,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&M(e,["codeExecutionResult"],i);const r=E(t,["executableCode"]);r!=null&&M(e,["executableCode"],r);const a=E(t,["fileData"]);a!=null&&M(e,["fileData"],RK(a));const o=E(t,["functionCall"]);o!=null&&M(e,["functionCall"],IK(o));const s=E(t,["functionResponse"]);s!=null&&M(e,["functionResponse"],s);const u=E(t,["inlineData"]);u!=null&&M(e,["inlineData"],bK(u));const c=E(t,["text"]);c!=null&&M(e,["text"],c);const d=E(t,["thought"]);d!=null&&M(e,["thought"],d);const p=E(t,["thoughtSignature"]);p!=null&&M(e,["thoughtSignature"],p);const g=E(t,["videoMetadata"]);return g!=null&&M(e,["videoMetadata"],g),e}function qK(t){const e={},n=E(t,["retrievalConfig"]);n!=null&&M(e,["retrievalConfig"],n);const i=E(t,["functionCallingConfig"]);return i!=null&&M(e,["functionCallingConfig"],PK(i)),e}function WK(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&M(e,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&M(e,["fileSearch"],i);const r=E(t,["codeExecution"]);if(r!=null&&M(e,["codeExecution"],r),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=E(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),M(e,["functionDeclarations"],d)}const o=E(t,["googleMaps"]);o!=null&&M(e,["googleMaps"],LK(o));const s=E(t,["googleSearch"]);s!=null&&M(e,["googleSearch"],UK(s));const u=E(t,["googleSearchRetrieval"]);u!=null&&M(e,["googleSearchRetrieval"],u);const c=E(t,["urlContext"]);return c!=null&&M(e,["urlContext"],c),e}function jK(t){const e={},n=E(t,["retrieval"]);n!=null&&M(e,["retrieval"],n);const i=E(t,["computerUse"]);if(i!=null&&M(e,["computerUse"],i),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=E(t,["codeExecution"]);r!=null&&M(e,["codeExecution"],r);const a=E(t,["enterpriseWebSearch"]);a!=null&&M(e,["enterpriseWebSearch"],a);const o=E(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>NK(g))),M(e,["functionDeclarations"],p)}const s=E(t,["googleMaps"]);s!=null&&M(e,["googleMaps"],s);const u=E(t,["googleSearch"]);u!=null&&M(e,["googleSearch"],u);const c=E(t,["googleSearchRetrieval"]);c!=null&&M(e,["googleSearchRetrieval"],c);const d=E(t,["urlContext"]);return d!=null&&M(e,["urlContext"],d),e}function XK(t,e){const n={},i=E(t,["ttl"]);e!==void 0&&i!=null&&M(e,["ttl"],i);const r=E(t,["expireTime"]);return e!==void 0&&r!=null&&M(e,["expireTime"],r),n}function YK(t,e){const n={},i=E(t,["ttl"]);e!==void 0&&i!=null&&M(e,["ttl"],i);const r=E(t,["expireTime"]);return e!==void 0&&r!=null&&M(e,["expireTime"],r),n}function $K(t,e){const n={},i=E(e,["name"]);i!=null&&M(n,["_url","name"],uf(t,i));const r=E(e,["config"]);return r!=null&&XK(r,n),n}function KK(t,e){const n={},i=E(e,["name"]);i!=null&&M(n,["_url","name"],uf(t,i));const r=E(e,["config"]);return r!=null&&YK(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JK extends lf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fp($c.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=TK(this.apiClient,e);return s=It("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=EK(this.apiClient,e);return s=It("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=OK(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=DK(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=MK(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=CK(d),g=new PO;return Object.assign(g,p),g})}else{const c=AK(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=wK(d),g=new PO;return Object.assign(g,p),g})}}async update(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=KK(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=$K(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=zK(e);return s=It("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=VK(d),g=new NO;return Object.assign(g,p),g})}else{const c=BK(e);return s=It("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=GK(d),g=new NO;return Object.assign(g,p),g})}}}function US(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function BO(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function an(t){return this instanceof an?(this.v=t,this):new an(t)}function Wl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function s(y,b){i[y]&&(r[y]=function(T){return new Promise(function(S,A){a.push([y,T,S,A])>1||u(y,T)})},b&&(r[y]=b(r[y])))}function u(y,b){try{c(i[y](b))}catch(T){g(a[0][3],T)}}function c(y){y.value instanceof an?Promise.resolve(y.value.v).then(d,p):g(a[0][2],y)}function d(y){u("next",y)}function p(y){u("throw",y)}function g(y,b){y(b),a.shift(),a.length&&u(a[0][0],a[0][1])}}function jl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BO=="function"?BO(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(o){return new Promise(function(s,u){o=t[a](o),r(s,u,o.done,o.value)})}}function r(a,o,s,u){Promise.resolve(u).then(function(c){a({value:c,done:s})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZK(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Iz(n)}function Iz(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function QK(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zO(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!Iz(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class eJ{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new tJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tJ{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),QK(a)}async sendMessage(e){var n;await this.sendPromise;const i=Wa(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,s;const u=await r,c=(o=(a=u.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,d=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];d!=null&&(g=(s=d.slice(p))!==null&&s!==void 0?s:[]);const y=c?[c]:[];this.recordHistory(i,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Wa(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?zO(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Wl(this,arguments,function*(){var r,a,o,s,u,c;const d=[];try{for(var p=!0,g=jl(e),y;y=yield an(g.next()),r=y.done,!r;p=!0){s=y.value,p=!1;const b=s;if(ZK(b)){const T=(c=(u=b.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;T!==void 0&&d.push(T)}yield yield an(b)}}catch(b){a={error:b}}finally{try{!p&&!r&&(o=g.return)&&(yield an(o.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...zO(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oy extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,oy.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nJ(t){const e={},n=E(t,["file"]);return n!=null&&M(e,["file"],n),e}function iJ(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function rJ(t){const e={},n=E(t,["name"]);return n!=null&&M(e,["_url","file"],Ez(n)),e}function aJ(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function oJ(t){const e={},n=E(t,["name"]);return n!=null&&M(e,["_url","file"],Ez(n)),e}function sJ(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);return e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),n}function lJ(t){const e={},n=E(t,["config"]);return n!=null&&sJ(n,e),e}function uJ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cJ extends lf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fp($c.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=lJ(e);return a=It("files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>{const c=uJ(u),d=new p$;return Object.assign(d,c),d})}}async createInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=nJ(e);return a=It("upload/v1beta/files",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=iJ(u),d=new m$;return Object.assign(d,c),d})}}async get(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=oJ(e);return a=It("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=rJ(e);return a=It("files/{file}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>{const c=aJ(u),d=new g$;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _S(t){const e={},n=E(t,["data"]);if(n!=null&&M(e,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function fJ(t){const e={},n=E(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>wJ(a))),M(e,["parts"],r)}const i=E(t,["role"]);return i!=null&&M(e,["role"],i),e}function dJ(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&M(e,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function hJ(t){const e={},n=E(t,["id"]);n!=null&&M(e,["id"],n);const i=E(t,["args"]);i!=null&&M(e,["args"],i);const r=E(t,["name"]);if(r!=null&&M(e,["name"],r),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pJ(t){const e={},n=E(t,["description"]);n!=null&&M(e,["description"],n);const i=E(t,["name"]);i!=null&&M(e,["name"],i);const r=E(t,["parameters"]);r!=null&&M(e,["parameters"],r);const a=E(t,["parametersJsonSchema"]);a!=null&&M(e,["parametersJsonSchema"],a);const o=E(t,["response"]);o!=null&&M(e,["response"],o);const s=E(t,["responseJsonSchema"]);if(s!=null&&M(e,["responseJsonSchema"],s),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function mJ(t){const e={},n=E(t,["modelSelectionConfig"]);n!=null&&M(e,["modelConfig"],n);const i=E(t,["responseJsonSchema"]);i!=null&&M(e,["responseJsonSchema"],i);const r=E(t,["audioTimestamp"]);r!=null&&M(e,["audioTimestamp"],r);const a=E(t,["candidateCount"]);a!=null&&M(e,["candidateCount"],a);const o=E(t,["enableAffectiveDialog"]);o!=null&&M(e,["enableAffectiveDialog"],o);const s=E(t,["frequencyPenalty"]);s!=null&&M(e,["frequencyPenalty"],s);const u=E(t,["logprobs"]);u!=null&&M(e,["logprobs"],u);const c=E(t,["maxOutputTokens"]);c!=null&&M(e,["maxOutputTokens"],c);const d=E(t,["mediaResolution"]);d!=null&&M(e,["mediaResolution"],d);const p=E(t,["presencePenalty"]);p!=null&&M(e,["presencePenalty"],p);const g=E(t,["responseLogprobs"]);g!=null&&M(e,["responseLogprobs"],g);const y=E(t,["responseMimeType"]);y!=null&&M(e,["responseMimeType"],y);const b=E(t,["responseModalities"]);b!=null&&M(e,["responseModalities"],b);const T=E(t,["responseSchema"]);T!=null&&M(e,["responseSchema"],T);const S=E(t,["routingConfig"]);S!=null&&M(e,["routingConfig"],S);const A=E(t,["seed"]);A!=null&&M(e,["seed"],A);const R=E(t,["speechConfig"]);R!=null&&M(e,["speechConfig"],R);const I=E(t,["stopSequences"]);I!=null&&M(e,["stopSequences"],I);const N=E(t,["temperature"]);N!=null&&M(e,["temperature"],N);const D=E(t,["thinkingConfig"]);D!=null&&M(e,["thinkingConfig"],D);const U=E(t,["topK"]);U!=null&&M(e,["topK"],U);const k=E(t,["topP"]);if(k!=null&&M(e,["topP"],k),E(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gJ(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&M(e,["enableWidget"],n),e}function vJ(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&M(e,["timeRangeFilter"],n),e}function yJ(t,e){const n={},i=E(t,["generationConfig"]);e!==void 0&&i!=null&&M(e,["setup","generationConfig"],i);const r=E(t,["responseModalities"]);e!==void 0&&r!=null&&M(e,["setup","generationConfig","responseModalities"],r);const a=E(t,["temperature"]);e!==void 0&&a!=null&&M(e,["setup","generationConfig","temperature"],a);const o=E(t,["topP"]);e!==void 0&&o!=null&&M(e,["setup","generationConfig","topP"],o);const s=E(t,["topK"]);e!==void 0&&s!=null&&M(e,["setup","generationConfig","topK"],s);const u=E(t,["maxOutputTokens"]);e!==void 0&&u!=null&&M(e,["setup","generationConfig","maxOutputTokens"],u);const c=E(t,["mediaResolution"]);e!==void 0&&c!=null&&M(e,["setup","generationConfig","mediaResolution"],c);const d=E(t,["seed"]);e!==void 0&&d!=null&&M(e,["setup","generationConfig","seed"],d);const p=E(t,["speechConfig"]);e!==void 0&&p!=null&&M(e,["setup","generationConfig","speechConfig"],UI(p));const g=E(t,["thinkingConfig"]);e!==void 0&&g!=null&&M(e,["setup","generationConfig","thinkingConfig"],g);const y=E(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&M(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=E(t,["systemInstruction"]);e!==void 0&&b!=null&&M(e,["setup","systemInstruction"],fJ(Wa(b)));const T=E(t,["tools"]);if(e!==void 0&&T!=null){let U=Rg(T);Array.isArray(U)&&(U=U.map(k=>RJ(Cg(k)))),M(e,["setup","tools"],U)}const S=E(t,["sessionResumption"]);e!==void 0&&S!=null&&M(e,["setup","sessionResumption"],CJ(S));const A=E(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&M(e,["setup","inputAudioTranscription"],A);const R=E(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&M(e,["setup","outputAudioTranscription"],R);const I=E(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&M(e,["setup","realtimeInputConfig"],I);const N=E(t,["contextWindowCompression"]);e!==void 0&&N!=null&&M(e,["setup","contextWindowCompression"],N);const D=E(t,["proactivity"]);if(e!==void 0&&D!=null&&M(e,["setup","proactivity"],D),E(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _J(t,e){const n={},i=E(t,["generationConfig"]);e!==void 0&&i!=null&&M(e,["setup","generationConfig"],mJ(i));const r=E(t,["responseModalities"]);e!==void 0&&r!=null&&M(e,["setup","generationConfig","responseModalities"],r);const a=E(t,["temperature"]);e!==void 0&&a!=null&&M(e,["setup","generationConfig","temperature"],a);const o=E(t,["topP"]);e!==void 0&&o!=null&&M(e,["setup","generationConfig","topP"],o);const s=E(t,["topK"]);e!==void 0&&s!=null&&M(e,["setup","generationConfig","topK"],s);const u=E(t,["maxOutputTokens"]);e!==void 0&&u!=null&&M(e,["setup","generationConfig","maxOutputTokens"],u);const c=E(t,["mediaResolution"]);e!==void 0&&c!=null&&M(e,["setup","generationConfig","mediaResolution"],c);const d=E(t,["seed"]);e!==void 0&&d!=null&&M(e,["setup","generationConfig","seed"],d);const p=E(t,["speechConfig"]);e!==void 0&&p!=null&&M(e,["setup","generationConfig","speechConfig"],UI(p));const g=E(t,["thinkingConfig"]);e!==void 0&&g!=null&&M(e,["setup","generationConfig","thinkingConfig"],g);const y=E(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&M(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=E(t,["systemInstruction"]);e!==void 0&&b!=null&&M(e,["setup","systemInstruction"],Wa(b));const T=E(t,["tools"]);if(e!==void 0&&T!=null){let k=Rg(T);Array.isArray(k)&&(k=k.map(z=>IJ(Cg(z)))),M(e,["setup","tools"],k)}const S=E(t,["sessionResumption"]);e!==void 0&&S!=null&&M(e,["setup","sessionResumption"],S);const A=E(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&M(e,["setup","inputAudioTranscription"],A);const R=E(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&M(e,["setup","outputAudioTranscription"],R);const I=E(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&M(e,["setup","realtimeInputConfig"],I);const N=E(t,["contextWindowCompression"]);e!==void 0&&N!=null&&M(e,["setup","contextWindowCompression"],N);const D=E(t,["proactivity"]);e!==void 0&&D!=null&&M(e,["setup","proactivity"],D);const U=E(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&M(e,["setup","explicitVadSignal"],U),n}function bJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["setup","model"],Xn(t,i));const r=E(e,["config"]);return r!=null&&M(n,["config"],yJ(r,n)),n}function xJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["setup","model"],Xn(t,i));const r=E(e,["config"]);return r!=null&&M(n,["config"],_J(r,n)),n}function SJ(t){const e={},n=E(t,["musicGenerationConfig"]);return n!=null&&M(e,["musicGenerationConfig"],n),e}function EJ(t){const e={},n=E(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),M(e,["weightedPrompts"],i)}return e}function TJ(t){const e={},n=E(t,["media"]);if(n!=null){let c=yz(n);Array.isArray(c)&&(c=c.map(d=>_S(d))),M(e,["mediaChunks"],c)}const i=E(t,["audio"]);i!=null&&M(e,["audio"],_S(bz(i)));const r=E(t,["audioStreamEnd"]);r!=null&&M(e,["audioStreamEnd"],r);const a=E(t,["video"]);a!=null&&M(e,["video"],_S(_z(a)));const o=E(t,["text"]);o!=null&&M(e,["text"],o);const s=E(t,["activityStart"]);s!=null&&M(e,["activityStart"],s);const u=E(t,["activityEnd"]);return u!=null&&M(e,["activityEnd"],u),e}function AJ(t){const e={},n=E(t,["media"]);if(n!=null){let c=yz(n);Array.isArray(c)&&(c=c.map(d=>d)),M(e,["mediaChunks"],c)}const i=E(t,["audio"]);i!=null&&M(e,["audio"],bz(i));const r=E(t,["audioStreamEnd"]);r!=null&&M(e,["audioStreamEnd"],r);const a=E(t,["video"]);a!=null&&M(e,["video"],_z(a));const o=E(t,["text"]);o!=null&&M(e,["text"],o);const s=E(t,["activityStart"]);s!=null&&M(e,["activityStart"],s);const u=E(t,["activityEnd"]);return u!=null&&M(e,["activityEnd"],u),e}function MJ(t){const e={},n=E(t,["setupComplete"]);n!=null&&M(e,["setupComplete"],n);const i=E(t,["serverContent"]);i!=null&&M(e,["serverContent"],i);const r=E(t,["toolCall"]);r!=null&&M(e,["toolCall"],r);const a=E(t,["toolCallCancellation"]);a!=null&&M(e,["toolCallCancellation"],a);const o=E(t,["usageMetadata"]);o!=null&&M(e,["usageMetadata"],PJ(o));const s=E(t,["goAway"]);s!=null&&M(e,["goAway"],s);const u=E(t,["sessionResumptionUpdate"]);u!=null&&M(e,["sessionResumptionUpdate"],u);const c=E(t,["voiceActivityDetectionSignal"]);c!=null&&M(e,["voiceActivityDetectionSignal"],c);const d=E(t,["voiceActivity"]);return d!=null&&M(e,["voiceActivity"],NJ(d)),e}function wJ(t){const e={},n=E(t,["mediaResolution"]);n!=null&&M(e,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&M(e,["codeExecutionResult"],i);const r=E(t,["executableCode"]);r!=null&&M(e,["executableCode"],r);const a=E(t,["fileData"]);a!=null&&M(e,["fileData"],dJ(a));const o=E(t,["functionCall"]);o!=null&&M(e,["functionCall"],hJ(o));const s=E(t,["functionResponse"]);s!=null&&M(e,["functionResponse"],s);const u=E(t,["inlineData"]);u!=null&&M(e,["inlineData"],_S(u));const c=E(t,["text"]);c!=null&&M(e,["text"],c);const d=E(t,["thought"]);d!=null&&M(e,["thought"],d);const p=E(t,["thoughtSignature"]);p!=null&&M(e,["thoughtSignature"],p);const g=E(t,["videoMetadata"]);return g!=null&&M(e,["videoMetadata"],g),e}function CJ(t){const e={},n=E(t,["handle"]);if(n!=null&&M(e,["handle"],n),E(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RJ(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&M(e,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&M(e,["fileSearch"],i);const r=E(t,["codeExecution"]);if(r!=null&&M(e,["codeExecution"],r),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=E(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),M(e,["functionDeclarations"],d)}const o=E(t,["googleMaps"]);o!=null&&M(e,["googleMaps"],gJ(o));const s=E(t,["googleSearch"]);s!=null&&M(e,["googleSearch"],vJ(s));const u=E(t,["googleSearchRetrieval"]);u!=null&&M(e,["googleSearchRetrieval"],u);const c=E(t,["urlContext"]);return c!=null&&M(e,["urlContext"],c),e}function IJ(t){const e={},n=E(t,["retrieval"]);n!=null&&M(e,["retrieval"],n);const i=E(t,["computerUse"]);if(i!=null&&M(e,["computerUse"],i),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=E(t,["codeExecution"]);r!=null&&M(e,["codeExecution"],r);const a=E(t,["enterpriseWebSearch"]);a!=null&&M(e,["enterpriseWebSearch"],a);const o=E(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>pJ(g))),M(e,["functionDeclarations"],p)}const s=E(t,["googleMaps"]);s!=null&&M(e,["googleMaps"],s);const u=E(t,["googleSearch"]);u!=null&&M(e,["googleSearch"],u);const c=E(t,["googleSearchRetrieval"]);c!=null&&M(e,["googleSearchRetrieval"],c);const d=E(t,["urlContext"]);return d!=null&&M(e,["urlContext"],d),e}function PJ(t){const e={},n=E(t,["promptTokenCount"]);n!=null&&M(e,["promptTokenCount"],n);const i=E(t,["cachedContentTokenCount"]);i!=null&&M(e,["cachedContentTokenCount"],i);const r=E(t,["candidatesTokenCount"]);r!=null&&M(e,["responseTokenCount"],r);const a=E(t,["toolUsePromptTokenCount"]);a!=null&&M(e,["toolUsePromptTokenCount"],a);const o=E(t,["thoughtsTokenCount"]);o!=null&&M(e,["thoughtsTokenCount"],o);const s=E(t,["totalTokenCount"]);s!=null&&M(e,["totalTokenCount"],s);const u=E(t,["promptTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(b=>b)),M(e,["promptTokensDetails"],y)}const c=E(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(b=>b)),M(e,["cacheTokensDetails"],y)}const d=E(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(b=>b)),M(e,["responseTokensDetails"],y)}const p=E(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(b=>b)),M(e,["toolUsePromptTokensDetails"],y)}const g=E(t,["trafficType"]);return g!=null&&M(e,["trafficType"],g),e}function NJ(t){const e={},n=E(t,["type"]);return n!=null&&M(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DJ(t){const e={},n=E(t,["data"]);if(n!=null&&M(e,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function OJ(t){const e={},n=E(t,["content"]);n!=null&&M(e,["content"],n);const i=E(t,["citationMetadata"]);i!=null&&M(e,["citationMetadata"],LJ(i));const r=E(t,["tokenCount"]);r!=null&&M(e,["tokenCount"],r);const a=E(t,["finishReason"]);a!=null&&M(e,["finishReason"],a);const o=E(t,["avgLogprobs"]);o!=null&&M(e,["avgLogprobs"],o);const s=E(t,["groundingMetadata"]);s!=null&&M(e,["groundingMetadata"],s);const u=E(t,["index"]);u!=null&&M(e,["index"],u);const c=E(t,["logprobsResult"]);c!=null&&M(e,["logprobsResult"],c);const d=E(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),M(e,["safetyRatings"],g)}const p=E(t,["urlContextMetadata"]);return p!=null&&M(e,["urlContextMetadata"],p),e}function LJ(t){const e={},n=E(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),M(e,["citations"],i)}return e}function UJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let a=al(r);Array.isArray(a)&&(a=a.map(o=>o)),M(n,["contents"],a)}return n}function FJ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),M(e,["tokensInfo"],r)}return e}function kJ(t){const e={},n=E(t,["values"]);n!=null&&M(e,["values"],n);const i=E(t,["statistics"]);return i!=null&&M(e,["statistics"],BJ(i)),e}function BJ(t){const e={},n=E(t,["truncated"]);n!=null&&M(e,["truncated"],n);const i=E(t,["token_count"]);return i!=null&&M(e,["tokenCount"],i),e}function IE(t){const e={},n=E(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>YZ(a))),M(e,["parts"],r)}const i=E(t,["role"]);return i!=null&&M(e,["role"],i),e}function zJ(t){const e={},n=E(t,["controlType"]);n!=null&&M(e,["controlType"],n);const i=E(t,["enableControlImageComputation"]);return i!=null&&M(e,["computeControl"],i),e}function GJ(t){const e={};if(E(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(E(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(E(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function VJ(t,e){const n={},i=E(t,["systemInstruction"]);e!==void 0&&i!=null&&M(e,["systemInstruction"],Wa(i));const r=E(t,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Oz(s))),M(e,["tools"],o)}const a=E(t,["generationConfig"]);return e!==void 0&&a!=null&&M(e,["generationConfig"],DZ(a)),n}function HJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let o=al(r);Array.isArray(o)&&(o=o.map(s=>IE(s))),M(n,["contents"],o)}const a=E(e,["config"]);return a!=null&&GJ(a),n}function qJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let o=al(r);Array.isArray(o)&&(o=o.map(s=>s)),M(n,["contents"],o)}const a=E(e,["config"]);return a!=null&&VJ(a,n),n}function WJ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["totalTokens"]);i!=null&&M(e,["totalTokens"],i);const r=E(t,["cachedContentTokenCount"]);return r!=null&&M(e,["cachedContentTokenCount"],r),e}function jJ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["totalTokens"]);return i!=null&&M(e,["totalTokens"],i),e}function XJ(t,e){const n={},i=E(e,["model"]);return i!=null&&M(n,["_url","name"],Xn(t,i)),n}function YJ(t,e){const n={},i=E(e,["model"]);return i!=null&&M(n,["_url","name"],Xn(t,i)),n}function $J(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function KJ(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}function JJ(t,e){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&M(e,["parameters","storageUri"],i);const r=E(t,["negativePrompt"]);e!==void 0&&r!=null&&M(e,["parameters","negativePrompt"],r);const a=E(t,["numberOfImages"]);e!==void 0&&a!=null&&M(e,["parameters","sampleCount"],a);const o=E(t,["aspectRatio"]);e!==void 0&&o!=null&&M(e,["parameters","aspectRatio"],o);const s=E(t,["guidanceScale"]);e!==void 0&&s!=null&&M(e,["parameters","guidanceScale"],s);const u=E(t,["seed"]);e!==void 0&&u!=null&&M(e,["parameters","seed"],u);const c=E(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&M(e,["parameters","safetySetting"],c);const d=E(t,["personGeneration"]);e!==void 0&&d!=null&&M(e,["parameters","personGeneration"],d);const p=E(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&M(e,["parameters","includeSafetyAttributes"],p);const g=E(t,["includeRaiReason"]);e!==void 0&&g!=null&&M(e,["parameters","includeRaiReason"],g);const y=E(t,["language"]);e!==void 0&&y!=null&&M(e,["parameters","language"],y);const b=E(t,["outputMimeType"]);e!==void 0&&b!=null&&M(e,["parameters","outputOptions","mimeType"],b);const T=E(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&M(e,["parameters","outputOptions","compressionQuality"],T);const S=E(t,["addWatermark"]);e!==void 0&&S!=null&&M(e,["parameters","addWatermark"],S);const A=E(t,["labels"]);e!==void 0&&A!=null&&M(e,["labels"],A);const R=E(t,["editMode"]);e!==void 0&&R!=null&&M(e,["parameters","editMode"],R);const I=E(t,["baseSteps"]);return e!==void 0&&I!=null&&M(e,["parameters","editConfig","baseSteps"],I),n}function ZJ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["prompt"]);r!=null&&M(n,["instances[0]","prompt"],r);const a=E(e,["referenceImages"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>eQ(u))),M(n,["instances[0]","referenceImages"],s)}const o=E(e,["config"]);return o!=null&&JJ(o,n),n}function QJ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>PE(a))),M(e,["generatedImages"],r)}return e}function eZ(t,e){const n={},i=E(t,["taskType"]);e!==void 0&&i!=null&&M(e,["requests[]","taskType"],i);const r=E(t,["title"]);e!==void 0&&r!=null&&M(e,["requests[]","title"],r);const a=E(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&M(e,["requests[]","outputDimensionality"],a),E(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tZ(t,e){const n={},i=E(t,["taskType"]);e!==void 0&&i!=null&&M(e,["instances[]","task_type"],i);const r=E(t,["title"]);e!==void 0&&r!=null&&M(e,["instances[]","title"],r);const a=E(t,["outputDimensionality"]);e!==void 0&&a!=null&&M(e,["parameters","outputDimensionality"],a);const o=E(t,["mimeType"]);e!==void 0&&o!=null&&M(e,["instances[]","mimeType"],o);const s=E(t,["autoTruncate"]);return e!==void 0&&s!=null&&M(e,["parameters","autoTruncate"],s),n}function nZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let s=DI(t,r);Array.isArray(s)&&(s=s.map(u=>u)),M(n,["requests[]","content"],s)}const a=E(e,["config"]);a!=null&&eZ(a,n);const o=E(e,["model"]);return o!==void 0&&M(n,["requests[]","model"],Xn(t,o)),n}function iZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let o=DI(t,r);Array.isArray(o)&&(o=o.map(s=>s)),M(n,["instances[]","content"],o)}const a=E(e,["config"]);return a!=null&&tZ(a,n),n}function rZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["embeddings"],a)}const r=E(t,["metadata"]);return r!=null&&M(e,["metadata"],r),e}function aZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>kJ(o))),M(e,["embeddings"],a)}const r=E(t,["metadata"]);return r!=null&&M(e,["metadata"],r),e}function oZ(t){const e={},n=E(t,["endpoint"]);n!=null&&M(e,["name"],n);const i=E(t,["deployedModelId"]);return i!=null&&M(e,["deployedModelId"],i),e}function sZ(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&M(e,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function lZ(t){const e={},n=E(t,["id"]);n!=null&&M(e,["id"],n);const i=E(t,["args"]);i!=null&&M(e,["args"],i);const r=E(t,["name"]);if(r!=null&&M(e,["name"],r),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uZ(t){const e={},n=E(t,["allowedFunctionNames"]);n!=null&&M(e,["allowedFunctionNames"],n);const i=E(t,["mode"]);if(i!=null&&M(e,["mode"],i),E(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cZ(t){const e={},n=E(t,["description"]);n!=null&&M(e,["description"],n);const i=E(t,["name"]);i!=null&&M(e,["name"],i);const r=E(t,["parameters"]);r!=null&&M(e,["parameters"],r);const a=E(t,["parametersJsonSchema"]);a!=null&&M(e,["parametersJsonSchema"],a);const o=E(t,["response"]);o!=null&&M(e,["response"],o);const s=E(t,["responseJsonSchema"]);if(s!=null&&M(e,["responseJsonSchema"],s),E(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function fZ(t,e,n){const i={},r=E(e,["systemInstruction"]);n!==void 0&&r!=null&&M(n,["systemInstruction"],IE(Wa(r)));const a=E(e,["temperature"]);a!=null&&M(i,["temperature"],a);const o=E(e,["topP"]);o!=null&&M(i,["topP"],o);const s=E(e,["topK"]);s!=null&&M(i,["topK"],s);const u=E(e,["candidateCount"]);u!=null&&M(i,["candidateCount"],u);const c=E(e,["maxOutputTokens"]);c!=null&&M(i,["maxOutputTokens"],c);const d=E(e,["stopSequences"]);d!=null&&M(i,["stopSequences"],d);const p=E(e,["responseLogprobs"]);p!=null&&M(i,["responseLogprobs"],p);const g=E(e,["logprobs"]);g!=null&&M(i,["logprobs"],g);const y=E(e,["presencePenalty"]);y!=null&&M(i,["presencePenalty"],y);const b=E(e,["frequencyPenalty"]);b!=null&&M(i,["frequencyPenalty"],b);const T=E(e,["seed"]);T!=null&&M(i,["seed"],T);const S=E(e,["responseMimeType"]);S!=null&&M(i,["responseMimeType"],S);const A=E(e,["responseSchema"]);A!=null&&M(i,["responseSchema"],OI(A));const R=E(e,["responseJsonSchema"]);if(R!=null&&M(i,["responseJsonSchema"],R),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=E(e,["safetySettings"]);if(n!==void 0&&I!=null){let X=I;Array.isArray(X)&&(X=X.map(Q=>tQ(Q))),M(n,["safetySettings"],X)}const N=E(e,["tools"]);if(n!==void 0&&N!=null){let X=Rg(N);Array.isArray(X)&&(X=X.map(Q=>lQ(Cg(Q)))),M(n,["tools"],X)}const D=E(e,["toolConfig"]);if(n!==void 0&&D!=null&&M(n,["toolConfig"],sQ(D)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=E(e,["cachedContent"]);n!==void 0&&U!=null&&M(n,["cachedContent"],uf(t,U));const k=E(e,["responseModalities"]);k!=null&&M(i,["responseModalities"],k);const z=E(e,["mediaResolution"]);z!=null&&M(i,["mediaResolution"],z);const L=E(e,["speechConfig"]);if(L!=null&&M(i,["speechConfig"],LI(L)),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=E(e,["thinkingConfig"]);F!=null&&M(i,["thinkingConfig"],F);const j=E(e,["imageConfig"]);j!=null&&M(i,["imageConfig"],kZ(j));const W=E(e,["enableEnhancedCivicAnswers"]);if(W!=null&&M(i,["enableEnhancedCivicAnswers"],W),E(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function dZ(t,e,n){const i={},r=E(e,["systemInstruction"]);n!==void 0&&r!=null&&M(n,["systemInstruction"],Wa(r));const a=E(e,["temperature"]);a!=null&&M(i,["temperature"],a);const o=E(e,["topP"]);o!=null&&M(i,["topP"],o);const s=E(e,["topK"]);s!=null&&M(i,["topK"],s);const u=E(e,["candidateCount"]);u!=null&&M(i,["candidateCount"],u);const c=E(e,["maxOutputTokens"]);c!=null&&M(i,["maxOutputTokens"],c);const d=E(e,["stopSequences"]);d!=null&&M(i,["stopSequences"],d);const p=E(e,["responseLogprobs"]);p!=null&&M(i,["responseLogprobs"],p);const g=E(e,["logprobs"]);g!=null&&M(i,["logprobs"],g);const y=E(e,["presencePenalty"]);y!=null&&M(i,["presencePenalty"],y);const b=E(e,["frequencyPenalty"]);b!=null&&M(i,["frequencyPenalty"],b);const T=E(e,["seed"]);T!=null&&M(i,["seed"],T);const S=E(e,["responseMimeType"]);S!=null&&M(i,["responseMimeType"],S);const A=E(e,["responseSchema"]);A!=null&&M(i,["responseSchema"],OI(A));const R=E(e,["responseJsonSchema"]);R!=null&&M(i,["responseJsonSchema"],R);const I=E(e,["routingConfig"]);I!=null&&M(i,["routingConfig"],I);const N=E(e,["modelSelectionConfig"]);N!=null&&M(i,["modelConfig"],N);const D=E(e,["safetySettings"]);if(n!==void 0&&D!=null){let ie=D;Array.isArray(ie)&&(ie=ie.map(me=>me)),M(n,["safetySettings"],ie)}const U=E(e,["tools"]);if(n!==void 0&&U!=null){let ie=Rg(U);Array.isArray(ie)&&(ie=ie.map(me=>Oz(Cg(me)))),M(n,["tools"],ie)}const k=E(e,["toolConfig"]);n!==void 0&&k!=null&&M(n,["toolConfig"],k);const z=E(e,["labels"]);n!==void 0&&z!=null&&M(n,["labels"],z);const L=E(e,["cachedContent"]);n!==void 0&&L!=null&&M(n,["cachedContent"],uf(t,L));const F=E(e,["responseModalities"]);F!=null&&M(i,["responseModalities"],F);const j=E(e,["mediaResolution"]);j!=null&&M(i,["mediaResolution"],j);const W=E(e,["speechConfig"]);W!=null&&M(i,["speechConfig"],LI(W));const X=E(e,["audioTimestamp"]);X!=null&&M(i,["audioTimestamp"],X);const Q=E(e,["thinkingConfig"]);Q!=null&&M(i,["thinkingConfig"],Q);const ae=E(e,["imageConfig"]);if(ae!=null&&M(i,["imageConfig"],BZ(ae)),E(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=E(e,["modelArmorConfig"]);return n!==void 0&&$!=null&&M(n,["modelArmorConfig"],$),i}function GO(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let o=al(r);Array.isArray(o)&&(o=o.map(s=>IE(s))),M(n,["contents"],o)}const a=E(e,["config"]);return a!=null&&M(n,["generationConfig"],fZ(t,a,n)),n}function VO(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["contents"]);if(r!=null){let o=al(r);Array.isArray(o)&&(o=o.map(s=>s)),M(n,["contents"],o)}const a=E(e,["config"]);return a!=null&&M(n,["generationConfig"],dZ(t,a,n)),n}function HO(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>OJ(c))),M(e,["candidates"],u)}const r=E(t,["modelVersion"]);r!=null&&M(e,["modelVersion"],r);const a=E(t,["promptFeedback"]);a!=null&&M(e,["promptFeedback"],a);const o=E(t,["responseId"]);o!=null&&M(e,["responseId"],o);const s=E(t,["usageMetadata"]);return s!=null&&M(e,["usageMetadata"],s),e}function qO(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),M(e,["candidates"],c)}const r=E(t,["createTime"]);r!=null&&M(e,["createTime"],r);const a=E(t,["modelVersion"]);a!=null&&M(e,["modelVersion"],a);const o=E(t,["promptFeedback"]);o!=null&&M(e,["promptFeedback"],o);const s=E(t,["responseId"]);s!=null&&M(e,["responseId"],s);const u=E(t,["usageMetadata"]);return u!=null&&M(e,["usageMetadata"],u),e}function hZ(t,e){const n={};if(E(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=E(t,["numberOfImages"]);e!==void 0&&i!=null&&M(e,["parameters","sampleCount"],i);const r=E(t,["aspectRatio"]);e!==void 0&&r!=null&&M(e,["parameters","aspectRatio"],r);const a=E(t,["guidanceScale"]);if(e!==void 0&&a!=null&&M(e,["parameters","guidanceScale"],a),E(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=E(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&M(e,["parameters","safetySetting"],o);const s=E(t,["personGeneration"]);e!==void 0&&s!=null&&M(e,["parameters","personGeneration"],s);const u=E(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&M(e,["parameters","includeSafetyAttributes"],u);const c=E(t,["includeRaiReason"]);e!==void 0&&c!=null&&M(e,["parameters","includeRaiReason"],c);const d=E(t,["language"]);e!==void 0&&d!=null&&M(e,["parameters","language"],d);const p=E(t,["outputMimeType"]);e!==void 0&&p!=null&&M(e,["parameters","outputOptions","mimeType"],p);const g=E(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&M(e,["parameters","outputOptions","compressionQuality"],g),E(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=E(t,["imageSize"]);if(e!==void 0&&y!=null&&M(e,["parameters","sampleImageSize"],y),E(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function pZ(t,e){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&M(e,["parameters","storageUri"],i);const r=E(t,["negativePrompt"]);e!==void 0&&r!=null&&M(e,["parameters","negativePrompt"],r);const a=E(t,["numberOfImages"]);e!==void 0&&a!=null&&M(e,["parameters","sampleCount"],a);const o=E(t,["aspectRatio"]);e!==void 0&&o!=null&&M(e,["parameters","aspectRatio"],o);const s=E(t,["guidanceScale"]);e!==void 0&&s!=null&&M(e,["parameters","guidanceScale"],s);const u=E(t,["seed"]);e!==void 0&&u!=null&&M(e,["parameters","seed"],u);const c=E(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&M(e,["parameters","safetySetting"],c);const d=E(t,["personGeneration"]);e!==void 0&&d!=null&&M(e,["parameters","personGeneration"],d);const p=E(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&M(e,["parameters","includeSafetyAttributes"],p);const g=E(t,["includeRaiReason"]);e!==void 0&&g!=null&&M(e,["parameters","includeRaiReason"],g);const y=E(t,["language"]);e!==void 0&&y!=null&&M(e,["parameters","language"],y);const b=E(t,["outputMimeType"]);e!==void 0&&b!=null&&M(e,["parameters","outputOptions","mimeType"],b);const T=E(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&M(e,["parameters","outputOptions","compressionQuality"],T);const S=E(t,["addWatermark"]);e!==void 0&&S!=null&&M(e,["parameters","addWatermark"],S);const A=E(t,["labels"]);e!==void 0&&A!=null&&M(e,["labels"],A);const R=E(t,["imageSize"]);e!==void 0&&R!=null&&M(e,["parameters","sampleImageSize"],R);const I=E(t,["enhancePrompt"]);return e!==void 0&&I!=null&&M(e,["parameters","enhancePrompt"],I),n}function mZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["prompt"]);r!=null&&M(n,["instances[0]","prompt"],r);const a=E(e,["config"]);return a!=null&&hZ(a,n),n}function gZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["prompt"]);r!=null&&M(n,["instances[0]","prompt"],r);const a=E(e,["config"]);return a!=null&&pZ(a,n),n}function vZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>RZ(o))),M(e,["generatedImages"],a)}const r=E(t,["positivePromptSafetyAttributes"]);return r!=null&&M(e,["positivePromptSafetyAttributes"],Nz(r)),e}function yZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>PE(o))),M(e,["generatedImages"],a)}const r=E(t,["positivePromptSafetyAttributes"]);return r!=null&&M(e,["positivePromptSafetyAttributes"],Dz(r)),e}function _Z(t,e){const n={},i=E(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&M(e,["parameters","sampleCount"],i),E(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=E(t,["durationSeconds"]);if(e!==void 0&&r!=null&&M(e,["parameters","durationSeconds"],r),E(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=E(t,["aspectRatio"]);e!==void 0&&a!=null&&M(e,["parameters","aspectRatio"],a);const o=E(t,["resolution"]);e!==void 0&&o!=null&&M(e,["parameters","resolution"],o);const s=E(t,["personGeneration"]);if(e!==void 0&&s!=null&&M(e,["parameters","personGeneration"],s),E(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=E(t,["negativePrompt"]);e!==void 0&&u!=null&&M(e,["parameters","negativePrompt"],u);const c=E(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&M(e,["parameters","enhancePrompt"],c),E(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=E(t,["lastFrame"]);e!==void 0&&d!=null&&M(e,["instances[0]","lastFrame"],NE(d));const p=E(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>xQ(y))),M(e,["instances[0]","referenceImages"],g)}if(E(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(E(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function bZ(t,e){const n={},i=E(t,["numberOfVideos"]);e!==void 0&&i!=null&&M(e,["parameters","sampleCount"],i);const r=E(t,["outputGcsUri"]);e!==void 0&&r!=null&&M(e,["parameters","storageUri"],r);const a=E(t,["fps"]);e!==void 0&&a!=null&&M(e,["parameters","fps"],a);const o=E(t,["durationSeconds"]);e!==void 0&&o!=null&&M(e,["parameters","durationSeconds"],o);const s=E(t,["seed"]);e!==void 0&&s!=null&&M(e,["parameters","seed"],s);const u=E(t,["aspectRatio"]);e!==void 0&&u!=null&&M(e,["parameters","aspectRatio"],u);const c=E(t,["resolution"]);e!==void 0&&c!=null&&M(e,["parameters","resolution"],c);const d=E(t,["personGeneration"]);e!==void 0&&d!=null&&M(e,["parameters","personGeneration"],d);const p=E(t,["pubsubTopic"]);e!==void 0&&p!=null&&M(e,["parameters","pubsubTopic"],p);const g=E(t,["negativePrompt"]);e!==void 0&&g!=null&&M(e,["parameters","negativePrompt"],g);const y=E(t,["enhancePrompt"]);e!==void 0&&y!=null&&M(e,["parameters","enhancePrompt"],y);const b=E(t,["generateAudio"]);e!==void 0&&b!=null&&M(e,["parameters","generateAudio"],b);const T=E(t,["lastFrame"]);e!==void 0&&T!=null&&M(e,["instances[0]","lastFrame"],Jl(T));const S=E(t,["referenceImages"]);if(e!==void 0&&S!=null){let I=S;Array.isArray(I)&&(I=I.map(N=>SQ(N))),M(e,["instances[0]","referenceImages"],I)}const A=E(t,["mask"]);e!==void 0&&A!=null&&M(e,["instances[0]","mask"],bQ(A));const R=E(t,["compressionQuality"]);return e!==void 0&&R!=null&&M(e,["parameters","compressionQuality"],R),n}function xZ(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response","generateVideoResponse"]);return o!=null&&M(e,["response"],AZ(o)),e}function SZ(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response"]);return o!=null&&M(e,["response"],MZ(o)),e}function EZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["prompt"]);r!=null&&M(n,["instances[0]","prompt"],r);const a=E(e,["image"]);a!=null&&M(n,["instances[0]","image"],NE(a));const o=E(e,["video"]);o!=null&&M(n,["instances[0]","video"],Lz(o));const s=E(e,["source"]);s!=null&&wZ(s,n);const u=E(e,["config"]);return u!=null&&_Z(u,n),n}function TZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["prompt"]);r!=null&&M(n,["instances[0]","prompt"],r);const a=E(e,["image"]);a!=null&&M(n,["instances[0]","image"],Jl(a));const o=E(e,["video"]);o!=null&&M(n,["instances[0]","video"],Uz(o));const s=E(e,["source"]);s!=null&&CZ(s,n);const u=E(e,["config"]);return u!=null&&bZ(u,n),n}function AZ(t){const e={},n=E(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>PZ(o))),M(e,["generatedVideos"],a)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&M(e,["raiMediaFilteredCount"],i);const r=E(t,["raiMediaFilteredReasons"]);return r!=null&&M(e,["raiMediaFilteredReasons"],r),e}function MZ(t){const e={},n=E(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>NZ(o))),M(e,["generatedVideos"],a)}const i=E(t,["raiMediaFilteredCount"]);i!=null&&M(e,["raiMediaFilteredCount"],i);const r=E(t,["raiMediaFilteredReasons"]);return r!=null&&M(e,["raiMediaFilteredReasons"],r),e}function wZ(t,e){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&M(e,["instances[0]","prompt"],i);const r=E(t,["image"]);e!==void 0&&r!=null&&M(e,["instances[0]","image"],NE(r));const a=E(t,["video"]);return e!==void 0&&a!=null&&M(e,["instances[0]","video"],Lz(a)),n}function CZ(t,e){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&M(e,["instances[0]","prompt"],i);const r=E(t,["image"]);e!==void 0&&r!=null&&M(e,["instances[0]","image"],Jl(r));const a=E(t,["video"]);return e!==void 0&&a!=null&&M(e,["instances[0]","video"],Uz(a)),n}function RZ(t){const e={},n=E(t,["_self"]);n!=null&&M(e,["image"],zZ(n));const i=E(t,["raiFilteredReason"]);i!=null&&M(e,["raiFilteredReason"],i);const r=E(t,["_self"]);return r!=null&&M(e,["safetyAttributes"],Nz(r)),e}function PE(t){const e={},n=E(t,["_self"]);n!=null&&M(e,["image"],Pz(n));const i=E(t,["raiFilteredReason"]);i!=null&&M(e,["raiFilteredReason"],i);const r=E(t,["_self"]);r!=null&&M(e,["safetyAttributes"],Dz(r));const a=E(t,["prompt"]);return a!=null&&M(e,["enhancedPrompt"],a),e}function IZ(t){const e={},n=E(t,["_self"]);n!=null&&M(e,["mask"],Pz(n));const i=E(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),M(e,["labels"],r)}return e}function PZ(t){const e={},n=E(t,["video"]);return n!=null&&M(e,["video"],yQ(n)),e}function NZ(t){const e={},n=E(t,["_self"]);return n!=null&&M(e,["video"],_Q(n)),e}function DZ(t){const e={},n=E(t,["modelSelectionConfig"]);n!=null&&M(e,["modelConfig"],n);const i=E(t,["responseJsonSchema"]);i!=null&&M(e,["responseJsonSchema"],i);const r=E(t,["audioTimestamp"]);r!=null&&M(e,["audioTimestamp"],r);const a=E(t,["candidateCount"]);a!=null&&M(e,["candidateCount"],a);const o=E(t,["enableAffectiveDialog"]);o!=null&&M(e,["enableAffectiveDialog"],o);const s=E(t,["frequencyPenalty"]);s!=null&&M(e,["frequencyPenalty"],s);const u=E(t,["logprobs"]);u!=null&&M(e,["logprobs"],u);const c=E(t,["maxOutputTokens"]);c!=null&&M(e,["maxOutputTokens"],c);const d=E(t,["mediaResolution"]);d!=null&&M(e,["mediaResolution"],d);const p=E(t,["presencePenalty"]);p!=null&&M(e,["presencePenalty"],p);const g=E(t,["responseLogprobs"]);g!=null&&M(e,["responseLogprobs"],g);const y=E(t,["responseMimeType"]);y!=null&&M(e,["responseMimeType"],y);const b=E(t,["responseModalities"]);b!=null&&M(e,["responseModalities"],b);const T=E(t,["responseSchema"]);T!=null&&M(e,["responseSchema"],T);const S=E(t,["routingConfig"]);S!=null&&M(e,["routingConfig"],S);const A=E(t,["seed"]);A!=null&&M(e,["seed"],A);const R=E(t,["speechConfig"]);R!=null&&M(e,["speechConfig"],R);const I=E(t,["stopSequences"]);I!=null&&M(e,["stopSequences"],I);const N=E(t,["temperature"]);N!=null&&M(e,["temperature"],N);const D=E(t,["thinkingConfig"]);D!=null&&M(e,["thinkingConfig"],D);const U=E(t,["topK"]);U!=null&&M(e,["topK"],U);const k=E(t,["topP"]);if(k!=null&&M(e,["topP"],k),E(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OZ(t,e){const n={},i=E(e,["model"]);return i!=null&&M(n,["_url","name"],Xn(t,i)),n}function LZ(t,e){const n={},i=E(e,["model"]);return i!=null&&M(n,["_url","name"],Xn(t,i)),n}function UZ(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&M(e,["enableWidget"],n),e}function FZ(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&M(e,["timeRangeFilter"],n),e}function kZ(t){const e={},n=E(t,["aspectRatio"]);n!=null&&M(e,["aspectRatio"],n);const i=E(t,["imageSize"]);if(i!=null&&M(e,["imageSize"],i),E(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(E(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(E(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function BZ(t){const e={},n=E(t,["aspectRatio"]);n!=null&&M(e,["aspectRatio"],n);const i=E(t,["imageSize"]);i!=null&&M(e,["imageSize"],i);const r=E(t,["personGeneration"]);r!=null&&M(e,["personGeneration"],r);const a=E(t,["outputMimeType"]);a!=null&&M(e,["imageOutputOptions","mimeType"],a);const o=E(t,["outputCompressionQuality"]);return o!=null&&M(e,["imageOutputOptions","compressionQuality"],o),e}function zZ(t){const e={},n=E(t,["bytesBase64Encoded"]);n!=null&&M(e,["imageBytes"],Ad(n));const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function Pz(t){const e={},n=E(t,["gcsUri"]);n!=null&&M(e,["gcsUri"],n);const i=E(t,["bytesBase64Encoded"]);i!=null&&M(e,["imageBytes"],Ad(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["mimeType"],r),e}function NE(t){const e={};if(E(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=E(t,["imageBytes"]);n!=null&&M(e,["bytesBase64Encoded"],Ad(n));const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function Jl(t){const e={},n=E(t,["gcsUri"]);n!=null&&M(e,["gcsUri"],n);const i=E(t,["imageBytes"]);i!=null&&M(e,["bytesBase64Encoded"],Ad(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["mimeType"],r),e}function GZ(t,e,n){const i={},r=E(e,["pageSize"]);n!==void 0&&r!=null&&M(n,["_query","pageSize"],r);const a=E(e,["pageToken"]);n!==void 0&&a!=null&&M(n,["_query","pageToken"],a);const o=E(e,["filter"]);n!==void 0&&o!=null&&M(n,["_query","filter"],o);const s=E(e,["queryBase"]);return n!==void 0&&s!=null&&M(n,["_url","models_url"],Tz(t,s)),i}function VZ(t,e,n){const i={},r=E(e,["pageSize"]);n!==void 0&&r!=null&&M(n,["_query","pageSize"],r);const a=E(e,["pageToken"]);n!==void 0&&a!=null&&M(n,["_query","pageToken"],a);const o=E(e,["filter"]);n!==void 0&&o!=null&&M(n,["_query","filter"],o);const s=E(e,["queryBase"]);return n!==void 0&&s!=null&&M(n,["_url","models_url"],Tz(t,s)),i}function HZ(t,e){const n={},i=E(e,["config"]);return i!=null&&GZ(t,i,n),n}function qZ(t,e){const n={},i=E(e,["config"]);return i!=null&&VZ(t,i,n),n}function WZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["_self"]);if(r!=null){let a=Az(r);Array.isArray(a)&&(a=a.map(o=>YC(o))),M(e,["models"],a)}return e}function jZ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["_self"]);if(r!=null){let a=Az(r);Array.isArray(a)&&(a=a.map(o=>$C(o))),M(e,["models"],a)}return e}function XZ(t){const e={},n=E(t,["maskMode"]);n!=null&&M(e,["maskMode"],n);const i=E(t,["segmentationClasses"]);i!=null&&M(e,["maskClasses"],i);const r=E(t,["maskDilation"]);return r!=null&&M(e,["dilation"],r),e}function YC(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["displayName"]);i!=null&&M(e,["displayName"],i);const r=E(t,["description"]);r!=null&&M(e,["description"],r);const a=E(t,["version"]);a!=null&&M(e,["version"],a);const o=E(t,["_self"]);o!=null&&M(e,["tunedModelInfo"],uQ(o));const s=E(t,["inputTokenLimit"]);s!=null&&M(e,["inputTokenLimit"],s);const u=E(t,["outputTokenLimit"]);u!=null&&M(e,["outputTokenLimit"],u);const c=E(t,["supportedGenerationMethods"]);c!=null&&M(e,["supportedActions"],c);const d=E(t,["temperature"]);d!=null&&M(e,["temperature"],d);const p=E(t,["maxTemperature"]);p!=null&&M(e,["maxTemperature"],p);const g=E(t,["topP"]);g!=null&&M(e,["topP"],g);const y=E(t,["topK"]);y!=null&&M(e,["topK"],y);const b=E(t,["thinking"]);return b!=null&&M(e,["thinking"],b),e}function $C(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["displayName"]);i!=null&&M(e,["displayName"],i);const r=E(t,["description"]);r!=null&&M(e,["description"],r);const a=E(t,["versionId"]);a!=null&&M(e,["version"],a);const o=E(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>oZ(g))),M(e,["endpoints"],p)}const s=E(t,["labels"]);s!=null&&M(e,["labels"],s);const u=E(t,["_self"]);u!=null&&M(e,["tunedModelInfo"],cQ(u));const c=E(t,["defaultCheckpointId"]);c!=null&&M(e,["defaultCheckpointId"],c);const d=E(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>g)),M(e,["checkpoints"],p)}return e}function YZ(t){const e={},n=E(t,["mediaResolution"]);n!=null&&M(e,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&M(e,["codeExecutionResult"],i);const r=E(t,["executableCode"]);r!=null&&M(e,["executableCode"],r);const a=E(t,["fileData"]);a!=null&&M(e,["fileData"],sZ(a));const o=E(t,["functionCall"]);o!=null&&M(e,["functionCall"],lZ(o));const s=E(t,["functionResponse"]);s!=null&&M(e,["functionResponse"],s);const u=E(t,["inlineData"]);u!=null&&M(e,["inlineData"],DJ(u));const c=E(t,["text"]);c!=null&&M(e,["text"],c);const d=E(t,["thought"]);d!=null&&M(e,["thought"],d);const p=E(t,["thoughtSignature"]);p!=null&&M(e,["thoughtSignature"],p);const g=E(t,["videoMetadata"]);return g!=null&&M(e,["videoMetadata"],g),e}function $Z(t){const e={},n=E(t,["productImage"]);return n!=null&&M(e,["image"],Jl(n)),e}function KZ(t,e){const n={},i=E(t,["numberOfImages"]);e!==void 0&&i!=null&&M(e,["parameters","sampleCount"],i);const r=E(t,["baseSteps"]);e!==void 0&&r!=null&&M(e,["parameters","baseSteps"],r);const a=E(t,["outputGcsUri"]);e!==void 0&&a!=null&&M(e,["parameters","storageUri"],a);const o=E(t,["seed"]);e!==void 0&&o!=null&&M(e,["parameters","seed"],o);const s=E(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&M(e,["parameters","safetySetting"],s);const u=E(t,["personGeneration"]);e!==void 0&&u!=null&&M(e,["parameters","personGeneration"],u);const c=E(t,["addWatermark"]);e!==void 0&&c!=null&&M(e,["parameters","addWatermark"],c);const d=E(t,["outputMimeType"]);e!==void 0&&d!=null&&M(e,["parameters","outputOptions","mimeType"],d);const p=E(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&M(e,["parameters","outputOptions","compressionQuality"],p);const g=E(t,["enhancePrompt"]);e!==void 0&&g!=null&&M(e,["parameters","enhancePrompt"],g);const y=E(t,["labels"]);return e!==void 0&&y!=null&&M(e,["labels"],y),n}function JZ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["source"]);r!=null&&QZ(r,n);const a=E(e,["config"]);return a!=null&&KZ(a,n),n}function ZZ(t){const e={},n=E(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>PE(r))),M(e,["generatedImages"],i)}return e}function QZ(t,e){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&M(e,["instances[0]","prompt"],i);const r=E(t,["personImage"]);e!==void 0&&r!=null&&M(e,["instances[0]","personImage","image"],Jl(r));const a=E(t,["productImages"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>$Z(s))),M(e,["instances[0]","productImages"],o)}return n}function eQ(t){const e={},n=E(t,["referenceImage"]);n!=null&&M(e,["referenceImage"],Jl(n));const i=E(t,["referenceId"]);i!=null&&M(e,["referenceId"],i);const r=E(t,["referenceType"]);r!=null&&M(e,["referenceType"],r);const a=E(t,["maskImageConfig"]);a!=null&&M(e,["maskImageConfig"],XZ(a));const o=E(t,["controlImageConfig"]);o!=null&&M(e,["controlImageConfig"],zJ(o));const s=E(t,["styleImageConfig"]);s!=null&&M(e,["styleImageConfig"],s);const u=E(t,["subjectImageConfig"]);return u!=null&&M(e,["subjectImageConfig"],u),e}function Nz(t){const e={},n=E(t,["safetyAttributes","categories"]);n!=null&&M(e,["categories"],n);const i=E(t,["safetyAttributes","scores"]);i!=null&&M(e,["scores"],i);const r=E(t,["contentType"]);return r!=null&&M(e,["contentType"],r),e}function Dz(t){const e={},n=E(t,["safetyAttributes","categories"]);n!=null&&M(e,["categories"],n);const i=E(t,["safetyAttributes","scores"]);i!=null&&M(e,["scores"],i);const r=E(t,["contentType"]);return r!=null&&M(e,["contentType"],r),e}function tQ(t){const e={},n=E(t,["category"]);if(n!=null&&M(e,["category"],n),E(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=E(t,["threshold"]);return i!=null&&M(e,["threshold"],i),e}function nQ(t){const e={},n=E(t,["image"]);return n!=null&&M(e,["image"],Jl(n)),e}function iQ(t,e){const n={},i=E(t,["mode"]);e!==void 0&&i!=null&&M(e,["parameters","mode"],i);const r=E(t,["maxPredictions"]);e!==void 0&&r!=null&&M(e,["parameters","maxPredictions"],r);const a=E(t,["confidenceThreshold"]);e!==void 0&&a!=null&&M(e,["parameters","confidenceThreshold"],a);const o=E(t,["maskDilation"]);e!==void 0&&o!=null&&M(e,["parameters","maskDilation"],o);const s=E(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&M(e,["parameters","binaryColorThreshold"],s);const u=E(t,["labels"]);return e!==void 0&&u!=null&&M(e,["labels"],u),n}function rQ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["source"]);r!=null&&oQ(r,n);const a=E(e,["config"]);return a!=null&&iQ(a,n),n}function aQ(t){const e={},n=E(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>IZ(r))),M(e,["generatedMasks"],i)}return e}function oQ(t,e){const n={},i=E(t,["prompt"]);e!==void 0&&i!=null&&M(e,["instances[0]","prompt"],i);const r=E(t,["image"]);e!==void 0&&r!=null&&M(e,["instances[0]","image"],Jl(r));const a=E(t,["scribbleImage"]);return e!==void 0&&a!=null&&M(e,["instances[0]","scribble"],nQ(a)),n}function sQ(t){const e={},n=E(t,["retrievalConfig"]);n!=null&&M(e,["retrievalConfig"],n);const i=E(t,["functionCallingConfig"]);return i!=null&&M(e,["functionCallingConfig"],uZ(i)),e}function lQ(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&M(e,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&M(e,["fileSearch"],i);const r=E(t,["codeExecution"]);if(r!=null&&M(e,["codeExecution"],r),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=E(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),M(e,["functionDeclarations"],d)}const o=E(t,["googleMaps"]);o!=null&&M(e,["googleMaps"],UZ(o));const s=E(t,["googleSearch"]);s!=null&&M(e,["googleSearch"],FZ(s));const u=E(t,["googleSearchRetrieval"]);u!=null&&M(e,["googleSearchRetrieval"],u);const c=E(t,["urlContext"]);return c!=null&&M(e,["urlContext"],c),e}function Oz(t){const e={},n=E(t,["retrieval"]);n!=null&&M(e,["retrieval"],n);const i=E(t,["computerUse"]);if(i!=null&&M(e,["computerUse"],i),E(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=E(t,["codeExecution"]);r!=null&&M(e,["codeExecution"],r);const a=E(t,["enterpriseWebSearch"]);a!=null&&M(e,["enterpriseWebSearch"],a);const o=E(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>cZ(g))),M(e,["functionDeclarations"],p)}const s=E(t,["googleMaps"]);s!=null&&M(e,["googleMaps"],s);const u=E(t,["googleSearch"]);u!=null&&M(e,["googleSearch"],u);const c=E(t,["googleSearchRetrieval"]);c!=null&&M(e,["googleSearchRetrieval"],c);const d=E(t,["urlContext"]);return d!=null&&M(e,["urlContext"],d),e}function uQ(t){const e={},n=E(t,["baseModel"]);n!=null&&M(e,["baseModel"],n);const i=E(t,["createTime"]);i!=null&&M(e,["createTime"],i);const r=E(t,["updateTime"]);return r!=null&&M(e,["updateTime"],r),e}function cQ(t){const e={},n=E(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&M(e,["baseModel"],n);const i=E(t,["createTime"]);i!=null&&M(e,["createTime"],i);const r=E(t,["updateTime"]);return r!=null&&M(e,["updateTime"],r),e}function fQ(t,e){const n={},i=E(t,["displayName"]);e!==void 0&&i!=null&&M(e,["displayName"],i);const r=E(t,["description"]);e!==void 0&&r!=null&&M(e,["description"],r);const a=E(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&M(e,["defaultCheckpointId"],a),n}function dQ(t,e){const n={},i=E(t,["displayName"]);e!==void 0&&i!=null&&M(e,["displayName"],i);const r=E(t,["description"]);e!==void 0&&r!=null&&M(e,["description"],r);const a=E(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&M(e,["defaultCheckpointId"],a),n}function hQ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","name"],Xn(t,i));const r=E(e,["config"]);return r!=null&&fQ(r,n),n}function pQ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["config"]);return r!=null&&dQ(r,n),n}function mQ(t,e){const n={},i=E(t,["outputGcsUri"]);e!==void 0&&i!=null&&M(e,["parameters","storageUri"],i);const r=E(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&M(e,["parameters","safetySetting"],r);const a=E(t,["personGeneration"]);e!==void 0&&a!=null&&M(e,["parameters","personGeneration"],a);const o=E(t,["includeRaiReason"]);e!==void 0&&o!=null&&M(e,["parameters","includeRaiReason"],o);const s=E(t,["outputMimeType"]);e!==void 0&&s!=null&&M(e,["parameters","outputOptions","mimeType"],s);const u=E(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&M(e,["parameters","outputOptions","compressionQuality"],u);const c=E(t,["enhanceInputImage"]);e!==void 0&&c!=null&&M(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=E(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&M(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=E(t,["labels"]);e!==void 0&&p!=null&&M(e,["labels"],p);const g=E(t,["numberOfImages"]);e!==void 0&&g!=null&&M(e,["parameters","sampleCount"],g);const y=E(t,["mode"]);return e!==void 0&&y!=null&&M(e,["parameters","mode"],y),n}function gQ(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["_url","model"],Xn(t,i));const r=E(e,["image"]);r!=null&&M(n,["instances[0]","image"],Jl(r));const a=E(e,["upscaleFactor"]);a!=null&&M(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=E(e,["config"]);return o!=null&&mQ(o,n),n}function vQ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>PE(a))),M(e,["generatedImages"],r)}return e}function yQ(t){const e={},n=E(t,["uri"]);n!=null&&M(e,["uri"],n);const i=E(t,["encodedVideo"]);i!=null&&M(e,["videoBytes"],Ad(i));const r=E(t,["encoding"]);return r!=null&&M(e,["mimeType"],r),e}function _Q(t){const e={},n=E(t,["gcsUri"]);n!=null&&M(e,["uri"],n);const i=E(t,["bytesBase64Encoded"]);i!=null&&M(e,["videoBytes"],Ad(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["mimeType"],r),e}function bQ(t){const e={},n=E(t,["image"]);n!=null&&M(e,["_self"],Jl(n));const i=E(t,["maskMode"]);return i!=null&&M(e,["maskMode"],i),e}function xQ(t){const e={},n=E(t,["image"]);n!=null&&M(e,["image"],NE(n));const i=E(t,["referenceType"]);return i!=null&&M(e,["referenceType"],i),e}function SQ(t){const e={},n=E(t,["image"]);n!=null&&M(e,["image"],Jl(n));const i=E(t,["referenceType"]);return i!=null&&M(e,["referenceType"],i),e}function Lz(t){const e={},n=E(t,["uri"]);n!=null&&M(e,["uri"],n);const i=E(t,["videoBytes"]);i!=null&&M(e,["encodedVideo"],Ad(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["encoding"],r),e}function Uz(t){const e={},n=E(t,["uri"]);n!=null&&M(e,["gcsUri"],n);const i=E(t,["videoBytes"]);i!=null&&M(e,["bytesBase64Encoded"],Ad(i));const r=E(t,["mimeType"]);return r!=null&&M(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EQ(t,e){const n={},i=E(t,["displayName"]);return e!==void 0&&i!=null&&M(e,["displayName"],i),n}function TQ(t){const e={},n=E(t,["config"]);return n!=null&&EQ(n,e),e}function AQ(t,e){const n={},i=E(t,["force"]);return e!==void 0&&i!=null&&M(e,["_query","force"],i),n}function MQ(t){const e={},n=E(t,["name"]);n!=null&&M(e,["_url","name"],n);const i=E(t,["config"]);return i!=null&&AQ(i,e),e}function wQ(t){const e={},n=E(t,["name"]);return n!=null&&M(e,["_url","name"],n),e}function CQ(t,e){const n={},i=E(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["customMetadata"],a)}const r=E(t,["chunkingConfig"]);return e!==void 0&&r!=null&&M(e,["chunkingConfig"],r),n}function RQ(t){const e={},n=E(t,["name"]);n!=null&&M(e,["name"],n);const i=E(t,["metadata"]);i!=null&&M(e,["metadata"],i);const r=E(t,["done"]);r!=null&&M(e,["done"],r);const a=E(t,["error"]);a!=null&&M(e,["error"],a);const o=E(t,["response"]);return o!=null&&M(e,["response"],PQ(o)),e}function IQ(t){const e={},n=E(t,["fileSearchStoreName"]);n!=null&&M(e,["_url","file_search_store_name"],n);const i=E(t,["fileName"]);i!=null&&M(e,["fileName"],i);const r=E(t,["config"]);return r!=null&&CQ(r,e),e}function PQ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["parent"]);i!=null&&M(e,["parent"],i);const r=E(t,["documentName"]);return r!=null&&M(e,["documentName"],r),e}function NQ(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);return e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),n}function DQ(t){const e={},n=E(t,["config"]);return n!=null&&NQ(n,e),e}function OQ(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["fileSearchStores"],a)}return e}function Fz(t,e){const n={},i=E(t,["mimeType"]);e!==void 0&&i!=null&&M(e,["mimeType"],i);const r=E(t,["displayName"]);e!==void 0&&r!=null&&M(e,["displayName"],r);const a=E(t,["customMetadata"]);if(e!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(u=>u)),M(e,["customMetadata"],s)}const o=E(t,["chunkingConfig"]);return e!==void 0&&o!=null&&M(e,["chunkingConfig"],o),n}function LQ(t){const e={},n=E(t,["fileSearchStoreName"]);n!=null&&M(e,["_url","file_search_store_name"],n);const i=E(t,["config"]);return i!=null&&Fz(i,e),e}function UQ(t){const e={},n=E(t,["sdkHttpResponse"]);return n!=null&&M(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FQ="Content-Type",kQ="X-Server-Timeout",BQ="User-Agent",KC="x-goog-api-client",zQ="1.38.0",GQ=`google-genai-sdk/${zQ}`,VQ="v1beta1",HQ="v1beta";class qQ{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const s=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!s?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:VQ}else{if(!this.clientOptions.apiKey)throw new oy({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:HQ,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===qC.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,s]of Object.entries(e.queryParams))r.searchParams.append(o,String(s));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,o=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>a.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=o}return n&&n.extraBody!==null&&WQ(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await WO(r),new WC(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await WO(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Wl(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";const s="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield an(r.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(d,{stream:!0});try{const b=JSON.parse(p);if("error"in b){const T=JSON.parse(JSON.stringify(b.error)),S=T.status,A=T.code,R=`got status: ${S}. ${JSON.stringify(b)}`;if(A>=400&&A<600)throw new oy({message:R,status:A})}}catch(b){if(b.name==="ApiError")throw b}o+=p;let g=-1,y=0;for(;;){g=-1,y=0;for(const S of u){const A=o.indexOf(S);A!==-1&&(g===-1||A<g)&&(g=A,y=S.length)}if(g===-1)break;const b=o.substring(0,g);o=o.substring(g+y);const T=b.trim();if(T.startsWith(s)){const S=T.substring(s.length).trim();try{const A=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield an(new WC(A))}catch(A){throw new Error(`exception parsing stream chunk ${S}. ${A}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=GQ+" "+this.clientOptions.userAgentExtra;return e[BQ]=n,e[KC]=n,e[FQ]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(kQ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);r.sizeBytes=String(o.size);const s=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=s;const u={file:r},c=this.getFileName(e),d=It("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(d,r.sizeBytes,r.mimeType,c,u,n==null?void 0:n.httpOptions);return a.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,o=await a.stat(n),s=String(o.size),u=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&Fz(i,p);const g=await this.fetchUploadUrl(c,s,u,d,p,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,o){var s;let u={};o?u=o:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function WO(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new oy({message:r,status:n}):new Error(r)}}function WQ(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,o){const s=Object.assign({},a);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const c=o[u],d=s[u];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?s[u]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),s[u]=c)}return s}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jQ="mcp_used/unknown";let XQ=!1;function kz(t){for(const e of t)if(YQ(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XQ}function Bz(t){var e;const n=(e=t[KC])!==null&&e!==void 0?e:"";t[KC]=(n+` ${jQ}`).trimStart()}function YQ(t){return t!==null&&typeof t=="object"&&t instanceof FI}function $Q(t){return Wl(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const o=yield an(n.listTools({cursor:r}));for(const s of o.tools)yield yield an(s),a++;if(!o.nextCursor)break;r=o.nextCursor}})}class FI{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new FI(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},o=[];for(const d of this.mcpClients)try{for(var s=!0,u=(n=void 0,jl($Q(d))),c;c=await u.next(),e=c.done,!e;s=!0){r=c.value,s=!1;const p=r;o.push(p);const g=p.name;if(a[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);a[g]=d}}catch(p){n={error:p}}finally{try{!s&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),M$(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KQ(t,e,n){const i=new y$;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class JQ{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=eee(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${s}`;let c=()=>{};const d=new Promise(I=>{c=I}),p=e.callbacks,g=function(){c({})},y=this.apiClient,b={onopen:g,onmessage:I=>{KQ(y,p.onmessage,I)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(I){}},T=this.webSocketFactory.create(u,QQ(o),b);T.connect(),await d;const R={setup:{model:Xn(this.apiClient,e.model)}};return T.send(JSON.stringify(R)),new ZQ(T,this.apiClient)}}class ZQ{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=EJ(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=SJ(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl($m.PLAY)}pause(){this.sendPlaybackControl($m.PAUSE)}stop(){this.sendPlaybackControl($m.STOP)}resetContext(){this.sendPlaybackControl($m.RESET_CONTEXT)}close(){this.conn.close()}}function QQ(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function eee(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tee="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nee(t,e,n){const i=new v$;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const o=MJ(a);Object.assign(i,o)}else Object.assign(i,a);e(i)}class iee{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new JQ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,o,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&kz(e.config.tools)&&Bz(p);const g=see(p);if(this.apiClient.isVertexAI()){const L=this.apiClient.getProject(),F=this.apiClient.getLocation(),j=this.apiClient.getApiKey(),W=!!L&&!!F||!!j;this.apiClient.getCustomBaseUrl()&&!W?d=u:(d=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d))}else{const L=this.apiClient.getApiKey();let F="BidiGenerateContent",j="key";L!=null&&L.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",j="access_token"),d=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${j}=${L}`}let y=()=>{};const b=new Promise(L=>{y=L}),T=e.callbacks,S=function(){var L;(L=T==null?void 0:T.onopen)===null||L===void 0||L.call(T),y({})},A=this.apiClient,R={onopen:S,onmessage:L=>{nee(A,T.onmessage,L)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(L){}},I=this.webSocketFactory.create(d,oee(g),R);I.connect(),await b;let N=Xn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const L=this.apiClient.getProject(),F=this.apiClient.getLocation();L&&F&&(N=`projects/${L}/locations/${F}/`+N)}let D={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[DS.AUDIO]}:e.config.responseModalities=[DS.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[],k=[];for(const L of U)if(this.isCallableTool(L)){const F=L;k.push(await F.tool())}else k.push(L);k.length>0&&(e.config.tools=k);const z={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=xJ(this.apiClient,z):D=bJ(this.apiClient,z),delete D.config,I.send(JSON.stringify(D)),new aee(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ree={turnComplete:!0};class aee{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=al(n.turns),e.isVertexAI()||(i=i.map(r=>IE(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(tee)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},ree),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:AJ(e)}:n={realtimeInput:TJ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function oee(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function see(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jO=10;function XO(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ig(o)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ig(t){return"callTool"in t&&typeof t.callTool=="function"}function lee(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ig(r)))!==null&&i!==void 0?i:!1}function YO(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ig(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function $O(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uee extends lf{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,o,s;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!lee(n)||XO(n.config))return await this.generateContentInternal(u);const c=YO(n);if(c.length>0){const T=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,p;const g=al(u.contents),y=(a=(r=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:jO;let b=0;for(;b<y&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,S=[];for(const A of(s=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(ig(A)){const I=await A.callTool(d.functionCalls);S.push(...I)}b++,p={role:"user",parts:S},u.contents=al(u.contents),u.contents.push(T),u.contents.push(p),$O(u.config)&&(g.push(T),g.push(p))}return $O(u.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var i,r,a,o,s;if(this.maybeMoveToResponseJsonSchem(n),XO(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=YO(n);if(u.length>0){const p=u.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(a=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,d=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const o=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=u==null?void 0:u.safetyAttributes:o.push(u);let s;return a?s={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:s={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},s}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new fp($c.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,o,s,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((u=(s=n.source)===null||s===void 0?void 0:s.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const o=await Promise.all(a.map(async u=>ig(u)?await u.tool():u)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&kz(e.config.tools)){const u=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Bz(c),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return s}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ig(o)){const s=o,u=await s.tool();for(const c of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,s)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:jO;let o=!1,s=0;const u=await this.initAfcToolsMap(e);return(function(c,d,p){return Wl(this,arguments,function*(){for(var g,y,b,T,S,A;s<a;){o&&(s++,o=!1);const D=yield an(c.processParamsMaybeAddMcpUsage(p)),U=yield an(c.generateContentStreamInternal(D)),k=[],z=[];try{for(var R=!0,I=(y=void 0,jl(U)),N;N=yield an(I.next()),g=N.done,!g;R=!0){T=N.value,R=!1;const L=T;if(yield yield an(L),L.candidates&&(!((S=L.candidates[0])===null||S===void 0)&&S.content)){z.push(L.candidates[0].content);for(const F of(A=L.candidates[0].content.parts)!==null&&A!==void 0?A:[])if(s<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(F.functionCall.name)){const j=yield an(d.get(F.functionCall.name).callTool([F.functionCall]));k.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(L){y={error:L}}finally{try{!R&&!g&&(b=I.return)&&(yield an(b.call(I)))}finally{if(y)throw y.error}}if(k.length>0){o=!0;const L=new h0;L.candidates=[{content:{role:"user",parts:k}}],yield yield an(L);const F=[];F.push(...z),F.push({role:"user",parts:k});const j=al(p.contents).concat(F);p.contents=j}else break}})})(this,u,e)}async generateContentInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=VO(this.apiClient,e);return s=It("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=qO(d),g=new h0;return Object.assign(g,p),g})}else{const c=GO(this.apiClient,e);return s=It("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=HO(d),g=new h0;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=VO(this.apiClient,e);return s=It("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return Wl(this,arguments,function*(){var g,y,b,T;try{for(var S=!0,A=jl(p),R;R=yield an(A.next()),g=R.done,!g;S=!0){T=R.value,S=!1;const I=T,N=qO(yield an(I.json()));N.sdkHttpResponse={headers:I.headers};const D=new h0;Object.assign(D,N),yield yield an(D)}}catch(I){y={error:I}}finally{try{!S&&!g&&(b=A.return)&&(yield an(b.call(A)))}finally{if(y)throw y.error}}})})}else{const c=GO(this.apiClient,e);return s=It("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return Wl(this,arguments,function*(){var g,y,b,T;try{for(var S=!0,A=jl(p),R;R=yield an(A.next()),g=R.done,!g;S=!0){T=R.value,S=!1;const I=T,N=HO(yield an(I.json()));N.sdkHttpResponse={headers:I.headers};const D=new h0;Object.assign(D,N),yield yield an(D)}}catch(I){y={error:I}}finally{try{!S&&!g&&(b=A.return)&&(yield an(b.call(A)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=iZ(this.apiClient,e);return s=It("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=aZ(d),g=new TO;return Object.assign(g,p),g})}else{const c=nZ(this.apiClient,e);return s=It("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=rZ(d),g=new TO;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=gZ(this.apiClient,e);return s=It("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=yZ(d),g=new AO;return Object.assign(g,p),g})}else{const c=mZ(this.apiClient,e);return s=It("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=vZ(d),g=new AO;return Object.assign(g,p),g})}}async editImageInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=ZJ(this.apiClient,e);return a=It("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>{const c=QJ(u),d=new o$;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=gQ(this.apiClient,e);return a=It("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>{const c=vQ(u),d=new s$;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=JZ(this.apiClient,e);return a=It("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=ZZ(u),d=new l$;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=rQ(this.apiClient,e);return a=It("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=aQ(u),d=new u$;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=LZ(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>$C(d))}else{const c=OZ(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>YC(d))}}async listInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=qZ(this.apiClient,e);return s=It("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=jZ(d),g=new MO;return Object.assign(g,p),g})}else{const c=HZ(this.apiClient,e);return s=It("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=WZ(d),g=new MO;return Object.assign(g,p),g})}}async update(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=pQ(this.apiClient,e);return s=It("{model}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>$C(d))}else{const c=hQ(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>YC(d))}}async delete(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=YJ(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=KJ(d),g=new wO;return Object.assign(g,p),g})}else{const c=XJ(this.apiClient,e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=$J(d),g=new wO;return Object.assign(g,p),g})}}async countTokens(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=qJ(this.apiClient,e);return s=It("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=jJ(d),g=new CO;return Object.assign(g,p),g})}else{const c=HJ(this.apiClient,e);return s=It("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=WJ(d),g=new CO;return Object.assign(g,p),g})}}async computeTokens(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=UJ(this.apiClient,e);return a=It("{model}:computeTokens",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>{const c=FJ(u),d=new c$;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=TZ(this.apiClient,e);return s=It("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const p=SZ(d),g=new OS;return Object.assign(g,p),g})}else{const c=EZ(this.apiClient,e);return s=It("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>{const p=xZ(d),g=new OS;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cee extends lf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=e$(e);return s=It("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}else{const c=QY(e);return s=It("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=jY(e);return a=It("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fee(t){const e={},n=E(t,["data"]);if(n!=null&&M(e,["data"],n),E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function dee(t){const e={},n=E(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>xee(a))),M(e,["parts"],r)}const i=E(t,["role"]);return i!=null&&M(e,["role"],i),e}function hee(t,e,n){const i={},r=E(e,["expireTime"]);n!==void 0&&r!=null&&M(n,["expireTime"],r);const a=E(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&M(n,["newSessionExpireTime"],a);const o=E(e,["uses"]);n!==void 0&&o!=null&&M(n,["uses"],o);const s=E(e,["liveConnectConstraints"]);n!==void 0&&s!=null&&M(n,["bidiGenerateContentSetup"],bee(t,s));const u=E(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&M(n,["fieldMask"],u),i}function pee(t,e){const n={},i=E(e,["config"]);return i!=null&&M(n,["config"],hee(t,i,n)),n}function mee(t){const e={};if(E(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=E(t,["fileUri"]);n!=null&&M(e,["fileUri"],n);const i=E(t,["mimeType"]);return i!=null&&M(e,["mimeType"],i),e}function gee(t){const e={},n=E(t,["id"]);n!=null&&M(e,["id"],n);const i=E(t,["args"]);i!=null&&M(e,["args"],i);const r=E(t,["name"]);if(r!=null&&M(e,["name"],r),E(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(E(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vee(t){const e={};if(E(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=E(t,["enableWidget"]);return n!=null&&M(e,["enableWidget"],n),e}function yee(t){const e={};if(E(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(E(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=E(t,["timeRangeFilter"]);return n!=null&&M(e,["timeRangeFilter"],n),e}function _ee(t,e){const n={},i=E(t,["generationConfig"]);e!==void 0&&i!=null&&M(e,["setup","generationConfig"],i);const r=E(t,["responseModalities"]);e!==void 0&&r!=null&&M(e,["setup","generationConfig","responseModalities"],r);const a=E(t,["temperature"]);e!==void 0&&a!=null&&M(e,["setup","generationConfig","temperature"],a);const o=E(t,["topP"]);e!==void 0&&o!=null&&M(e,["setup","generationConfig","topP"],o);const s=E(t,["topK"]);e!==void 0&&s!=null&&M(e,["setup","generationConfig","topK"],s);const u=E(t,["maxOutputTokens"]);e!==void 0&&u!=null&&M(e,["setup","generationConfig","maxOutputTokens"],u);const c=E(t,["mediaResolution"]);e!==void 0&&c!=null&&M(e,["setup","generationConfig","mediaResolution"],c);const d=E(t,["seed"]);e!==void 0&&d!=null&&M(e,["setup","generationConfig","seed"],d);const p=E(t,["speechConfig"]);e!==void 0&&p!=null&&M(e,["setup","generationConfig","speechConfig"],UI(p));const g=E(t,["thinkingConfig"]);e!==void 0&&g!=null&&M(e,["setup","generationConfig","thinkingConfig"],g);const y=E(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&M(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=E(t,["systemInstruction"]);e!==void 0&&b!=null&&M(e,["setup","systemInstruction"],dee(Wa(b)));const T=E(t,["tools"]);if(e!==void 0&&T!=null){let U=Rg(T);Array.isArray(U)&&(U=U.map(k=>Eee(Cg(k)))),M(e,["setup","tools"],U)}const S=E(t,["sessionResumption"]);e!==void 0&&S!=null&&M(e,["setup","sessionResumption"],See(S));const A=E(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&M(e,["setup","inputAudioTranscription"],A);const R=E(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&M(e,["setup","outputAudioTranscription"],R);const I=E(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&M(e,["setup","realtimeInputConfig"],I);const N=E(t,["contextWindowCompression"]);e!==void 0&&N!=null&&M(e,["setup","contextWindowCompression"],N);const D=E(t,["proactivity"]);if(e!==void 0&&D!=null&&M(e,["setup","proactivity"],D),E(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function bee(t,e){const n={},i=E(e,["model"]);i!=null&&M(n,["setup","model"],Xn(t,i));const r=E(e,["config"]);return r!=null&&M(n,["config"],_ee(r,n)),n}function xee(t){const e={},n=E(t,["mediaResolution"]);n!=null&&M(e,["mediaResolution"],n);const i=E(t,["codeExecutionResult"]);i!=null&&M(e,["codeExecutionResult"],i);const r=E(t,["executableCode"]);r!=null&&M(e,["executableCode"],r);const a=E(t,["fileData"]);a!=null&&M(e,["fileData"],mee(a));const o=E(t,["functionCall"]);o!=null&&M(e,["functionCall"],gee(o));const s=E(t,["functionResponse"]);s!=null&&M(e,["functionResponse"],s);const u=E(t,["inlineData"]);u!=null&&M(e,["inlineData"],fee(u));const c=E(t,["text"]);c!=null&&M(e,["text"],c);const d=E(t,["thought"]);d!=null&&M(e,["thought"],d);const p=E(t,["thoughtSignature"]);p!=null&&M(e,["thoughtSignature"],p);const g=E(t,["videoMetadata"]);return g!=null&&M(e,["videoMetadata"],g),e}function See(t){const e={},n=E(t,["handle"]);if(n!=null&&M(e,["handle"],n),E(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Eee(t){const e={};if(E(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=E(t,["computerUse"]);n!=null&&M(e,["computerUse"],n);const i=E(t,["fileSearch"]);i!=null&&M(e,["fileSearch"],i);const r=E(t,["codeExecution"]);if(r!=null&&M(e,["codeExecution"],r),E(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=E(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),M(e,["functionDeclarations"],d)}const o=E(t,["googleMaps"]);o!=null&&M(e,["googleMaps"],vee(o));const s=E(t,["googleSearch"]);s!=null&&M(e,["googleSearch"],yee(s));const u=E(t,["googleSearchRetrieval"]);u!=null&&M(e,["googleSearchRetrieval"],u);const c=E(t,["urlContext"]);return c!=null&&M(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tee(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function Aee(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=Tee(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];r.length>0&&(s=r.map(c=>o.includes(c)?`generationConfig.${c}`:c));const u=[];a&&u.push(a),s.length>0&&u.push(...s),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Mee extends lf{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=pee(this.apiClient,e);a=It("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const u=Aee(s,e.config);return r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wee(t,e){const n={},i=E(t,["force"]);return e!==void 0&&i!=null&&M(e,["_query","force"],i),n}function Cee(t){const e={},n=E(t,["name"]);n!=null&&M(e,["_url","name"],n);const i=E(t,["config"]);return i!=null&&wee(i,e),e}function Ree(t){const e={},n=E(t,["name"]);return n!=null&&M(e,["_url","name"],n),e}function Iee(t,e){const n={},i=E(t,["pageSize"]);e!==void 0&&i!=null&&M(e,["_query","pageSize"],i);const r=E(t,["pageToken"]);return e!==void 0&&r!=null&&M(e,["_query","pageToken"],r),n}function Pee(t){const e={},n=E(t,["parent"]);n!=null&&M(e,["_url","parent"],n);const i=E(t,["config"]);return i!=null&&Iee(i,e),e}function Nee(t){const e={},n=E(t,["sdkHttpResponse"]);n!=null&&M(e,["sdkHttpResponse"],n);const i=E(t,["nextPageToken"]);i!=null&&M(e,["nextPageToken"],i);const r=E(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),M(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dee extends lf{constructor(e){super(),this.apiClient=e,this.list=async n=>new fp($c.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ree(e);return a=It("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Cee(e);r=It("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Pee(e);return a=It("{parent}/documents",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=Nee(u),d=new f$;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oee extends lf{constructor(e,n=new Dee(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new fp($c.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=TQ(e);return a=It("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=wQ(e);return a=It("{name}",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=MQ(e);r=It("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=DQ(e);return a=It("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=OQ(u),d=new d$;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=LQ(e);return a=It("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=UQ(u),d=new h$;return Object.assign(d,c),d})}}async importFile(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=IQ(e);return a=It("{file_search_store_name}:importFile",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const c=RQ(u),d=new PI;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zz=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return zz=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Lee=()=>zz();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ZC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sl extends Error{}class _o extends sl{constructor(e,n,i,r){super(`${_o.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new DE({message:i,cause:ZC(n)});const a=n;return e===400?new Vz(e,a,i,r):e===401?new Hz(e,a,i,r):e===403?new qz(e,a,i,r):e===404?new Wz(e,a,i,r):e===409?new jz(e,a,i,r):e===422?new Xz(e,a,i,r):e===429?new Yz(e,a,i,r):e>=500?new $z(e,a,i,r):new _o(e,a,i,r)}}class QC extends _o{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class DE extends _o{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Gz extends DE{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Vz extends _o{}class Hz extends _o{}class qz extends _o{}class Wz extends _o{}class jz extends _o{}class Xz extends _o{}class Yz extends _o{}class $z extends _o{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uee=/^[a-z][a-z0-9+.-]*:/i,Fee=t=>Uee.test(t);let eR=t=>(eR=Array.isArray,eR(t));const kee=eR;let Bee=kee;const KO=Bee;function zee(t){if(!t)return!0;for(const e in t)return!1;return!0}function Gee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Vee=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new sl(`${t} must be an integer`);if(e<0)throw new sl(`${t} must be a positive integer`);return e},Hee=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qee=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xm="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wee(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jee=()=>{var t,e,n,i,r;const a=Wee();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xm,"X-Stainless-OS":ZO(Deno.build.os),"X-Stainless-Arch":JO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xm,"X-Stainless-OS":ZO((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":JO((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const o=Xee();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Xee(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,o=i[3]||0;return{browser:e,version:`${r}.${a}.${o}`}}}return null}const JO=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ZO=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Qb;const Yee=()=>Qb??(Qb=jee());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $ee(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Kz(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Kee(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Kz({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Jz(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Jee(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zee=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zz=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function eM(t,e,n){return Zz(),new File(t,e??"unknown_file",n)}function Qee(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ete=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qz=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",tte=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Qz(t),nte=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ite(t,e,n){if(Zz(),t=await t,tte(t))return t instanceof File?t:eM([await t.arrayBuffer()],t.name);if(nte(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),eM(await tR(r),e,n)}const i=await tR(t);if(e||(e=Qee(t)),!(n!=null&&n.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return eM(i,e,n)}async function tR(t){var e,n,i,r,a;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Qz(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(ete(t))try{for(var s=!0,u=jl(t),c;c=await u.next(),e=c.done,!e;s=!0){r=c.value,s=!1;const d=r;o.push(...await tR(d))}}catch(d){n={error:d}}finally{try{!s&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{const d=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${rte(t)}`)}return o}function rte(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e5{constructor(e){this._client=e}}e5._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t5(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const QO=Object.freeze(Object.create(null)),ate=(t=t5)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],o=n.reduce((d,p,g)=>{var y,b,T;/[?#]/.test(p)&&(r=!0);const S=i[g];let A=(r?encodeURIComponent:t)(""+S);return g!==i.length&&(S==null||typeof S=="object"&&S.toString===((T=Object.getPrototypeOf((b=Object.getPrototypeOf((y=S.hasOwnProperty)!==null&&y!==void 0?y:QO))!==null&&b!==void 0?b:QO))===null||T===void 0?void 0:T.toString))&&(A=S+"",a.push({start:d.length+p.length,length:A.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),d+p+(g===i.length?"":A)},""),s=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(s))!==null;)a.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(a.sort((d,p)=>d.start-p.start),a.length>0){let d=0;const p=a.reduce((g,y)=>{const b=" ".repeat(y.start-d),T="^".repeat(y.length);return d=y.start+y.length,g+b+T},"");throw new sl(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${o}
${p}`)}return o}),ex=ate(t5);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n5 extends e5{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=US(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new sl("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new sl("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ex`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(ex`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(ex`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:o=this._client.apiVersion}=a,s=US(a,["api_version"]);return this._client.get(ex`/${o}/interactions/${e}`,Object.assign(Object.assign({query:s},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}n5._key=Object.freeze(["interactions"]);class i5 extends n5{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ote(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let tx;function kI(t){let e;return(tx??(e=new globalThis.TextEncoder,tx=e.encode.bind(e)))(t)}let nx;function eL(t){let e;return(nx??(e=new globalThis.TextDecoder,nx=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OE{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kI(e):e;this.buffer=ote([this.buffer,n]);const i=[];let r;for(;(r=ste(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(eL(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,o=eL(this.buffer.subarray(0,a));i.push(o),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}OE.NEWLINE_CHARS=new Set([`
`,"\r"]);OE.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ste(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function lte(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FS={off:0,error:200,warn:300,info:400,debug:500},tL=(t,e,n)=>{if(t){if(Gee(FS,t))return t;ho(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(FS))}`)}};function k0(){}function ix(t,e,n){return!e||FS[t]>FS[n]?k0:e[t].bind(e)}const ute={error:k0,warn:k0,info:k0,debug:k0};let nL=new WeakMap;function ho(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return ute;const r=nL.get(n);if(r&&r[0]===i)return r[1];const a={error:ix("error",n,i),warn:ix("warn",n,i),info:ix("info",n,i),debug:ix("debug",n,i)};return nL.set(n,[i,a]),a}const Ph=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Km{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?ho(i):console;function o(){return Wl(this,arguments,function*(){var u,c,d,p;if(r)throw new sl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,b=jl(cte(e,n)),T;T=yield an(b.next()),u=T.done,!u;y=!0){p=T.value,y=!1;const S=p;if(!g)if(S.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield an(JSON.parse(S.data))}catch(A){throw a.error("Could not parse message into JSON:",S.data),a.error("From chunk:",S.raw),A}}}catch(S){c={error:S}}finally{try{!y&&!u&&(d=b.return)&&(yield an(d.call(b)))}finally{if(c)throw c.error}}g=!0}catch(S){if(JC(S))return yield an(void 0);throw S}finally{g||n.abort()}})}return new Km(o,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return Wl(this,arguments,function*(){var u,c,d,p;const g=new OE,y=Jz(e);try{for(var b=!0,T=jl(y),S;S=yield an(T.next()),u=S.done,!u;b=!0){p=S.value,b=!1;const A=p;for(const R of g.decode(A))yield yield an(R)}}catch(A){c={error:A}}finally{try{!b&&!u&&(d=T.return)&&(yield an(d.call(T)))}finally{if(c)throw c.error}}for(const A of g.flush())yield yield an(A)})}function o(){return Wl(this,arguments,function*(){var u,c,d,p;if(r)throw new sl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,b=jl(a()),T;T=yield an(b.next()),u=T.done,!u;y=!0){p=T.value,y=!1;const S=p;g||S&&(yield yield an(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!y&&!u&&(d=b.return)&&(yield an(d.call(b)))}finally{if(c)throw c.error}}g=!0}catch(S){if(JC(S))return yield an(void 0);throw S}finally{g||n.abort()}})}return new Km(o,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const o=i.next();e.push(o),n.push(o)}return a.shift()}});return[new Km(()=>r(e),this.controller,this.client),new Km(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Kz({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const o=kI(JSON.stringify(r)+`
`);i.enqueue(o)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function cte(t,e){return Wl(this,arguments,function*(){var i,r,a,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new sl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new sl("Attempted to iterate over a response with no body");const s=new dte,u=new OE,c=Jz(t.body);try{for(var d=!0,p=jl(fte(c)),g;g=yield an(p.next()),i=g.done,!i;d=!0){o=g.value,d=!1;const y=o;for(const b of u.decode(y)){const T=s.decode(b);T&&(yield yield an(T))}}}catch(y){r={error:y}}finally{try{!d&&!i&&(a=p.return)&&(yield an(a.call(p)))}finally{if(r)throw r.error}}for(const y of u.flush()){const b=s.decode(y);b&&(yield yield an(b))}})}function fte(t){return Wl(this,arguments,function*(){var n,i,r,a;let o=new Uint8Array;try{for(var s=!0,u=jl(t),c;c=yield an(u.next()),n=c.done,!n;s=!0){a=c.value,s=!1;const d=a;if(d==null)continue;const p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?kI(d):d;let g=new Uint8Array(o.length+p.length);g.set(o),g.set(p,o.length),o=g;let y;for(;(y=lte(o))!==-1;)yield yield an(o.slice(0,y)),o=o.slice(y)}}catch(d){i={error:d}}finally{try{!s&&!n&&(r=u.return)&&(yield an(r.call(u)))}finally{if(i)throw i.error}}o.length>0&&(yield yield an(o))})}class dte{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=hte(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function hte(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pte(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,o=await(async()=>{var s;if(e.options.stream)return ho(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Km.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(s=u==null?void 0:u.split(";")[0])===null||s===void 0?void 0:s.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return ho(t).debug(`[${i}] response parsed`,Ph({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BI extends Promise{constructor(e,n,i=pte){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new BI(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r5=Symbol("brand.privateNullableHeaders");function*mte(t){if(!t)return;if(r5 in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():KO(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=KO(i[1])?i[1]:[i[1]];let o=!1;for(const s of a)s!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,s])}}const p0=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,o]of mte(i)){const s=a.toLowerCase();r.has(s)||(e.delete(a),r.add(s)),o===null?(e.delete(a),n.add(s)):(e.append(a,o),n.delete(s))}}return{[r5]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tM=t=>{var e,n,i,r,a,o;if(typeof globalThis.process<"u")return(i=(n=(e=zY)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(o=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var a5;class LE{constructor(e){var n,i,r,a,o,s,u,{baseURL:c=tM("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=tM("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=US(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:p},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(i=y.timeout)!==null&&i!==void 0?i:LE.DEFAULT_TIMEOUT,this.logger=(r=y.logger)!==null&&r!==void 0?r:console;const b="warn";this.logLevel=b,this.logLevel=(o=(a=tL(y.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:tL(tM("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:b,this.fetchOptions=y.fetchOptions,this.maxRetries=(s=y.maxRetries)!==null&&s!==void 0?s:2,this.fetch=(u=y.fetch)!==null&&u!==void 0?u:$ee(),this.encoder=Zee,this._options=y,this.apiKey=d,this.apiVersion=p,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=p0([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return p0([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return p0([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new sl(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xm}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lee()}`}makeStatusError(e,n,i,r){return _o.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=Fee(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return zee(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new BI(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,o;const s=await e,u=(r=s.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=u),await this.prepareOptions(s);const{req:c,url:d,timeout:p}=await this.buildRequest(s,{retryCount:u-n});await this.prepareRequest(c,{url:d,options:s});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=i===void 0?"":`, retryOf: ${i}`,b=Date.now();if(ho(this).debug(`[${g}] sending request`,Ph({retryOfRequestLogID:i,method:s.method,url:d,options:s,headers:c.headers})),!((a=s.signal)===null||a===void 0)&&a.aborted)throw new QC;const T=new AbortController,S=await this.fetchWithTimeout(d,c,p,T).catch(ZC),A=Date.now();if(S instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((o=s.signal)===null||o===void 0)&&o.aborted)throw new QC;const N=JC(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return ho(this).info(`[${g}] connection ${N?"timed out":"failed"} - ${I}`),ho(this).debug(`[${g}] connection ${N?"timed out":"failed"} (${I})`,Ph({retryOfRequestLogID:i,url:d,durationMs:A-b,message:S.message})),this.retryRequest(s,n,i??g);throw ho(this).info(`[${g}] connection ${N?"timed out":"failed"} - error; no more retries left`),ho(this).debug(`[${g}] connection ${N?"timed out":"failed"} (error; no more retries left)`,Ph({retryOfRequestLogID:i,url:d,durationMs:A-b,message:S.message})),N?new Gz:new DE({cause:S})}const R=`[${g}${y}] ${c.method} ${d} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${A-b}ms`;if(!S.ok){const I=await this.shouldRetry(S);if(n&&I){const L=`retrying, ${n} attempts remaining`;return await Jee(S.body),ho(this).info(`${R} - ${L}`),ho(this).debug(`[${g}] response error (${L})`,Ph({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:A-b})),this.retryRequest(s,n,i??g,S.headers)}const N=I?"error; no more retries left":"error; not retryable";ho(this).info(`${R} - ${N}`);const D=await S.text().catch(L=>ZC(L).message),U=Hee(D),k=U?void 0:D;throw ho(this).debug(`[${g}] response error (${N})`,Ph({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:k,durationMs:Date.now()-b})),this.makeStatusError(S.status,U,k,S.headers)}return ho(this).info(R),ho(this).debug(`[${g}] response start`,Ph({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:A-b})),{response:S,options:s,controller:T,requestLogID:g,retryOfRequestLogID:i,startTime:b}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:o,method:s}=a,u=US(a,["signal","method"]);o&&o.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),i),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:r.signal},d?{duplex:"half"}:{}),{method:"GET"}),u);s&&(p.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let o;const s=r==null?void 0:r.get("retry-after-ms");if(s){const c=parseFloat(s);Number.isNaN(c)||(o=c)}const u=r==null?void 0:r.get("retry-after");if(u&&!o){const c=parseFloat(u);Number.isNaN(c)?o=Date.parse(u)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await qee(o),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const o=Object.assign({},e),{method:s,path:u,query:c,defaultBaseURL:d}=o,p=this.buildURL(u,c,d);"timeout"in o&&Vee("timeout",o.timeout),o.timeout=(i=o.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),b=await this.buildHeaders({options:e,method:s,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:b},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=o.fetchOptions)!==null&&a!==void 0?a:{}),url:p,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let s=p0([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Yee()),this._options.defaultHeaders,i,e.headers,o]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=p0([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Kee(e)}:this.encoder({body:e,headers:i})}}LE.DEFAULT_TIMEOUT=6e4;class fa extends LE{constructor(){super(...arguments),this.interactions=new i5(this)}}a5=fa;fa.GeminiNextGenAPIClient=a5;fa.GeminiNextGenAPIClientError=sl;fa.APIError=_o;fa.APIConnectionError=DE;fa.APIConnectionTimeoutError=Gz;fa.APIUserAbortError=QC;fa.NotFoundError=Wz;fa.ConflictError=jz;fa.RateLimitError=Yz;fa.BadRequestError=Vz;fa.AuthenticationError=Hz;fa.InternalServerError=$z;fa.PermissionDeniedError=qz;fa.UnprocessableEntityError=Xz;fa.toFile=ite;fa.Interactions=i5;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gte(t,e){const n={},i=E(t,["name"]);return i!=null&&M(n,["_url","name"],i),n}function vte(t,e){const n={},i=E(t,["name"]);return i!=null&&M(n,["_url","name"],i),n}function yte(t,e){const n={},i=E(t,["sdkHttpResponse"]);return i!=null&&M(n,["sdkHttpResponse"],i),n}function _te(t,e){const n={},i=E(t,["sdkHttpResponse"]);return i!=null&&M(n,["sdkHttpResponse"],i),n}function bte(t,e,n){const i={};if(E(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=E(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&M(e,["displayName"],r),E(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=E(t,["epochCount"]);e!==void 0&&a!=null&&M(e,["tuningTask","hyperparameters","epochCount"],a);const o=E(t,["learningRateMultiplier"]);if(o!=null&&M(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),E(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(E(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(E(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=E(t,["batchSize"]);e!==void 0&&s!=null&&M(e,["tuningTask","hyperparameters","batchSize"],s);const u=E(t,["learningRate"]);if(e!==void 0&&u!=null&&M(e,["tuningTask","hyperparameters","learningRate"],u),E(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(E(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function xte(t,e,n){const i={};let r=E(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const y=E(t,["validationDataset"]);e!==void 0&&y!=null&&M(e,["supervisedTuningSpec"],iL(y))}else if(r==="PREFERENCE_TUNING"){const y=E(t,["validationDataset"]);e!==void 0&&y!=null&&M(e,["preferenceOptimizationSpec"],iL(y))}const a=E(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&M(e,["tunedModelDisplayName"],a);const o=E(t,["description"]);e!==void 0&&o!=null&&M(e,["description"],o);let s=E(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=E(t,["epochCount"]);e!==void 0&&y!=null&&M(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(s==="PREFERENCE_TUNING"){const y=E(t,["epochCount"]);e!==void 0&&y!=null&&M(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let u=E(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=E(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&M(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(u==="PREFERENCE_TUNING"){const y=E(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&M(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=E(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=E(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&M(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=E(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&M(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=E(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=E(t,["adapterSize"]);e!==void 0&&y!=null&&M(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=E(t,["adapterSize"]);e!==void 0&&y!=null&&M(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(E(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(E(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=E(t,["labels"]);e!==void 0&&p!=null&&M(e,["labels"],p);const g=E(t,["beta"]);return e!==void 0&&g!=null&&M(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),i}function Ste(t,e){const n={},i=E(t,["baseModel"]);i!=null&&M(n,["baseModel"],i);const r=E(t,["preTunedModel"]);r!=null&&M(n,["preTunedModel"],r);const a=E(t,["trainingDataset"]);a!=null&&Dte(a);const o=E(t,["config"]);return o!=null&&bte(o,n),n}function Ete(t,e){const n={},i=E(t,["baseModel"]);i!=null&&M(n,["baseModel"],i);const r=E(t,["preTunedModel"]);r!=null&&M(n,["preTunedModel"],r);const a=E(t,["trainingDataset"]);a!=null&&Ote(a,n,e);const o=E(t,["config"]);return o!=null&&xte(o,n,e),n}function Tte(t,e){const n={},i=E(t,["name"]);return i!=null&&M(n,["_url","name"],i),n}function Ate(t,e){const n={},i=E(t,["name"]);return i!=null&&M(n,["_url","name"],i),n}function Mte(t,e,n){const i={},r=E(t,["pageSize"]);e!==void 0&&r!=null&&M(e,["_query","pageSize"],r);const a=E(t,["pageToken"]);e!==void 0&&a!=null&&M(e,["_query","pageToken"],a);const o=E(t,["filter"]);return e!==void 0&&o!=null&&M(e,["_query","filter"],o),i}function wte(t,e,n){const i={},r=E(t,["pageSize"]);e!==void 0&&r!=null&&M(e,["_query","pageSize"],r);const a=E(t,["pageToken"]);e!==void 0&&a!=null&&M(e,["_query","pageToken"],a);const o=E(t,["filter"]);return e!==void 0&&o!=null&&M(e,["_query","filter"],o),i}function Cte(t,e){const n={},i=E(t,["config"]);return i!=null&&Mte(i,n),n}function Rte(t,e){const n={},i=E(t,["config"]);return i!=null&&wte(i,n),n}function Ite(t,e){const n={},i=E(t,["sdkHttpResponse"]);i!=null&&M(n,["sdkHttpResponse"],i);const r=E(t,["nextPageToken"]);r!=null&&M(n,["nextPageToken"],r);const a=E(t,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>o5(s))),M(n,["tuningJobs"],o)}return n}function Pte(t,e){const n={},i=E(t,["sdkHttpResponse"]);i!=null&&M(n,["sdkHttpResponse"],i);const r=E(t,["nextPageToken"]);r!=null&&M(n,["nextPageToken"],r);const a=E(t,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>nR(s))),M(n,["tuningJobs"],o)}return n}function Nte(t,e){const n={},i=E(t,["name"]);i!=null&&M(n,["model"],i);const r=E(t,["name"]);return r!=null&&M(n,["endpoint"],r),n}function Dte(t,e){const n={};if(E(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(E(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=E(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),M(n,["examples","examples"],r)}return n}function Ote(t,e,n){const i={};let r=E(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const o=E(t,["gcsUri"]);e!==void 0&&o!=null&&M(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(r==="PREFERENCE_TUNING"){const o=E(t,["gcsUri"]);e!==void 0&&o!=null&&M(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let a=E(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=E(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&M(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=E(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&M(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(E(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function o5(t,e){const n={},i=E(t,["sdkHttpResponse"]);i!=null&&M(n,["sdkHttpResponse"],i);const r=E(t,["name"]);r!=null&&M(n,["name"],r);const a=E(t,["state"]);a!=null&&M(n,["state"],Sz(a));const o=E(t,["createTime"]);o!=null&&M(n,["createTime"],o);const s=E(t,["tuningTask","startTime"]);s!=null&&M(n,["startTime"],s);const u=E(t,["tuningTask","completeTime"]);u!=null&&M(n,["endTime"],u);const c=E(t,["updateTime"]);c!=null&&M(n,["updateTime"],c);const d=E(t,["description"]);d!=null&&M(n,["description"],d);const p=E(t,["baseModel"]);p!=null&&M(n,["baseModel"],p);const g=E(t,["_self"]);return g!=null&&M(n,["tunedModel"],Nte(g)),n}function nR(t,e){const n={},i=E(t,["sdkHttpResponse"]);i!=null&&M(n,["sdkHttpResponse"],i);const r=E(t,["name"]);r!=null&&M(n,["name"],r);const a=E(t,["state"]);a!=null&&M(n,["state"],Sz(a));const o=E(t,["createTime"]);o!=null&&M(n,["createTime"],o);const s=E(t,["startTime"]);s!=null&&M(n,["startTime"],s);const u=E(t,["endTime"]);u!=null&&M(n,["endTime"],u);const c=E(t,["updateTime"]);c!=null&&M(n,["updateTime"],c);const d=E(t,["error"]);d!=null&&M(n,["error"],d);const p=E(t,["description"]);p!=null&&M(n,["description"],p);const g=E(t,["baseModel"]);g!=null&&M(n,["baseModel"],g);const y=E(t,["tunedModel"]);y!=null&&M(n,["tunedModel"],y);const b=E(t,["preTunedModel"]);b!=null&&M(n,["preTunedModel"],b);const T=E(t,["supervisedTuningSpec"]);T!=null&&M(n,["supervisedTuningSpec"],T);const S=E(t,["preferenceOptimizationSpec"]);S!=null&&M(n,["preferenceOptimizationSpec"],S);const A=E(t,["tuningDataStats"]);A!=null&&M(n,["tuningDataStats"],A);const R=E(t,["encryptionSpec"]);R!=null&&M(n,["encryptionSpec"],R);const I=E(t,["partnerModelTuningSpec"]);I!=null&&M(n,["partnerModelTuningSpec"],I);const N=E(t,["customBaseModel"]);N!=null&&M(n,["customBaseModel"],N);const D=E(t,["experiment"]);D!=null&&M(n,["experiment"],D);const U=E(t,["labels"]);U!=null&&M(n,["labels"],U);const k=E(t,["outputUri"]);k!=null&&M(n,["outputUri"],k);const z=E(t,["pipelineJob"]);z!=null&&M(n,["pipelineJob"],z);const L=E(t,["serviceAccount"]);L!=null&&M(n,["serviceAccount"],L);const F=E(t,["tunedModelDisplayName"]);F!=null&&M(n,["tunedModelDisplayName"],F);const j=E(t,["veoTuningSpec"]);return j!=null&&M(n,["veoTuningSpec"],j),n}function Lte(t,e){const n={},i=E(t,["sdkHttpResponse"]);i!=null&&M(n,["sdkHttpResponse"],i);const r=E(t,["name"]);r!=null&&M(n,["name"],r);const a=E(t,["metadata"]);a!=null&&M(n,["metadata"],a);const o=E(t,["done"]);o!=null&&M(n,["done"],o);const s=E(t,["error"]);return s!=null&&M(n,["error"],s),n}function iL(t,e){const n={},i=E(t,["gcsUri"]);i!=null&&M(n,["validationDatasetUri"],i);const r=E(t,["vertexDatasetResource"]);return r!=null&&M(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ute extends lf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fp($c.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:HC.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=Ate(e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>nR(d))}else{const c=Tte(e);return s=It("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>o5(d))}}async listInternal(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=Rte(e);return s=It("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=Pte(d),g=new RO;return Object.assign(g,p),g})}else{const c=Cte(e);return s=It("tunedModels",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=Ite(d),g=new RO;return Object.assign(g,p),g})}}async cancel(e){var n,i,r,a;let o,s="",u={};if(this.apiClient.isVertexAI()){const c=vte(e);return s=It("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=_te(d),g=new IO;return Object.assign(g,p),g})}else{const c=gte(e);return s=It("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const p=yte(d),g=new IO;return Object.assign(g,p),g})}}async tuneInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI()){const s=Ete(e,e);return a=It("tuningJobs",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>nR(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ste(e);return a=It("tunedModels",s._url),o=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),r.then(u=>Lte(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fte{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kte=1024*1024*8,Bte=3,zte=1e3,Gte=2,kS="x-goog-upload-status";async function Vte(t,e,n){var i;const r=await s5(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[kS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Hte(t,e,n){var i;const r=await s5(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[kS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=gz(a),s=new NI;return Object.assign(s,o),s}async function s5(t,e,n){var i,r;let a=0,o=0,s=new WC(new Response),u="upload";for(a=t.size;o<a;){const c=Math.min(kte,a-o),d=t.slice(o,o+c);o+c>=a&&(u+=", finalize");let p=0,g=zte;for(;p<Bte&&(s=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((i=s==null?void 0:s.headers)===null||i===void 0)&&i[kS]));)p++,await Wte(g),g=g*Gte;if(o+=c,((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[kS])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function qte(t){return{size:t.size,type:t.type}}function Wte(t){return new Promise(e=>setTimeout(e,t))}class jte{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Vte(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hte(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qte(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xte{create(e,n,i){return new Yte(e,n,i)}}class Yte{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rL="x-goog-api-key";class $te{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(rL)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rL,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kte="gl-node/";class Jte{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new fa({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=qY(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new $te(this.apiKey);this.apiClient=new qQ({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Kte+"web",uploader:new jte,downloader:new Fte}),this.models=new uee(this.apiClient),this.live=new iee(this.apiClient,r,new Xte),this.batches=new _K(this.apiClient),this.chats=new eJ(this.models,this.apiClient),this.caches=new JK(this.apiClient),this.files=new cJ(this.apiClient),this.operations=new cee(this.apiClient),this.authTokens=new Mee(this.apiClient),this.tunings=new Ute(this.apiClient),this.fileSearchStores=new Oee(this.apiClient)}}const Pg={es:{badge:"Agente de Inteligencia Cvica de lite",title:"Auditoria del BOE",subtitle:"Monitorizacin ciudadana del BOE. Detectando lenguaje opaco y desviaciones presupuestarias con IA.",searchPlaceholder:"ID BOE (ej. BOE-A-2024-4161)...",analyzeBtn:"Analizar",dateFilterTitle:"Escaneo por Fechas",scanBtn:"Escaneo",latestRadarTitle:"Radar de Actualidad",latestRadarSubtitle:"ltimos artculos detectados hoy.",historyTitle:"Archivo Histrico",historySubtitle:"Auditoras ya procesadas y almacenadas.",clearHistory:"Limpiar Local",confirmClear:"Ests seguro de que quieres borrar el historial local?",backToHome:"Volver al inicio",goToAudit:"Ir",scanningData:"Minando datos del BOE...",decodingOpacity:"Descodificando Opacidad...",extractingMetadata:(t,e)=>`Extrayendo metadatos entre ${t} y ${e}.`,processingGemini:"Gemini 3 Flash analizando inconsistencias.",errorTitle:"Error Crtico",retryBtn:"Reintentar",criticalLaws:"Leyes Crticas Recientes",missionTitle:"Misin de Vigilancia",missionDesc:"Detecta transferencias a lobbies y lenguaje diseado para ocultar el impacto real.",transparencyLevel:"Transparencia",opacityLevel:"Opacidad",transparencyDesc:"Basado en claridad presupuestaria y ausencia de ambigedad.",transparencyTooltip:"Qu tan comprensible es el texto legal.",opacityTooltip:"Uso de tecnicismos para ocultar detalles.",citizenSummary:"Resumen para el Ciudadano",redFlags:"Banderas Rojas",impactBalance:"Balance de Impacto",winners:"Ganadores",losers:"Perdedores",criticalAnalysis:"Anlisis Crtico Experto",scannedInMemory:"Escaneo en memoria",auditWithGemini:"Auditar",auditedOn:t=>`Auditado el ${t}`,viewOfficial:"Ver BOE Oficial",footerDesc:"Transparencia radical.",cacheNote:"Datos persistidos en Supabase Cloud.",loginTitle:"Acceso Agente",loginSubtitle:"Identifcate con tus credenciales de entorno.",loginBtn:"Validar Identidad",logoutBtn:"Salir",dbSync:"Sincronizado con Supabase",closeBtn:"Cerrar",alreadyAudited:"Ya Auditado",pendingAudit:"Pendiente",downloadJson:"Descargar JSON",importJson:"Importar JSON",exportAllJson:"Exportar Todo (JSON)",copyJson:"Copiar JSON",jsonExportTitle:"Reporte Tcnico (JSON)",exportHistoryJson:"Exportar ndice (JSON)",importSuccess:"JSON importado correctamente",importError:"Error al importar el archivo JSON",passwordPlaceholder:"Contrasea de Agente...",invalidPassword:"Credenciales de acceso no vlidas.",region:"Comunidad Autnoma",typology:"Tipologa",transparencyRating:"Calificacin de Transparencia",transparencyVeryBad:"Muy Mala",transparencyBad:"Mala",transparencyAcceptable:"Aceptable",apiKeyError:"La API Key de Gemini no es vlida o falta. Por favor, revisa tu archivo .env (GEMINI_API_KEY).",home:"Inicio",historyMenu:"Histrico",filters:"Filtros",minTransparency:"Transparencia Mnima",maxTransparency:"Transparencia Mxima",allTags:"Todos los Tags",refreshBtn:"Actualizar",gaStatusActive:"Google Analytics: Activo",gaStatusInactive:"Google Analytics: No Configurado"},en:{badge:"Elite Civic Intelligence Agent",title:"BOE Audit",subtitle:"Civic monitoring of the BOE. Detecting opaque language with AI.",searchPlaceholder:"BOE ID (e.g. BOE-A-2024-4161)...",analyzeBtn:"Analyze",dateFilterTitle:"Scan by Dates",scanBtn:"Scan",latestRadarTitle:"Live Radar",latestRadarSubtitle:"Latest articles detected today.",historyTitle:"Historical Archive",historySubtitle:"Already processed and stored audits.",clearHistory:"Clear Local",confirmClear:"Are you sure you want to clear local history?",backToHome:"Back to home",goToAudit:"Go",scanningData:"Mining BOE data...",decodingOpacity:"Decoding Opacity...",extractingMetadata:(t,e)=>`Extracting metadata between ${t} and ${e}.`,processingGemini:"Gemini 3 Flash analyzing inconsistencies.",errorTitle:"Critical Error",retryBtn:"Retry",criticalLaws:"Recent Critical Laws",missionTitle:"Watchdog Mission",missionDesc:"Detects lobby transfers and language designed to hide real impact.",transparencyLevel:"Transparency",opacityLevel:"Opacity",transparencyDesc:"Based on budget clarity and lack of ambiguity.",transparencyTooltip:"How understandable the legal text is.",opacityTooltip:"Use of technicalities to hide details.",citizenSummary:"Citizen Summary",redFlags:"Red Flags",impactBalance:"Impact Balance",winners:"Winners",losers:"Losers",criticalAnalysis:"Expert Critical Analysis",scannedInMemory:"Scan results in memory",auditWithGemini:"Audit",auditedOn:t=>`Audited on ${t}`,viewOfficial:"View Official BOE",footerDesc:"Radical transparency.",cacheNote:"Data persisted in Supabase Cloud.",loginTitle:"Agent Access",loginSubtitle:"Identify yourself with environment credentials.",loginBtn:"Validate Identity",logoutBtn:"Sign Out",dbSync:"Synced with Supabase",closeBtn:"Close",alreadyAudited:"Audited",pendingAudit:"Pending",downloadJson:"Download JSON",importJson:"Import JSON",exportAllJson:"Export All (JSON)",copyJson:"Copy JSON",jsonExportTitle:"Technical Report (JSON)",exportHistoryJson:"Export Index (JSON)",importSuccess:"JSON imported successfully",importError:"Error importing JSON file",passwordPlaceholder:"Agent Password...",invalidPassword:"Invalid access credentials.",region:"Autonomous Community",typology:"Typology",transparencyRating:"Transparency Rating",transparencyVeryBad:"Very Bad",transparencyBad:"Bad",transparencyAcceptable:"Acceptable",apiKeyError:"The Gemini API Key is missing or invalid. Please check your .env file (GEMINI_API_KEY).",home:"Home",historyMenu:"History",filters:"Filters",minTransparency:"Min Transparency",maxTransparency:"Max Transparency",allTags:"All Tags",refreshBtn:"Refresh",gaStatusActive:"Google Analytics: Active",gaStatusInactive:"Google Analytics: Not Configured"}};let aL=!1;const Zte=t=>{const e="AIzaSyDlDLnVUKDGsaTHnpQsjSJRDvuNBk7sKAo";if(e.length<15)throw new Error(Pg[t].apiKeyError);return e},Qte=async(t,e="es")=>{var i,r,a;const n=Zte(e);if(aL)throw new Error("API calls are blocked due to a previous error.");try{const o=new Jte({apiKey:n}),s=e==="es"?"La respuesta DEBE estar ntegramente en ESPAOL.":"The response MUST be entirely in ENGLISH.",c=(await o.models.generateContent({model:"gemini-3-flash",contents:`AUDITA ESTA LEY DEL BOE (XML):

      ${t.substring(0,3e4)}

      ${s}
      Proporciona un JSON con los campos especificados.`,config:{systemInstruction:BY+`
IMPORTANTE: Genera tambin un campo 'resumen_tweet' de mximo 250 caracteres que use emojis y hashtags (#BOE #Opacidad #Transparencia) para denunciar o informar sobre los hallazgos.`,responseMimeType:"application/json",responseSchema:{type:ur.OBJECT,properties:{nivel_transparencia:{type:ur.NUMBER,description:"Scale 1-100"},analisis_critico:{type:ur.STRING},resumen_ciudadano:{type:ur.STRING},resumen_tweet:{type:ur.STRING,description:"Short summary for X/Twitter with emojis"},banderas_red_flags:{type:ur.ARRAY,items:{type:ur.STRING}},vencedores_vencidos:{type:ur.OBJECT,properties:{ganadores:{type:ur.ARRAY,items:{type:ur.STRING}},perdedores:{type:ur.ARRAY,items:{type:ur.STRING}}}},comunidad_autonoma:{type:ur.STRING,description:"Estatal, Madrid, Catalua, etc."},tipologia:{type:ur.STRING,description:"Econmica, Poltica, Administrativa, Social, etc."}},required:["nivel_transparencia","analisis_critico","resumen_ciudadano","resumen_tweet","banderas_red_flags","vencedores_vencidos","comunidad_autonoma","tipologia"]}}})).text;if(!c)throw new Error("No response from AI");const d=JSON.parse(c.trim());return{...d,banderas_rojas:d.banderas_red_flags||d.banderas_rojas||[]}}catch(o){throw(i=o.message)!=null&&i.toLowerCase().includes("api key")||(r=o.message)!=null&&r.includes("401")||(a=o.message)!=null&&a.includes("403")?(aL=!0,new Error(`${Pg[e].apiKeyError} Details: ${o.message}`)):o}},l5="BOE-A-2024-1055",u5="2026-01-23T16:22:58.894Z",c5={nivel_transparencia:70,analisis_critico:"El documento oficializa el cese de un puesto clave en la lucha contra el narcotrfico en Canarias. Aunque el procedimiento sigue el Reglamento del Ministerio Fiscal, la utilizacion de 'motivos personales' como justificacin genera un vaco informativo sobre el estado de la Fiscala Antidroga en una zona de alta presin. La firma por sustitucin (P.S.) de la Teniente Fiscal Snchez Conde, en lugar del Fiscal General, sugiere una delegacin administrativa recurrente que diluye la responsabilidad directa en nombramientos de alta sensibilidad.",resumen_ciudadano:"El Fiscal Delegado Antidroga de Las Palmas, Antonio Amor Lpez, deja su cargo voluntariamente por motivos personales. Se trata de un trmite administrativo que pone fin a su etapa liderando la persecucin del narcotrfico en la provincia sin que se especifique quin asumir el mando.",resumen_tweet:" Cese en la Fiscala Antidroga de Las Palmas. Antonio Amor Lpez deja el cargo por 'motivos personales'. Desgaste o falta de recursos en la lucha contra el narco en Canarias?  Un puesto clave que queda pendiente de relevo. #BOE #Opacidad #Transparencia",banderas_red_flags:["Opacidad en los motivos reales de la renuncia en un rea crtica","Firma por sustitucin de la autoridad mxima","Publicacin con un mes de retraso desde la propuesta de cese"],vencedores_vencidos:{ganadores:["Antonio Amor Lpez (por la aceptacin de su renuncia)","Estructuras de narcotrfico (por la interrupcin de la continuidad en el mando)"],perdedores:["Ciudadana de Las Palmas (prdida de un especialista en activo)","Transparencia institucional (por falta de detalle en la motivacin)"]},banderas_rojas:["Opacidad en los motivos reales de la renuncia en un rea crtica","Firma por sustitucin de la autoridad mxima","Publicacin con un mes de retraso desde la propuesta de cese"]},ene={boe_id:l5,timestamp:u5,report:c5},tne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:l5,default:ene,report:c5,timestamp:u5},Symbol.toStringTag,{value:"Module"})),f5="BOE-A-2024-1122",d5="2026-01-23T16:23:29.609Z",h5={nivel_transparencia:45,analisis_critico:"El documento presenta una estructura de acceso al empleo pblico que favorece la consolidacin de personal interno mediante el sistema de 'concurso' en 15 de las 18 plazas, lo cual limita la competencia real para ciudadanos externos. Se observa un retraso administrativo significativo: las bases se publicaron originalmente en diciembre de 2022, pero el anuncio en el BOE no llega hasta enero de 2024, tras una rectificacin de errores en septiembre de 2023. Esta dilatacin en los tiempos y el uso de procesos basados mayoritariamente en mritos y no en exmenes (oposicin) para puestos de base como limpieza y auxiliares de enfermera, suelen actuar como mecanismos de blindaje para el personal interino ya presente en la administracin local.",resumen_ciudadano:"El Organismo Autnomo de la Residencia Zallako Eguzki (Bizkaia) convoca 18 plazas de personal laboral fijo (limpiadoras, auxiliares, enfermera y administracin). La mayora de los puestos se otorgarn por mritos (concurso), lo que beneficia a quienes ya trabajan all. El proceso ha tardado ms de un ao en llegar al BOE, dificultando el acceso a la informacin para personas ajenas al municipio.",resumen_tweet:" Auditora BOE: Zalla ofrece 18 plazas en residencia, pero el 83% son por mritos (concurso), beneficiando a interinos actuales. Retraso de un ao en la publicacin oficial. Igualdad real o proceso a medida?  #BOE #Opacidad #Transparencia",banderas_red_flags:["Predominio del sistema de concurso (mritos) sobre oposicin","Brecha temporal de 13 meses entre bases y publicacin en BOE","Rectificacin de errores tarda","Posible proceso de estabilizacin encubierto bajo 'turno libre'"],vencedores_vencidos:{ganadores:["Personal interino con antigedad acumulada","Administracin local (estabilizacin de plantilla)","Sindicatos con presencia en la mesa de negociacin"],perdedores:["Opositores noveles sin experiencia previa","Jvenes profesionales del sector sanitario","Transparencia en el acceso al empleo pblico"]},banderas_rojas:["Predominio del sistema de concurso (mritos) sobre oposicin","Brecha temporal de 13 meses entre bases y publicacin en BOE","Rectificacin de errores tarda","Posible proceso de estabilizacin encubierto bajo 'turno libre'"]},nne={boe_id:f5,timestamp:d5,report:h5},ine=Object.freeze(Object.defineProperty({__proto__:null,boe_id:f5,default:nne,report:h5,timestamp:d5},Symbol.toStringTag,{value:"Module"})),p5="BOE-A-2024-2233",m5="2026-01-23T16:23:58.897Z",g5={nivel_transparencia:45,analisis_critico:"El proceso presenta una opacidad procedimental tpica de las administraciones locales. Se convoca una plaza de Auxiliar mediante el sistema de 'concurso' en turno libre, lo que prescinde de examen y se basa nicamente en mritos. Existe un desfase temporal alarmante: las bases se publicaron en el Boletn Provincial en diciembre de 2022, pero el extracto no llega al BOE hasta febrero de 2024. Este retraso de 14 meses dificulta el acceso de candidatos externos y favorece a quienes ya conocen la convocatoria desde el mbito local.",resumen_ciudadano:"El Ayuntamiento de Altafulla convoca una plaza de Auxiliar para la Oficina de Atencin al Ciudadano. El mtodo de seleccin es por concurso (mritos), no por examen. El plazo para apuntarse es de 20 das tras esta publicacin.",resumen_tweet:" Oportunidad o plaza con nombre? Altafulla convoca 1 plaza de Auxiliar va concurso (sin examen). El aviso llega al #BOE con 14 meses de retraso respecto a las bases locales. Ojo a los procesos a dedo! #Opacidad #Transparencia #EmpleoPublico",banderas_red_flags:["Sistema de concurso puro para plaza de auxiliar (sin examen)","Retraso de 14 meses en la publicacin nacional","Alta probabilidad de proceso de estabilizacin encubierto para personal interino"],vencedores_vencidos:{ganadores:["Personal interino que ya ocupa el puesto","Candidatos locales con mritos especficos acumulados"],perdedores:["Opositores noveles sin experiencia previa","Ciudadanos externos al municipio","Meritocracia basada en aptitudes examinables"]},banderas_rojas:["Sistema de concurso puro para plaza de auxiliar (sin examen)","Retraso de 14 meses en la publicacin nacional","Alta probabilidad de proceso de estabilizacin encubierto para personal interino"]},rne={boe_id:p5,timestamp:m5,report:g5},ane=Object.freeze(Object.defineProperty({__proto__:null,boe_id:p5,default:rne,report:g5,timestamp:m5},Symbol.toStringTag,{value:"Module"})),v5="BOE-A-2024-3344",y5="2026-01-23T16:24:32.129Z",_5={nivel_transparencia:45,analisis_critico:"El uso del Real Decreto-ley 6/2022 para acelerar este proyecto bajo la excusa de la 'guerra de Ucrania' es una bandera roja de libro. Esta va de urgencia reduce los plazos de escrutinio pblico para un proyecto que afecta gravemente a especies en peligro de extincin (Avutarda, Sisn). Existe una contradiccin flagrante entre los informes tcnicos de la Direccin General del Medio Natural de Murcia, que advierten de impactos inasumibles, y la insistencia del promotor en minimizar el valor ecolgico de la zona tachndolo de simple 'viedo'. La fragmentacin del proyecto en tres plantas colindantes (Almendros I, II y Reventones) sugiere una tctica para diluir el impacto ambiental acumulado.",resumen_ciudadano:"Una empresa privada intenta construir una planta solar de 32 MW en Jumilla (Murcia) sobre hbitats crticos de aves protegidas. Aunque los organismos de medio ambiente advierten que el dao a la biodiversidad es irreparable y que las medidas compensatorias del promotor son imprecisas, el proyecto se tramita por una va de urgencia diseada para crisis energticas. La comunidad local y expertos denuncian que se est priorizando el beneficio empresarial sobre la proteccin legal de especies en peligro.",resumen_tweet:" Ojo al #BOE! Se usa la 'va de urgencia' por la guerra de Ucrania para tramitar una planta solar en Murcia que amenaza a la Avutarda y el Sisn . El promotor ignora informes tcnicos negativos. Energa limpia o negocio opaco? #Transparencia #Jumilla",banderas_red_flags:["Tramitacin mediante RDL 6/2022 (va de urgencia por guerra)","Contradiccin grave entre promotor e informes tcnicos ambientales","Posible fragmentacin de proyectos (Almendros I, II y Reventones)","Falta de respuesta a requerimientos de subsanacin de consultas","Ubicacin en zona de 'Lek' (reproduccin) de especies en peligro"],vencedores_vencidos:{ganadores:["Energas Renovables de la Regin de Murcia SA (Promotor)","Sector de infraestructuras energticas industriales"],perdedores:["Biodiversidad local (Avutarda, Sisn, Ganga)","Asociacin STIPA y Ecologistas en Accin","Ciudadanos de Jumilla (prdida de suelo agrcola y valor paisajstico)"]},banderas_rojas:["Tramitacin mediante RDL 6/2022 (va de urgencia por guerra)","Contradiccin grave entre promotor e informes tcnicos ambientales","Posible fragmentacin de proyectos (Almendros I, II y Reventones)","Falta de respuesta a requerimientos de subsanacin de consultas","Ubicacin en zona de 'Lek' (reproduccin) de especies en peligro"]},one={boe_id:v5,timestamp:y5,report:_5},sne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:v5,default:one,report:_5,timestamp:y5},Symbol.toStringTag,{value:"Module"})),b5="BOE-A-2024-4161",x5="2026-01-23T16:19:55.741Z",S5={nivel_transparencia:85,analisis_critico:"El documento detalla un proceso de nombramiento administrativo estndar para una seccin territorial especfica. Aunque cumple con la legalidad vigente (Estatuto Orgnico del Ministerio Fiscal), destaca que solo hubo una solicitante para el cargo. Esto sugiere una falta de competencia o de atractivo en las plazas de secciones territoriales rurales como Monforte de Lemos. No se detectan gastos fantasma directos, pero la opacidad reside en la ponderacin de mritos, que se despacha con frmulas genricas sin detallar la trayectoria especfica que justifica la idoneidad frente a la ausencia de otros candidatos.",resumen_ciudadano:"Elena Fernndez Landeiro ha sido nombrada Fiscal Decana de Monforte de Lemos (Lugo). El puesto qued vacante por concurso y ella fue la nica persona de la plantilla de fiscales que solicit la plaza. El Fiscal General del Estado ha ratificado el nombramiento basndose en su experiencia previa cubriendo ausencias en dicho cargo.",resumen_tweet:" Elena Fernndez Landeiro, nueva Fiscal Decana en Monforte de Lemos. Un proceso con candidata nica: falta de competencia o desinters por la justicia rural? Transparencia formal, pero sin pluralidad de opciones. #BOE #Opacidad #Transparencia",banderas_red_flags:["Candidatura nica (falta de concurrencia competitiva)","Motivacin basada en frmulas genricas de idoneidad","Posible endogamia administrativa en secciones territoriales pequeas"],vencedores_vencidos:{ganadores:["Elena Fernndez Landeiro (ascenso profesional)","Ministerio Fiscal (cobertura de vacante en zona perifrica)"],perdedores:["Sociedad civil (por la ausencia de alternativas en la seleccin de cargos pblicos)","Carrera Fiscal (posible falta de incentivos para la movilidad en zonas rurales)"]},banderas_rojas:["Candidatura nica (falta de concurrencia competitiva)","Motivacin basada en frmulas genricas de idoneidad","Posible endogamia administrativa en secciones territoriales pequeas"]},lne={boe_id:b5,timestamp:x5,report:S5},une=Object.freeze(Object.defineProperty({__proto__:null,boe_id:b5,default:lne,report:S5,timestamp:x5},Symbol.toStringTag,{value:"Module"})),E5="BOE-A-2024-4161",T5="2026-01-27T16:20:14.618Z",A5="Decreto de 20 de febrero de 2024, del Fiscal General del Estado, por el que se nombra Fiscal Decana de la Seccin Territorial de Monforte de Lemos a doa Elena Fernndez Landeiro.",M5={nivel_transparencia:85,analisis_critico:"Se trata de un nombramiento discrecional tcnico dentro de la estructura de la Fiscala. Aunque se ha seguido el procedimiento legal del Estatuto Orgnico, destaca que solo hubo una nica solicitante para el puesto de Fiscal Decana en Monforte de Lemos. Esta falta de concurrencia competitiva es habitual en plazas perifricas, pero limita la pluralidad de opciones para la administracin de justicia local. No se aprecian gastos fantasma, pero s una consolidacin de funciones en una candidata que ya actuaba como sustituta.",resumen_ciudadano:"Elena Fernndez Landeiro ha sido nombrada Fiscal Decana de Monforte de Lemos. El proceso fue directo ya que fue la nica persona de la plantilla de Lugo que solicit la plaza tras quedar vacante. Su nombramiento cuenta con el aval del Fiscal General del Estado y del Consejo Fiscal.",resumen_tweet:" Nueva Fiscal Decana en Monforte de Lemos. Elena Fernndez Landeiro asume el cargo tras ser la nica solicitante. Aunque el proceso es legal, la falta de competencia interna en plazas locales es evidente. #BOE #Opacidad #Transparencia ",banderas_red_flags:["Candidatura nica (falta de concurrencia competitiva)","Endogamia funcional (la candidata ya ejerca funciones de facto)"],vencedores_vencidos:{ganadores:["Elena Fernndez Landeiro (ascenso profesional)","Ministerio Fiscal (cobertura de vacante)"],perdedores:["Ciudadana (falta de debate sobre perfiles alternativos)","Cuerpo de Fiscales (baja movilidad/inters en zonas rurales)"]},comunidad_autonoma:"Galicia",tipologia:"Administrativa",banderas_rojas:["Candidatura nica (falta de concurrencia competitiva)","Endogamia funcional (la candidata ya ejerca funciones de facto)"]},cne={boe_id:E5,timestamp:T5,title:A5,report:M5},fne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:E5,default:cne,report:M5,timestamp:T5,title:A5},Symbol.toStringTag,{value:"Module"})),w5="BOE-A-2024-4161",C5="2026-01-27T16:20:16.065Z",R5="Decreto de 20 de febrero de 2024, del Fiscal General del Estado, por el que se nombra Fiscal Decana de la Seccin Territorial de Monforte de Lemos a doa Elena Fernndez Landeiro.",I5={nivel_transparencia:85,analisis_critico:"El decreto cumple con la legalidad formal del Estatuto Orgnico del Ministerio Fiscal, pero revela una preocupante falta de competitividad interna al presentarse una nica candidata para el puesto de Fiscal Decana. Aunque se justifica por su experiencia previa sustituyendo a la anterior decana, la ausencia de otros aspirantes puede interpretarse como un sntoma de procesos de promocin interna con poca atraccin o ya predeterminados por la jerarqua. El lenguaje es puramente administrativo y asptico, ocultando la dinmica de poder real dentro de la Fiscala Provincial de Lugo.",resumen_ciudadano:"Se ha nombrado a Elena Fernndez Landeiro como nueva Fiscal Decana en Monforte de Lemos. El proceso fue directo ya que fue la nica persona que solicit el puesto. Este movimiento asegura la continuidad en la gestin de la fiscala local, aunque no hubo debate ni comparacin de mritos con otros posibles candidatos al no existir ms solicitudes.",resumen_tweet:" Nuevo nombramiento en la Fiscala: Elena Fernndez Landeiro es la nueva Fiscal Decana en Monforte de Lemos. Lo curioso? Fue la NICA candidata que se present. Falta de incentivos o procesos teledirigidos?  #BOE #Opacidad #Transparencia #Justicia",banderas_red_flags:["Candidatura nica: Falta de concurrencia competitiva","Endogamia funcional: La candidata ya ejerca funciones en periodos de ausencia","Ausencia de baremacin comparativa de mritos"],vencedores_vencidos:{ganadores:["Elena Fernndez Landeiro (ascenso jerrquico)","Ministerio Fiscal (estabilidad administrativa)"],perdedores:["Pluralidad de la carrera fiscal (nula competencia)","Ciudadana (por falta de contraste de perfiles para cargos pblicos)"]},comunidad_autonoma:"Galicia",tipologia:"Administrativa",banderas_rojas:["Candidatura nica: Falta de concurrencia competitiva","Endogamia funcional: La candidata ya ejerca funciones en periodos de ausencia","Ausencia de baremacin comparativa de mritos"]},dne={boe_id:w5,timestamp:C5,title:R5,report:I5},hne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:w5,default:dne,report:I5,timestamp:C5,title:R5},Symbol.toStringTag,{value:"Module"})),P5="BOE-A-2024-5012",N5="2026-01-23T16:18:37.394Z",D5={nivel_transparencia:65,analisis_critico:"La resolucin utiliza el mecanismo de 'estabilizacin' mediante sistema de concurso (solo mritos, sin examen), lo cual es una herramienta legal para reducir la temporalidad pero que, en la prctica, suele estar diseada para que las plazas sean obtenidas por quienes ya las ocupan de forma interina. Aunque cumple la legalidad, este sistema levanta sospechas sobre la igualdad de oportunidades real para ciudadanos externos sin experiencia previa en esa administracin especfica. No se detallan los baremos de puntuacin en este extracto, remitiendo a boletines provinciales, lo que fragmenta la informacin y dificulta la fiscalizacin ciudadana inmediata.",resumen_ciudadano:"El Ayuntamiento de Los Llanos de Aridane convoca tres plazas (Direccin de Escuela Infantil, Trabajo Social y Agente de Desarrollo Local) bajo un proceso de estabilizacin. Esto significa que se busca convertir empleos temporales en fijos, utilizando principalmente la experiencia previa como criterio de seleccin.",resumen_tweet:" Los Llanos de Aridane convoca plazas de Director/a, Trabajador/a Social y AEDL va 'estabilizacin'. Al ser por concurso (mritos), se facilita que los actuales interinos se queden la plaza. Puerta cerrada al talento externo?  #BOE #Opacidad #Transparencia",banderas_red_flags:["Sistema de seleccin por concurso-mritos sin fase de oposicin/examen","Falta de desglose presupuestario asociado a las nuevas plazas fijas","Remisin a mltiples boletines (BOP, BOC, BOE) para dificultar el seguimiento","Uso del proceso de estabilizacin como barrera de entrada para nuevos aspirantes"],vencedores_vencidos:{ganadores:["Personal interino actual (consolidacin de puesto)","Administracin Local (cumplimiento de cuotas de reduccin de temporalidad)"],perdedores:["Opositores libres sin experiencia previa en la administracin pblica","Jvenes graduados que compiten contra dcadas de antigedad acumulada"]},banderas_rojas:["Sistema de seleccin por concurso-mritos sin fase de oposicin/examen","Falta de desglose presupuestario asociado a las nuevas plazas fijas","Remisin a mltiples boletines (BOP, BOC, BOE) para dificultar el seguimiento","Uso del proceso de estabilizacin como barrera de entrada para nuevos aspirantes"]},pne={boe_id:P5,timestamp:N5,report:D5},mne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:P5,default:pne,report:D5,timestamp:N5},Symbol.toStringTag,{value:"Module"})),O5="BOE-A-2024-6123",L5="2026-01-23T16:19:32.777Z",U5={nivel_transparencia:85,analisis_critico:"El documento es una resolucin administrativa estndar para el nombramiento de personal estatutario fijo. Aunque el proceso es transparente en cuanto a la identificacin de la persona y el destino (Melilla), la opacidad reside en la gestin temporal: el proceso selectivo se inici en diciembre de 2022 y se resuelve en marzo de 2024. Esta demora de 15 meses para cubrir una plaza de anestesiologa en una zona de difcil cobertura como Melilla refleja una ineficiencia burocrtica que afecta directamente a la calidad asistencial.",resumen_ciudadano:"Se oficializa el nombramiento de una especialista en Anestesiologa y Reanimacin para el Hospital Comarcal de Melilla. La plaza es de carcter fijo bajo el Instituto Nacional de Gestin Sanitaria (INGESA). Esto supone un refuerzo necesario para la sanidad en las ciudades autnomas, aunque el proceso administrativo ha tardado ms de un ao en materializarse desde la convocatoria original.",resumen_tweet:" Melilla suma una anestesista tras 15 meses de espera burocrtica. El #BOE publica el nombramiento del INGESA. Refuerzo vital para la sanidad perifrica, pero por qu procesos tan lentos para plazas crticas?  #Transparencia #Sanidad #Melilla #Opacidad",banderas_red_flags:["Lentitud administrativa extrema (15 meses desde la convocatoria hasta el nombramiento)","Gestin centralizada desde Madrid para necesidades locales crticas en Melilla","Falta de desglose sobre el coste presupuestario total de la plaza"],vencedores_vencidos:{ganadores:["Dbora Beatriz Cuello Caruso (obtiene plaza fija)","Sistema sanitario de Melilla (recupera un especialista)"],perdedores:["Pacientes en lista de espera (perjudicados por la demora administrativa de ms de un ao)","Eficiencia del gasto pblico en procesos de seleccin lentos"]},banderas_rojas:["Lentitud administrativa extrema (15 meses desde la convocatoria hasta el nombramiento)","Gestin centralizada desde Madrid para necesidades locales crticas en Melilla","Falta de desglose sobre el coste presupuestario total de la plaza"]},gne={boe_id:O5,timestamp:L5,report:U5},vne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:O5,default:gne,report:U5,timestamp:L5},Symbol.toStringTag,{value:"Module"})),F5="BOE-A-2024-7788",k5="2026-01-23T16:20:25.652Z",B5={nivel_transparencia:62,analisis_critico:"El documento es una resolucion administrativa estandar que aprueba la Carta de Servicios de la Subdelegacion del Gobierno en Pontevedra. Aunque se ampara en el Real Decreto 951/2005 para la mejora de la calidad, el texto analizado es puramente formal y omite el contenido real de los compromisos adquiridos, remitiendo al ciudadano a portales externos. Existe una delegacion de competencias (P.D.) que, si bien es legal, diluye la responsabilidad politica directa del titular del Ministerio. No se especifican partidas presupuestarias concretas para la implementacion o mantenimiento de estos compromisos de calidad, lo que podria ocultar costes operativos bajo la etiqueta de gestion ordinaria.",resumen_ciudadano:"La Subdelegacion del Gobierno en Pontevedra ha renovado su guia de servicios para los proximos tres aos. Se supone que esto sirve para que sepas a que tienes derecho y como deben atenderte, pero el anuncio en el BOE no incluye la guia en si, solo dice que ya esta aprobada y que puedes buscarla en internet. Es un tramite obligatorio que no garantiza por si mismo una mejor atencion al ciudadano.",resumen_tweet:" Papel mojado o mejora real? El #BOE publica la Carta de Servicios de Pontevedra 2024-2027, pero oculta el contenido real remitiendo a webs externas. Burocracia que se autoproclama 'de calidad'.  #Opacidad #Transparencia #Pontevedra",banderas_red_flags:["Omision del contenido sustantivo en el cuerpo del BOE","Uso de delegacion de firma (P.D.) para evitar responsabilidad directa","Falta de desglose economico para la mejora de servicios","Vigencia temporal ya iniciada respecto a la fecha de publicacion"],vencedores_vencidos:{ganadores:["Altos cargos que cumplen hitos administrativos","Estructura burocratica del Ministerio de Politica Territorial"],perdedores:["Ciudadanos que requieren transparencia directa sin intermediarios digitales","Usuarios afectados por la brecha digital al remitirse la informacion a portales web"]},banderas_rojas:["Omision del contenido sustantivo en el cuerpo del BOE","Uso de delegacion de firma (P.D.) para evitar responsabilidad directa","Falta de desglose economico para la mejora de servicios","Vigencia temporal ya iniciada respecto a la fecha de publicacion"]},yne={boe_id:F5,timestamp:k5,report:B5},_ne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:F5,default:yne,report:B5,timestamp:k5},Symbol.toStringTag,{value:"Module"})),z5="BOE-A-2024-9122",G5="2026-01-23T16:21:59.420Z",V5={nivel_transparencia:42,analisis_critico:"La resolucin del Ayuntamiento de Albalat dels Sorells evidencia una gestin administrativa fragmentada y potencialmente excluyente. El uso del sistema de 'concurso' (en lugar de oposicin libre) para proveer puestos de trabajo, sumado a una rectificacin de bases publicada en el BOP de Valencia que obliga a reabrir plazos en el BOE, genera una 'burocracia de laberinto'. Este desfase temporal entre las bases originales (diciembre 2022) y la rectificacin (abril 2024) sugiere una falta de planificacin o una adaptacin 'ad hoc' de los requisitos, lo que dificulta el acceso en igualdad de condiciones para quienes no sigan diariamente mltiples boletines oficiales.",resumen_ciudadano:"Se han modificado las reglas y reabierto el plazo para optar a puestos de trabajo en el Ayuntamiento de Albalat dels Sorells debido a una rectificacin de las bases originales. El proceso se realiza por concurso, lo que valora mritos previos sobre exmenes.",resumen_tweet:" Ojo a la burocracia! Albalat dels Sorells rectifica bases de empleo de 2022 en pleno 2024. Un laberinto de boletines (BOP/BOE) que dificulta el acceso real al empleo pblico. Transparencia o parcheo?  #BOE #Opacidad #Transparencia #EmpleoPblico",banderas_red_flags:["Dilacin excesiva: bases de 2022 rectificadas en 2024","Fragmentacin informativa entre BOP Valencia y BOE","Opacidad en la naturaleza de la 'rectificacin' tcnica","Uso de sistema de concurso que favorece la discrecionalidad tcnica"],vencedores_vencidos:{ganadores:["Candidatos internos o interinos que conocen la operativa local","Gestores administrativos que dilatan procesos de seleccin"],perdedores:["Opositores externos sin red de vigilancia de boletines provinciales","Ciudadana que costea la ineficiencia de un proceso que tarda 2 aos en definirse"]},banderas_rojas:["Dilacin excesiva: bases de 2022 rectificadas en 2024","Fragmentacin informativa entre BOP Valencia y BOE","Opacidad en la naturaleza de la 'rectificacin' tcnica","Uso de sistema de concurso que favorece la discrecionalidad tcnica"]},bne={boe_id:z5,timestamp:G5,report:V5},xne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:z5,default:bne,report:V5,timestamp:G5},Symbol.toStringTag,{value:"Module"})),H5="BOE-A-2024-9122",q5="2026-01-23T16:22:26.373Z",W5={nivel_transparencia:42,analisis_critico:"La resolucin del Ayuntamiento de Albalat dels Sorells evidencia una gestin administrativa fragmentada y potencialmente excluyente. El uso del sistema de 'concurso' (en lugar de oposicin libre) para proveer puestos de trabajo, sumado a una rectificacin de bases publicada en el BOP de Valencia que obliga a reabrir plazos en el BOE, genera una 'burocracia de laberinto'. Este desfase temporal entre las bases originales (diciembre 2022) y la rectificacin (abril 2024) sugiere una falta de planificacin o una adaptacin 'ad hoc' de los requisitos, lo que dificulta el acceso en igualdad de condiciones para quienes no sigan diariamente mltiples boletines oficiales.",resumen_ciudadano:"Se han modificado las reglas y reabierto el plazo para optar a puestos de trabajo en el Ayuntamiento de Albalat dels Sorells debido a una rectificacin de las bases originales. El proceso se realiza por concurso, lo que valora mritos previos sobre exmenes.",resumen_tweet:" Ojo a la burocracia! Albalat dels Sorells rectifica bases de empleo de 2022 en pleno 2024. Un laberinto de boletines (BOP/BOE) que dificulta el acceso real al empleo pblico. Transparencia o parcheo?  #BOE #Opacidad #Transparencia #EmpleoPblico",banderas_red_flags:["Dilacin excesiva: bases de 2022 rectificadas en 2024","Fragmentacin informativa entre BOP Valencia y BOE","Opacidad en la naturaleza de la 'rectificacin' tcnica","Uso de sistema de concurso que favorece la discrecionalidad tcnica"],vencedores_vencidos:{ganadores:["Candidatos internos o interinos que conocen la operativa local","Gestores administrativos que dilatan procesos de seleccin"],perdedores:["Opositores externos sin red de vigilancia de boletines provinciales","Ciudadana que costea la ineficiencia de un proceso que tarda 2 aos en definirse"]},banderas_rojas:["Dilacin excesiva: bases de 2022 rectificadas en 2024","Fragmentacin informativa entre BOP Valencia y BOE","Opacidad en la naturaleza de la 'rectificacin' tcnica","Uso de sistema de concurso que favorece la discrecionalidad tcnica"]},Sne={boe_id:H5,timestamp:q5,report:W5},Ene=Object.freeze(Object.defineProperty({__proto__:null,boe_id:H5,default:Sne,report:W5,timestamp:q5},Symbol.toStringTag,{value:"Module"})),j5="BOE-A-2026-1760",X5="2026-01-26T13:01:32.749Z",Y5="Real Decreto 51/2026, de 23 de enero, por el que se modifica el Real Decreto 676/2025, de 28 de julio, por el que se aprueba la estructura de la Presidencia del Gobierno.",$5={nivel_transparencia:4,analisis_critico:"Este Real Decreto opera una reestructuracin interna de la Presidencia del Gobierno bajo una retrica de 'necesidades organizativas' no cuantificadas. Destaca la creacin del 'Departamento de Estudios Estratgicos', un nombre ambiguo que permite el encaje de funciones de asesora poltica de alto nivel sin una fiscalizacin clara de sus objetivos especficos. Asimismo, la disposicin transitoria segunda permite que el personal siga cobrando de partidas previas hasta que se adapte la nueva estructura, lo que genera un 'periodo de sombra' presupuestaria donde el coste real de la nueva organizacin queda diluido y oculto al escrutinio pblico inmediato.",resumen_ciudadano:"El Gobierno ha modificado su estructura interna en Moncloa, creando un nuevo departamento de estrategia poltica y reorganizando sus reas de comunicacin digital y control territorial. Aunque se eliminan algunos rganos antiguos, se crean otros nuevos con rango de Direccin General, lo que suele implicar un mantenimiento o aumento del gasto en altos cargos y personal eventual de confianza, sin que el texto detalle el coste econmico para el ciudadano.",resumen_tweet:" Nueva reforma en la estructura de Moncloa: nace el 'Dpto. de Estudios Estratgicos' y se refuerza el rea Digital. Ms eficacia o ms control? Sin rastro del coste real de estos cambios.  #BOE #Opacidad #Transparencia #ControlPoltico ",banderas_red_flags:["Creacin de rganos con nombres vagos y ambivalentes","Ausencia de memoria econmica o detalle de impacto presupuestario","Uso de disposiciones transitorias para mantener retribuciones con crditos antiguos","Reorganizacin de la Secretara de Estado de Comunicacin hacia un mayor control digital"],vencedores_vencidos:{ganadores:["Altos cargos de libre designacin","Asesores de estrategia poltica","Estructura tcnica de comunicacin digital del Gobierno"],perdedores:["Contribuyentes (por opacidad en el gasto)","Transparencia institucional (por terminologa ambigua)","Control legislativo sobre la administracin"]},comunidad_autonoma:"Estatal",tipologia:"Reforma Administrativa / Estructura de Gobierno",banderas_rojas:["Creacin de rganos con nombres vagos y ambivalentes","Ausencia de memoria econmica o detalle de impacto presupuestario","Uso de disposiciones transitorias para mantener retribuciones con crditos antiguos","Reorganizacin de la Secretara de Estado de Comunicacin hacia un mayor control digital"]},Tne={boe_id:j5,timestamp:X5,title:Y5,report:$5},Ane=Object.freeze(Object.defineProperty({__proto__:null,boe_id:j5,default:Tne,report:$5,timestamp:X5,title:Y5},Symbol.toStringTag,{value:"Module"})),K5="BOE-A-2026-1844",J5="2026-01-26T14:59:24.582Z",Z5="Resolucin de 20 de enero de 2026, de la Subsecretara, por la que se publica el Convenio de asistencia jurdica entre la Abogaca General del Estado y la Autoridad Portuaria de Avils.",Q5={nivel_transparencia:72,analisis_critico:"El convenio formaliza una transferencia de 22.000 euros anuales entre entes del sector pblico por servicios de defensa jurdica. El punto ms crtico reside en la Clusula Cuarta, que permite que el Abogado del Estado designado como coordinador perciba 'indemnizaciones por razn del servicio' equivalentes a las de un miembro del Consejo de Administracin del Puerto. Esto constituye un mecanismo legal para el incremento de ingresos de funcionarios pblicos mediante su insercin en rganos de direccin de entidades portuarias, diluyendo la separacin entre el rgano consultivo y el rgano ejecutivo.",resumen_ciudadano:"El Puerto de Avils pagar a la Abogaca del Estado una cuota fija anual para su defensa legal. El acuerdo tambin facilita que los abogados estatales cobren dietas adicionales por asistir a las reuniones del Consejo de Administracin del puerto, sumando costes a la gestin portuaria bajo una apariencia de eficiencia administrativa.",resumen_tweet:" El Puerto de Avils pagar 22.000/ao a la Abogaca del Estado por defensa legal.  Ojo: se permite el cobro de dietas extra por sentarse en el Consejo de Administracin. Eficiencia o sobresueldos encubiertos?  #BOE #Opacidad #Transparencia",banderas_red_flags:["Doble remuneracin: dietas de consejo adicionales al sueldo pblico","Tarifa plana de 22.000 sin desglose de carga de trabajo","Posible conflicto de inters entre defensa tcnica y toma de decisiones en el consejo"],vencedores_vencidos:{ganadores:["Abogados del Estado (acceso a dietas de consejo)","Abogaca General del Estado (captacin de fondos de otras entidades)"],perdedores:["Presupuesto de la Autoridad Portuaria (coste fijo de asesora)","Transparencia en la retribucin total de altos funcionarios"]},comunidad_autonoma:"Estatal",tipologia:"Administrativa",banderas_rojas:["Doble remuneracin: dietas de consejo adicionales al sueldo pblico","Tarifa plana de 22.000 sin desglose de carga de trabajo","Posible conflicto de inters entre defensa tcnica y toma de decisiones en el consejo"]},Mne={boe_id:K5,timestamp:J5,title:Z5,report:Q5},wne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:K5,default:Mne,report:Q5,timestamp:J5,title:Z5},Symbol.toStringTag,{value:"Module"})),e6="BOE-A-2026-1919",t6="2026-01-27T11:31:06.459Z",n6="Acuerdo internacional administrativo (AIA) en aplicacin del instrumento de ratificacin del Convenio de la Organizacin para la Cooperacin y Desarrollo Econmico, firmado en Pars el 14 de diciembre de 1960 entre la Agencia Espaola de Cooperacin Internacional para el Desarrollo del Ministerio de Asuntos Exteriores, Unin Europea y Cooperacin del Reino de Espaa y la Organizacin para la Cooperacin y Desarrollo Econmico, hecho en Madrid y Pars el 9 y 22 de diciembre de 2025.",i6={nivel_transparencia:62,analisis_critico:"El acuerdo disfraza de 'cooperacin' una subvencin directa a la OCDE para la elaboracin de informes cuyas metodologas y propiedad intelectual pertenecen exclusivamente al organismo internacional. Destaca un 6,48% de 'gastos indirectos' (38.880) que actan como un canon de gestin sin desglose. Adems, la clusula de propiedad exclusiva (Art. 9) implica que el contribuyente espaol paga por un conocimiento que no pertenece al Estado. La flexibilidad para que la OCDE ample plazos sin autorizacin previa de la AECID (Art. 3) reduce el control democrtico sobre la ejecucin del gasto.",resumen_ciudadano:"Espaa transfiere 600.000 a la OCDE para financiar estudios sobre fiscalidad y economa en Amrica Latina y el Caribe. El acuerdo incluye el pago de informes, gastos de oficina del organismo internacional y permite que la OCDE se quede con la propiedad de los resultados y los intereses del dinero depositado, mientras Espaa pone adems gratis sus edificios en la regin.",resumen_tweet:` Espaa regala 600.000 a la @OECD para informes. 

 6,48% en 'gastos indirectos'.
 La OCDE se queda con la propiedad intelectual.
 Espaa paga y adems cede sus sedes gratis.

Cooperacin o subvencin a burcratas?  #BOE #Opacidad #Transparencia`,banderas_red_flags:["Gastos indirectos del 6,48% sin desglose detallado","Propiedad exclusiva de los resultados para la OCDE (Art. 9)","Ampliacin de plazos de ejecucin sin necesidad de autorizacin previa (Art. 3)","Intereses generados por los fondos depositados se quedan en la OCDE (Art. 8)","Cesin gratuita de espacios fsicos adicionales por parte de AECID (Art. 12)"],vencedores_vencidos:{ganadores:["OCDE (recibe fondos, mantiene propiedad intelectual y cobra comisin de gestin)","Consultoras internacionales","lites administrativas transnacionales"],perdedores:["Contribuyente espaol (financia estudios que no controla)","Soberana informativa del Estado","Sectores sociales nacionales con necesidades de inversin urgente"]},comunidad_autonoma:"Estatal",tipologia:"Econmica y Cooperacin Internacional",banderas_rojas:["Gastos indirectos del 6,48% sin desglose detallado","Propiedad exclusiva de los resultados para la OCDE (Art. 9)","Ampliacin de plazos de ejecucin sin necesidad de autorizacin previa (Art. 3)","Intereses generados por los fondos depositados se quedan en la OCDE (Art. 8)","Cesin gratuita de espacios fsicos adicionales por parte de AECID (Art. 12)"]},Cne={boe_id:e6,timestamp:t6,title:n6,report:i6},Rne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:e6,default:Cne,report:i6,timestamp:t6,title:n6},Symbol.toStringTag,{value:"Module"})),r6="BOE-A-2026-1920",a6="2026-01-27T11:36:28.436Z",o6="Orden TED/30/2026, de 26 de enero, por la que se establecen parmetros tcnicos y econmicos a emplear en el clculo de la retribucin de la actividad de produccin de energa elctrica en los territorios no peninsulares con rgimen retributivo adicional durante el periodo regulatorio 2026-2031.",s6={nivel_transparencia:35,analisis_critico:"La Orden TED/30/2026 utiliza un lenguaje extremadamente tcnico y frmulas algebraicas complejas [a(i), b(i), c(i)] para enmascarar lo que en la prctica es un subsidio masivo a las operadoras energticas en territorios no peninsulares. El concepto de 'instalacin tipo' de una 'empresa eficiente' es una abstraccin que permite fijar retribuciones basadas en modelos tericos en lugar de costes reales auditados con total transparencia. Se detecta una 'Incongruencia Ideolgica' al seguir remunerando tecnologas basadas en carbn y fuel-oil en un ministerio que nominalmente prioriza la 'Transicin Ecolgica'. Adems, el mantenimiento de parmetros para 'familias tipo que no incluyen ningn grupo generador' abre la puerta a 'Gastos Fantasma' mediante el mantenimiento de estructuras retributivas sin activos reales que las sustenten.",resumen_ciudadano:"El Gobierno ha fijado cunto dinero recibirn las elctricas por producir luz en las islas, Ceuta y Melilla entre 2026 y 2031. Aunque se dice que es para cubrir costes extra, las frmulas son tan complejas que es imposible para un ciudadano saber si el beneficio de las empresas es justo o excesivo. El sistema garantiza pagos fijos a las grandes energticas por mantener centrales, algunas de ellas de carbn, cuyo coste pagamos todos en la factura de la luz o va presupuestos.",resumen_tweet:" El #BOE publica el reparto de millones para las elctricas en Baleares y Canarias hasta 2031. Una maraa de frmulas  que oculta el beneficio real de las grandes energticas. Transicin o subsidio al fuel?  #Opacidad #Transparencia",banderas_red_flags:["Uso de frmulas matemticas complejas que impiden la fiscalizacin pblica directa","Retribucin a instalaciones tipo que actualmente no tienen grupos operativos","Mantenimiento de incentivos a tecnologas contaminantes (carbn) hasta 2031","Delegacin de la propuesta de parmetros en la CNMC sin desglose de beneficios industriales reales"],vencedores_vencidos:{ganadores:["Grandes corporaciones energticas (Endesa y similares en territorios insulares)","Gestores de plantas de combustibles fsiles con retribucin garantizada"],perdedores:["Consumidores elctricos (que asumen el sobrecoste en el sistema)","Medio ambiente (por la prolongacin de vida til de plantas de fuel y carbn)","Pequeos productores de renovables con menos barreras de entrada"]},comunidad_autonoma:"Estatal (Canarias, Baleares, Ceuta y Melilla)",tipologia:"Econmica",banderas_rojas:["Uso de frmulas matemticas complejas que impiden la fiscalizacin pblica directa","Retribucin a instalaciones tipo que actualmente no tienen grupos operativos","Mantenimiento de incentivos a tecnologas contaminantes (carbn) hasta 2031","Delegacin de la propuesta de parmetros en la CNMC sin desglose de beneficios industriales reales"]},Ine={boe_id:r6,timestamp:a6,title:o6,report:s6},Pne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:r6,default:Ine,report:s6,timestamp:a6,title:o6},Symbol.toStringTag,{value:"Module"})),l6="BOE-A-2026-2072",u6="2026-01-29T11:57:03.683Z",c6="Real Decreto 54/2026, de 28 de enero, por el que se modifica el Catlogo de la Red de Carreteras del Estado.",f6={nivel_transparencia:6.5,analisis_critico:"El Real Decreto formaliza el traspaso de tramos especficos de la AP-68 a Navarra, cumpliendo acuerdos polticos de descentralizacin. Sin embargo, el texto presenta una opacidad financiera total: no detalla la valoracin econmica del traspaso ni cmo se ver afectado el presupuesto estatal para mantenimiento. Se prioriza la geometra administrativa foral sobre la unidad tcnica de la red de transporte, lo que genera una fragmentacin de la infraestructura nacional sin explicar las ventajas directas para el usuario.",resumen_ciudadano:"El Gobierno de Espaa ha cedido oficialmente la gestin y titularidad de dos tramos de la autopista AP-68 (Vasco-Aragonesa) a la Comunidad Foral de Navarra. Esto implica que el Estado deja de ser responsable de estos kilmetros, modificando el Catlogo de Carreteras del Estado para que Navarra asuma sus competencias plenas de mantenimiento y regulacin en dicho territorio.",resumen_tweet:" El Estado cede tramos de la AP-68 a Navarra. Mucha gestin tcnica pero 0 claridad sobre el coste del traspaso para el ciudadano. Descentralizacin o fragmentacin de la red nacional?  #BOE #Opacidad #Transparencia #Navarra",banderas_red_flags:["Ausencia de memoria econmica o valoracin del coste de transferencia","Fragmentacin de la red de inters general del Estado","Referencia a acuerdos de una 'Junta de Transferencias' cuyos detalles financieros no son pblicos en este texto"],vencedores_vencidos:{ganadores:["Gobierno Foral de Navarra (mayor autonoma y control territorial)","Partidos polticos forales (logro en la agenda de transferencias)"],perdedores:["Ciudadanos espaoles (falta de informacin sobre el impacto en los Presupuestos Generales)","Cohesin de la Red de Carreteras del Estado (creciente atomizacin administrativa)"]},comunidad_autonoma:"Navarra",tipologia:"Traspaso de Competencias e Infraestructuras",banderas_rojas:["Ausencia de memoria econmica o valoracin del coste de transferencia","Fragmentacin de la red de inters general del Estado","Referencia a acuerdos de una 'Junta de Transferencias' cuyos detalles financieros no son pblicos en este texto"]},Nne={boe_id:l6,timestamp:u6,title:c6,report:f6},Dne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:l6,default:Nne,report:f6,timestamp:u6,title:c6},Symbol.toStringTag,{value:"Module"})),d6="BOE-A-2026-2072",h6="2026-01-29T14:53:22.656Z",p6="Real Decreto 54/2026, de 28 de enero, por el que se modifica el Catlogo de la Red de Carreteras del Estado.",m6={nivel_transparencia:70,analisis_critico:"Se trata de un acto administrativo de descentralizacin de competencias en materia de infraestructuras. Aunque el texto es tcnicamente preciso sobre los tramos transferidos (PP.KK.), la opacidad reside en la ausencia de la memoria econmica adjunta en este Real Decreto. La transferencia de la AP-68 a Navarra es el resultado de acuerdos polticos especficos que suelen implicar ajustes en el Cupo o transferencias de crdito que no se desglosan aqu, dificultando el seguimiento del coste real de mantenimiento que asume la comunidad o el ahorro para el Estado.",resumen_ciudadano:"El Gobierno de Espaa ha entregado formalmente a la Comunidad Foral de Navarra la gestin de varios tramos de la autopista AP-68 (Vasco-Aragonesa). A partir de ahora, Navarra es la responsable nica de su mantenimiento y regulacin, eliminando estos tramos del catlogo nacional de carreteras.",resumen_tweet:" El Estado cede tramos de la AP-68 a Navarra. Menos control central, ms gestin foral. Se concreta la transferencia pero sin detalle de la letra pequea econmica. Quin paga el mantenimiento a largo plazo?  #BOE #Opacidad #Transparencia",banderas_red_flags:["Ausencia de desglose presupuestario asociado a la transferencia","Falta de mencin sobre la futura poltica de peajes en esos tramos","Tramitacin por va de Real Decreto que agiliza pero limita el debate parlamentario"],vencedores_vencidos:{ganadores:["Comunidad Foral de Navarra (gana soberana sobre sus infraestructuras)","Ministerio de Transportes (reduce su carga de gestin operativa)"],perdedores:["Usuarios nacionales (posible fragmentacin de criterios de mantenimiento y tarifas)","Transparencia fiscal (el coste del traspaso no es visible en este documento)"]},comunidad_autonoma:"Navarra",tipologia:"Administrativa",banderas_rojas:["Ausencia de desglose presupuestario asociado a la transferencia","Falta de mencin sobre la futura poltica de peajes en esos tramos","Tramitacin por va de Real Decreto que agiliza pero limita el debate parlamentario"]},One={boe_id:d6,timestamp:h6,title:p6,report:m6},Lne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:d6,default:One,report:m6,timestamp:h6,title:p6},Symbol.toStringTag,{value:"Module"})),g6="BOE-A-2026-2072",v6="2026-01-29T14:53:44.376Z",y6="Real Decreto 54/2026, de 28 de enero, por el que se modifica el Catlogo de la Red de Carreteras del Estado.",_6={nivel_transparencia:65,analisis_critico:"El Real Decreto formaliza el traspaso de tramos de la AP-68 a Navarra basndose en el rgimen foral. Aunque tcnico y preciso en los puntos kilomtricos, adolece de 'opacidad financiera': no detalla la valoracin econmica del traspaso ni el impacto en los presupuestos generales por el cese de mantenimiento. Es una medida de descentralizacin que fragmenta la gestin de una va de alta capacidad, priorizando la arquitectura institucional sobre la eficiencia operativa de una red nacional unificada.",resumen_ciudadano:"El Gobierno central entrega la gestin y titularidad de varios tramos de la autopista AP-68 (Vasco-Aragonesa) a la Comunidad Foral de Navarra. A partir de ahora, el Estado se desentiende de estos kilmetros, que pasan a ser competencia exclusiva navarra, modificando as el Catlogo de la Red de Carreteras del Estado.",resumen_tweet:" El Estado cede tramos de la AP-68 a Navarra. Fragmentacin administrativa en marcha: se publican los kilmetros pero no el coste ni el ahorro real para el ciudadano. Gestin eficiente o pacto poltico?  #BOE #Opacidad #Transparencia #Carreteras",banderas_red_flags:["Ausencia de memoria econmica adjunta","Fragmentacin de la red de carreteras nacional","Falta de detalle sobre el personal de mantenimiento afectado","Dependencia de acuerdos bilaterales sin escrutinio pblico del coste"],vencedores_vencidos:{ganadores:["Comunidad Foral de Navarra (mayor control territorial y competencial)","Ministerio de Transportes (reduccin de carga administrativa directa)"],perdedores:["Ciudadanos (posible confusin por gestin fragmentada de una misma va)","Transparencia pblica (desconocimiento del ajuste presupuestario real)"]},comunidad_autonoma:"Estatal/Navarra",tipologia:"Infraestructuras y Administrativa",banderas_rojas:["Ausencia de memoria econmica adjunta","Fragmentacin de la red de carreteras nacional","Falta de detalle sobre el personal de mantenimiento afectado","Dependencia de acuerdos bilaterales sin escrutinio pblico del coste"]},Une={boe_id:g6,timestamp:v6,title:y6,report:_6},Fne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:g6,default:Une,report:_6,timestamp:v6,title:y6},Symbol.toStringTag,{value:"Module"})),b6="BOE-A-2026-2073",x6="2026-01-29T11:57:17.906Z",S6="Orden AUC/40/2026, de 26 de enero, por la que se acuerdan ascensos a las categoras diplomticas de Ministro/a Plenipotenciario/a de primera clase, Ministro/a Plenipotenciario/a de segunda clase, Ministro/a Plenipotenciario/a de tercera clase, Consejero/a de Embajada, Secretario/a de Embajada de primera clase y Secretario/a de Embajada de segunda clase.",E6={nivel_transparencia:4,analisis_critico:"La Orden AUC/40/2026 representa una promocion masiva en la cupula del servicio exterior espanol. El documento adolece de una falta absoluta de motivacion individualizada; se limita a citar 'circunstancias que concurren' sin detallar meritos, puntuaciones o criterios de seleccion. Existe una evidente continuidad de apellidos vinculados historicamente a las elites administrativas y diplomaticas (sagas familiares), lo que sugiere una baja movilidad social ascendente y una estructura de carrera blindada al escrutinio ciudadano. No se especifica el impacto presupuestario de estos ascensos en terminos de masa salarial.",resumen_ciudadano:"El Ministerio de Asuntos Exteriores ha aprobado el ascenso de mas de 150 funcionarios diplomaticos a categorias superiores. Esto implica un aumento de sus retribuciones y estatus dentro de la administracion. El proceso es gestionado por la propia 'Junta de la Carrera Diplomatica', lo que en la practica supone que el cuerpo decide sus propios ascensos sin explicar publicamente por que estas personas son mejores que sus companeros. Muchos de los ascendidos pertenecen a familias con larga tradicion en el Estado.",resumen_tweet:" Mas de 150 ascensos en la carrera diplomatica por orden de @Albares.  Meritocracia o inercia? Sin detalle de meritos ni coste fiscal para el contribuyente. Sagas familiares que se perpetuan en la elite del Estado.  #BOE #Opacidad #Transparencia",banderas_red_flags:["Endogamia corporativa","Falta de memoria economica adjunta","Criterios de seleccion vagos (circunstancias concurrentes)","Ausencia de publicacion de puntuaciones o ranking de meritos"],vencedores_vencidos:{ganadores:["Cuerpo Diplomatico (ascensos en propiedad)","Sagas administrativas tradicionales","Altos cargos del MAEC"],perdedores:["Contribuyentes (asuncion del coste salarial)","Principios de transparencia administrativa","Igualdad de oportunidades fuera del circulo diplomatico"]},comunidad_autonoma:"Estatal",tipologia:"Nombramientos y Ascensos",banderas_rojas:["Endogamia corporativa","Falta de memoria economica adjunta","Criterios de seleccion vagos (circunstancias concurrentes)","Ausencia de publicacion de puntuaciones o ranking de meritos"]},kne={boe_id:b6,timestamp:x6,title:S6,report:E6},Bne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:b6,default:kne,report:E6,timestamp:x6,title:S6},Symbol.toStringTag,{value:"Module"})),T6="BOE-A-2026-2074",A6="2026-01-29T12:07:32.278Z",M6="Resolucin de 20 de enero de 2026, de la Subsecretara, por la que se resuelve la convocatoria de libre designacin, efectuada por Resolucin de 17 de octubre de 2025.",w6={nivel_transparencia:4.5,analisis_critico:"El uso del sistema de 'libre designacin' para un puesto de Nivel 29 en la Direccin General de Proteccin Civil y Emergencias subraya la persistencia de mecanismos de discrecionalidad en la alta administracin. Aunque legal, este sistema permite el nombramiento basado en la confianza poltica sobre el mrito competitivo. Resulta llamativo que el adjudicatario provenga del cuerpo de Profesores de Enseanza Secundaria para un puesto de coordinacin tcnica en Interior, lo que sugiere una priorizacin de la lealtad personal o poltica sobre la especializacin sectorial. El complemento especfico de 23.597,14 euros es una carga presupuestaria consolidada sin una justificacin de mritos pblica ms all de la resolucin administrativa.",resumen_ciudadano:"El Ministerio del Interior ha nombrado a un nuevo Coordinador de rea mediante el sistema de 'libre designacin' (a dedo). El funcionario, que anteriormente perteneca al cuerpo de profesores, ocupar ahora un puesto de alto nivel (Nivel 29) con un sobresueldo especfico de ms de 23.000 euros anuales. No se ha realizado un concurso pblico de mritos para esta eleccin.",resumen_tweet:" Nueva adjudicacin 'a dedo' en el Ministerio del Interior. Un docente pasa a Coordinador de rea (Nivel 29) va libre designacin. +23.500 de complemento especfico. Confianza o competencia?  #BOE #Opacidad #Transparencia #Espaa",banderas_red_flags:["Libre designacin (nombramiento discrecional)","Incongruencia de perfil (Docente a Interior)","Elevado complemento salarial especfico"],vencedores_vencidos:{ganadores:["Rafel Andreu Gell (ascenso a nivel 29 y mejora salarial)","Subsecretara del Interior (colocacin de personal de confianza)"],perdedores:["Funcionarios de carrera con perfil tcnico en emergencias","Contribuyentes (por falta de procesos selectivos competitivos)"]},comunidad_autonoma:"Madrid",tipologia:"Nombramientos de Personal",banderas_rojas:["Libre designacin (nombramiento discrecional)","Incongruencia de perfil (Docente a Interior)","Elevado complemento salarial especfico"]},zne={boe_id:T6,timestamp:A6,title:M6,report:w6},Gne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:T6,default:zne,report:w6,timestamp:A6,title:M6},Symbol.toStringTag,{value:"Module"})),C6="BOE-A-2026-2075",R6="2026-01-29T12:07:48.064Z",I6="Orden EFD/41/2026, de 22 de enero, por la que, a propuesta de la Consejera de Educacin y Empleo de la Comunidad Autnoma de La Rioja, se nombra personal funcionario de carrera de los Cuerpos de Profesores de Enseanza Secundaria, Profesores de Escuelas Oficiales de Idiomas, Profesores Especialistas en Sectores Singulares de Formacin Profesional, Profesores de Msica y Artes Escnicas, Profesores de Artes Plsticas y Diseo, y Maestros, a las personas seleccionadas en el procedimiento selectivo convocado por Resolucin 185/2022, de 23 de diciembre.",P6={nivel_transparencia:7.5,analisis_critico:"Se trata de una Orden de nombramiento de funcionarios de carrera en La Rioja tras un proceso de estabilizacin. La mayor crtica reside en la 'dilatacin temporal': un proceso convocado en 2022 se resuelve administrativamente para el BOE en 2026, aunque con efectos retroactivos a 2024. Este desfase evidencia la lentitud burocrtica en la reduccin de la temporalidad. Existe un claro sesgo de gnero (feminizacin) en el sector docente, especialmente en Maestros y Servicios a la Comunidad. No se observan gastos fantasma directos, pero la consolidacin de plazas implica un compromiso presupuestario a largo plazo sin desglose de masa salarial total asociada.",resumen_ciudadano:"El Ministerio de Educacin oficializa el nombramiento de nuevos profesores y maestros en La Rioja que superaron las oposiciones de estabilizacin iniciadas en 2022. Estas personas ya son oficialmente funcionarios de carrera con efectos desde finales de 2024.",resumen_tweet:" El #BOE publica hoy los nombramientos de docentes en #LaRioja tras procesos de 2022. 4 aos para oficializar la estabilidad!  Predominio femenino en las nuevas plazas. La burocracia sigue siendo el cuello de botella. #Transparencia #Educacin",banderas_red_flags:["Desfase temporal excesivo (Convocatoria 2022 - Publicacin 2026)","Retroactividad administrativa de efectos econmicos y administrativos","Opacidad en el coste presupuestario total de la consolidacin de plantilla"],vencedores_vencidos:{ganadores:["Personal interino que consolida su plaza (predominantemente mujeres)","Consejera de Educacin de La Rioja (reduce tasas de temporalidad legal)"],perdedores:["Aspirantes no seleccionados en un proceso que ha tardado 4 aos","Agilidad administrativa (el sistema muestra una lentitud estructural)"]},comunidad_autonoma:"La Rioja",tipologia:"Nombramientos de personal funcionario",banderas_rojas:["Desfase temporal excesivo (Convocatoria 2022 - Publicacin 2026)","Retroactividad administrativa de efectos econmicos y administrativos","Opacidad en el coste presupuestario total de la consolidacin de plantilla"]},Vne={boe_id:C6,timestamp:R6,title:I6,report:P6},Hne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:C6,default:Vne,report:P6,timestamp:R6,title:I6},Symbol.toStringTag,{value:"Module"})),N6="BOE-A-2026-2078",D6="2026-01-29T12:08:14.228Z",O6="Resolucin de 21 de enero de 2026, del Instituto de la Cinematografa y de las Artes Audiovisuales, O.A., por la que se dispone el cese y nombramiento de vocales en la Comisin de Calificacin de Pelculas Cinematogrficas.",L6={nivel_transparencia:6,analisis_critico:"Aunque la resolucin cumple formalmente con la ley, se observa una opacidad sistemtica en la seleccin de los vocales. Se citan artculos normativos pero no se exponen los mritos especficos ni el proceso de concurrencia competitiva (si lo hubo) para los nuevos nombramientos. Estos puestos son clave para la industria cinematogrfica, ya que determinan el acceso comercial segn la edad, lo que impacta directamente en los ingresos de las productoras. La falta de mencin a las dietas o remuneraciones por sesin genera un espacio de 'gasto fantasma' administrativo.",resumen_ciudadano:"El Ministerio de Cultura ha cambiado a tres de los miembros encargados de poner la calificacin de edad (TP, +12, +18) a las pelculas en Espaa. Salen tres personas y entran otras tres por un periodo mximo de dos aos. Estas personas tienen el poder de influir en el xito comercial de una pelcula, pero el documento no explica por qu han sido elegidas ellas ni cunto dinero pblico perciben por realizar este trabajo asesor.",resumen_tweet:" Quin decide qu ven tus hij@s? El ICAA renueva vocales en la Comisin de Calificacin de Cine.  Mucha norma tcnica pero CERO info sobre sueldos o por qu eligen a estos nombres y no a otros. Transparencia? A medias. #BOE #Opacidad #Cine ",banderas_red_flags:["Ausencia de desglose presupuestario para dietas de la comisin","Criterios de seleccin basados en designacin directa sin publicidad de mritos","Opacidad en la justificacin de la 'idoneidad' de los perfiles elegidos"],vencedores_vencidos:{ganadores:["Pablo Huelves Garrido, Camelia Ciruelos de Cela y Pilar Manuela Ordez Miyar (nuevos vocales)","Ministerio de Cultura (mantiene control sobre la calificacin de contenidos)"],perdedores:["Profesionales del sector audiovisual fuera del crculo de confianza ministerial","Ciudadana (desconoce el coste real de este rgano asesor)"]},comunidad_autonoma:"Estatal",tipologia:"Nombramientos y Ceses",banderas_rojas:["Ausencia de desglose presupuestario para dietas de la comisin","Criterios de seleccin basados en designacin directa sin publicidad de mritos","Opacidad en la justificacin de la 'idoneidad' de los perfiles elegidos"]},qne={boe_id:N6,timestamp:D6,title:O6,report:L6},Wne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:N6,default:qne,report:L6,timestamp:D6,title:O6},Symbol.toStringTag,{value:"Module"})),U6="BOE-A-2026-2079",F6="2026-01-29T12:08:28.780Z",k6="Resolucin 22 de enero de 2026, de la Subsecretara, por la que se resuelve el concurso especfico convocado por Resolucin de 23 de septiembre de 2025.",B6={nivel_transparencia:6,analisis_critico:"La resolucin revela una preocupante incapacidad del Ministerio de Cultura para atraer o retener talento en reas crticas. Un 38% de las plazas ofertadas han quedado desiertas, especialmente en jefaturas de seccin de sistemas informticos y archivos. Existe una circularidad burocrtica donde los 'ganadores' son funcionarios que saltan de ministerios como Interior o Hacienda hacia Cultura, buscando presumiblemente mejores condiciones de vida o proximidad geogrfica, pero sin que se perciba una renovacin real del cuerpo administrativo. La falta de cobertura en puestos tcnicos (niveles 24-26) sugiere que la Administracin no es competitiva frente al sector privado o que los requisitos internos son excesivamente rgidos.",resumen_ciudadano:"El Ministerio de Cultura ha publicado quines ocuparn nuevos puestos de trabajo tras un concurso interno. Aunque algunos funcionarios han cambiado de departamento (viniendo de reas como Investigacin o Interior), muchos puestos importantes en informtica y gestin de archivos se han quedado vacos porque nadie cumpla los requisitos o nadie se present. Esto afecta directamente a la modernizacin y digitalizacin de nuestros museos y archivos nacionales.",resumen_tweet:" El Ministerio de Cultura reparte sillas: un 38% de las plazas quedan VACAS!  Puestos clave en sistemas y archivos histricos se quedan sin personal. Fuga de talento o burocracia obsoleta? La cultura se queda atrs. #BOE #Opacidad #Transparencia",banderas_red_flags:["Alta tasa de vacantes (plazas desiertas) en puestos tcnicos","Endogamia administrativa: trasvase de personal entre ministerios sin entrada de perfiles externos","Incongruencia en la digitalizacin: plazas de sistemas informticos sin cubrir en plena era digital"],vencedores_vencidos:{ganadores:["Funcionarios de carrera con movilidad (ej. traslados desde Tenerife a Cantabria o Madrid a Soria)","Ministerio del Interior y CSIC (que actan como cantera de personal para Cultura)"],perdedores:["Patrimonio Nacional y Archivos (por falta de personal especializado)","Ciudadanos (retrasos en la gestin cultural y digitalizacin de archivos)","Candidatos cualificados del sector privado (excluidos por ser un concurso especfico restringido)"]},comunidad_autonoma:"Estatal",tipologia:"Recursos Humanos y Provisin de Puestos",banderas_rojas:["Alta tasa de vacantes (plazas desiertas) en puestos tcnicos","Endogamia administrativa: trasvase de personal entre ministerios sin entrada de perfiles externos","Incongruencia en la digitalizacin: plazas de sistemas informticos sin cubrir en plena era digital"]},jne={boe_id:U6,timestamp:F6,title:k6,report:B6},Xne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:U6,default:jne,report:B6,timestamp:F6,title:k6},Symbol.toStringTag,{value:"Module"})),z6="BOE-A-2026-2080",G6="2026-01-29T12:09:45.689Z",V6="Resolucin de 23 de enero de 2026, de la Subsecretara, por la que se resuelve la convocatoria de libre designacin, efectuada por Resolucin de 19 de diciembre de 2025, en el Organismo Autnomo Instituto Nacional de Estadstica.",H6={nivel_transparencia:4,analisis_critico:"La resolucion utiliza el sistema de 'Libre Designacion' para cubrir puestos de Nivel 30 (el maximo en la carrera administrativa). Aunque se ampara en el Real Decreto-ley 6/2023 del Plan de Recuperacion, este metodo permite una discrecionalidad que bordea el clientelismo institucional, alejandose de los principios de concurso-oposicion y merito puro. La 'valoracion de asesores' mencionada es opaca, sin baremos publicos de puntuacion.",resumen_ciudadano:"El Ministerio de Economia ha nombrado a dedo a dos nuevos Subdirectores Generales para el Instituto Nacional de Estadistica (INE). Estos puestos, con el sueldo y nivel mas alto posible para funcionarios, se han otorgado mediante un sistema de confianza en lugar de una competicion abierta basada estrictamente en examenes o meritos comparativos publicos.",resumen_tweet:" Meritocracia o confianza? El INE adjudica dos Subdirecciones Generales (Nivel 30) mediante 'Libre Designacion'. Otra vez, los puestos mas altos se deciden con opacidad bajo el paraguas del Plan de Recuperacion.  #BOE #Opacidad #Transparencia",banderas_red_flags:["Sistema de Libre Designacion (eleccion discrecional)","Puestos de Nivel 30 (maxima remuneracion y poder administrativo)","Uso de asesores no identificados para valorar la idoneidad","Amparado en medidas urgentes del Plan de Recuperacion para agilizar nombramientos directivos"],vencedores_vencidos:{ganadores:["Altos funcionarios del Cuerpo Superior de Estadisticos","Especialistas en Tecnologias de la Informacion con acceso a la cupula directiva","Estructura jerarquica del INE que consolida mandos de confianza"],perdedores:["Funcionarios de carrera sin vinculos de confianza con la direccion","Principio de concurrencia competitiva","Transparencia en la gestion del talento publico"]},comunidad_autonoma:"Nacional (Sede en Madrid)",tipologia:"Nombramientos y Personal (Libre Designacion)",banderas_rojas:["Sistema de Libre Designacion (eleccion discrecional)","Puestos de Nivel 30 (maxima remuneracion y poder administrativo)","Uso de asesores no identificados para valorar la idoneidad","Amparado en medidas urgentes del Plan de Recuperacion para agilizar nombramientos directivos"]},Yne={boe_id:z6,timestamp:G6,title:V6,report:H6},$ne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:z6,default:Yne,report:H6,timestamp:G6,title:V6},Symbol.toStringTag,{value:"Module"})),q6="BOE-A-2026-2082",W6="2026-01-29T14:52:26.823Z",j6="Resolucin de 12 de enero de 2026, conjunta de la Universidad Autnoma de Barcelona y el Instituto Cataln de la Salud, por la que se nombra Profesor Titular de Universidad a don Daniel Fuster Mart.",X6={nivel_transparencia:85,analisis_critico:"Se trata de un nombramiento tcnico-acadmico derivado de un concurso de acceso a la funcin pblica docente universitaria. El texto es estndar y cumple con la normativa administrativa, aunque mantiene la opacidad habitual en cuanto a la composicin de la comisin evaluadora y el desglose de mritos del candidato seleccionado. No se aprecian gastos fantasma, pero s la tpica estructura burocrtica que dificulta el escrutinio ciudadano sobre la meritocracia real del proceso.",resumen_ciudadano:"La Universidad Autnoma de Barcelona y el Instituto Cataln de la Salud nombran a Daniel Fuster Mart como Profesor Titular de Medicina Interna en el Hospital Germans Trias i Pujol tras un proceso de concurso pblico.",resumen_tweet:" Nuevo nombramiento en la @UABBarcelona y el @icscat. Daniel Fuster Mart es nuevo Profesor Titular de Medicina Interna. Proceso reglado, pero el BOE oculta el detalle de los mritos evaluados.  #BOE #Transparencia #Universidad #Sanidad",banderas_red_flags:["Falta de desglose de la baremacin de mritos","Opacidad en la identidad de los miembros de la comisin evaluadora","Complejidad en la va de recurso administrativo"],vencedores_vencidos:{ganadores:["Daniel Fuster Mart (obtiene plaza fija)","UAB (cubre vacante docente)","ICS (estabiliza plaza mdica vinculada)"],perdedores:["Candidatos alternativos no seleccionados","Ciudadana (falta de acceso al expediente de mritos en el BOE)"]},comunidad_autonoma:"Catalua",tipologia:"Administrativa",banderas_rojas:["Falta de desglose de la baremacin de mritos","Opacidad en la identidad de los miembros de la comisin evaluadora","Complejidad en la va de recurso administrativo"]},Kne={boe_id:q6,timestamp:W6,title:j6,report:X6},Jne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:q6,default:Kne,report:X6,timestamp:W6,title:j6},Symbol.toStringTag,{value:"Module"})),Y6="BOE-A-2026-2082",$6="2026-01-29T14:52:53.862Z",K6="Resolucin de 12 de enero de 2026, conjunta de la Universidad Autnoma de Barcelona y el Instituto Cataln de la Salud, por la que se nombra Profesor Titular de Universidad a don Daniel Fuster Mart.",J6={nivel_transparencia:82,analisis_critico:"El documento formaliza el nombramiento de un Profesor Titular de Universidad en una 'plaza vinculada', una figura que une la docencia (UAB) y la asistencia sanitaria (ICS). Aunque el proceso es legalmente slido citando el BOE de origen, existe una opacidad persistente en cuanto al coste salarial total de estas plazas duales y los criterios especficos de seleccin del tribunal, que no se detallan en el extracto. Representa la consolidacin de la lite funcionarial mdica sin una auditora pblica visible del mrito comparativo en esta publicacin.",resumen_ciudadano:"Se nombra formalmente a Daniel Fuster Mart como profesor permanente de Medicina Interna en la Universidad Autnoma de Barcelona, trabajando tambin en el Hospital Germans Trias i Pujol. Es una plaza de funcionario de carrera.",resumen_tweet:" Auditora #BOE: Nombramiento de Profesor Titular en la UAB/ICS. Plaza vinculada en Medicina Interna. Proceso legal pero con nula visibilidad sobre el coste pblico total y mritos del tribunal.  #Opacidad #Transparencia #Universidad",banderas_red_flags:["Opacidad en la masa salarial derivada de la plaza vinculada","Ausencia de nombres de los miembros del tribunal evaluador en el texto","Mantenimiento de estructuras de poder acadmico tradicional"],vencedores_vencidos:{ganadores:["Daniel Fuster Mart (obtencin de plaza vitalicia)","UAB","Institut Catal de la Salut"],perdedores:["Candidatos descartados en el proceso de 2025","Ciudadana (por falta de desglose de eficiencia presupuestaria en el gasto de personal)"]},comunidad_autonoma:"Catalua",tipologia:"Administrativa / Educativa",banderas_rojas:["Opacidad en la masa salarial derivada de la plaza vinculada","Ausencia de nombres de los miembros del tribunal evaluador en el texto","Mantenimiento de estructuras de poder acadmico tradicional"]},Zne={boe_id:Y6,timestamp:$6,title:K6,report:J6},Qne=Object.freeze(Object.defineProperty({__proto__:null,boe_id:Y6,default:Zne,report:J6,timestamp:$6,title:K6},Symbol.toStringTag,{value:"Module"})),Z6="BOE-A-2026-2084",Q6="2026-01-29T14:51:05.748Z",eG="Resolucin de 12 de enero de 2026, de la Universidad Autnoma de Barcelona, por la que se nombra Profesor Titular de Universidad a don Juan Romero Morales.",tG={nivel_transparencia:85,analisis_critico:"Se trata de un nombramiento administrativo estndar para una plaza de funcionario docente (Profesor Titular). El texto cumple con la legalidad vigente pero perpeta la opacidad sobre los mritos especficos que determinaron la eleccin del candidato frente a otros posibles aspirantes. No se detallan los costes salariales asociados ni la baremacin de la comisin, delegando la transparencia a fases previas del proceso que no son de fcil acceso pblico en este documento final.",resumen_ciudadano:"La Universidad Autnoma de Barcelona ha nombrado oficialmente a Juan Romero Morales como Profesor Titular en el rea de Lengua Espaola. Este es el paso final tras un concurso de oposicin iniciado en mayo de 2025.",resumen_tweet:" Nuevo nombramiento en la @UABBarcelona: Juan Romero Morales es ya Profesor Titular de Filologa Espaola. El #BOE publica el trmite final, aunque sin detalles sobre la baremacin del concurso.  #Transparencia #Opacidad #Universidades",banderas_red_flags:["Ausencia de desglose salarial de la plaza pblica","Falta de enlace a la baremacin de mritos del tribunal","Opacidad en el nmero de candidatos que compitieron por la plaza"],vencedores_vencidos:{ganadores:["Juan Romero Morales (obtiene plaza vitalicia)","Universidad Autnoma de Barcelona (cubre vacante estructural)"],perdedores:["Candidatos no seleccionados (sin visibilidad de motivos)","Contribuyente (falta de transparencia en la eficiencia del gasto docente)"]},comunidad_autonoma:"Catalua",tipologia:"Administrativa",banderas_rojas:["Ausencia de desglose salarial de la plaza pblica","Falta de enlace a la baremacin de mritos del tribunal","Opacidad en el nmero de candidatos que compitieron por la plaza"]},eie={boe_id:Z6,timestamp:Q6,title:eG,report:tG},tie=Object.freeze(Object.defineProperty({__proto__:null,boe_id:Z6,default:eie,report:tG,timestamp:Q6,title:eG},Symbol.toStringTag,{value:"Module"})),nG="BOE-B-2026-2227",iG="2026-01-27T16:51:47.583Z",rG="Anuncio de la Comunidad de Regantes de la Acequia de Tarramonta, sobre convocatoria de Junta.",aG={nivel_transparencia:45,analisis_critico:"El anuncio presenta una estructura clsica de opacidad administrativa en la gestin de recursos hdricos. Destaca la clusula de validez de acuerdos 'sea cualquiera el nmero de asistentes', lo que debilita la representatividad democrtica. El uso de epgrafes vagos como 'Asuntos varios' o 'Todo cuanto corresponda al mejor aprovechamiento' funciona como un cheque en blanco para la toma de decisiones crticas sin supervisin previa de los comuneros.",resumen_ciudadano:"La Comunidad de Regantes de la Acequia de Tarramonta convoca una reunin clave para decidir el presupuesto de 2026 y renovar cargos. Sin embargo, lo que se decida ser vinculante aunque asistan muy pocos socios, y el orden del da incluye puntos genricos que impiden saber de antemano qu se va a votar exactamente sobre el reparto del agua.",resumen_tweet:" Alerta en el #BOE: La Acequia de Tarramonta convoca junta con puntos ciegos. Acuerdos vlidos sin qurum mnimo y 'Asuntos varios' que ocultan decisiones clave sobre el agua.  #Opacidad #Transparencia #VegasDeGenil",banderas_red_flags:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"],vencedores_vencidos:{ganadores:["Junta de Gobierno actual (mayor control administrativo)","Grandes propietarios con capacidad de influencia directa"],perdedores:["Pequeos regantes (riesgo de falta de representatividad)","Transparencia en la gestin del bien pblico hdrico"]},comunidad_autonoma:"Andaluca",tipologia:"Administrativa y de Gestin de Recursos",banderas_rojas:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"]},nie={boe_id:nG,timestamp:iG,title:rG,report:aG},iie=Object.freeze(Object.defineProperty({__proto__:null,boe_id:nG,default:nie,report:aG,timestamp:iG,title:rG},Symbol.toStringTag,{value:"Module"})),oG="BOE-B-2026-2227",sG="2026-01-27T16:51:47.730Z",lG="Anuncio de la Comunidad de Regantes de la Acequia de Tarramonta, sobre convocatoria de Junta.",uG={nivel_transparencia:45,analisis_critico:"La convocatoria de la Comunidad de Regantes de la Acequia de Tarramonta sigue un patrn de opacidad administrativa comn en entes locales. El punto octavo 'Asuntos varios' y el sptimo 'Todo cuanto corresponda al mejor aprovechamiento' funcionan como cajones de sastre donde se pueden introducir decisiones de gran calado econmico o de gestin de recursos hdricos sin aviso previo. Adems, la clusula que valida acuerdos 'sea cualquiera el nmero de asistentes' en segunda convocatoria diluye el control democrtico, permitiendo que una minora organizada tome decisiones sobre el presupuesto y el padrn de 2026.",resumen_ciudadano:"Se convoca a los regantes de Vegas de Genil para aprobar las cuentas pasadas y el presupuesto de 2026. La reunin permite tomar decisiones crticas sobre el dinero y el agua aunque asistan muy pocos socios, y utiliza puntos del da extremadamente genricos que dificultan la fiscalizacin ciudadana.",resumen_tweet:" Ojo al #BOE! La C.R. Acequia de Tarramonta convoca junta con puntos ambiguos como 'Asuntos varios' y validez sin qurum mnimo. Quin controla realmente el agua y el presupuesto de 2026?  #Opacidad #Transparencia #VegasDeGenil",banderas_red_flags:["Validez de acuerdos sin qurum mnimo","Puntos del da genricos y ambiguos","Aprobacin de presupuestos y cobros sin desglose previo","Posible toma de decisiones discrecional en 'Asuntos varios'"],vencedores_vencidos:{ganadores:["Junta de Gobierno (por la flexibilidad de los puntos genricos)","Grandes propietarios con capacidad de movilizacin rpida"],perdedores:["Pequeos regantes con dificultades de asistencia","Transparencia pblica en la gestin del agua","Participacin ciudadana efectiva"]},comunidad_autonoma:"Andaluca",tipologia:"Econmica-Administrativa",banderas_rojas:["Validez de acuerdos sin qurum mnimo","Puntos del da genricos y ambiguos","Aprobacin de presupuestos y cobros sin desglose previo","Posible toma de decisiones discrecional en 'Asuntos varios'"]},rie={boe_id:oG,timestamp:sG,title:lG,report:uG},aie=Object.freeze(Object.defineProperty({__proto__:null,boe_id:oG,default:rie,report:uG,timestamp:sG,title:lG},Symbol.toStringTag,{value:"Module"})),cG="BOE-B-2026-2227",fG="2026-01-28T18:09:35.927Z",dG="Anuncio de la Comunidad de Regantes de la Acequia de Tarramonta, sobre convocatoria de Junta.",hG={nivel_transparencia:45,analisis_critico:"El anuncio presenta una estructura clsica de opacidad administrativa en la gestin de recursos hdricos. Destaca la clusula de validez de acuerdos 'sea cualquiera el nmero de asistentes', lo que debilita la representatividad democrtica. El uso de epgrafes vagos como 'Asuntos varios' o 'Todo cuanto corresponda al mejor aprovechamiento' funciona como un cheque en blanco para la toma de decisiones crticas sin supervisin previa de los comuneros.",resumen_ciudadano:"La Comunidad de Regantes de la Acequia de Tarramonta convoca una reunin clave para decidir el presupuesto de 2026 y renovar cargos. Sin embargo, lo que se decida ser vinculante aunque asistan muy pocos socios, y el orden del da incluye puntos genricos que impiden saber de antemano qu se va a votar exactamente sobre el reparto del agua.",resumen_tweet:" Alerta en el #BOE: La Acequia de Tarramonta convoca junta con puntos ciegos. Acuerdos vlidos sin qurum mnimo y 'Asuntos varios' que ocultan decisiones clave sobre el agua.  #Opacidad #Transparencia #VegasDeGenil",banderas_red_flags:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"],vencedores_vencidos:{ganadores:["Junta de Gobierno actual (mayor control administrativo)","Grandes propietarios con capacidad de influencia directa"],perdedores:["Pequeos regantes (riesgo de falta de representatividad)","Transparencia en la gestin del bien pblico hdrico"]},comunidad_autonoma:"Andaluca",tipologia:"Administrativa y de Gestin de Recursos",banderas_rojas:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"],tweet_sent:!0},oie={boe_id:cG,timestamp:fG,title:dG,report:hG},sie=Object.freeze(Object.defineProperty({__proto__:null,boe_id:cG,default:oie,report:hG,timestamp:fG,title:dG},Symbol.toStringTag,{value:"Module"})),pG="BOE-B-2026-2227",mG="2026-01-28T18:13:12.012Z",gG="Anuncio de la Comunidad de Regantes de la Acequia de Tarramonta, sobre convocatoria de Junta.",vG={nivel_transparencia:45,analisis_critico:"El anuncio presenta una estructura clsica de opacidad administrativa en la gestin de recursos hdricos. Destaca la clusula de validez de acuerdos 'sea cualquiera el nmero de asistentes', lo que debilita la representatividad democrtica. El uso de epgrafes vagos como 'Asuntos varios' o 'Todo cuanto corresponda al mejor aprovechamiento' funciona como un cheque en blanco para la toma de decisiones crticas sin supervisin previa de los comuneros.",resumen_ciudadano:"La Comunidad de Regantes de la Acequia de Tarramonta convoca una reunin clave para decidir el presupuesto de 2026 y renovar cargos. Sin embargo, lo que se decida ser vinculante aunque asistan muy pocos socios, y el orden del da incluye puntos genricos que impiden saber de antemano qu se va a votar exactamente sobre el reparto del agua.",resumen_tweet:" Alerta en el #BOE: La Acequia de Tarramonta convoca junta con puntos ciegos. Acuerdos vlidos sin qurum mnimo y 'Asuntos varios' que ocultan decisiones clave sobre el agua.  #Opacidad #Transparencia #VegasDeGenil",banderas_red_flags:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"],vencedores_vencidos:{ganadores:["Junta de Gobierno actual (mayor control administrativo)","Grandes propietarios con capacidad de influencia directa"],perdedores:["Pequeos regantes (riesgo de falta de representatividad)","Transparencia en la gestin del bien pblico hdrico"]},comunidad_autonoma:"Andaluca",tipologia:"Administrativa y de Gestin de Recursos",banderas_rojas:["Validez de acuerdos sin qurum mnimo","Punto del orden del da 'Asuntos varios' (falta de especificidad)","Falta de informacin sobre las cuantas de los presupuestos y repartimientos","Delegacin de poder genrica en el punto sptimo"],tweet_sent:!0},lie={boe_id:pG,timestamp:mG,title:gG,report:vG},uie=Object.freeze(Object.defineProperty({__proto__:null,boe_id:pG,default:lie,report:vG,timestamp:mG,title:gG},Symbol.toStringTag,{value:"Module"})),cie=JSON.parse('[{"id":"BOE-A-2026-2072","titulo":"Real Decreto 54/2026, de 28 de enero, por el que se modifica el Catlogo de la Red de Carreteras del Estado.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2072","transparencia":65,"fecha_auditoria":"2026-01-29T14:53:44.376Z"},{"id":"BOE-A-2026-2082","titulo":"Resolucin de 12 de enero de 2026, conjunta de la Universidad Autnoma de Barcelona y el Instituto Cataln de la Salud, por la que se nombra Profesor Titular de Universidad a don Daniel Fuster Mart.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2082","transparencia":82,"fecha_auditoria":"2026-01-29T14:52:53.862Z"},{"id":"BOE-A-2026-2084","titulo":"Resolucin de 12 de enero de 2026, de la Universidad Autnoma de Barcelona, por la que se nombra Profesor Titular de Universidad a don Juan Romero Morales.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2084","transparencia":85,"fecha_auditoria":"2026-01-29T14:51:05.748Z"},{"id":"BOE-A-2026-2080","titulo":"Resolucin de 23 de enero de 2026, de la Subsecretara, por la que se resuelve la convocatoria de libre designacin, efectuada por Resolucin de 19 de diciembre de 2025, en el Organismo Autnomo Instituto Nacional de Estadstica.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2080","transparencia":4,"fecha_auditoria":"2026-01-29T12:09:45.689Z"},{"id":"BOE-A-2026-2079","titulo":"Resolucin 22 de enero de 2026, de la Subsecretara, por la que se resuelve el concurso especfico convocado por Resolucin de 23 de septiembre de 2025.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2079","transparencia":6,"fecha_auditoria":"2026-01-29T12:08:28.780Z"},{"id":"BOE-A-2026-2078","titulo":"Resolucin de 21 de enero de 2026, del Instituto de la Cinematografa y de las Artes Audiovisuales, O.A., por la que se dispone el cese y nombramiento de vocales en la Comisin de Calificacin de Pelculas Cinematogrficas.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2078","transparencia":6,"fecha_auditoria":"2026-01-29T12:08:14.228Z"},{"id":"BOE-A-2026-2075","titulo":"Orden EFD/41/2026, de 22 de enero, por la que, a propuesta de la Consejera de Educacin y Empleo de la Comunidad Autnoma de La Rioja, se nombra personal funcionario de carrera de los Cuerpos de Profesores de Enseanza Secundaria, Profesores de Escuelas Oficiales de Idiomas, Profesores Especialistas en Sectores Singulares de Formacin Profesional, Profesores de Msica y Artes Escnicas, Profesores de Artes Plsticas y Diseo, y Maestros, a las personas seleccionadas en el procedimiento selectivo convocado por Resolucin 185/2022, de 23 de diciembre.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2075","transparencia":7.5,"fecha_auditoria":"2026-01-29T12:07:48.064Z"},{"id":"BOE-A-2026-2074","titulo":"Resolucin de 20 de enero de 2026, de la Subsecretara, por la que se resuelve la convocatoria de libre designacin, efectuada por Resolucin de 17 de octubre de 2025.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2074","transparencia":4.5,"fecha_auditoria":"2026-01-29T12:07:32.278Z"},{"id":"BOE-A-2026-2073","titulo":"Orden AUC/40/2026, de 26 de enero, por la que se acuerdan ascensos a las categoras diplomticas de Ministro/a Plenipotenciario/a de primera clase, Ministro/a Plenipotenciario/a de segunda clase, Ministro/a Plenipotenciario/a de tercera clase, Consejero/a de Embajada, Secretario/a de Embajada de primera clase y Secretario/a de Embajada de segunda clase.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-2073","transparencia":4,"fecha_auditoria":"2026-01-29T11:57:17.906Z"},{"id":"BOE-B-2026-2227","titulo":"Anuncio de la Comunidad de Regantes de la Acequia de Tarramonta, sobre convocatoria de Junta.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-B-2026-2227","transparencia":45,"fecha_auditoria":"2026-01-28T18:13:12.012Z"},{"id":"BOE-A-2024-4161","titulo":"Decreto de 20 de febrero de 2024, del Fiscal General del Estado, por el que se nombra Fiscal Decana de la Seccin Territorial de Monforte de Lemos a doa Elena Fernndez Landeiro.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-4161","transparencia":85,"fecha_auditoria":"2026-01-27T16:20:16.065Z"},{"id":"BOE-A-2026-1920","titulo":"Orden TED/30/2026, de 26 de enero, por la que se establecen parmetros tcnicos y econmicos a emplear en el clculo de la retribucin de la actividad de produccin de energa elctrica en los territorios no peninsulares con rgimen retributivo adicional durante el periodo regulatorio 2026-2031.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-1920","transparencia":35,"fecha_auditoria":"2026-01-27T11:36:28.436Z"},{"id":"BOE-A-2026-1919","titulo":"Acuerdo internacional administrativo (AIA) en aplicacin del instrumento de ratificacin del Convenio de la Organizacin para la Cooperacin y Desarrollo Econmico, firmado en Pars el 14 de diciembre de 1960 entre la Agencia Espaola de Cooperacin Internacional para el Desarrollo del Ministerio de Asuntos Exteriores, Unin Europea y Cooperacin del Reino de Espaa y la Organizacin para la Cooperacin y Desarrollo Econmico, hecho en Madrid y Pars el 9 y 22 de diciembre de 2025.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-1919","transparencia":62,"fecha_auditoria":"2026-01-27T11:31:06.459Z"},{"id":"BOE-A-2026-1844","titulo":"Resolucin de 20 de enero de 2026, de la Subsecretara, por la que se publica el Convenio de asistencia jurdica entre la Abogaca General del Estado y la Autoridad Portuaria de Avils.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-1844","transparencia":72,"fecha_auditoria":"2026-01-26T14:59:24.582Z"},{"id":"BOE-A-2026-1760","titulo":"Real Decreto 51/2026, de 23 de enero, por el que se modifica el Real Decreto 676/2025, de 28 de julio, por el que se aprueba la estructura de la Presidencia del Gobierno.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2026-1760","transparencia":4,"fecha_auditoria":"2026-01-26T13:01:32.749Z"},{"id":"BOE-A-2024-3344","titulo":"Resolucin de 9 de febrero de 2024, de la Direccin General de Calidad y Evaluacin Ambiental, por la que se formula declaracin de impacto ambiental del proyecto \\"Mdulo solar fotovoltaico de la instalacin hibrida Almendros II de 32,009 MWp\\".","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-3344","transparencia":45,"fecha_auditoria":"2026-01-23T16:24:28.326Z"},{"id":"BOE-A-2024-2233","titulo":"Resolucin de 31 de enero de 2024, del Ayuntamiento de Altafulla (Tarragona), referente a la convocatoria para proveer una plaza.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-2233","transparencia":45,"fecha_auditoria":"2026-01-23T16:23:49.391Z"},{"id":"BOE-A-2024-1122","titulo":"Resolucin de 9 de enero de 2024, del Organismo Autnomo Local del Servicio de Atencin a la Tercera Edad-Residencia Zallako Eguzki (Bizkaia), referente a la convocatoria para proveer varias plazas.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-1122","transparencia":45,"fecha_auditoria":"2026-01-23T16:23:23.119Z"},{"id":"BOE-A-2024-1055","titulo":"Decreto de 10 de enero de 2024, del Fiscal General del Estado, por el que se acepta la renuncia de don Antonio Amor Lpez como Fiscal Delegado Provincial de la Fiscala Especial Antidroga de Las Palmas.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-1055","transparencia":70,"fecha_auditoria":"2026-01-23T16:22:52.860Z"},{"id":"BOE-A-2024-9122","titulo":"Resolucin de 3 de mayo de 2024, del Ayuntamiento de Albalat dels Sorells (Valencia/Valncia), referente a la convocatoria para proveer puestos de trabajo por el sistema de concurso.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-9122","transparencia":42,"fecha_auditoria":"2026-01-23T16:21:52.957Z"},{"id":"BOE-A-2024-8901","titulo":"Acuerdo de 8 de febrero de 2024, de la Comisin Permanente del Consejo General del Poder Judicial, por el que se declara la jubilacin forzosa del Magistrado don Jos Luis Snchez-Crespo Bentez.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-8901","transparencia":85,"fecha_auditoria":"2026-01-23T16:21:14.063Z"},{"id":"BOE-A-2024-7788","titulo":"Resolucin de 9 de abril de 2024, de la Subsecretara, por la que se aprueba la Carta de Servicios de la Subdelegacin del Gobierno en Pontevedra para el periodo 2024-2027.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-7788","transparencia":62,"fecha_auditoria":"2026-01-23T16:20:20.982Z"},{"id":"BOE-A-2024-6123","titulo":"Resolucin de 19 de marzo de 2024, del Instituto Nacional de Gestin Sanitaria, por la que se nombra personal estatutario fijo en plaza en la categora de Titulado Especialista en Ciencias de la Salud: Anestesiologa y Reanimacin.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-6123","transparencia":85,"fecha_auditoria":"2026-01-23T16:19:15.965Z"},{"id":"BOE-A-2024-5012","titulo":"Resolucin de 6 de marzo de 2024, del Ayuntamiento de Los Llanos de Aridane (Santa Cruz de Tenerife), referente a la convocatoria para proveer varias plazas.","url_boe":"https://www.boe.es/buscar/doc.php?id=BOE-A-2024-5012","transparencia":65,"fecha_auditoria":"2026-01-23T16:18:33.185Z"}]'),fie=Object.freeze(Object.defineProperty({__proto__:null,default:cie},Symbol.toStringTag,{value:"Module"})),sy="boe_audit_history_v1",die=()=>{const t=Object.assign({"../audited_reports/Audit_BOE-A-2024-1055_1769185378895.json":tne,"../audited_reports/Audit_BOE-A-2024-1122_1769185409610.json":ine,"../audited_reports/Audit_BOE-A-2024-2233_1769185438898.json":ane,"../audited_reports/Audit_BOE-A-2024-3344_1769185472130.json":sne,"../audited_reports/Audit_BOE-A-2024-4161_1769185195743.json":une,"../audited_reports/Audit_BOE-A-2024-4161_1769530814618.json":fne,"../audited_reports/Audit_BOE-A-2024-4161_1769530816065.json":hne,"../audited_reports/Audit_BOE-A-2024-5012_1769185117395.json":mne,"../audited_reports/Audit_BOE-A-2024-6123_1769185172778.json":vne,"../audited_reports/Audit_BOE-A-2024-7788_1769185225653.json":_ne,"../audited_reports/Audit_BOE-A-2024-9122_1769185319432.json":xne,"../audited_reports/Audit_BOE-A-2024-9122_1769185346373.json":Ene,"../audited_reports/Audit_BOE-A-2026-1760_1769432492749.json":Ane,"../audited_reports/Audit_BOE-A-2026-1844_1769439564582.json":wne,"../audited_reports/Audit_BOE-A-2026-1919_1769513466459.json":Rne,"../audited_reports/Audit_BOE-A-2026-1920_1769513788436.json":Pne,"../audited_reports/Audit_BOE-A-2026-2072_1769687823683.json":Dne,"../audited_reports/Audit_BOE-A-2026-2072_1769698402656.json":Lne,"../audited_reports/Audit_BOE-A-2026-2072_1769698424376.json":Fne,"../audited_reports/Audit_BOE-A-2026-2073_1769687837906.json":Bne,"../audited_reports/Audit_BOE-A-2026-2074_1769688452278.json":Gne,"../audited_reports/Audit_BOE-A-2026-2075_1769688468064.json":Hne,"../audited_reports/Audit_BOE-A-2026-2078_1769688494228.json":Wne,"../audited_reports/Audit_BOE-A-2026-2079_1769688508780.json":Xne,"../audited_reports/Audit_BOE-A-2026-2080_1769688585689.json":$ne,"../audited_reports/Audit_BOE-A-2026-2082_1769698346823.json":Jne,"../audited_reports/Audit_BOE-A-2026-2082_1769698373862.json":Qne,"../audited_reports/Audit_BOE-A-2026-2084_1769698265748.json":tie,"../audited_reports/Audit_BOE-B-2026-2227_1769532707583.json":iie,"../audited_reports/Audit_BOE-B-2026-2227_1769532707730.json":aie,"../audited_reports/Audit_BOE-B-2026-2227_1769623775927.json":sie,"../audited_reports/Audit_BOE-B-2026-2227_1769623992012.json":uie}),e=Object.assign({"../audited_reports/BOE_Audit_Index_1769698424377.json":fie}),n=[];Object.values(e).forEach(r=>{Array.isArray(r.default)&&n.push(...r.default)});const i=[];return Object.values(t).forEach(r=>{const a=r.default;if(a&&a.boe_id&&a.report){const o=n.find(s=>s.id===a.boe_id);i.push({boeId:a.boe_id,title:(o==null?void 0:o.titulo)||a.title||a.boe_id,audit:a.report,timestamp:a.timestamp?new Date(a.timestamp).getTime():Date.now()})}}),i},hie=async()=>{let t=[];const e=localStorage.getItem(sy),n=e?JSON.parse(e):[],i=die(),r=[...t];let a=!1;return i.forEach(o=>{r.find(s=>s.boeId===o.boeId)||r.push(o),n.find(s=>s.boeId===o.boeId)||(n.push(o),a=!0)}),a&&localStorage.setItem(sy,JSON.stringify(n)),n.forEach(o=>{r.find(s=>s.boeId===o.boeId)||r.push(o)}),r.sort((o,s)=>s.timestamp-o.timestamp)},B0=async(t,e,n)=>{const i={boeId:t,title:e,audit:n,timestamp:Date.now()},r=localStorage.getItem(sy),o=(r?JSON.parse(r):[]).filter(s=>s.boeId!==t);localStorage.setItem(sy,JSON.stringify([i,...o]))},pie=()=>{localStorage.removeItem(sy)},yG=({currentPage:t,totalPages:e,onPageChange:n,itemsPerPage:i,totalItems:r,label:a="Items"})=>e<=1?null:ee.jsxs("div",{className:"flex items-center justify-between border-t border-slate-800 pt-4 mt-4",children:[ee.jsxs("div",{className:"text-xs text-slate-500 font-mono",children:["Showing ",ee.jsx("span",{className:"text-slate-300 font-bold",children:Math.min((t-1)*i+1,r)})," to ",ee.jsx("span",{className:"text-slate-300 font-bold",children:Math.min(t*i,r)})," of ",ee.jsx("span",{className:"text-slate-300 font-bold",children:r})," ",a]}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsx("button",{onClick:()=>n(t-1),disabled:t===1,className:"p-2 rounded-lg bg-slate-900 border border-slate-800 text-slate-400 hover:text-white hover:bg-slate-800 disabled:opacity-30 disabled:hover:bg-slate-900 transition-colors",children:ee.jsx(HX,{size:16})}),ee.jsxs("span",{className:"flex items-center justify-center px-4 rounded-lg bg-slate-900 border border-slate-800 text-xs font-bold text-slate-400",children:[t," / ",e]}),ee.jsx("button",{onClick:()=>n(t+1),disabled:t===e,className:"p-2 rounded-lg bg-slate-900 border border-slate-800 text-slate-400 hover:text-white hover:bg-slate-800 disabled:opacity-30 disabled:hover:bg-slate-900 transition-colors",children:ee.jsx(cz,{size:16})})]})]}),mie=({history:t,onClear:e,onImport:n,lang:i,isLoggedIn:r})=>{const a=Pg[i],[o,s]=TX(),[u,c]=ds.useState(""),[d,p]=ds.useState(parseInt(o.get("min")||"0")),[g,y]=ds.useState(parseInt(o.get("max")||"100")),[b,T]=ds.useState(o.get("tag")||""),[S,A]=ds.useState(1),R=8;ds.useEffect(()=>{A(1)},[u,d,g,b]),ds.useEffect(()=>{const L=o.get("tag");L&&T(L);const F=o.get("min");F&&p(parseInt(F));const j=o.get("max");j&&y(parseInt(j))},[o]);const I=L=>{const F=new URLSearchParams(o);L.tag!==void 0&&(T(L.tag),L.tag?F.set("tag",L.tag):F.delete("tag")),L.min!==void 0&&(p(L.min),F.set("min",L.min.toString())),L.max!==void 0&&(y(L.max),F.set("max",L.max.toString())),s(F)},N=ds.useMemo(()=>{const L=new Set;return t.forEach(F=>{F.audit.comunidad_autonoma&&L.add(F.audit.comunidad_autonoma),F.audit.tipologia&&L.add(F.audit.tipologia)}),Array.from(L).sort()},[t]),D=ds.useMemo(()=>t.filter(L=>{const F=L.title.toLowerCase().includes(u.toLowerCase())||L.boeId.toLowerCase().includes(u.toLowerCase()),j=L.audit.nivel_transparencia>=d&&L.audit.nivel_transparencia<=g,W=!b||L.audit.comunidad_autonoma===b||L.audit.tipologia===b||L.audit.banderas_rojas&&L.audit.banderas_rojas.includes(b);return F&&j&&W}),[t,u,d,g,b]),U=()=>{const L=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),F=URL.createObjectURL(L),j=document.createElement("a");j.href=F,j.download=`BOE_Audit_Full_History_${new Date().getTime()}.json`,j.click(),URL.revokeObjectURL(F)},k=L=>{var W;const F=(W=L.target.files)==null?void 0:W[0];if(!F)return;const j=new FileReader;j.onload=X=>{var Q;try{const ae=JSON.parse((Q=X.target)==null?void 0:Q.result);n(ae)}catch{alert(a.importError)}},j.readAsText(F)},z=()=>{const L=t.map(X=>({id:X.boeId,titulo:X.title,url_boe:`https://www.boe.es/buscar/doc.php?id=${X.boeId}`,transparencia:X.audit.nivel_transparencia,fecha_auditoria:new Date(X.timestamp).toISOString()})),F=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),j=URL.createObjectURL(F),W=document.createElement("a");W.href=j,W.download=`BOE_Audit_Index_${new Date().getTime()}.json`,W.click(),URL.revokeObjectURL(j)};return ee.jsxs("div",{className:"flex flex-col h-full space-y-4",children:[ee.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-4 space-y-4",children:[ee.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[ee.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[ee.jsx(mz,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),ee.jsx("input",{type:"text",placeholder:a.searchPlaceholder,className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-2 pl-10 pr-4 text-sm outline-none focus:border-blue-500 transition-all",value:u,onChange:L=>c(L.target.value)})]}),ee.jsxs("div",{className:"flex flex-wrap gap-2",children:[ee.jsxs("div",{className:"flex items-center gap-2 bg-slate-950 border border-slate-800 rounded-xl px-3 py-2",children:[ee.jsx(E3,{size:14,className:"text-slate-500"}),ee.jsxs("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:[a.minTransparency,":"]}),ee.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:L=>I({min:parseInt(L.target.value)}),className:"w-20 h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500"}),ee.jsxs("span",{className:"text-xs font-mono text-blue-400 w-8 text-right",children:[d,"%"]})]}),ee.jsxs("div",{className:"flex items-center gap-2 bg-slate-950 border border-slate-800 rounded-xl px-3 py-2",children:[ee.jsx(E3,{size:14,className:"text-slate-500"}),ee.jsxs("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:[a.maxTransparency,":"]}),ee.jsx("input",{type:"range",min:"0",max:"100",value:g,onChange:L=>I({max:parseInt(L.target.value)}),className:"w-20 h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-red-500"}),ee.jsxs("span",{className:"text-xs font-mono text-red-400 w-8 text-right",children:[g,"%"]})]})]}),ee.jsxs("div",{className:"flex items-center gap-2 bg-slate-950 border border-slate-800 rounded-xl px-3 py-2",children:[ee.jsx(zC,{size:14,className:"text-slate-500"}),ee.jsxs("select",{className:"bg-transparent text-xs text-slate-300 outline-none cursor-pointer",value:b,onChange:L=>I({tag:L.target.value}),children:[ee.jsx("option",{value:"",children:a.allTags}),N.map(L=>ee.jsx("option",{value:L,children:L},L))]})]})]}),r&&ee.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-800",children:[ee.jsxs("button",{onClick:z,disabled:t.length===0,className:"bg-emerald-600/10 hover:bg-emerald-600 disabled:opacity-30 text-emerald-400 hover:text-white px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border border-emerald-600/20 flex items-center gap-1.5",children:[ee.jsx(fz,{size:12}),a.exportHistoryJson]}),ee.jsxs("button",{onClick:U,disabled:t.length===0,className:"bg-blue-600/10 hover:bg-blue-600 disabled:opacity-30 text-blue-400 hover:text-white px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border border-blue-600/20 flex items-center gap-1.5",children:[ee.jsx(dz,{size:12}),a.exportAllJson]}),ee.jsxs("label",{className:"cursor-pointer bg-purple-600/10 hover:bg-purple-600 text-purple-400 hover:text-white px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border border-purple-600/20 flex items-center gap-1.5",children:[ee.jsx(NY,{size:12}),a.importJson,ee.jsx("input",{type:"file",accept:".json",onChange:k,className:"hidden"})]}),ee.jsx("button",{onClick:e,disabled:t.length===0,className:"bg-slate-800 hover:bg-red-900/40 disabled:opacity-30 text-slate-500 hover:text-red-400 px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border border-slate-700 ml-auto",children:a.clearHistory})]})]}),ee.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1 min-h-[400px]",children:[D.length===0&&ee.jsx("div",{className:"flex flex-col items-center justify-center py-20 text-slate-600 opacity-40 italic text-sm",children:"No se han encontrado auditoras que coincidan con los filtros"}),D.slice((S-1)*R,S*R).map(L=>ee.jsxs("div",{className:"group relative bg-slate-900/40 border border-slate-800/80 p-4 rounded-2xl hover:bg-slate-900 hover:border-blue-500/30 transition-all text-left shadow-lg flex flex-col",children:[ee.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ee.jsxs("div",{className:"flex gap-2 items-center",children:[ee.jsx("span",{className:"text-[10px] font-mono text-slate-500 uppercase tracking-widest",children:L.boeId}),L.audit.comunidad_autonoma&&ee.jsxs("span",{className:"flex items-center gap-1 bg-blue-950/40 text-blue-400 px-2 py-0.5 rounded text-[9px] border border-blue-900/50",children:[ee.jsx(pz,{size:8})," ",L.audit.comunidad_autonoma]}),L.audit.tipologia&&ee.jsxs("span",{className:"flex items-center gap-1 bg-purple-950/40 text-purple-400 px-2 py-0.5 rounded text-[9px] border border-purple-900/50",children:[ee.jsx(zC,{size:8})," ",L.audit.tipologia]})]}),ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx("a",{href:`https://www.boe.es/buscar/doc.php?id=${L.boeId}`,target:"_blank",rel:"noopener noreferrer",className:"text-slate-600 hover:text-blue-400 transition-colors",title:a.viewOfficial,children:ee.jsx(RI,{size:14})}),ee.jsxs("div",{className:`flex items-center gap-1 bg-slate-950 px-2 py-1 rounded-lg text-[10px] font-bold border ${L.audit.nivel_transparencia>=70?"text-emerald-400 border-emerald-900/30":L.audit.nivel_transparencia>33?"text-amber-400 border-amber-900/30":"text-red-400 border-red-900/30"}`,children:[ee.jsx(zX,{size:10}),L.audit.nivel_transparencia,"%"]})]})]}),ee.jsxs(RE,{to:`/audit/${L.boeId}`,className:"text-left group/btn",children:[ee.jsx("h3",{className:"font-bold text-slate-200 line-clamp-2 text-sm leading-snug mb-4 group-hover/btn:text-blue-400 transition-colors",children:L.title}),ee.jsx("div",{className:"w-full bg-slate-950 h-1.5 rounded-full overflow-hidden mb-3 border border-slate-800/50",children:ee.jsx("div",{className:`h-full transition-all duration-1000 ${L.audit.nivel_transparencia>=70?"bg-emerald-500":L.audit.nivel_transparencia>33?"bg-amber-500":"bg-red-500"}`,style:{width:`${L.audit.nivel_transparencia}%`}})}),ee.jsxs("div",{className:"flex justify-between items-center text-[10px] text-slate-500 pt-1",children:[ee.jsxs("span",{className:"flex items-center gap-1.5",children:[ee.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-700"}),a.auditedOn(new Date(L.timestamp).toLocaleDateString())]}),ee.jsxs("span",{className:"flex items-center gap-1 text-blue-400 font-bold opacity-0 group-hover/btn:opacity-100 transition-all transform translate-x-2 group-hover/btn:translate-x-0",children:[a.goToAudit," ",ee.jsx(cz,{size:10})]})]})]})]},`${L.boeId}-${L.timestamp}`))]}),ee.jsx(yG,{currentPage:S,totalPages:Math.ceil(D.length/R),onPageChange:A,itemsPerPage:R,totalItems:D.length,label:"Auditoras"})]})},gie=({resetState:t,lang:e,toggleLang:n,isLoggedIn:i,handleLogout:r,setShowLogin:a,t:o,currentView:s})=>{const[u,c]=G.useState(!1),d=wg(),p=g=>{d(g),t(),c(!1)};return ee.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-[100] bg-slate-950/80 backdrop-blur-xl border-b border-slate-800/50",children:[ee.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:ee.jsxs("div",{className:"flex items-center justify-between h-20",children:[ee.jsx("div",{className:"flex items-center gap-4",children:ee.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",onClick:()=>p("/"),children:[ee.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20 group-hover:scale-110 transition-transform",children:ee.jsx(j0,{className:"text-white",size:24})}),ee.jsxs("div",{className:"hidden sm:block",children:[ee.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Civic Auditor"}),ee.jsx("p",{className:"text-[10px] font-bold text-blue-400 tracking-tighter uppercase",children:"Agent #0412"})]})]})}),ee.jsxs("div",{className:"hidden md:flex items-center gap-1 bg-slate-900/50 p-1 rounded-xl border border-slate-800",children:[ee.jsxs("button",{onClick:()=>p("/"),className:`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="home"?"bg-blue-600 text-white shadow-lg shadow-blue-900/40":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[ee.jsx(GC,{size:16}),o.home]}),ee.jsxs("button",{onClick:()=>p("/history"),className:`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="history"?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[ee.jsx(BC,{size:16}),o.historyMenu]}),ee.jsxs("button",{onClick:()=>p("/tags"),className:`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="tags"?"bg-cyan-600 text-white shadow-lg shadow-cyan-900/40":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[ee.jsx(b3,{size:16}),"Etiquetas 3D"]})]}),ee.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[ee.jsx("button",{onClick:n,className:"bg-slate-900 border border-slate-700 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-slate-800 transition-all text-blue-400",title:e.toUpperCase(),children:ee.jsx(rY,{size:18})}),i?ee.jsxs("button",{onClick:r,className:"bg-red-900/10 border border-red-900/30 px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-red-900/20 transition-all text-sm font-bold text-red-400",children:[ee.jsx(T3,{size:16}),ee.jsx("span",{className:"hidden lg:inline",children:o.logoutBtn})]}):ee.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-500 px-5 py-2 rounded-xl flex items-center gap-2 transition-all text-sm font-bold text-white shadow-lg shadow-blue-900/20",children:[ee.jsx(j0,{size:16}),o.loginTitle]})]}),ee.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[ee.jsx("button",{onClick:n,className:"bg-slate-900 border border-slate-700 w-10 h-10 rounded-xl flex items-center justify-center text-blue-400",children:ee.jsx("span",{className:"text-xs font-black",children:e.toUpperCase()})}),ee.jsx("button",{onClick:()=>c(!u),className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",children:u?ee.jsx(UY,{size:28}):ee.jsx(gY,{size:28})})]})]})}),u&&ee.jsx("div",{className:"md:hidden bg-slate-950 border-b border-slate-800 animate-in slide-in-from-top duration-300",children:ee.jsxs("div",{className:"px-4 pt-2 pb-6 space-y-3",children:[ee.jsxs("button",{onClick:()=>p("/"),className:`w-full p-4 rounded-2xl text-left font-bold flex items-center gap-3 ${s==="home"?"bg-blue-600/10 text-blue-400 border border-blue-600/20":"text-slate-400"}`,children:[ee.jsx(GC,{size:20}),o.home]}),ee.jsxs("button",{onClick:()=>p("/history"),className:`w-full p-4 rounded-2xl text-left font-bold flex items-center gap-3 ${s==="history"?"bg-purple-600/10 text-purple-400 border border-purple-600/20":"text-slate-400"}`,children:[ee.jsx(BC,{size:20}),o.historyMenu]}),ee.jsxs("button",{onClick:()=>p("/tags"),className:`w-full p-4 rounded-2xl text-left font-bold flex items-center gap-3 ${s==="tags"?"bg-cyan-600/10 text-cyan-400 border border-cyan-600/20":"text-slate-400"}`,children:[ee.jsx(b3,{size:20}),"Etiquetas 3D"]}),ee.jsx("div",{className:"pt-4 border-t border-slate-800/50",children:i?ee.jsxs("button",{onClick:()=>{r(),c(!1)},className:"w-full p-4 rounded-2xl text-left font-bold flex items-center gap-3 text-red-400 bg-red-900/10",children:[ee.jsx(T3,{size:20}),o.logoutBtn]}):ee.jsxs("button",{onClick:()=>{a(!0),c(!1)},className:"w-full p-4 rounded-2xl text-left font-bold flex items-center gap-3 text-white bg-blue-600 shadow-xl shadow-blue-900/20",children:[ee.jsx(j0,{size:20}),o.loginTitle]})})]})})]})},vie=()=>{const t="G-Z90PTJXTEN";return G.useEffect(()=>{window.GA_INITIALIZED?console.log(" Google Analytics: Already initialized via <head> with ID",t):console.log(" Google Analytics: ID found but not initialized. Check if it is blocked or misconfigured.")},[t]),null};function _G(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=_G(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Lr(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=_G(t))&&(i&&(i+=" "),i+=e);return i}var yie=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zI(t){if(typeof t!="string")return!1;var e=yie;return e.includes(t)}var _ie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bie=new Set(_ie);function bG(t){return typeof t!="string"?!1:bie.has(t)}function xG(t){return typeof t=="string"&&t.startsWith("data-")}function lg(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bG(n)||xG(n))&&(e[n]=t[n]);return e}function iR(t){if(t==null)return null;if(G.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return lg(e)}return typeof t=="object"&&!Array.isArray(t)?lg(t):null}function ll(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bG(n)||xG(n)||zI(n))&&(e[n]=t[n]);return e}var xie=["children","width","height","viewBox","className","style","title","desc"];function rR(){return rR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rR.apply(null,arguments)}function Sie(t,e){if(t==null)return{};var n,i,r=Eie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var SG=G.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:a,className:o,style:s,title:u,desc:c}=t,d=Sie(t,xie),p=a||{width:i,height:r,x:0,y:0},g=Lr("recharts-surface",o);return G.createElement("svg",rR({},ll(d),{className:g,width:i,height:r,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),G.createElement("title",null,u),G.createElement("desc",null,c),n)}),Tie=["children","className"];function aR(){return aR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},aR.apply(null,arguments)}function Aie(t,e){if(t==null)return{};var n,i,r=Mie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var vd=G.forwardRef((t,e)=>{var{children:n,className:i}=t,r=Aie(t,Tie),a=Lr("recharts-layer",i);return G.createElement("g",aR({className:a},ll(r),{ref:e}),n)}),wie=G.createContext(null);function Ei(t){return function(){return t}}const EG=Math.cos,BS=Math.sin,Zl=Math.sqrt,zS=Math.PI,UE=2*zS,oR=Math.PI,sR=2*oR,Nh=1e-6,Cie=sR-Nh;function TG(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Rie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return TG;const n=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Iie=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?TG:Rie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,a,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,i,r,a){if(e=+e,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=i-e,c=r-n,d=o-e,p=s-n,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Nh)if(!(Math.abs(p*u-c*d)>Nh)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=i-o,b=r-s,T=u*u+c*c,S=y*y+b*b,A=Math.sqrt(T),R=Math.sqrt(g),I=a*Math.tan((oR-Math.acos((T+g-S)/(2*A*R)))/2),N=I/R,D=I/A;Math.abs(N-1)>Nh&&this._append`L${e+N*d},${n+N*p}`,this._append`A${a},${a},0,0,${+(p*y>d*b)},${this._x1=e+D*u},${this._y1=n+D*c}`}}arc(e,n,i,r,a,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),u=i*Math.sin(r),c=e+s,d=n+u,p=1^o,g=o?r-a:a-r;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Nh||Math.abs(this._y1-d)>Nh)&&this._append`L${c},${d}`,i&&(g<0&&(g=g%sR+sR),g>Cie?this._append`A${i},${i},0,1,${p},${e-s},${n-u}A${i},${i},0,1,${p},${this._x1=c},${this._y1=d}`:g>Nh&&this._append`A${i},${i},0,${+(g>=oR)},${p},${this._x1=e+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function GI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Iie(e)}function VI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function AG(t){this._context=t}AG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function FE(t){return new AG(t)}function MG(t){return t[0]}function wG(t){return t[1]}function CG(t,e){var n=Ei(!0),i=null,r=FE,a=null,o=GI(s);t=typeof t=="function"?t:t===void 0?MG:Ei(t),e=typeof e=="function"?e:e===void 0?wG:Ei(e);function s(u){var c,d=(u=VI(u)).length,p,g=!1,y;for(i==null&&(a=r(y=o())),c=0;c<=d;++c)!(c<d&&n(p=u[c],c,u))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(p,c,u),+e(p,c,u));if(y)return a=null,y+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Ei(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Ei(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ei(!!u),s):n},s.curve=function(u){return arguments.length?(r=u,i!=null&&(a=r(i)),s):r},s.context=function(u){return arguments.length?(u==null?i=a=null:a=r(i=u),s):i},s}function rx(t,e,n){var i=null,r=Ei(!0),a=null,o=FE,s=null,u=GI(c);t=typeof t=="function"?t:t===void 0?MG:Ei(+t),e=typeof e=="function"?e:Ei(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?wG:Ei(+n);function c(p){var g,y,b,T=(p=VI(p)).length,S,A=!1,R,I=new Array(T),N=new Array(T);for(a==null&&(s=o(R=u())),g=0;g<=T;++g){if(!(g<T&&r(S=p[g],g,p))===A)if(A=!A)y=g,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=g-1;b>=y;--b)s.point(I[b],N[b]);s.lineEnd(),s.areaEnd()}A&&(I[g]=+t(S,g,p),N[g]=+e(S,g,p),s.point(i?+i(S,g,p):I[g],n?+n(S,g,p):N[g]))}if(R)return s=null,R+""||null}function d(){return CG().defined(r).curve(o).context(a)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ei(+p),i=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Ei(+p),c):t},c.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Ei(+p),c):i},c.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ei(+p),n=null,c):e},c.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Ei(+p),c):e},c.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Ei(+p),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(i).y(e)},c.defined=function(p){return arguments.length?(r=typeof p=="function"?p:Ei(!!p),c):r},c.curve=function(p){return arguments.length?(o=p,a!=null&&(s=o(a)),c):o},c.context=function(p){return arguments.length?(p==null?a=s=null:s=o(a=p),c):a},c}class RG{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Pie(t){return new RG(t,!0)}function Nie(t){return new RG(t,!1)}const HI={draw(t,e){const n=Zl(e/zS);t.moveTo(n,0),t.arc(0,0,n,0,UE)}},Die={draw(t,e){const n=Zl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},IG=Zl(1/3),Oie=IG*2,Lie={draw(t,e){const n=Zl(e/Oie),i=n*IG;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Uie={draw(t,e){const n=Zl(e),i=-n/2;t.rect(i,i,n,n)}},Fie=.8908130915292852,PG=BS(zS/10)/BS(7*zS/10),kie=BS(UE/10)*PG,Bie=-EG(UE/10)*PG,zie={draw(t,e){const n=Zl(e*Fie),i=kie*n,r=Bie*n;t.moveTo(0,-n),t.lineTo(i,r);for(let a=1;a<5;++a){const o=UE*a/5,s=EG(o),u=BS(o);t.lineTo(u*n,-s*n),t.lineTo(s*i-u*r,u*i+s*r)}t.closePath()}},nM=Zl(3),Gie={draw(t,e){const n=-Zl(e/(nM*3));t.moveTo(0,n*2),t.lineTo(-nM*n,-n),t.lineTo(nM*n,-n),t.closePath()}},el=-.5,tl=Zl(3)/2,lR=1/Zl(12),Vie=(lR/2+1)*3,Hie={draw(t,e){const n=Zl(e/Vie),i=n/2,r=n*lR,a=i,o=n*lR+n,s=-a,u=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(s,u),t.lineTo(el*i-tl*r,tl*i+el*r),t.lineTo(el*a-tl*o,tl*a+el*o),t.lineTo(el*s-tl*u,tl*s+el*u),t.lineTo(el*i+tl*r,el*r-tl*i),t.lineTo(el*a+tl*o,el*o-tl*a),t.lineTo(el*s+tl*u,el*u-tl*s),t.closePath()}};function qie(t,e){let n=null,i=GI(r);t=typeof t=="function"?t:Ei(t||HI),e=typeof e=="function"?e:Ei(e===void 0?64:+e);function r(){let a;if(n||(n=a=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(t=typeof a=="function"?a:Ei(a),r):t},r.size=function(a){return arguments.length?(e=typeof a=="function"?a:Ei(+a),r):e},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function GS(){}function VS(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function NG(t){this._context=t}NG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wie(t){return new NG(t)}function DG(t){this._context=t}DG.prototype={areaStart:GS,areaEnd:GS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jie(t){return new DG(t)}function OG(t){this._context=t}OG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xie(t){return new OG(t)}function LG(t){this._context=t}LG.prototype={areaStart:GS,areaEnd:GS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Yie(t){return new LG(t)}function oL(t){return t<0?-1:1}function sL(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(oL(a)+oL(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function lL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function iM(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function HS(t){this._context=t}HS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iM(this,this._t0,lL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iM(this,lL(this,n=sL(this,t,e)),n);break;default:iM(this,this._t0,n=sL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function UG(t){this._context=new FG(t)}(UG.prototype=Object.create(HS.prototype)).point=function(t,e){HS.prototype.point.call(this,e,t)};function FG(t){this._context=t}FG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}};function $ie(t){return new HS(t)}function Kie(t){return new UG(t)}function kG(t){this._context=t}kG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=uL(t),r=uL(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uL(t){var e,n=t.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/a[e-1],a[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function Jie(t){return new kG(t)}function kE(t,e){this._context=t,this._t=e}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Zie(t){return new kE(t,.5)}function Qie(t){return new kE(t,0)}function ere(t){return new kE(t,1)}function Qh(t,e){if((o=t.length)>1)for(var n=1,i,r,a=t[e[0]],o,s=a.length;n<o;++n)for(r=a,a=t[e[n]],i=0;i<s;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function uR(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function tre(t,e){return t[e]}function nre(t){const e=[];return e.key=t,e}function ire(){var t=Ei([]),e=uR,n=Qh,i=tre;function r(a){var o=Array.from(t.apply(this,arguments),nre),s,u=o.length,c=-1,d;for(const p of a)for(s=0,++c;s<u;++s)(o[s][c]=[0,+i(p,o[s].key,c,a)]).data=p;for(s=0,d=VI(e(o));s<u;++s)o[d[s]].index=s;return n(o,d),o}return r.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ei(Array.from(a)),r):t},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:Ei(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?uR:typeof a=="function"?a:Ei(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(n=a??Qh,r):n},r}function rre(t,e){if((i=t.length)>0){for(var n,i,r=0,a=t[0].length,o;r<a;++r){for(o=n=0;n<i;++n)o+=t[n][r][1]||0;if(o)for(n=0;n<i;++n)t[n][r][1]/=o}Qh(t,e)}}function are(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,a=i.length;n<a;++n){for(var o=0,s=0;o<r;++o)s+=t[o][n][1]||0;i[n][1]+=i[n][0]=-s/2}Qh(t,e)}}function ore(t,e){if(!(!((o=t.length)>0)||!((a=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,a,o;i<a;++i){for(var s=0,u=0,c=0;s<o;++s){for(var d=t[e[s]],p=d[i][1]||0,g=d[i-1][1]||0,y=(p-g)/2,b=0;b<s;++b){var T=t[e[b]],S=T[i][1]||0,A=T[i-1][1]||0;y+=S-A}u+=p,c+=y*p}r[i-1][1]+=r[i-1][0]=n,u&&(n-=c/u)}r[i-1][1]+=r[i-1][0]=n,Qh(t,e)}}var rM={},aM={},cL;function sre(){return cL||(cL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(aM)),aM}var oM={},fL;function BG(){return fL||(fL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(oM)),oM}var sM={},dL;function qI(){return dL||(dL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;return typeof n=="string"||typeof n=="symbol"?n:Object.is((i=n==null?void 0:n.valueOf)==null?void 0:i.call(n),-0)?"-0":String(n)}t.toKey=e})(sM)),sM}var lM={},uM={},hL;function lre(){return hL||(hL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(uM)),uM}var pL;function WI(){return pL||(pL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lre(),n=qI();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const a=[],o=r.length;if(o===0)return a;let s=0,u="",c="",d=!1;for(r.charCodeAt(0)===46&&(a.push(""),s++);s<o;){const p=r[s];c?p==="\\"&&s+1<o?(s++,u+=r[s]):p===c?c="":u+=p:d?p==='"'||p==="'"?c=p:p==="]"?(d=!1,a.push(u),u=""):u+=p:p==="["?(d=!0,u&&(a.push(u),u="")):p==="."?u&&(a.push(u),u=""):u+=p,s++}return u&&a.push(u),a}t.toPath=i})(lM)),lM}var mL;function jI(){return mL||(mL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sre(),n=BG(),i=qI(),r=WI();function a(s,u,c){if(s==null)return c;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return c;const d=s[u];return d===void 0?n.isDeepKey(u)?a(s,r.toPath(u),c):c:d}case"number":case"symbol":{typeof u=="number"&&(u=i.toKey(u));const d=s[u];return d===void 0?c:d}default:{if(Array.isArray(u))return o(s,u,c);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return c;const d=s[u];return d===void 0?c:d}}}function o(s,u,c){if(u.length===0)return c;let d=s;for(let p=0;p<u.length;p++){if(d==null||e.isUnsafeProperty(u[p]))return c;d=d[u[p]]}return d===void 0?c:d}t.get=a})(rM)),rM}var cM,gL;function ure(){return gL||(gL=1,cM=jI().get),cM}var cre=ure();const ly=dl(cre);var fre=4;function dd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fre,n=10**e,i=Math.round(t*n)/n;return Object.is(i,-0)?0:i}function cr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.reduce((r,a,o)=>{var s=n[o-1];return typeof s=="string"?r+s+a:s!==void 0?r+dd(s)+a:r+a},"")}var $o=t=>t===0?0:t>0?1:-1,Kc=t=>typeof t=="number"&&t!=+t,Jc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,nn=t=>(typeof t=="number"||t instanceof Number)&&!Kc(t),Zc=t=>nn(t)||typeof t=="string",dre=0,uy=t=>{var e=++dre;return"".concat(t||"").concat(e)},vs=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nn(e)&&typeof e!="string")return i;var a;if(Jc(e)){if(n==null)return i;var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return Kc(a)&&(a=i),r&&n!=null&&a>n&&(a=n),a},zG=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[String(t[i])])n[String(t[i])]=!0;else return!0;return!1};function kl(t,e,n){return nn(t)&&nn(e)?dd(t+n*(e-t)):e}function hre(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):ly(i,e))===n)}var xs=t=>t===null||typeof t>"u",Wy=t=>xs(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function pre(t){return t!=null}function jy(){}var mre=["type","size","sizeType"];function cR(){return cR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cR.apply(null,arguments)}function vL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(n),!0).forEach(function(i){gre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gre(t,e,n){return(e=vre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vre(t){var e=yre(t,"string");return typeof e=="symbol"?e:e+""}function yre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _re(t,e){if(t==null)return{};var n,i,r=bre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bre(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var GG={symbolCircle:HI,symbolCross:Die,symbolDiamond:Lie,symbolSquare:Uie,symbolStar:zie,symbolTriangle:Gie,symbolWye:Hie},xre=Math.PI/180,Sre=t=>{var e="symbol".concat(Wy(t));return GG[e]||HI},Ere=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*xre;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Tre=(t,e)=>{GG["symbol".concat(Wy(t))]=e},VG=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,r=_re(t,mre),a=yL(yL({},r),{},{type:e,size:n,sizeType:i}),o="circle";typeof e=="string"&&(o=e);var s=()=>{var g=Sre(o),y=qie().type(g).size(Ere(n,i,o)),b=y();if(b!==null)return b},{className:u,cx:c,cy:d}=a,p=ll(a);return nn(c)&&nn(d)&&nn(n)?G.createElement("path",cR({},p,{className:Lr("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(d,")"),d:s()})):null};VG.registerSymbol=Tre;var HG=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Are=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(G.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{zI(r)&&(i[r]=(a=>n[r](n,a)))}),i},Mre=(t,e,n)=>i=>(t(e,n,i),null),wre=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var a=t[r];zI(r)&&typeof a=="function"&&(i||(i={}),i[r]=Mre(a,e,n))}),i};function _L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Cre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(n),!0).forEach(function(i){Rre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rre(t,e,n){return(e=Ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ire(t){var e=Pre(t,"string");return typeof e=="symbol"?e:e+""}function Pre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yu(t,e){var n=Cre({},t),i=e,r=Object.keys(e),a=r.reduce((o,s)=>(o[s]===void 0&&i[s]!==void 0&&(o[s]=i[s]),o),n);return a}var fM={},dM={},bL;function Nre(){return bL||(bL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let a=0;a<n.length;a++){const o=n[a],s=i(o,a,n);r.has(s)||r.set(s,o)}return Array.from(r.values())}t.uniqBy=e})(dM)),dM}var hM={},xL;function Dre(){return xL||(xL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return function(...r){return n.apply(this,r.slice(0,i))}}t.ary=e})(hM)),hM}var pM={},SL;function qG(){return SL||(SL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(pM)),pM}var mM={},gM={},vM={},EL;function Ore(){return EL||(EL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(vM)),vM}var TL;function XI(){return TL||(TL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ore();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(gM)),gM}var yM={},AL;function Lre(){return AL||(AL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(yM)),yM}var ML;function Ure(){return ML||(ML=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XI(),n=Lre();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(mM)),mM}var _M={},bM={},wL;function Fre(){return wL||(wL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jI();function n(i){return function(r){return e.get(r,i)}}t.property=n})(bM)),bM}var xM={},SM={},EM={},TM={},CL;function WG(){return CL||(CL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(TM)),TM}var AM={},RL;function jG(){return RL||(RL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(AM)),AM}var MM={},IL;function XG(){return IL||(IL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.isEqualsSameValueZero=e})(MM)),MM}var PL;function kre(){return PL||(PL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WG(),n=jG(),i=XG();function r(d,p,g){return typeof g!="function"?r(d,p,()=>{}):a(d,p,function y(b,T,S,A,R,I){const N=g(b,T,S,A,R,I);return N!==void 0?!!N:a(b,T,y,I)},new Map)}function a(d,p,g,y){if(p===d)return!0;switch(typeof p){case"object":return o(d,p,g,y);case"function":return Object.keys(p).length>0?a(d,{...p},g,y):i.isEqualsSameValueZero(d,p);default:return e.isObject(d)?typeof p=="string"?p==="":!0:i.isEqualsSameValueZero(d,p)}}function o(d,p,g,y){if(p==null)return!0;if(Array.isArray(p))return u(d,p,g,y);if(p instanceof Map)return s(d,p,g,y);if(p instanceof Set)return c(d,p,g,y);const b=Object.keys(p);if(d==null||n.isPrimitive(d))return b.length===0;if(b.length===0)return!0;if(y!=null&&y.has(p))return y.get(p)===d;y==null||y.set(p,d);try{for(let T=0;T<b.length;T++){const S=b[T];if(!n.isPrimitive(d)&&!(S in d)||p[S]===void 0&&d[S]!==void 0||p[S]===null&&d[S]!==null||!g(d[S],p[S],S,d,p,y))return!1}return!0}finally{y==null||y.delete(p)}}function s(d,p,g,y){if(p.size===0)return!0;if(!(d instanceof Map))return!1;for(const[b,T]of p.entries()){const S=d.get(b);if(g(S,T,b,d,p,y)===!1)return!1}return!0}function u(d,p,g,y){if(p.length===0)return!0;if(!Array.isArray(d))return!1;const b=new Set;for(let T=0;T<p.length;T++){const S=p[T];let A=!1;for(let R=0;R<d.length;R++){if(b.has(R))continue;const I=d[R];let N=!1;if(g(I,S,T,d,p,y)&&(N=!0),N){b.add(R),A=!0;break}}if(!A)return!1}return!0}function c(d,p,g,y){return p.size===0?!0:d instanceof Set?u([...d],[...p],g,y):!1}t.isMatchWith=r,t.isSetMatch=c})(EM)),EM}var NL;function YG(){return NL||(NL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kre();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(SM)),SM}var wM={},CM={},RM={},DL;function Bre(){return DL||(DL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(RM)),RM}var IM={},OL;function YI(){return OL||(OL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(IM)),IM}var PM={},LL;function $G(){return LL||(LL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",a="[object Arguments]",o="[object Symbol]",s="[object Date]",u="[object Map]",c="[object Set]",d="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",b="[object Error]",T="[object DataView]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",I="[object Uint32Array]",N="[object BigUint64Array]",D="[object Int8Array]",U="[object Int16Array]",k="[object Int32Array]",z="[object BigInt64Array]",L="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=d,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=N,t.booleanTag=r,t.dataViewTag=T,t.dateTag=s,t.errorTag=b,t.float32ArrayTag=L,t.float64ArrayTag=F,t.functionTag=p,t.int16ArrayTag=U,t.int32ArrayTag=k,t.int8ArrayTag=D,t.mapTag=u,t.numberTag=i,t.objectTag=y,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=R,t.uint32ArrayTag=I,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=A})(PM)),PM}var NM={},UL;function zre(){return UL||(UL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(NM)),NM}var FL;function KG(){return FL||(FL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bre(),n=YI(),i=$G(),r=jG(),a=zre();function o(d,p){return s(d,void 0,d,new Map,p)}function s(d,p,g,y=new Map,b=void 0){const T=b==null?void 0:b(d,p,g,y);if(T!==void 0)return T;if(r.isPrimitive(d))return d;if(y.has(d))return y.get(d);if(Array.isArray(d)){const S=new Array(d.length);y.set(d,S);for(let A=0;A<d.length;A++)S[A]=s(d[A],A,g,y,b);return Object.hasOwn(d,"index")&&(S.index=d.index),Object.hasOwn(d,"input")&&(S.input=d.input),S}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const S=new RegExp(d.source,d.flags);return S.lastIndex=d.lastIndex,S}if(d instanceof Map){const S=new Map;y.set(d,S);for(const[A,R]of d)S.set(A,s(R,A,g,y,b));return S}if(d instanceof Set){const S=new Set;y.set(d,S);for(const A of d)S.add(s(A,void 0,g,y,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const S=new(Object.getPrototypeOf(d)).constructor(d.length);y.set(d,S);for(let A=0;A<d.length;A++)S[A]=s(d[A],A,g,y,b);return S}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const S=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return y.set(d,S),u(S,d,g,y,b),S}if(typeof File<"u"&&d instanceof File){const S=new File([d],d.name,{type:d.type});return y.set(d,S),u(S,d,g,y,b),S}if(typeof Blob<"u"&&d instanceof Blob){const S=new Blob([d],{type:d.type});return y.set(d,S),u(S,d,g,y,b),S}if(d instanceof Error){const S=new d.constructor;return y.set(d,S),S.message=d.message,S.name=d.name,S.stack=d.stack,S.cause=d.cause,u(S,d,g,y,b),S}if(d instanceof Boolean){const S=new Boolean(d.valueOf());return y.set(d,S),u(S,d,g,y,b),S}if(d instanceof Number){const S=new Number(d.valueOf());return y.set(d,S),u(S,d,g,y,b),S}if(d instanceof String){const S=new String(d.valueOf());return y.set(d,S),u(S,d,g,y,b),S}if(typeof d=="object"&&c(d)){const S=Object.create(Object.getPrototypeOf(d));return y.set(d,S),u(S,d,g,y,b),S}return d}function u(d,p,g=d,y,b){const T=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<T.length;S++){const A=T[S],R=Object.getOwnPropertyDescriptor(d,A);(R==null||R.writable)&&(d[A]=s(p[A],A,g,y,b))}}function c(d){switch(n.getTag(d)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=s,t.copyProperties=u})(CM)),CM}var kL;function Gre(){return kL||(kL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KG();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(wM)),wM}var BL;function Vre(){return BL||(BL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YG(),n=Gre();function i(r){return r=n.cloneDeep(r),a=>e.isMatch(a,r)}t.matches=i})(xM)),xM}var DM={},OM={},LM={},zL;function Hre(){return zL||(zL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KG(),n=YI(),i=$G();function r(a,o){return e.cloneDeepWith(a,(s,u,c,d)=>{const p=o==null?void 0:o(s,u,c,d);if(p!==void 0)return p;if(typeof a=="object"){if(n.getTag(a)===i.objectTag&&typeof a.constructor!="function"){const g={};return d.set(a,g),e.copyProperties(g,a,c,d),g}switch(Object.prototype.toString.call(a)){case i.numberTag:case i.stringTag:case i.booleanTag:{const g=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(g,a),g}case i.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=r})(LM)),LM}var GL;function qre(){return GL||(GL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hre();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(OM)),OM}var UM={},FM={},VL;function JG(){return VL||(VL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(FM)),FM}var kM={},HL;function Wre(){return HL||(HL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YI();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(kM)),kM}var qL;function jre(){return qL||(qL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BG(),n=JG(),i=Wre(),r=WI();function a(o,s){let u;if(Array.isArray(s)?u=s:typeof s=="string"&&e.isDeepKey(s)&&(o==null?void 0:o[s])==null?u=r.toPath(s):u=[s],u.length===0)return!1;let c=o;for(let d=0;d<u.length;d++){const p=u[d];if((c==null||!Object.hasOwn(c,p))&&!((Array.isArray(c)||i.isArguments(c))&&n.isIndex(p)&&p<c.length))return!1;c=c[p]}return!0}t.has=a})(UM)),UM}var WL;function Xre(){return WL||(WL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YG(),n=qI(),i=qre(),r=jI(),a=jre();function o(s,u){switch(typeof s){case"object":{Object.is(s==null?void 0:s.valueOf(),-0)&&(s="-0");break}case"number":{s=n.toKey(s);break}}return u=i.cloneDeep(u),function(c){const d=r.get(c,s);return d===void 0?a.has(c,s):u===void 0?d===void 0:e.isMatch(d,u)}}t.matchesProperty=o})(DM)),DM}var jL;function Yre(){return jL||(jL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qG(),n=Fre(),i=Vre(),r=Xre();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):i.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=a})(_M)),_M}var XL;function $re(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nre(),n=Dre(),i=qG(),r=Ure(),a=Yre();function o(s,u=i.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),n.ary(a.iteratee(u),1)):[]}t.uniqBy=o})(fM)),fM}var BM,YL;function Kre(){return YL||(YL=1,BM=$re().uniqBy),BM}var Jre=Kre();const $L=dl(Jre);function Zre(t,e,n){return e===!0?$L(t,n):typeof e=="function"?$L(t,e):t}var zM={exports:{}},GM={},VM={exports:{}},HM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KL;function Qre(){if(KL)return HM;KL=1;var t=Tg();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function s(p,g){var y=g(),b=i({inst:{value:y,getSnapshot:g}}),T=b[0].inst,S=b[1];return a(function(){T.value=y,T.getSnapshot=g,u(T)&&S({inst:T})},[p,y,g]),r(function(){return u(T)&&S({inst:T}),p(function(){u(T)&&S({inst:T})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function c(p,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:s;return HM.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,HM}var JL;function eae(){return JL||(JL=1,VM.exports=Qre()),VM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZL;function tae(){if(ZL)return GM;ZL=1;var t=Tg(),e=eae();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,s=t.useMemo,u=t.useDebugValue;return GM.useSyncExternalStoreWithSelector=function(c,d,p,g,y){var b=a(null);if(b.current===null){var T={hasValue:!1,value:null};b.current=T}else T=b.current;b=s(function(){function A(U){if(!R){if(R=!0,I=U,U=g(U),y!==void 0&&T.hasValue){var k=T.value;if(y(k,U))return N=k}return N=U}if(k=N,i(I,U))return k;var z=g(U);return y!==void 0&&y(k,z)?(I=U,k):(I=U,N=z)}var R=!1,I,N,D=p===void 0?null:p;return[function(){return A(d())},D===null?void 0:function(){return A(D())}]},[d,p,g,y]);var S=r(c,b[0],b[1]);return o(function(){T.hasValue=!0,T.value=S},[S]),u(S),S},GM}var QL;function nae(){return QL||(QL=1,zM.exports=tae()),zM.exports}var ZG=nae();const iae=dl(ZG);var $I=G.createContext(null),rae=t=>t,Xr=()=>{var t=G.useContext($I);return t?t.store.dispatch:rae},bS=()=>{},aae=()=>bS,oae=(t,e)=>t===e;function bn(t){var e=G.useContext($I);return ZG.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:aae,e?e.store.getState:bS,e?e.store.getState:bS,e?t:bS,oae)}function sae(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function lae(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function uae(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var eU=t=>Array.isArray(t)?t:[t];function cae(t){const e=Array.isArray(t[0])?t[0]:t;return uae(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function fae(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var dae=class{constructor(t){this.value=t}deref(){return this.value}},hae=typeof WeakRef<"u"?WeakRef:dae,pae=0,tU=1;function ax(){return{s:pae,v:void 0,o:null,p:null}}function QG(t,e={}){let n=ax();const{resultEqualityCheck:i}=e;let r,a=0;function o(){var p;let s=n;const{length:u}=arguments;for(let g=0,y=u;g<y;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let T=s.o;T===null&&(s.o=T=new WeakMap);const S=T.get(b);S===void 0?(s=ax(),T.set(b,s)):s=S}else{let T=s.p;T===null&&(s.p=T=new Map);const S=T.get(b);S===void 0?(s=ax(),T.set(b,s)):s=S}}const c=s;let d;if(s.s===tU)d=s.v;else if(d=t.apply(null,arguments),a++,i){const g=((p=r==null?void 0:r.deref)==null?void 0:p.call(r))??r;g!=null&&i(g,d)&&(d=g,a!==0&&a--),r=typeof d=="object"&&d!==null||typeof d=="function"?new hae(d):d}return c.s=tU,c.v=d,d}return o.clearCache=()=>{n=ax(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function mae(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let a=0,o=0,s,u={},c=r.pop();typeof c=="object"&&(u=c,c=r.pop()),sae(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...u},{memoize:p,memoizeOptions:g=[],argsMemoize:y=QG,argsMemoizeOptions:b=[]}=d,T=eU(g),S=eU(b),A=cae(r),R=p(function(){return a++,c.apply(null,arguments)},...T),I=y(function(){o++;const D=fae(A,arguments);return s=R.apply(null,D),s},...S);return Object.assign(I,{resultFunc:c,memoizedResultFunc:R,dependencies:A,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(i,{withTypes:()=>i}),i}var Xe=mae(QG),gae=Object.assign((t,e=Xe)=>{lae(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(a=>t[a]);return e(i,(...a)=>a.reduce((o,s,u)=>(o[n[u]]=s,o),{}))},{withTypes:()=>gae}),qM={},WM={},jM={},nU;function vae(){return nU||(nU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,a)=>{if(i!==r){const o=e(i),s=e(r);if(o===s&&o===0){if(i<r)return a==="desc"?1:-1;if(i>r)return a==="desc"?-1:1}return a==="desc"?s-o:o-s}return 0};t.compareValues=n})(jM)),jM}var XM={},YM={},iU;function eV(){return iU||(iU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(YM)),YM}var rU;function yae(){return rU||(rU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eV(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(i.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=r})(XM)),XM}var aU;function _ae(){return aU||(aU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vae(),n=yae(),i=WI();function r(a,o,s,u){if(a==null)return[];s=u?void 0:s,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(y=>String(y));const c=(y,b)=>{let T=y;for(let S=0;S<b.length&&T!=null;++S)T=T[b[S]];return T},d=(y,b)=>b==null||y==null?b:typeof y=="object"&&"key"in y?Object.hasOwn(b,y.key)?b[y.key]:c(b,y.path):typeof y=="function"?y(b):Array.isArray(y)?c(b,y):typeof b=="object"?b[y]:b,p=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:i.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(b=>d(b,y))})).slice().sort((y,b)=>{for(let T=0;T<p.length;T++){const S=e.compareValues(y.criteria[T],b.criteria[T],s[T]);if(S!==0)return S}return 0}).map(y=>y.original)}t.orderBy=r})(WM)),WM}var $M={},oU;function bae(){return oU||(oU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],a=Math.floor(i),o=(s,u)=>{for(let c=0;c<s.length;c++){const d=s[c];Array.isArray(d)&&u<a?o(d,u+1):r.push(d)}};return o(n,0),r}t.flatten=e})($M)),$M}var KM={},sU;function tV(){return sU||(sU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JG(),n=XI(),i=WG(),r=XG();function a(o,s,u){return i.isObject(u)&&(typeof s=="number"&&n.isArrayLike(u)&&e.isIndex(s)&&s<u.length||typeof s=="string"&&s in u)?r.isEqualsSameValueZero(u[s],o):!1}t.isIterateeCall=a})(KM)),KM}var lU;function xae(){return lU||(lU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ae(),n=bae(),i=tV();function r(a,...o){const s=o.length;return s>1&&i.isIterateeCall(a,o[0],o[1])?o=[]:s>2&&i.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,n.flatten(o),["asc"])}t.sortBy=r})(qM)),qM}var JM,uU;function Sae(){return uU||(uU=1,JM=xae().sortBy),JM}var Eae=Sae();const BE=dl(Eae);var nV=t=>t.legend.settings,Tae=t=>t.legend.size,Aae=t=>t.legend.payload;Xe([Aae,nV],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?BE(i,n):i});var ox=1;function Mae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=G.useState({height:0,left:0,top:0,width:0}),i=G.useCallback(r=>{if(r!=null){var a=r.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>ox||Math.abs(o.left-e.left)>ox||Math.abs(o.top-e.top)>ox||Math.abs(o.width-e.width)>ox)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function wa(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var wae=typeof Symbol=="function"&&Symbol.observable||"@@observable",cU=wae,ZM=()=>Math.random().toString(36).substring(7).split("").join("."),Cae={INIT:`@@redux/INIT${ZM()}`,REPLACE:`@@redux/REPLACE${ZM()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ZM()}`},qS=Cae;function KI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function iV(t,e,n){if(typeof t!="function")throw new Error(wa(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wa(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wa(1));return n(iV)(t,e)}let i=t,r=e,a=new Map,o=a,s=0,u=!1;function c(){o===a&&(o=new Map,a.forEach((S,A)=>{o.set(A,S)}))}function d(){if(u)throw new Error(wa(3));return r}function p(S){if(typeof S!="function")throw new Error(wa(4));if(u)throw new Error(wa(5));let A=!0;c();const R=s++;return o.set(R,S),function(){if(A){if(u)throw new Error(wa(6));A=!1,c(),o.delete(R),a=null}}}function g(S){if(!KI(S))throw new Error(wa(7));if(typeof S.type>"u")throw new Error(wa(8));if(typeof S.type!="string")throw new Error(wa(17));if(u)throw new Error(wa(9));try{u=!0,r=i(r,S)}finally{u=!1}return(a=o).forEach(R=>{R()}),S}function y(S){if(typeof S!="function")throw new Error(wa(10));i=S,g({type:qS.REPLACE})}function b(){const S=p;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(wa(11));function R(){const N=A;N.next&&N.next(d())}return R(),{unsubscribe:S(R)}},[cU](){return this}}}return g({type:qS.INIT}),{dispatch:g,subscribe:p,getState:d,replaceReducer:y,[cU]:b}}function Rae(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:qS.INIT})>"u")throw new Error(wa(12));if(typeof n(void 0,{type:qS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wa(13))})}function rV(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(n[o]=t[o])}const i=Object.keys(n);let r;try{Rae(n)}catch(a){r=a}return function(o={},s){if(r)throw r;let u=!1;const c={};for(let d=0;d<i.length;d++){const p=i[d],g=n[p],y=o[p],b=g(y,s);if(typeof b>"u")throw s&&s.type,new Error(wa(14));c[p]=b,u=u||b!==y}return u=u||i.length!==Object.keys(o).length,u?c:o}}function WS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function Iae(...t){return e=>(n,i)=>{const r=e(n,i);let a=()=>{throw new Error(wa(15))};const o={getState:r.getState,dispatch:(u,...c)=>a(u,...c)},s=t.map(u=>u(o));return a=WS(...s)(r.dispatch),{...r,dispatch:a}}}function aV(t){return KI(t)&&"type"in t&&typeof t.type=="string"}var oV=Symbol.for("immer-nothing"),fU=Symbol.for("immer-draftable"),bo=Symbol.for("immer-state");function Bl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ms=Object,ug=ms.getPrototypeOf,jS="constructor",zE="prototype",fR="configurable",XS="enumerable",xS="writable",cy="value",Qc=t=>!!t&&!!t[bo];function Kl(t){var e;return t?sV(t)||VE(t)||!!t[fU]||!!((e=t[jS])!=null&&e[fU])||HE(t)||qE(t):!1}var Pae=ms[zE][jS].toString(),dU=new WeakMap;function sV(t){if(!t||!JI(t))return!1;const e=ug(t);if(e===null||e===ms[zE])return!0;const n=ms.hasOwnProperty.call(e,jS)&&e[jS];if(n===Object)return!0;if(!Ym(n))return!1;let i=dU.get(n);return i===void 0&&(i=Function.toString.call(n),dU.set(n,i)),i===Pae}function GE(t,e,n=!0){Xy(t)===0?(n?Reflect.ownKeys(t):ms.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Xy(t){const e=t[bo];return e?e.type_:VE(t)?1:HE(t)?2:qE(t)?3:0}var hU=(t,e,n=Xy(t))=>n===2?t.has(e):ms[zE].hasOwnProperty.call(t,e),dR=(t,e,n=Xy(t))=>n===2?t.get(e):t[e],YS=(t,e,n,i=Xy(t))=>{i===2?t.set(e,n):i===3?t.add(n):t[e]=n};function Nae(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var VE=Array.isArray,HE=t=>t instanceof Map,qE=t=>t instanceof Set,JI=t=>typeof t=="object",Ym=t=>typeof t=="function",QM=t=>typeof t=="boolean";function Dae(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Fc=t=>t.copy_||t.base_,ZI=t=>t.modified_?t.copy_:t.base_;function hR(t,e){if(HE(t))return new Map(t);if(qE(t))return new Set(t);if(VE(t))return Array[zE].slice.call(t);const n=sV(t);if(e===!0||e==="class_only"&&!n){const i=ms.getOwnPropertyDescriptors(t);delete i[bo];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const o=r[a],s=i[o];s[xS]===!1&&(s[xS]=!0,s[fR]=!0),(s.get||s.set)&&(i[o]={[fR]:!0,[xS]:!0,[XS]:s[XS],[cy]:t[o]})}return ms.create(ug(t),i)}else{const i=ug(t);if(i!==null&&n)return{...t};const r=ms.create(i);return ms.assign(r,t)}}function QI(t,e=!1){return WE(t)||Qc(t)||!Kl(t)||(Xy(t)>1&&ms.defineProperties(t,{set:sx,add:sx,clear:sx,delete:sx}),ms.freeze(t),e&&GE(t,(n,i)=>{QI(i,!0)},!1)),t}function Oae(){Bl(2)}var sx={[cy]:Oae};function WE(t){return t===null||!JI(t)?!0:ms.isFrozen(t)}var $S="MapSet",pR="Patches",pU="ArrayMethods",lV={};function ep(t){const e=lV[t];return e||Bl(0,t),e}var mU=t=>!!lV[t],fy,uV=()=>fy,Lae=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:mU($S)?ep($S):void 0,arrayMethodsPlugin_:mU(pU)?ep(pU):void 0});function gU(t,e){e&&(t.patchPlugin_=ep(pR),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function mR(t){gR(t),t.drafts_.forEach(Uae),t.drafts_=null}function gR(t){t===fy&&(fy=t.parent_)}var vU=t=>fy=Lae(fy,t);function Uae(t){const e=t[bo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yU(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[bo].modified_&&(mR(e),Bl(4)),Kl(t)&&(t=_U(e,t));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(n[bo].base_,t,e)}else t=_U(e,n);return Fae(e,t,!0),mR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==oV?t:void 0}function _U(t,e){if(WE(e))return e;const n=e[bo];if(!n)return KS(e,t.handledSet_,t);if(!jE(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(t);dV(n,t)}return n.copy_}function Fae(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QI(e,n)}function cV(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var jE=(t,e)=>t.scope_===e,kae=[];function fV(t,e,n,i){const r=Fc(t),a=t.type_;if(i!==void 0&&dR(r,i,a)===e){YS(r,i,n,a);return}if(!t.draftLocations_){const s=t.draftLocations_=new Map;GE(r,(u,c)=>{if(Qc(c)){const d=s.get(c)||[];d.push(u),s.set(c,d)}})}const o=t.draftLocations_.get(e)??kae;for(const s of o)YS(r,s,n,a)}function Bae(t,e,n){t.callbacks_.push(function(r){var s;const a=e;if(!a||!jE(a,r))return;(s=r.mapSetPlugin_)==null||s.fixSetContents(a);const o=ZI(a);fV(t,a.draft_??a,o,n),dV(a,r)})}function dV(t,e){var i;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((i=t.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:r}=e;if(r){const a=r.getPath(t);a&&r.generatePatches_(t,a,e)}cV(t)}}function zae(t,e,n){const{scope_:i}=t;if(Qc(n)){const r=n[bo];jE(r,i)&&r.callbacks_.push(function(){SS(t);const o=ZI(r);fV(t,n,o,e)})}else Kl(n)&&t.callbacks_.push(function(){const a=Fc(t);t.type_===3?a.has(n)&&KS(n,i.handledSet_,i):dR(a,e,t.type_)===n&&i.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&KS(dR(t.copy_,e,t.type_),i.handledSet_,i)})}function KS(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Qc(t)||e.has(t)||!Kl(t)||WE(t)||(e.add(t),GE(t,(i,r)=>{if(Qc(r)){const a=r[bo];if(jE(a,n)){const o=ZI(a);YS(t,i,o,t.type_),cV(a)}}else Kl(r)&&KS(r,e,n)})),t}function Gae(t,e){const n=VE(t),i={type_:n?1:0,scope_:e?e.scope_:uV(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,a=JS;n&&(r=[i],a=dy);const{revoke:o,proxy:s}=Proxy.revocable(r,a);return i.draft_=s,i.revoke_=o,[s,i]}var JS={get(t,e){if(e===bo)return t;let n=t.scope_.arrayMethodsPlugin_;const i=t.type_===1&&typeof e=="string";if(i&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const r=Fc(t);if(!hU(r,e,t.type_))return Vae(t,r,e);const a=r[e];if(t.finalized_||!Kl(a)||i&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&Dae(e))return a;if(a===ew(t.base_,e)){SS(t);const o=t.type_===1?+e:e,s=yR(t.scope_,a,t,o);return t.copy_[o]=s}return a},has(t,e){return e in Fc(t)},ownKeys(t){return Reflect.ownKeys(Fc(t))},set(t,e,n){const i=hV(Fc(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=ew(Fc(t),e),a=r==null?void 0:r[bo];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Nae(n,r)&&(n!==void 0||hU(t.base_,e,t.type_)))return!0;SS(t),vR(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),zae(t,e,n)),!0},deleteProperty(t,e){return SS(t),ew(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),vR(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Fc(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{[xS]:!0,[fR]:t.type_!==1||e!=="length",[XS]:i[XS],[cy]:n[e]}},defineProperty(){Bl(11)},getPrototypeOf(t){return ug(t.base_)},setPrototypeOf(){Bl(12)}},dy={};for(let t in JS){let e=JS[t];dy[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}dy.deleteProperty=function(t,e){return dy.set.call(this,t,e,void 0)};dy.set=function(t,e,n){return JS.set.call(this,t[0],e,n,t[0])};function ew(t,e){const n=t[bo];return(n?Fc(n):t)[e]}function Vae(t,e,n){var r;const i=hV(e,n);return i?cy in i?i[cy]:(r=i.get)==null?void 0:r.call(t.draft_):void 0}function hV(t,e){if(!(e in t))return;let n=ug(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=ug(n)}}function vR(t){t.modified_||(t.modified_=!0,t.parent_&&vR(t.parent_))}function SS(t){t.copy_||(t.assigned_=new Map,t.copy_=hR(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Hae=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,r)=>{if(Ym(n)&&!Ym(i)){const o=i;i=n;const s=this;return function(c=o,...d){return s.produce(c,p=>i.call(this,p,...d))}}Ym(i)||Bl(6),r!==void 0&&!Ym(r)&&Bl(7);let a;if(Kl(n)){const o=vU(this),s=yR(o,n,void 0);let u=!0;try{a=i(s),u=!1}finally{u?mR(o):gR(o)}return gU(o,r),yU(a,o)}else if(!n||!JI(n)){if(a=i(n),a===void 0&&(a=n),a===oV&&(a=void 0),this.autoFreeze_&&QI(a,!0),r){const o=[],s=[];ep(pR).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:s}),r(o,s)}return a}else Bl(1,n)},this.produceWithPatches=(n,i)=>{if(Ym(n))return(s,...u)=>this.produceWithPatches(s,c=>n(c,...u));let r,a;return[this.produce(n,i,(s,u)=>{r=s,a=u}),r,a]},QM(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),QM(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),QM(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Kl(e)||Bl(8),Qc(e)&&(e=Xl(e));const n=vU(this),i=yR(n,e,void 0);return i[bo].isManual_=!0,gR(n),i}finishDraft(e,n){const i=e&&e[bo];(!i||!i.isManual_)&&Bl(9);const{scope_:r}=i;return gU(r,n),yU(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const a=n[i];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}i>-1&&(n=n.slice(i+1));const r=ep(pR).applyPatches_;return Qc(e)?r(e,n):this.produce(e,a=>r(a,n))}};function yR(t,e,n,i){const[r,a]=HE(e)?ep($S).proxyMap_(e,n):qE(e)?ep($S).proxySet_(e,n):Gae(e,n);return((n==null?void 0:n.scope_)??uV()).drafts_.push(r),a.callbacks_=(n==null?void 0:n.callbacks_)??[],a.key_=i,n&&i!==void 0?Bae(n,a,i):a.callbacks_.push(function(u){var d;(d=u.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:c}=u;a.modified_&&c&&c.generatePatches_(a,[],u)}),r}function Xl(t){return Qc(t)||Bl(10,t),pV(t)}function pV(t){if(!Kl(t)||WE(t))return t;const e=t[bo];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=hR(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=hR(t,!0);return GE(n,(r,a)=>{YS(n,r,pV(a))},i),e&&(e.finalized_=!1),n}var qae=new Hae,mV=qae.produce;function gV(t){return({dispatch:n,getState:i})=>r=>a=>typeof a=="function"?a(n,i,t):r(a)}var Wae=gV(),jae=gV,Xae=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?WS:WS.apply(null,arguments)};function ul(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(ys(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>aV(i)&&i.type===t,n}var vV=class z0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,z0.prototype)}static get[Symbol.species](){return z0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new z0(...e[0].concat(this)):new z0(...e.concat(this))}};function bU(t){return Kl(t)?mV(t,()=>{}):t}function lx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Yae(t){return typeof t=="boolean"}var $ae=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let o=new vV;return n&&(Yae(n)?o.push(Wae):o.push(jae(n.extraArgument))),o},yV="RTK_autoBatch",Bi=()=>t=>({payload:t,meta:{[yV]:!0}}),xU=t=>e=>{setTimeout(e,t)},_V=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,a=!1,o=!1;const s=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xU(10):t.type==="callback"?t.queueNotification:xU(t.timeout),c=()=>{o=!1,a&&(a=!1,s.forEach(d=>d()))};return Object.assign({},i,{subscribe(d){const p=()=>r&&d(),g=i.subscribe(p);return s.add(d),()=>{g(),s.delete(d)}},dispatch(d){var p;try{return r=!((p=d==null?void 0:d.meta)!=null&&p[yV]),a=!r,a&&(o||(o=!0,u(c))),i.dispatch(d)}finally{r=!0}}})},Kae=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new vV(t);return i&&r.push(_V(typeof i=="object"?i:void 0)),r};function Jae(t){const e=$ae(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let s;if(typeof n=="function")s=n;else if(KI(n))s=rV(n);else throw new Error(ys(1));let u;typeof i=="function"?u=i(e):u=e();let c=WS;r&&(c=Xae({trace:!1,...typeof r=="object"&&r}));const d=Iae(...u),p=Kae(d);let g=typeof o=="function"?o(p):p();const y=c(...g);return iV(s,a,y)}function bV(t){const e={},n=[];let i;const r={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(ys(28));if(s in e)throw new Error(ys(29));return e[s]=o,r},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),r},addMatcher(a,o){return n.push({matcher:a,reducer:o}),r},addDefaultCase(a){return i=a,r}};return t(r),[e,n,i]}function Zae(t){return typeof t=="function"}function Qae(t,e){let[n,i,r]=bV(e),a;if(Zae(t))a=()=>bU(t());else{const s=bU(t);a=()=>s}function o(s=a(),u){let c=[n[u.type],...i.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[r]),c.reduce((d,p)=>{if(p)if(Qc(d)){const y=p(d,u);return y===void 0?d:y}else{if(Kl(d))return mV(d,g=>p(g,u));{const g=p(d,u);if(g===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return d},s)}return o.getInitialState=a,o}var eoe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",toe=(t=21)=>{let e="",n=t;for(;n--;)e+=eoe[Math.random()*64|0];return e},noe=Symbol.for("rtk-slice-createasyncthunk");function ioe(t,e){return`${t}/${e}`}function roe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[noe];return function(r){const{name:a,reducerPath:o=a}=r;if(!a)throw new Error(ys(11));const s=(typeof r.reducers=="function"?r.reducers(ooe()):r.reducers)||{},u=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,D){const U=typeof N=="string"?N:N.type;if(!U)throw new Error(ys(12));if(U in c.sliceCaseReducersByType)throw new Error(ys(13));return c.sliceCaseReducersByType[U]=D,d},addMatcher(N,D){return c.sliceMatchers.push({matcher:N,reducer:D}),d},exposeAction(N,D){return c.actionCreators[N]=D,d},exposeCaseReducer(N,D){return c.sliceCaseReducersByName[N]=D,d}};u.forEach(N=>{const D=s[N],U={reducerName:N,type:ioe(a,N),createNotation:typeof r.reducers=="function"};loe(D)?coe(U,D,d,e):soe(U,D,d)});function p(){const[N={},D=[],U=void 0]=typeof r.extraReducers=="function"?bV(r.extraReducers):[r.extraReducers],k={...N,...c.sliceCaseReducersByType};return Qae(r.initialState,z=>{for(let L in k)z.addCase(L,k[L]);for(let L of c.sliceMatchers)z.addMatcher(L.matcher,L.reducer);for(let L of D)z.addMatcher(L.matcher,L.reducer);U&&z.addDefaultCase(U)})}const g=N=>N,y=new Map,b=new WeakMap;let T;function S(N,D){return T||(T=p()),T(N,D)}function A(){return T||(T=p()),T.getInitialState()}function R(N,D=!1){function U(z){let L=z[N];return typeof L>"u"&&D&&(L=lx(b,U,A)),L}function k(z=g){const L=lx(y,D,()=>new WeakMap);return lx(L,z,()=>{const F={};for(const[j,W]of Object.entries(r.selectors??{}))F[j]=aoe(W,z,()=>lx(b,z,A),D);return F})}return{reducerPath:N,getSelectors:k,get selectors(){return k(U)},selectSlice:U}}const I={name:a,reducer:S,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:A,...R(o),injectInto(N,{reducerPath:D,...U}={}){const k=D??o;return N.inject({reducerPath:k,reducer:S},U),{...I,...R(k,!0)}}};return I}}function aoe(t,e,n,i){function r(a,...o){let s=e(a);return typeof s>"u"&&i&&(s=n()),t(s,...o)}return r.unwrapped=t,r}var Zo=roe();function ooe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function soe({type:t,reducerName:e,createNotation:n},i,r){let a,o;if("reducer"in i){if(n&&!uoe(i))throw new Error(ys(17));a=i.reducer,o=i.prepare}else a=i;r.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?ul(t,o):ul(t))}function loe(t){return t._reducerDefinitionType==="asyncThunk"}function uoe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function coe({type:t,reducerName:e},n,i,r){if(!r)throw new Error(ys(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:u,settled:c,options:d}=n,p=r(t,a,d);i.exposeAction(e,p),o&&i.addCase(p.fulfilled,o),s&&i.addCase(p.pending,s),u&&i.addCase(p.rejected,u),c&&i.addMatcher(p.settled,c),i.exposeCaseReducer(e,{fulfilled:o||ux,pending:s||ux,rejected:u||ux,settled:c||ux})}function ux(){}var foe="task",xV="listener",SV="completed",eP="cancelled",doe=`task-${eP}`,hoe=`task-${SV}`,_R=`${xV}-${eP}`,poe=`${xV}-${SV}`,XE=class{constructor(t){HA(this,"name","TaskAbortError");HA(this,"message");this.code=t,this.message=`${foe} ${eP} (reason: ${t})`}},tP=(t,e)=>{if(typeof t!="function")throw new TypeError(ys(32))},ZS=()=>{},EV=(t,e=ZS)=>(t.catch(e),t),TV=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),jh=t=>{if(t.aborted)throw new XE(t.reason)};function AV(t,e){let n=ZS;return new Promise((i,r)=>{const a=()=>r(new XE(t.reason));if(t.aborted){a();return}n=TV(t,a),e.finally(()=>n()).then(i,r)}).finally(()=>{n=ZS})}var moe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof XE?"cancelled":"rejected",error:n}}finally{e==null||e()}},QS=t=>e=>EV(AV(t,e).then(n=>(jh(t),n))),MV=t=>{const e=QS(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:rg}=Object,SU={},YE="listenerMiddleware",goe=(t,e)=>{const n=i=>TV(t,()=>i.abort(t.reason));return(i,r)=>{tP(i);const a=new AbortController;n(a);const o=moe(async()=>{jh(t),jh(a.signal);const s=await i({pause:QS(a.signal),delay:MV(a.signal),signal:a.signal});return jh(a.signal),s},()=>a.abort(hoe));return r!=null&&r.autoJoin&&e.push(o.catch(ZS)),{result:QS(t)(o),cancel(){a.abort(doe)}}}},voe=(t,e)=>{const n=async(i,r)=>{jh(e);let a=()=>{};const s=[new Promise((u,c)=>{let d=t({predicate:i,effect:(p,g)=>{g.unsubscribe(),u([p,g.getState(),g.getOriginalState()])}});a=()=>{d(),c()}})];r!=null&&s.push(new Promise(u=>setTimeout(u,r,null)));try{const u=await AV(e,Promise.race(s));return jh(e),u}finally{a()}};return(i,r)=>EV(n(i,r))},wV=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:a}=t;if(e)r=ul(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(ys(21));return tP(a),{predicate:r,type:e,effect:a}},CV=rg(t=>{const{type:e,predicate:n,effect:i}=wV(t);return{id:toe(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ys(22))}}},{withTypes:()=>CV}),EU=(t,e)=>{const{type:n,effect:i,predicate:r}=wV(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===r)&&a.effect===i)},bR=t=>{t.pending.forEach(e=>{e.abort(_R)})},yoe=(t,e)=>()=>{for(const n of e.keys())bR(n);t.clear()},TU=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},RV=rg(ul(`${YE}/add`),{withTypes:()=>RV}),_oe=ul(`${YE}/removeAll`),IV=rg(ul(`${YE}/remove`),{withTypes:()=>IV}),boe=(...t)=>{console.error(`${YE}/error`,...t)},Yy=(t={})=>{const e=new Map,n=new Map,i=y=>{const b=n.get(y)??0;n.set(y,b+1)},r=y=>{const b=n.get(y)??1;b===1?n.delete(y):n.set(y,b-1)},{extra:a,onError:o=boe}=t;tP(o);const s=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),b=>{y.unsubscribe(),b!=null&&b.cancelActive&&bR(y)}),u=y=>{const b=EU(e,y)??CV(y);return s(b)};rg(u,{withTypes:()=>u});const c=y=>{const b=EU(e,y);return b&&(b.unsubscribe(),y.cancelActive&&bR(b)),!!b};rg(c,{withTypes:()=>c});const d=async(y,b,T,S)=>{const A=new AbortController,R=voe(u,A.signal),I=[];try{y.pending.add(A),i(y),await Promise.resolve(y.effect(b,rg({},T,{getOriginalState:S,condition:(N,D)=>R(N,D).then(Boolean),take:R,delay:MV(A.signal),pause:QS(A.signal),extra:a,signal:A.signal,fork:goe(A.signal,I),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((N,D,U)=>{N!==A&&(N.abort(_R),U.delete(N))})},cancel:()=>{A.abort(_R),y.pending.delete(A)},throwIfCancelled:()=>{jh(A.signal)}})))}catch(N){N instanceof XE||TU(o,N,{raisedBy:"effect"})}finally{await Promise.all(I),A.abort(poe),r(y),y.pending.delete(A)}},p=yoe(e,n);return{middleware:y=>b=>T=>{if(!aV(T))return b(T);if(RV.match(T))return u(T.payload);if(_oe.match(T)){p();return}if(IV.match(T))return c(T.payload);let S=y.getState();const A=()=>{if(S===SU)throw new Error(ys(23));return S};let R;try{if(R=b(T),e.size>0){const I=y.getState(),N=Array.from(e.values());for(const D of N){let U=!1;try{U=D.predicate(T,I,S)}catch(k){U=!1,TU(o,k,{raisedBy:"predicate"})}U&&d(D,T,y,A)}}}finally{S=SU}return R},startListening:u,stopListening:c,clearListeners:p}};function ys(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xoe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},PV=Zo({name:"chartLayout",initialState:xoe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Soe,setLayout:Eoe,setChartSize:Toe,setScale:Aoe}=PV.actions,Moe=PV.reducer;function NV(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Ur(t){return Number.isFinite(t)}function yd(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function AU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(n),!0).forEach(function(i){woe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function woe(t,e,n){return(e=Coe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Coe(t){var e=Roe(t,"string");return typeof e=="symbol"?e:e+""}function Roe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e,n){return xs(t)||xs(e)?n:Zc(e)?ly(t,e,n):typeof e=="function"?e(t):n}var Ioe=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:a,verticalAlign:o,layout:s}=e;if((s==="vertical"||s==="horizontal"&&o==="middle")&&a!=="center"&&nn(t[a]))return Jm(Jm({},t),{},{[a]:t[a]+(i||0)});if((s==="horizontal"||s==="vertical"&&a==="center")&&o!=="middle"&&nn(t[o]))return Jm(Jm({},t),{},{[o]:t[o]+(r||0)})}return t},dp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",MU=1e-4,Poe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-MU,a=Math.max(i[0],i[1])+MU,o=t(e[0]),s=t(e[n-1]);(o<r||o>a||s<r||s>a)&&t.domain([e[0],e[n-1]])}},Noe=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var u=t[s],c=u==null?void 0:u[r];if(c!=null){var d=c[1],p=c[0],g=Kc(d)?p:d;g>=0?(c[0]=a,c[1]=a+g,a=d):(c[0]=o,c[1]=o+g,o=d)}}}},Doe=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var a=0,o=0;o<n;++o){var s=t[o],u=s==null?void 0:s[r];if(u!=null){var c=Kc(u[1])?u[0]:u[1];c>=0?(u[0]=a,u[1]=a+c,a=u[1]):(u[0]=0,u[1]=0)}}}},Ooe={sign:Noe,expand:rre,none:Qh,silhouette:are,wiggle:ore,positive:Doe},Loe=(t,e,n)=>{var i,r=(i=Ooe[n])!==null&&i!==void 0?i:Qh,a=ire().keys(e).value((s,u)=>Number(dr(s,u,0))).order(uR).offset(r),o=a(t);return o.forEach((s,u)=>{s.forEach((c,d)=>{var p=dr(t[d],e[u],0);Array.isArray(p)&&p.length===2&&nn(p[0])&&nn(p[1])&&(c[0]=p[0],c[1]=p[1])})}),o},Uoe=t=>{var e=t.flat(2).filter(nn);return[Math.min(...e),Math.max(...e)]},Foe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],koe=(t,e,n)=>{if(t!=null)return Foe(Object.keys(t).reduce((i,r)=>{var a=t[r];if(!a)return i;var{stackedData:o}=a,s=o.reduce((u,c)=>{var d=NV(c,e,n),p=Uoe(d);return!Ur(p[0])||!Ur(p[1])?u:[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(s[0],i[0]),Math.max(s[1],i[1])]},[1/0,-1/0]))},wU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RU=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();return i}if(t&&e&&e.length>=2){for(var r=BE(e,d=>d.coordinate),a=1/0,o=1,s=r.length;o<s;o++){var u=r[o],c=r[o-1];a=Math.min(((u==null?void 0:u.coordinate)||0)-((c==null?void 0:c.coordinate)||0),a)}return a===1/0?0:a}return n?void 0:0};function IU(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:a}=t;return Jm(Jm({},e),{},{dataKey:n,payload:i,value:r,name:a})}function DV(t,e){if(t)return String(t);if(typeof e=="string")return e}var Boe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},zoe=(t,e)=>e==="centric"?t.angle:t.radius,cf=t=>t.layout.width,ff=t=>t.layout.height,Goe=t=>t.layout.scale,OV=t=>t.layout.margin,$E=Xe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),KE=Xe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),LV="data-recharts-item-index",UV="data-recharts-item-id",$y=60;function PU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(n),!0).forEach(function(i){Voe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Voe(t,e,n){return(e=Hoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hoe(t){var e=qoe(t,"string");return typeof e=="symbol"?e:e+""}function qoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Woe=t=>t.brush.height;function joe(t){var e=KE(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:$y;return n+r}return n},0)}function Xoe(t){var e=KE(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:$y;return n+r}return n},0)}function Yoe(t){var e=$E(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function $oe(t){var e=$E(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var da=Xe([cf,ff,OV,Woe,joe,Xoe,Yoe,$oe,nV,Tae],(t,e,n,i,r,a,o,s,u,c)=>{var d={left:(n.left||0)+r,right:(n.right||0)+a},p={top:(n.top||0)+o,bottom:(n.bottom||0)+s},g=cx(cx({},p),d),y=g.bottom;g.bottom+=i,g=Ioe(g,u,c);var b=t-g.left-g.right,T=e-g.top-g.bottom;return cx(cx({brushBottom:y},g),{},{width:Math.max(b,0),height:Math.max(T,0)})}),Koe=Xe(da,t=>({x:t.left,y:t.top,width:t.width,height:t.height}));Xe(cf,ff,(t,e)=>({x:0,y:0,width:t,height:e}));var Joe=G.createContext(null),Md=()=>G.useContext(Joe)!=null,JE=t=>t.brush,ZE=Xe([JE,da,OV],(t,e,n)=>({height:t.height,x:nn(t.x)?t.x:e.left,y:nn(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:nn(t.width)?t.width:e.width})),tw={},nw={},iw={},NU;function Zoe(){return NU||(NU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:a}={}){let o,s=null;const u=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{s!==null&&(n.apply(o,s),o=void 0,s=null)},p=()=>{c&&d(),T()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},i)},b=()=>{g!==null&&(clearTimeout(g),g=null)},T=()=>{b(),o=void 0,s=null},S=()=>{d()},A=function(...R){if(r!=null&&r.aborted)return;o=this,s=R;const I=g==null;y(),u&&I&&d()};return A.schedule=y,A.cancel=T,A.flush=S,r==null||r.addEventListener("abort",T,{once:!0}),A}t.debounce=e})(iw)),iw}var DU;function Qoe(){return DU||(DU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zoe();function n(i,r=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:s=!0,maxWait:u}=a,c=Array(2);o&&(c[0]="leading"),s&&(c[1]="trailing");let d,p=null;const g=e.debounce(function(...T){d=i.apply(this,T),p=null},r,{edges:c}),y=function(...T){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(d=i.apply(this,T),p=Date.now(),g.cancel(),g.schedule(),d):(g.apply(this,T),d)},b=()=>(g.flush(),d);return y.cancel=g.cancel,y.flush=b,y}t.debounce=n})(nw)),nw}var OU;function ese(){return OU||(OU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qoe();function n(i,r=0,a={}){const{leading:o=!0,trailing:s=!0}=a;return e.debounce(i,r,{leading:o,maxWait:r,trailing:s})}t.throttle=n})(tw)),tw}var rw,LU;function tse(){return LU||(LU=1,rw=ese().throttle),rw}var nse=tse();const ise=dl(nse);var UU=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>r[o++]))}},FV=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:a,maxHeight:o}=n,s=Jc(i)?t:Number(i),u=Jc(r)?e:Number(r);return a&&a>0&&(s?u=s/a:u&&(s=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:s,calculatedHeight:u}},rse={width:0,height:0,overflow:"visible"},ase={width:0,overflowX:"visible"},ose={height:0,overflowY:"visible"},sse={},lse=t=>{var{width:e,height:n}=t,i=Jc(e),r=Jc(n);return i&&r?rse:i?ase:r?ose:sse};function use(t){var{width:e,height:n,aspect:i}=t,r=e,a=n;return r===void 0&&a===void 0?(r="100%",a="100%"):r===void 0?r=i&&i>0?void 0:"100%":a===void 0&&(a=i&&i>0?void 0:"100%"),{width:r,height:a}}function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xR.apply(null,arguments)}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(i){cse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cse(t,e,n){return(e=fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fse(t){var e=dse(t,"string");return typeof e=="symbol"?e:e+""}function dse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kV=G.createContext({width:-1,height:-1});function hse(t){return yd(t.width)&&yd(t.height)}function BV(t){var{children:e,width:n,height:i}=t,r=G.useMemo(()=>({width:n,height:i}),[n,i]);return hse(r)?G.createElement(kV.Provider,{value:r},e):null}var nP=()=>G.useContext(kV),pse=G.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:a,minWidth:o=0,minHeight:s,maxHeight:u,children:c,debounce:d=0,id:p,className:g,onResize:y,style:b={}}=t,T=G.useRef(null),S=G.useRef();S.current=y,G.useImperativeHandle(e,()=>T.current);var[A,R]=G.useState({containerWidth:i.width,containerHeight:i.height}),I=G.useCallback((z,L)=>{R(F=>{var j=Math.round(z),W=Math.round(L);return F.containerWidth===j&&F.containerHeight===W?F:{containerWidth:j,containerHeight:W}})},[]);G.useEffect(()=>{if(T.current==null||typeof ResizeObserver>"u")return jy;var z=W=>{var X,{width:Q,height:ae}=W[0].contentRect;I(Q,ae),(X=S.current)===null||X===void 0||X.call(S,Q,ae)};d>0&&(z=ise(z,d,{trailing:!0,leading:!1}));var L=new ResizeObserver(z),{width:F,height:j}=T.current.getBoundingClientRect();return I(F,j),L.observe(T.current),()=>{L.disconnect()}},[I,d]);var{containerWidth:N,containerHeight:D}=A;UU(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:U,calculatedHeight:k}=FV(N,D,{width:r,height:a,aspect:n,maxHeight:u});return UU(U!=null&&U>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,k,r,a,o,s,n),G.createElement("div",{id:p?"".concat(p):void 0,className:Lr("recharts-responsive-container",g),style:kU(kU({},b),{},{width:r,height:a,minWidth:o,minHeight:s,maxHeight:u}),ref:T},G.createElement("div",{style:lse({width:r,height:a})},G.createElement(BV,{width:U,height:k},c)))}),mse=G.forwardRef((t,e)=>{var n=nP();if(yd(n.width)&&yd(n.height))return t.children;var{width:i,height:r}=use({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:o}=FV(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return nn(a)&&nn(o)?G.createElement(BV,{width:a,height:o},t.children):G.createElement(pse,xR({},t,{width:i,height:r,ref:e}))});function zV(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var QE=()=>{var t,e=Md(),n=bn(Koe),i=bn(ZE),r=(t=bn(JE))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},gse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},vse=()=>{var t;return(t=bn(da))!==null&&t!==void 0?t:gse},yse=()=>bn(cf),_se=()=>bn(ff),Ti=t=>t.layout.layoutType,eT=()=>bn(Ti),bse=()=>{var t=eT();return t!==void 0},tT=t=>{var e=Xr(),n=Md(),{width:i,height:r}=t,a=nP(),o=i,s=r;return a&&(o=a.width>0?a.width:i,s=a.height>0?a.height:r),G.useEffect(()=>{!n&&yd(o)&&yd(s)&&e(Toe({width:o,height:s}))},[e,n,o,s]),null},GV=Symbol.for("immer-nothing"),BU=Symbol.for("immer-draftable"),Ss=Symbol.for("immer-state");function zl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hy=Object.getPrototypeOf;function cg(t){return!!t&&!!t[Ss]}function tp(t){var e;return t?VV(t)||Array.isArray(t)||!!t[BU]||!!((e=t.constructor)!=null&&e[BU])||Ky(t)||iT(t):!1}var xse=Object.prototype.constructor.toString(),zU=new WeakMap;function VV(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=zU.get(n);return i===void 0&&(i=Function.toString.call(n),zU.set(n,i)),i===xse}function e1(t,e,n=!0){nT(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function nT(t){const e=t[Ss];return e?e.type_:Array.isArray(t)?1:Ky(t)?2:iT(t)?3:0}function SR(t,e){return nT(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function HV(t,e,n){const i=nT(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function Sse(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ky(t){return t instanceof Map}function iT(t){return t instanceof Set}function Dh(t){return t.copy_||t.base_}function ER(t,e){if(Ky(t))return new Map(t);if(iT(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VV(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Ss];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const o=r[a],s=i[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(i[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(hy(t),i)}else{const i=hy(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function iP(t,e=!1){return rT(t)||cg(t)||!tp(t)||(nT(t)>1&&Object.defineProperties(t,{set:fx,add:fx,clear:fx,delete:fx}),Object.freeze(t),e&&Object.values(t).forEach(n=>iP(n,!0))),t}function Ese(){zl(2)}var fx={value:Ese};function rT(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Tse={};function np(t){const e=Tse[t];return e||zl(0,t),e}var py;function qV(){return py}function Ase(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function GU(t,e){e&&(np("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function TR(t){AR(t),t.drafts_.forEach(Mse),t.drafts_=null}function AR(t){t===py&&(py=t.parent_)}function VU(t){return py=Ase(py,t)}function Mse(t){const e=t[Ss];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function HU(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ss].modified_&&(TR(e),zl(4)),tp(t)&&(t=t1(e,t),e.parent_||n1(e,t)),e.patches_&&np("Patches").generateReplacementPatches_(n[Ss].base_,t,e.patches_,e.inversePatches_)):t=t1(e,n,[]),TR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==GV?t:void 0}function t1(t,e,n){if(rT(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[Ss];if(!r)return e1(e,(a,o)=>qU(t,r,e,a,o,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return n1(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let o=a,s=!1;r.type_===3&&(o=new Set(a),a.clear(),s=!0),e1(o,(u,c)=>qU(t,r,a,u,c,n,s),i),n1(t,a,!1),n&&t.patches_&&np("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function qU(t,e,n,i,r,a,o){if(r==null||typeof r!="object"&&!o)return;const s=rT(r);if(!(s&&!o)){if(cg(r)){const u=a&&e&&e.type_!==3&&!SR(e.assigned_,i)?a.concat(i):void 0,c=t1(t,r,u);if(HV(n,i,c),cg(c))t.canAutoFreeze_=!1;else return}else o&&n.add(r);if(tp(r)&&!s){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&s)return;t1(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Ky(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&n1(t,r)}}}function n1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&iP(e,n)}function wse(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:qV(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=rP;n&&(r=[i],a=my);const{revoke:o,proxy:s}=Proxy.revocable(r,a);return i.draft_=s,i.revoke_=o,s}var rP={get(t,e){if(e===Ss)return t;const n=Dh(t);if(!SR(n,e))return Cse(t,n,e);const i=n[e];return t.finalized_||!tp(i)?i:i===aw(t.base_,e)?(ow(t),t.copy_[e]=wR(i,t)):i},has(t,e){return e in Dh(t)},ownKeys(t){return Reflect.ownKeys(Dh(t))},set(t,e,n){const i=WV(Dh(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=aw(Dh(t),e),a=r==null?void 0:r[Ss];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Sse(n,r)&&(n!==void 0||SR(t.base_,e)))return!0;ow(t),MR(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,ow(t),MR(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Dh(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){zl(11)},getPrototypeOf(t){return hy(t.base_)},setPrototypeOf(){zl(12)}},my={};e1(rP,(t,e)=>{my[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});my.deleteProperty=function(t,e){return my.set.call(this,t,e,void 0)};my.set=function(t,e,n){return rP.set.call(this,t[0],e,n,t[0])};function aw(t,e){const n=t[Ss];return(n?Dh(n):t)[e]}function Cse(t,e,n){var r;const i=WV(e,n);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(t.draft_):void 0}function WV(t,e){if(!(e in t))return;let n=hy(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=hy(n)}}function MR(t){t.modified_||(t.modified_=!0,t.parent_&&MR(t.parent_))}function ow(t){t.copy_||(t.copy_=ER(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Rse=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const o=this;return function(u=a,...c){return o.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&zl(6),i!==void 0&&typeof i!="function"&&zl(7);let r;if(tp(e)){const a=VU(this),o=wR(e,void 0);let s=!0;try{r=n(o),s=!1}finally{s?TR(a):AR(a)}return GU(a,i),HU(r,a)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===GV&&(r=void 0),this.autoFreeze_&&iP(r,!0),i){const a=[],o=[];np("Patches").generateReplacementPatches_(e,r,a,o),i(a,o)}return r}else zl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,u=>e(u,...s));let i,r;return[this.produce(e,n,(o,s)=>{i=o,r=s}),i,r]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){tp(t)||zl(8),cg(t)&&(t=Ise(t));const e=VU(this),n=wR(t,void 0);return n[Ss].isManual_=!0,AR(e),n}finishDraft(t,e){const n=t&&t[Ss];(!n||!n.isManual_)&&zl(9);const{scope_:i}=n;return GU(i,e),HU(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=np("Patches").applyPatches_;return cg(t)?i(t,e):this.produce(t,r=>i(r,e))}};function wR(t,e){const n=Ky(t)?np("MapSet").proxyMap_(t,e):iT(t)?np("MapSet").proxySet_(t,e):wse(t,e);return(e?e.scope_:qV()).drafts_.push(n),n}function Ise(t){return cg(t)||zl(10,t),jV(t)}function jV(t){if(!tp(t)||rT(t))return t;const e=t[Ss];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ER(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=ER(t,!0);return e1(n,(r,a)=>{HV(n,r,jV(a))},i),e&&(e.finalized_=!1),n}var Pse=new Rse;Pse.produce;var Nse={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},XV=Zo({name:"legend",initialState:Nse,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Bi()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Xl(t).payload.indexOf(n);r>-1&&(t.payload[r]=i)},prepare:Bi()},removeLegendPayload:{reducer(t,e){var n=Xl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Bi()}}}),{setLegendSize:ICe,setLegendSettings:PCe,addLegendPayload:Dse,replaceLegendPayload:Ose,removeLegendPayload:Lse}=XV.actions,Use=XV.reducer;function CR(){return CR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},CR.apply(null,arguments)}function WU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function sw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(n),!0).forEach(function(i){Fse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Fse(t,e,n){return(e=kse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kse(t){var e=Bse(t,"string");return typeof e=="symbol"?e:e+""}function Bse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zse(t){return Array.isArray(t)&&Zc(t[0])&&Zc(t[1])?t.join(" ~ "):t}var Gse=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:a,formatter:o,itemSorter:s,wrapperClassName:u,labelClassName:c,label:d,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(a&&a.length){var D={padding:0,margin:0},U=(s?BE(a,s):a).map((k,z)=>{if(k.type==="none")return null;var L=k.formatter||o||zse,{value:F,name:j}=k,W=F,X=j;if(L){var Q=L(F,j,k,z,a);if(Array.isArray(Q))[W,X]=Q;else if(Q!=null)W=Q;else return null}var ae=sw({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},i);return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:ae},Zc(X)?G.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Zc(X)?G.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,G.createElement("span",{className:"recharts-tooltip-item-value"},W),G.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:D},U)}return null},b=sw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),T=sw({margin:0},r),S=!xs(d),A=S?d:"",R=Lr("recharts-default-tooltip",u),I=Lr("recharts-tooltip-label",c);S&&p&&a!==void 0&&a!==null&&(A=p(d,a));var N=g?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",CR({className:R,style:b},N),G.createElement("p",{className:I,style:T},G.isValidElement(A)?A:"".concat(A)),y())},m0="recharts-tooltip-wrapper",Vse={visibility:"hidden"};function Hse(t){var{coordinate:e,translateX:n,translateY:i}=t;return Lr(m0,{["".concat(m0,"-right")]:nn(n)&&e&&nn(e.x)&&n>=e.x,["".concat(m0,"-left")]:nn(n)&&e&&nn(e.x)&&n<e.x,["".concat(m0,"-bottom")]:nn(i)&&e&&nn(e.y)&&i>=e.y,["".concat(m0,"-top")]:nn(i)&&e&&nn(e.y)&&i<e.y})}function jU(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:a,reverseDirection:o,tooltipDimension:s,viewBox:u,viewBoxDimension:c}=t;if(a&&nn(a[i]))return a[i];var d=n[i]-s-(r>0?r:0),p=n[i]+r;if(e[i])return o[i]?d:p;var g=u[i];if(g==null)return 0;if(o[i]){var y=d,b=g;return y<b?Math.max(p,g):Math.max(d,g)}if(c==null)return 0;var T=p+s,S=g+c;return T>S?Math.max(d,g):Math.max(p,g)}function qse(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Wse(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:a,tooltipBox:o,useTranslate3d:s,viewBox:u}=t,c,d,p;return o.height>0&&o.width>0&&n?(d=jU({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=jU({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),c=qse({translateX:d,translateY:p,useTranslate3d:s})):c=Vse,{cssProperties:c,cssClasses:Hse({translateX:d,translateY:p,coordinate:n})}}function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(i){RR(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RR(t,e,n){return(e=jse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jse(t){var e=Xse(t,"string");return typeof e=="symbol"?e:e+""}function Xse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Yse extends G.PureComponent{constructor(){super(...arguments),RR(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),RR(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:a,coordinate:o,hasPayload:s,isAnimationActive:u,offset:c,position:d,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:b,lastBoundingBox:T,innerRef:S,hasPortalFromProps:A}=this.props,{cssClasses:R,cssProperties:I}=Wse({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:p,tooltipBox:{height:T.height,width:T.width},useTranslate3d:g,viewBox:y}),N=A?{}:dx(dx({transition:u&&e?"transform ".concat(i,"ms ").concat(r):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),D=dx(dx({},N),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},b);return G.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:R,style:D,ref:S},a)}}var YV=()=>{var t;return(t=bn(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function IR(){return IR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},IR.apply(null,arguments)}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(i){$se(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $se(t,e,n){return(e=Kse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kse(t){var e=Jse(t,"string");return typeof e=="symbol"?e:e+""}function Jse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KU={curveBasisClosed:jie,curveBasisOpen:Xie,curveBasis:Wie,curveBumpX:Pie,curveBumpY:Nie,curveLinearClosed:Yie,curveLinear:FE,curveMonotoneX:$ie,curveMonotoneY:Kie,curveNatural:Jie,curveStep:Zie,curveStepAfter:ere,curveStepBefore:Qie},i1=t=>Ur(t.x)&&Ur(t.y),JU=t=>t.base!=null&&i1(t.base)&&i1(t),g0=t=>t.x,v0=t=>t.y,Zse=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Wy(t));return(n==="curveMonotone"||n==="curveBump")&&e?KU["".concat(n).concat(e==="vertical"?"Y":"X")]:KU[n]||FE},Qse=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:a=!1}=t,o=Zse(e,r),s=a?n.filter(i1):n,u;if(Array.isArray(i)){var c=n.map((y,b)=>$U($U({},y),{},{base:i[b]}));r==="vertical"?u=rx().y(v0).x1(g0).x0(y=>y.base.x):u=rx().x(g0).y1(v0).y0(y=>y.base.y);var d=u.defined(JU).curve(o),p=a?c.filter(JU):c;return d(p)}r==="vertical"&&nn(i)?u=rx().y(v0).x1(g0).x0(i):nn(i)?u=rx().x(g0).y1(v0).y0(i):u=CG().x(g0).y(v0);var g=u.defined(i1).curve(o);return g(s)},aP=t=>{var{className:e,points:n,path:i,pathRef:r}=t,a=eT();if((!n||!n.length)&&!i)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},s=n&&n.length?Qse(o):i;return G.createElement("path",IR({},lg(t),Are(t),{className:Lr("recharts-curve",e),d:s===null?void 0:s,ref:r}))},ele=["x","y","top","left","width","height","className"];function PR(){return PR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},PR.apply(null,arguments)}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tle(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(i){nle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nle(t,e,n){return(e=ile(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ile(t){var e=rle(t,"string");return typeof e=="symbol"?e:e+""}function rle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ale(t,e){if(t==null)return{};var n,i,r=ole(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ole(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var sle=(t,e,n,i,r,a)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(a,",").concat(e,"h").concat(n),lle=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:a=0,height:o=0,className:s}=t,u=ale(t,ele),c=tle({x:e,y:n,top:i,left:r,width:a,height:o},u);return!nn(e)||!nn(n)||!nn(a)||!nn(o)||!nn(i)||!nn(r)?null:G.createElement("path",PR({},ll(c),{className:Lr("recharts-cross",s),d:sle(e,n,a,o,i,r)}))};function ule(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function e2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(i){cle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cle(t,e,n){return(e=fle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fle(t){var e=dle(t,"string");return typeof e=="symbol"?e:e+""}function dle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hle=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),$V=(t,e,n)=>t.map(i=>"".concat(hle(i)," ").concat(e,"ms ").concat(n)).join(","),ple=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),gy=(t,e)=>Object.keys(e).reduce((n,i)=>e2(e2({},n),{},{[i]:t(i,e[i])}),{});function t2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(n),!0).forEach(function(i){mle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mle(t,e,n){return(e=gle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gle(t){var e=vle(t,"string");return typeof e=="symbol"?e:e+""}function vle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r1=(t,e,n)=>t+(e-t)*n,NR=t=>{var{from:e,to:n}=t;return e!==n},KV=(t,e,n)=>{var i=gy((r,a)=>{if(NR(a)){var[o,s]=t(a.from,a.to,a.velocity);return qr(qr({},a),{},{from:o,velocity:s})}return a},e);return n<1?gy((r,a)=>NR(a)&&i[r]!=null?qr(qr({},a),{},{velocity:r1(a.velocity,i[r].velocity,n),from:r1(a.from,i[r].from,n)}):a,e):KV(t,i,n-1)};function yle(t,e,n,i,r,a){var o,s=i.reduce((g,y)=>qr(qr({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),u=()=>gy((g,y)=>y.from,s),c=()=>!Object.values(s).filter(NR).length,d=null,p=g=>{o||(o=g);var y=g-o,b=y/n.dt;s=KV(n,s,b),r(qr(qr(qr({},t),e),u())),o=g,c()||(d=a.setTimeout(p))};return()=>(d=a.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}function _le(t,e,n,i,r,a,o){var s=null,u=r.reduce((p,g)=>{var y=t[g],b=e[g];return y==null||b==null?p:qr(qr({},p),{},{[g]:[y,b]})},{}),c,d=p=>{c||(c=p);var g=(p-c)/i,y=gy((T,S)=>r1(...S,n(g)),u);if(a(qr(qr(qr({},t),e),y)),g<1)s=o.setTimeout(d);else{var b=gy((T,S)=>r1(...S,n(1)),u);a(qr(qr(qr({},t),e),b))}};return()=>(s=o.setTimeout(d),()=>{var p;(p=s)===null||p===void 0||p()})}const ble=(t,e,n,i,r,a)=>{var o=ple(t,e);return n==null?()=>(r(qr(qr({},t),e)),()=>{}):n.isStepper===!0?yle(t,e,n,o,r,a):_le(t,e,n,i,o,r,a)};var a1=1e-4,JV=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],ZV=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),n2=(t,e)=>n=>{var i=JV(t,e);return ZV(i,n)},xle=(t,e)=>n=>{var i=JV(t,e),r=[...i.map((a,o)=>a*o).slice(1),0];return ZV(r,n)},Sle=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(a=>parseFloat(a));return[r[0],r[1],r[2],r[3]]},Ele=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=Sle(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},Tle=(t,e,n,i)=>{var r=n2(t,n),a=n2(e,i),o=xle(t,n),s=c=>c>1?1:c<0?0:c,u=c=>{for(var d=c>1?1:c,p=d,g=0;g<8;++g){var y=r(p)-d,b=o(p);if(Math.abs(y-d)<a1||b<a1)return a(p);p=s(p-y/b)}return a(p)};return u.isStepper=!1,u},i2=function(){return Tle(...Ele(...arguments))},Ale=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,a=(o,s,u)=>{var c=-(o-s)*n,d=u*i,p=u+(c-d)*r/1e3,g=u*r/1e3+o;return Math.abs(g-s)<a1&&Math.abs(p)<a1?[s,0]:[g,p]};return a.isStepper=!0,a.dt=r,a},Mle=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return i2(t);case"spring":return Ale();default:if(t.split("(")[0]==="cubic-bezier")return i2(t)}return typeof t=="function"?t:null};function wle(t){var e,n=()=>null,i=!1,r=null,a=o=>{if(!i){if(Array.isArray(o)){if(!o.length)return;var s=o,[u,...c]=s;if(typeof u=="number"){r=t.setTimeout(a.bind(null,c),u);return}a(u),r=t.setTimeout(a.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{i=!0},start:o=>{i=!1,r&&(r(),r=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class Cle{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,a=o=>{o-i>=n?e(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r!=null&&cancelAnimationFrame(r)}}}function Rle(){return wle(new Cle)}var Ile=G.createContext(Rle);function Ple(t,e){var n=G.useContext(Ile);return G.useMemo(()=>e??n(t),[t,e,n])}var Nle=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),oP={isSsr:Nle()},Dle={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},r2={t:0},lw={t:1};function sP(t){var e=Yu(t,Dle),{isActive:n,canBegin:i,duration:r,easing:a,begin:o,onAnimationEnd:s,onAnimationStart:u,children:c}=e,d=n==="auto"?!oP.isSsr:n,p=Ple(e.animationId,e.animationManager),[g,y]=G.useState(d?r2:lw),b=G.useRef(null);return G.useEffect(()=>{d||y(lw)},[d]),G.useEffect(()=>{if(!d||!i)return jy;var T=ble(r2,lw,Mle(a),r,y,p.getTimeoutController()),S=()=>{b.current=T()};return p.start([u,o,S,r,s]),()=>{p.stop(),b.current&&b.current(),s()}},[d,i,r,a,o,u,s,p]),c(g.t)}function lP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=G.useRef(uy(e)),i=G.useRef(t);return i.current!==t&&(n.current=uy(e),i.current=t),n.current}var Ole=["radius"],Lle=["radius"],a2,o2,s2,l2,u2,c2,f2,d2,h2,p2;function m2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function g2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m2(Object(n),!0).forEach(function(i){Ule(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ule(t,e,n){return(e=Fle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fle(t){var e=kle(t,"string");return typeof e=="symbol"?e:e+""}function kle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o1(){return o1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o1.apply(null,arguments)}function v2(t,e){if(t==null)return{};var n,i,r=Ble(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ble(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Ou(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var y2=(t,e,n,i,r)=>{var a=dd(n),o=dd(i),s=Math.min(Math.abs(a)/2,Math.abs(o)/2),u=o>=0?1:-1,c=a>=0?1:-1,d=o>=0&&a>=0||o<0&&a<0?1:0,p;if(s>0&&r instanceof Array){for(var g=[0,0,0,0],y=0,b=4;y<b;y++)g[y]=r[y]>s?s:r[y];p=cr(a2||(a2=Ou(["M",",",""])),t,e+u*g[0]),g[0]>0&&(p+=cr(o2||(o2=Ou(["A ",",",",0,0,",",",",",""])),g[0],g[0],d,t+c*g[0],e)),p+=cr(s2||(s2=Ou(["L ",",",""])),t+n-c*g[1],e),g[1]>0&&(p+=cr(l2||(l2=Ou(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],d,t+n,e+u*g[1])),p+=cr(u2||(u2=Ou(["L ",",",""])),t+n,e+i-u*g[2]),g[2]>0&&(p+=cr(c2||(c2=Ou(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],d,t+n-c*g[2],e+i)),p+=cr(f2||(f2=Ou(["L ",",",""])),t+c*g[3],e+i),g[3]>0&&(p+=cr(d2||(d2=Ou(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],d,t,e+i-u*g[3])),p+="Z"}else if(s>0&&r===+r&&r>0){var T=Math.min(s,r);p=cr(h2||(h2=Ou(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+u*T,T,T,d,t+c*T,e,t+n-c*T,e,T,T,d,t+n,e+u*T,t+n,e+i-u*T,T,T,d,t+n-c*T,e+i,t+c*T,e+i,T,T,d,t,e+i-u*T)}else p=cr(p2||(p2=Ou(["M ",","," h "," v "," h "," Z"])),t,e,n,i,-n);return p},_2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QV=t=>{var e=Yu(t,_2),n=G.useRef(null),[i,r]=G.useState(-1);G.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&r(ie)}catch{}},[]);var{x:a,y:o,width:s,height:u,radius:c,className:d}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:b,isUpdateAnimationActive:T}=e,S=G.useRef(s),A=G.useRef(u),R=G.useRef(a),I=G.useRef(o),N=G.useMemo(()=>({x:a,y:o,width:s,height:u,radius:c}),[a,o,s,u,c]),D=lP(N,"rectangle-");if(a!==+a||o!==+o||s!==+s||u!==+u||s===0||u===0)return null;var U=Lr("recharts-rectangle",d);if(!T){var k=ll(e),{radius:z}=k,L=v2(k,Ole);return G.createElement("path",o1({},L,{x:dd(a),y:dd(o),width:dd(s),height:dd(u),radius:typeof c=="number"?c:void 0,className:U,d:y2(a,o,s,u,c)}))}var F=S.current,j=A.current,W=R.current,X=I.current,Q="0px ".concat(i===-1?1:i,"px"),ae="".concat(i,"px 0px"),$=$V(["strokeDasharray"],g,typeof p=="string"?p:_2.animationEasing);return G.createElement(sP,{animationId:D,key:D,canBegin:i>0,duration:g,easing:p,isActive:T,begin:y},ie=>{var me=kl(F,s,ie),pe=kl(j,u,ie),de=kl(W,a,ie),H=kl(X,o,ie);n.current&&(S.current=me,A.current=pe,R.current=de,I.current=H);var ne;b?ie>0?ne={transition:$,strokeDasharray:ae}:ne={strokeDasharray:Q}:ne={strokeDasharray:ae};var le=ll(e),{radius:ge}=le,_e=v2(le,Lle);return G.createElement("path",o1({},_e,{radius:typeof c=="number"?c:void 0,className:U,d:y2(de,H,me,pe,c),ref:n,style:g2(g2({},ne),e.style)}))})};function b2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function x2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b2(Object(n),!0).forEach(function(i){zle(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zle(t,e,n){return(e=Gle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gle(t){var e=Vle(t,"string");return typeof e=="symbol"?e:e+""}function Vle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s1=Math.PI/180,Hle=t=>t*180/Math.PI,Dr=(t,e,n,i)=>({x:t+Math.cos(-s1*i)*n,y:e+Math.sin(-s1*i)*n}),e8=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},qle=(t,e)=>{var{x:n,y:i}=t,{x:r,y:a}=e;return Math.sqrt((n-r)**2+(i-a)**2)},Wle=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:a}=e,o=qle({x:n,y:i},{x:r,y:a});if(o<=0)return{radius:o,angle:0};var s=(n-r)/o,u=Math.acos(s);return i>a&&(u=2*Math.PI-u),{radius:o,angle:Hle(u),angleInRadian:u}},jle=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),a=Math.min(i,r);return{startAngle:e-a*360,endAngle:n-a*360}},Xle=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),a=Math.floor(i/360),o=Math.min(r,a);return t+o*360},Yle=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:a}=Wle({x:n,y:i},e),{innerRadius:o,outerRadius:s}=e;if(r<o||r>s||r===0)return null;var{startAngle:u,endAngle:c}=jle(e),d=a,p;if(u<=c){for(;d>c;)d-=360;for(;d<u;)d+=360;p=d>=u&&d<=c}else{for(;d>u;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=u}return p?x2(x2({},e),{},{radius:r,angle:Xle(d,e)}):null};function t8(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:a}=t,o=Dr(e,n,i,r),s=Dr(e,n,i,a);return{points:[o,s],cx:e,cy:n,radius:i,startAngle:r,endAngle:a}}var S2,E2,T2,A2,M2,w2,C2;function DR(){return DR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},DR.apply(null,arguments)}function Bh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $le=(t,e)=>{var n=$o(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},hx=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:a,isExternal:o,cornerRadius:s,cornerIsExternal:u}=t,c=s*(o?1:-1)+i,d=Math.asin(s/c)/s1,p=u?r:r+a*d,g=Dr(e,n,c,p),y=Dr(e,n,i,p),b=u?r-a*d:r,T=Dr(e,n,c*Math.cos(d*s1),b);return{center:g,circleTangency:y,lineTangency:T,theta:d}},n8=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:a,endAngle:o}=t,s=$le(a,o),u=a+s,c=Dr(e,n,r,a),d=Dr(e,n,r,u),p=cr(S2||(S2=Bh(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,r,r,+(Math.abs(s)>180),+(a>u),d.x,d.y);if(i>0){var g=Dr(e,n,i,a),y=Dr(e,n,i,u);p+=cr(E2||(E2=Bh(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,i,i,+(Math.abs(s)>180),+(a<=u),g.x,g.y)}else p+=cr(T2||(T2=Bh(["L ",","," Z"])),e,n);return p},Kle=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:s,startAngle:u,endAngle:c}=t,d=$o(c-u),{circleTangency:p,lineTangency:g,theta:y}=hx({cx:e,cy:n,radius:r,angle:u,sign:d,cornerRadius:a,cornerIsExternal:s}),{circleTangency:b,lineTangency:T,theta:S}=hx({cx:e,cy:n,radius:r,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:s}),A=s?Math.abs(u-c):Math.abs(u-c)-y-S;if(A<0)return o?cr(A2||(A2=Bh(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):n8({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:u,endAngle:c});var R=cr(M2||(M2=Bh(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(d<0),p.x,p.y,r,r,+(A>180),+(d<0),b.x,b.y,a,a,+(d<0),T.x,T.y);if(i>0){var{circleTangency:I,lineTangency:N,theta:D}=hx({cx:e,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),{circleTangency:U,lineTangency:k,theta:z}=hx({cx:e,cy:n,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),L=s?Math.abs(u-c):Math.abs(u-c)-D-z;if(L<0&&a===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+=cr(w2||(w2=Bh(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(d<0),U.x,U.y,i,i,+(L>180),+(d>0),I.x,I.y,a,a,+(d<0),N.x,N.y)}else R+=cr(C2||(C2=Bh(["L",",","Z"])),e,n);return R},Jle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},i8=t=>{var e=Yu(t,Jle),{cx:n,cy:i,innerRadius:r,outerRadius:a,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:d,className:p}=e;if(a<r||c===d)return null;var g=Lr("recharts-sector",p),y=a-r,b=vs(o,y,0,!0),T;return b>0&&Math.abs(c-d)<360?T=Kle({cx:n,cy:i,innerRadius:r,outerRadius:a,cornerRadius:Math.min(b,y/2),forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:d}):T=n8({cx:n,cy:i,innerRadius:r,outerRadius:a,startAngle:c,endAngle:d}),G.createElement("path",DR({},ll(e),{className:g,d:T}))};function Zle(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(HG(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:a,outerRadius:o,angle:s}=e,u=Dr(i,r,a,s),c=Dr(i,r,o,s);return[{x:u.x,y:u.y},{x:c.x,y:c.y}]}return t8(e)}}var uw={},cw={},fw={},R2;function Qle(){return R2||(R2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eV();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(fw)),fw}var I2;function eue(){return I2||(I2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qle();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(cw)),cw}var P2;function tue(){return P2||(P2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tV(),n=eue();function i(r,a,o){o&&typeof o!="number"&&e.isIterateeCall(r,a,o)&&(a=o=void 0),r=n.toFinite(r),a===void 0?(a=r,r=0):a=n.toFinite(a),o=o===void 0?r<a?1:-1:n.toFinite(o);const s=Math.max(Math.ceil((a-r)/(o||1)),0),u=new Array(s);for(let c=0;c<s;c++)u[c]=r,r+=o;return u}t.range=i})(uw)),uw}var dw,N2;function nue(){return N2||(N2=1,dw=tue().range),dw}var iue=nue();const r8=dl(iue);function gd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rue(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uP(t){let e,n,i;t.length!==2?(e=gd,n=(s,u)=>gd(t(s),u),i=(s,u)=>t(s)-u):(e=t===gd||t===rue?t:aue,n=t,i=t);function r(s,u,c=0,d=s.length){if(c<d){if(e(u,u)!==0)return d;do{const p=c+d>>>1;n(s[p],u)<0?c=p+1:d=p}while(c<d)}return c}function a(s,u,c=0,d=s.length){if(c<d){if(e(u,u)!==0)return d;do{const p=c+d>>>1;n(s[p],u)<=0?c=p+1:d=p}while(c<d)}return c}function o(s,u,c=0,d=s.length){const p=r(s,u,c,d-1);return p>c&&i(s[p-1],u)>-i(s[p],u)?p-1:p}return{left:r,center:o,right:a}}function aue(){return 0}function a8(t){return t===null?NaN:+t}function*oue(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const sue=uP(gd),Jy=sue.right;uP(a8).center;class D2 extends Map{constructor(e,n=cue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(O2(this,e))}has(e){return super.has(O2(this,e))}set(e,n){return super.set(lue(this,e),n)}delete(e){return super.delete(uue(this,e))}}function O2({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function lue({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function uue({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function cue(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fue(t=gd){if(t===gd)return o8;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function o8(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const due=Math.sqrt(50),hue=Math.sqrt(10),pue=Math.sqrt(2);function l1(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=due?10:a>=hue?5:a>=pue?2:1;let s,u,c;return r<0?(c=Math.pow(10,-r)/o,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,r)*o,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=n&&n<2?l1(t,e,n*2):[s,u,c]}function OR(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,a,o]=i?l1(e,t,n):l1(t,e,n);if(!(a>=r))return[];const s=a-r+1,u=new Array(s);if(i)if(o<0)for(let c=0;c<s;++c)u[c]=(a-c)/-o;else for(let c=0;c<s;++c)u[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)u[c]=(r+c)/-o;else for(let c=0;c<s;++c)u[c]=(r+c)*o;return u}function LR(t,e,n){return e=+e,t=+t,n=+n,l1(t,e,n)[2]}function UR(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?LR(e,t,n):LR(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function L2(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function U2(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function s8(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?o8:fue(r);i>n;){if(i-n>600){const u=i-n+1,c=e-n+1,d=Math.log(u),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(u-p)/u)*(c-u/2<0?-1:1),y=Math.max(n,Math.floor(e-c*p/u+g)),b=Math.min(i,Math.floor(e+(u-c)*p/u+g));s8(t,e,y,b,r)}const a=t[e];let o=n,s=i;for(y0(t,n,e),r(t[i],a)>0&&y0(t,n,i);o<s;){for(y0(t,o,s),++o,--s;r(t[o],a)<0;)++o;for(;r(t[s],a)>0;)--s}r(t[n],a)===0?y0(t,n,s):(++s,y0(t,s,i)),s<=e&&(n=s+1),e<=s&&(i=s-1)}return t}function y0(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function mue(t,e,n){if(t=Float64Array.from(oue(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return U2(t);if(e>=1)return L2(t);var i,r=(i-1)*e,a=Math.floor(r),o=L2(s8(t,a).subarray(0,a+1)),s=U2(t.subarray(a+1));return o+(s-o)*(r-a)}}function gue(t,e,n=a8){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(r-a)}}function vue(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);++i<r;)a[i]=t+i*n;return a}function pl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function df(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const FR=Symbol("implicit");function cP(){var t=new D2,e=[],n=[],i=FR;function r(a){let o=t.get(a);if(o===void 0){if(i!==FR)return i;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new D2;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return cP(e,n).unknown(i)},pl.apply(r,arguments),r}function fP(){var t=cP().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,a,o,s=!1,u=0,c=0,d=.5;delete t.unknown;function p(){var g=e().length,y=r<i,b=y?r:i,T=y?i:r;a=(T-b)/Math.max(1,g-u+c*2),s&&(a=Math.floor(a)),b+=(T-b-a*(g-u))*d,o=a*(1-u),s&&(b=Math.round(b),o=Math.round(o));var S=vue(g).map(function(A){return b+a*A});return n(y?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,p()):[i,r]},t.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,s=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(g){return arguments.length?(s=!!g,p()):s},t.padding=function(g){return arguments.length?(u=Math.min(1,c=+g),p()):u},t.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),p()):u},t.paddingOuter=function(g){return arguments.length?(c=+g,p()):c},t.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),p()):d},t.copy=function(){return fP(e(),[i,r]).round(s).paddingInner(u).paddingOuter(c).align(d)},pl.apply(p(),arguments)}function l8(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return l8(e())},t}function yue(){return l8(fP.apply(null,arguments).paddingInner(1))}function dP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function u8(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Zy(){}var vy=.7,u1=1/vy,ag="\\s*([+-]?\\d+)\\s*",yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_ue=/^#([0-9a-f]{3,8})$/,bue=new RegExp(`^rgb\\(${ag},${ag},${ag}\\)$`),xue=new RegExp(`^rgb\\(${Gu},${Gu},${Gu}\\)$`),Sue=new RegExp(`^rgba\\(${ag},${ag},${ag},${yy}\\)$`),Eue=new RegExp(`^rgba\\(${Gu},${Gu},${Gu},${yy}\\)$`),Tue=new RegExp(`^hsl\\(${yy},${Gu},${Gu}\\)$`),Aue=new RegExp(`^hsla\\(${yy},${Gu},${Gu},${yy}\\)$`),F2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dP(Zy,_y,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:k2,formatHex:k2,formatHex8:Mue,formatHsl:wue,formatRgb:B2,toString:B2});function k2(){return this.rgb().formatHex()}function Mue(){return this.rgb().formatHex8()}function wue(){return c8(this).formatHsl()}function B2(){return this.rgb().formatRgb()}function _y(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_ue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?z2(e):n===3?new Ko(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?px(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?px(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bue.exec(t))?new Ko(e[1],e[2],e[3],1):(e=xue.exec(t))?new Ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Sue.exec(t))?px(e[1],e[2],e[3],e[4]):(e=Eue.exec(t))?px(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tue.exec(t))?H2(e[1],e[2]/100,e[3]/100,1):(e=Aue.exec(t))?H2(e[1],e[2]/100,e[3]/100,e[4]):F2.hasOwnProperty(t)?z2(F2[t]):t==="transparent"?new Ko(NaN,NaN,NaN,0):null}function z2(t){return new Ko(t>>16&255,t>>8&255,t&255,1)}function px(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ko(t,e,n,i)}function Cue(t){return t instanceof Zy||(t=_y(t)),t?(t=t.rgb(),new Ko(t.r,t.g,t.b,t.opacity)):new Ko}function kR(t,e,n,i){return arguments.length===1?Cue(t):new Ko(t,e,n,i??1)}function Ko(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}dP(Ko,kR,u8(Zy,{brighter(t){return t=t==null?u1:Math.pow(u1,t),new Ko(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vy:Math.pow(vy,t),new Ko(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ko(Xh(this.r),Xh(this.g),Xh(this.b),c1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G2,formatHex:G2,formatHex8:Rue,formatRgb:V2,toString:V2}));function G2(){return`#${zh(this.r)}${zh(this.g)}${zh(this.b)}`}function Rue(){return`#${zh(this.r)}${zh(this.g)}${zh(this.b)}${zh((isNaN(this.opacity)?1:this.opacity)*255)}`}function V2(){const t=c1(this.opacity);return`${t===1?"rgb(":"rgba("}${Xh(this.r)}, ${Xh(this.g)}, ${Xh(this.b)}${t===1?")":`, ${t})`}`}function c1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zh(t){return t=Xh(t),(t<16?"0":"")+t.toString(16)}function H2(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Gl(t,e,n,i)}function c8(t){if(t instanceof Gl)return new Gl(t.h,t.s,t.l,t.opacity);if(t instanceof Zy||(t=_y(t)),!t)return new Gl;if(t instanceof Gl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(e===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-e)/s+2:o=(e-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new Gl(o,s,u,t.opacity)}function Iue(t,e,n,i){return arguments.length===1?c8(t):new Gl(t,e,n,i??1)}function Gl(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}dP(Gl,Iue,u8(Zy,{brighter(t){return t=t==null?u1:Math.pow(u1,t),new Gl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vy:Math.pow(vy,t),new Gl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ko(hw(t>=240?t-240:t+120,r,i),hw(t,r,i),hw(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Gl(q2(this.h),mx(this.s),mx(this.l),c1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=c1(this.opacity);return`${t===1?"hsl(":"hsla("}${q2(this.h)}, ${mx(this.s)*100}%, ${mx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function q2(t){return t=(t||0)%360,t<0?t+360:t}function mx(t){return Math.max(0,Math.min(1,t||0))}function hw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hP=t=>()=>t;function Pue(t,e){return function(n){return t+n*e}}function Nue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Due(t){return(t=+t)==1?f8:function(e,n){return n-e?Nue(e,n,t):hP(isNaN(e)?n:e)}}function f8(t,e){var n=e-t;return n?Pue(t,n):hP(isNaN(t)?e:t)}const W2=(function t(e){var n=Due(e);function i(r,a){var o=n((r=kR(r)).r,(a=kR(a)).r),s=n(r.g,a.g),u=n(r.b,a.b),c=f8(r.opacity,a.opacity);return function(d){return r.r=o(d),r.g=s(d),r.b=u(d),r.opacity=c(d),r+""}}return i.gamma=t,i})(1);function Oue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Lue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Uue(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=Ng(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function Fue(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function f1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function kue(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Ng(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var BR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pw=new RegExp(BR.source,"g");function Bue(t){return function(){return t}}function zue(t){return function(e){return t(e)+""}}function Gue(t,e){var n=BR.lastIndex=pw.lastIndex=0,i,r,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(i=BR.exec(t))&&(r=pw.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:f1(i,r)})),n=pw.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?zue(u[0].x):Bue(e):(e=u.length,function(c){for(var d=0,p;d<e;++d)s[(p=u[d]).i]=p.x(c);return s.join("")})}function Ng(t,e){var n=typeof e,i;return e==null||n==="boolean"?hP(e):(n==="number"?f1:n==="string"?(i=_y(e))?(e=i,W2):Gue:e instanceof _y?W2:e instanceof Date?Fue:Lue(e)?Oue:Array.isArray(e)?Uue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kue:f1)(t,e)}function pP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Vue(t,e){e===void 0&&(e=t,t=Ng);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}function Hue(t){return function(){return t}}function d1(t){return+t}var j2=[0,1];function go(t){return t}function zR(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hue(isNaN(e)?NaN:.5)}function que(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Wue(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=zR(r,i),a=n(o,a)):(i=zR(i,r),a=n(a,o)),function(s){return a(i(s))}}function jue(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=zR(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var u=Jy(t,s,1,i)-1;return a[u](r[u](s))}}function Qy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aT(){var t=j2,e=j2,n=Ng,i,r,a,o=go,s,u,c;function d(){var g=Math.min(t.length,e.length);return o!==go&&(o=que(t[0],t[g-1])),s=g>2?jue:Wue,u=c=null,p}function p(g){return g==null||isNaN(g=+g)?a:(u||(u=s(t.map(i),e,n)))(i(o(g)))}return p.invert=function(g){return o(r((c||(c=s(e,t.map(i),f1)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,d1),d()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=pP,d()},p.clamp=function(g){return arguments.length?(o=g?!0:go,d()):o!==go},p.interpolate=function(g){return arguments.length?(n=g,d()):n},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return i=g,r=y,d()}}function mP(){return aT()(go,go)}function Xue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function h1(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function fg(t){return t=h1(Math.abs(t)),t?t[1]:NaN}function Yue(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(n.substring(r-=s,r+s)),!((u+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function $ue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Kue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function by(t){if(!(e=Kue.exec(t)))throw new Error("invalid format: "+t);var e;return new gP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}by.prototype=gP.prototype;function gP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jue(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var p1;function Zue(t,e){var n=h1(t,e);if(!n)return p1=void 0,t.toPrecision(e);var i=n[0],r=n[1],a=r-(p1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+h1(t,Math.max(0,e+a-1))[0]}function X2(t,e){var n=h1(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Y2={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>X2(t*100,e),r:X2,s:Zue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $2(t){return t}var K2=Array.prototype.map,J2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Que(t){var e=t.grouping===void 0||t.thousands===void 0?$2:Yue(K2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$2:$ue(K2.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(p,g){p=by(p);var y=p.fill,b=p.align,T=p.sign,S=p.symbol,A=p.zero,R=p.width,I=p.comma,N=p.precision,D=p.trim,U=p.type;U==="n"?(I=!0,U="g"):Y2[U]||(N===void 0&&(N=12),D=!0,U="g"),(A||y==="0"&&b==="=")&&(A=!0,y="0",b="=");var k=(g&&g.prefix!==void 0?g.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():""),z=(S==="$"?i:/[%p]/.test(U)?o:"")+(g&&g.suffix!==void 0?g.suffix:""),L=Y2[U],F=/[defgprs%]/.test(U);N=N===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function j(W){var X=k,Q=z,ae,$,ie;if(U==="c")Q=L(W)+Q,W="";else{W=+W;var me=W<0||1/W<0;if(W=isNaN(W)?u:L(Math.abs(W),N),D&&(W=Jue(W)),me&&+W==0&&T!=="+"&&(me=!1),X=(me?T==="("?T:s:T==="-"||T==="("?"":T)+X,Q=(U==="s"&&!isNaN(W)&&p1!==void 0?J2[8+p1/3]:"")+Q+(me&&T==="("?")":""),F){for(ae=-1,$=W.length;++ae<$;)if(ie=W.charCodeAt(ae),48>ie||ie>57){Q=(ie===46?r+W.slice(ae+1):W.slice(ae))+Q,W=W.slice(0,ae);break}}}I&&!A&&(W=e(W,1/0));var pe=X.length+W.length+Q.length,de=pe<R?new Array(R-pe+1).join(y):"";switch(I&&A&&(W=e(de+W,de.length?R-Q.length:1/0),de=""),b){case"<":W=X+W+Q+de;break;case"=":W=X+de+W+Q;break;case"^":W=de.slice(0,pe=de.length>>1)+X+W+Q+de.slice(pe);break;default:W=de+X+W+Q;break}return a(W)}return j.toString=function(){return p+""},j}function d(p,g){var y=Math.max(-8,Math.min(8,Math.floor(fg(g)/3)))*3,b=Math.pow(10,-y),T=c((p=by(p),p.type="f",p),{suffix:J2[8+y/3]});return function(S){return T(b*S)}}return{format:c,formatPrefix:d}}var gx,vP,d8;ece({thousands:",",grouping:[3],currency:["$",""]});function ece(t){return gx=Que(t),vP=gx.format,d8=gx.formatPrefix,gx}function tce(t){return Math.max(0,-fg(Math.abs(t)))}function nce(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fg(e)/3)))*3-fg(Math.abs(t)))}function ice(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fg(e)-fg(t))+1}function h8(t,e,n,i){var r=UR(t,e,n),a;switch(i=by(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=nce(r,o))&&(i.precision=a),d8(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=ice(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=tce(r))&&(i.precision=a-(i.type==="%")*2);break}}return vP(i)}function wd(t){var e=t.domain;return t.ticks=function(n){var i=e();return OR(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return h8(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,o=i[r],s=i[a],u,c,d=10;for(s<o&&(c=o,o=s,s=c,c=r,r=a,a=c);d-- >0;){if(c=LR(o,s,n),c===u)return i[r]=o,i[a]=s,e(i);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;u=c}return t},t}function p8(){var t=mP();return t.copy=function(){return Qy(t,p8())},pl.apply(t,arguments),wd(t)}function m8(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,d1),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return m8(t).unknown(e)},t=arguments.length?Array.from(t,d1):[0,1],wd(n)}function g8(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),t[n]=e.floor(r),t[i]=e.ceil(a),t}function Z2(t){return Math.log(t)}function Q2(t){return Math.exp(t)}function rce(t){return-Math.log(-t)}function ace(t){return-Math.exp(-t)}function oce(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sce(t){return t===10?oce:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lce(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function eF(t){return(e,n)=>-t(-e,n)}function yP(t){const e=t(Z2,Q2),n=e.domain;let i=10,r,a;function o(){return r=lce(i),a=sce(i),n()[0]<0?(r=eF(r),a=eF(a),t(rce,ace)):t(Z2,Q2),e}return e.base=function(s){return arguments.length?(i=+s,o()):i},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const u=n();let c=u[0],d=u[u.length-1];const p=d<c;p&&([c,d]=[d,c]);let g=r(c),y=r(d),b,T;const S=s==null?10:+s;let A=[];if(!(i%1)&&y-g<S){if(g=Math.floor(g),y=Math.ceil(y),c>0){for(;g<=y;++g)for(b=1;b<i;++b)if(T=g<0?b/a(-g):b*a(g),!(T<c)){if(T>d)break;A.push(T)}}else for(;g<=y;++g)for(b=i-1;b>=1;--b)if(T=g>0?b/a(-g):b*a(g),!(T<c)){if(T>d)break;A.push(T)}A.length*2<S&&(A=OR(c,d,S))}else A=OR(g,y,Math.min(y-g,S)).map(a);return p?A.reverse():A},e.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=by(u)).precision==null&&(u.trim=!0),u=vP(u)),s===1/0)return u;const c=Math.max(1,i*s/e.ticks().length);return d=>{let p=d/a(Math.round(r(d)));return p*i<i-.5&&(p*=i),p<=c?u(d):""}},e.nice=()=>n(g8(n(),{floor:s=>a(Math.floor(r(s))),ceil:s=>a(Math.ceil(r(s)))})),e}function v8(){const t=yP(aT()).domain([1,10]);return t.copy=()=>Qy(t,v8()).base(t.base()),pl.apply(t,arguments),t}function tF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function nF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function _P(t){var e=1,n=t(tF(e),nF(e));return n.constant=function(i){return arguments.length?t(tF(e=+i),nF(e)):e},wd(n)}function y8(){var t=_P(aT());return t.copy=function(){return Qy(t,y8()).constant(t.constant())},pl.apply(t,arguments)}function iF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function uce(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cce(t){return t<0?-t*t:t*t}function bP(t){var e=t(go,go),n=1;function i(){return n===1?t(go,go):n===.5?t(uce,cce):t(iF(n),iF(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},wd(e)}function xP(){var t=bP(aT());return t.copy=function(){return Qy(t,xP()).exponent(t.exponent())},pl.apply(t,arguments),t}function fce(){return xP.apply(null,arguments).exponent(.5)}function rF(t){return Math.sign(t)*t*t}function dce(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function _8(){var t=mP(),e=[0,1],n=!1,i;function r(a){var o=dce(t(a));return isNaN(o)?i:n?Math.round(o):o}return r.invert=function(a){return t.invert(rF(a))},r.domain=function(a){return arguments.length?(t.domain(a),r):t.domain()},r.range=function(a){return arguments.length?(t.range((e=Array.from(a,d1)).map(rF)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(n=!!a,r):n},r.clamp=function(a){return arguments.length?(t.clamp(a),r):t.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return _8(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},pl.apply(r,arguments),wd(r)}function b8(){var t=[],e=[],n=[],i;function r(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=gue(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?i:e[Jy(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(gd),r()},a.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return b8().domain(t).range(e).unknown(i)},pl.apply(a,arguments)}function x8(){var t=0,e=1,n=1,i=[.5],r=[0,1],a;function o(u){return u!=null&&u<=u?r[Jy(i,u,0,n)]:a}function s(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*e-(u-n)*t)/(n+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},o.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,s()):r.slice()},o.invertExtent=function(u){var c=r.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return i.slice()},o.copy=function(){return x8().domain([t,e]).range(r).unknown(a)},pl.apply(wd(o),arguments)}function S8(){var t=[.5],e=[0,1],n,i=1;function r(a){return a!=null&&a<=a?e[Jy(t,a,0,i)]:n}return r.domain=function(a){return arguments.length?(t=Array.from(a),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return S8().domain(t).range(e).unknown(n)},pl.apply(r,arguments)}const mw=new Date,gw=new Date;function Yr(t,e,n,i){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(t(a=new Date(+a)),a),r.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),r.round=a=>{const o=r(a),s=r.ceil(a);return a-o<s-a?o:s},r.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,s)=>{const u=[];if(a=r.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let c;do u.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return u},r.filter=a=>Yr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(r.count=(a,o)=>(mw.setTime(+a),gw.setTime(+o),t(mw),t(gw),Math.floor(n(mw,gw))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const m1=Yr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);m1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Yr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):m1);m1.range;const Vc=1e3,rl=Vc*60,Hc=rl*60,ef=Hc*24,SP=ef*7,aF=ef*30,vw=ef*365,Gh=Yr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Vc)},(t,e)=>(e-t)/Vc,t=>t.getUTCSeconds());Gh.range;const EP=Yr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vc)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getMinutes());EP.range;const TP=Yr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getUTCMinutes());TP.range;const AP=Yr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vc-t.getMinutes()*rl)},(t,e)=>{t.setTime(+t+e*Hc)},(t,e)=>(e-t)/Hc,t=>t.getHours());AP.range;const MP=Yr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hc)},(t,e)=>(e-t)/Hc,t=>t.getUTCHours());MP.range;const e_=Yr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rl)/ef,t=>t.getDate()-1);e_.range;const oT=Yr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ef,t=>t.getUTCDate()-1);oT.range;const E8=Yr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ef,t=>Math.floor(t/ef));E8.range;function hp(t){return Yr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*rl)/SP)}const sT=hp(0),g1=hp(1),hce=hp(2),pce=hp(3),dg=hp(4),mce=hp(5),gce=hp(6);sT.range;g1.range;hce.range;pce.range;dg.range;mce.range;gce.range;function pp(t){return Yr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/SP)}const lT=pp(0),v1=pp(1),vce=pp(2),yce=pp(3),hg=pp(4),_ce=pp(5),bce=pp(6);lT.range;v1.range;vce.range;yce.range;hg.range;_ce.range;bce.range;const wP=Yr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wP.range;const CP=Yr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CP.range;const tf=Yr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());tf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});tf.range;const nf=Yr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());nf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});nf.range;function T8(t,e,n,i,r,a){const o=[[Gh,1,Vc],[Gh,5,5*Vc],[Gh,15,15*Vc],[Gh,30,30*Vc],[a,1,rl],[a,5,5*rl],[a,15,15*rl],[a,30,30*rl],[r,1,Hc],[r,3,3*Hc],[r,6,6*Hc],[r,12,12*Hc],[i,1,ef],[i,2,2*ef],[n,1,SP],[e,1,aF],[e,3,3*aF],[t,1,vw]];function s(c,d,p){const g=d<c;g&&([c,d]=[d,c]);const y=p&&typeof p.range=="function"?p:u(c,d,p),b=y?y.range(c,+d+1):[];return g?b.reverse():b}function u(c,d,p){const g=Math.abs(d-c)/p,y=uP(([,,S])=>S).right(o,g);if(y===o.length)return t.every(UR(c/vw,d/vw,p));if(y===0)return m1.every(Math.max(UR(c,d,p),1));const[b,T]=o[g/o[y-1][2]<o[y][2]/g?y-1:y];return b.every(T)}return[s,u]}const[xce,Sce]=T8(nf,CP,lT,E8,MP,TP),[Ece,Tce]=T8(tf,wP,sT,e_,AP,EP);function yw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _w(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ace(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,c=b0(r),d=x0(r),p=b0(a),g=x0(a),y=b0(o),b=x0(o),T=b0(s),S=x0(s),A=b0(u),R=x0(u),I={a:ie,A:me,b:pe,B:de,c:null,d:fF,e:fF,f:Yce,g:rfe,G:ofe,H:Wce,I:jce,j:Xce,L:A8,m:$ce,M:Kce,p:H,q:ne,Q:pF,s:mF,S:Jce,u:Zce,U:Qce,V:efe,w:tfe,W:nfe,x:null,X:null,y:ife,Y:afe,Z:sfe,"%":hF},N={a:le,A:ge,b:_e,B:re,c:null,d:dF,e:dF,f:ffe,g:xfe,G:Efe,H:lfe,I:ufe,j:cfe,L:w8,m:dfe,M:hfe,p:oe,q:Ee,Q:pF,s:mF,S:pfe,u:mfe,U:gfe,V:vfe,w:yfe,W:_fe,x:null,X:null,y:bfe,Y:Sfe,Z:Tfe,"%":hF},D={a:F,A:j,b:W,B:X,c:Q,d:uF,e:uF,f:Gce,g:lF,G:sF,H:cF,I:cF,j:Fce,L:zce,m:Uce,M:kce,p:L,q:Lce,Q:Hce,s:qce,S:Bce,u:Ice,U:Pce,V:Nce,w:Rce,W:Dce,x:ae,X:$,y:lF,Y:sF,Z:Oce,"%":Vce};I.x=U(n,I),I.X=U(i,I),I.c=U(e,I),N.x=U(n,N),N.X=U(i,N),N.c=U(e,N);function U(ce,Ce){return function(Ue){var ve=[],ft=-1,Se=0,Oe=ce.length,Me,Je,Z;for(Ue instanceof Date||(Ue=new Date(+Ue));++ft<Oe;)ce.charCodeAt(ft)===37&&(ve.push(ce.slice(Se,ft)),(Je=oF[Me=ce.charAt(++ft)])!=null?Me=ce.charAt(++ft):Je=Me==="e"?" ":"0",(Z=Ce[Me])&&(Me=Z(Ue,Je)),ve.push(Me),Se=ft+1);return ve.push(ce.slice(Se,ft)),ve.join("")}}function k(ce,Ce){return function(Ue){var ve=_0(1900,void 0,1),ft=z(ve,ce,Ue+="",0),Se,Oe;if(ft!=Ue.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(Ce&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Se=_w(_0(ve.y,0,1)),Oe=Se.getUTCDay(),Se=Oe>4||Oe===0?v1.ceil(Se):v1(Se),Se=oT.offset(Se,(ve.V-1)*7),ve.y=Se.getUTCFullYear(),ve.m=Se.getUTCMonth(),ve.d=Se.getUTCDate()+(ve.w+6)%7):(Se=yw(_0(ve.y,0,1)),Oe=Se.getDay(),Se=Oe>4||Oe===0?g1.ceil(Se):g1(Se),Se=e_.offset(Se,(ve.V-1)*7),ve.y=Se.getFullYear(),ve.m=Se.getMonth(),ve.d=Se.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),Oe="Z"in ve?_w(_0(ve.y,0,1)).getUTCDay():yw(_0(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(Oe+5)%7:ve.w+ve.U*7-(Oe+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,_w(ve)):yw(ve)}}function z(ce,Ce,Ue,ve){for(var ft=0,Se=Ce.length,Oe=Ue.length,Me,Je;ft<Se;){if(ve>=Oe)return-1;if(Me=Ce.charCodeAt(ft++),Me===37){if(Me=Ce.charAt(ft++),Je=D[Me in oF?Ce.charAt(ft++):Me],!Je||(ve=Je(ce,Ue,ve))<0)return-1}else if(Me!=Ue.charCodeAt(ve++))return-1}return ve}function L(ce,Ce,Ue){var ve=c.exec(Ce.slice(Ue));return ve?(ce.p=d.get(ve[0].toLowerCase()),Ue+ve[0].length):-1}function F(ce,Ce,Ue){var ve=y.exec(Ce.slice(Ue));return ve?(ce.w=b.get(ve[0].toLowerCase()),Ue+ve[0].length):-1}function j(ce,Ce,Ue){var ve=p.exec(Ce.slice(Ue));return ve?(ce.w=g.get(ve[0].toLowerCase()),Ue+ve[0].length):-1}function W(ce,Ce,Ue){var ve=A.exec(Ce.slice(Ue));return ve?(ce.m=R.get(ve[0].toLowerCase()),Ue+ve[0].length):-1}function X(ce,Ce,Ue){var ve=T.exec(Ce.slice(Ue));return ve?(ce.m=S.get(ve[0].toLowerCase()),Ue+ve[0].length):-1}function Q(ce,Ce,Ue){return z(ce,e,Ce,Ue)}function ae(ce,Ce,Ue){return z(ce,n,Ce,Ue)}function $(ce,Ce,Ue){return z(ce,i,Ce,Ue)}function ie(ce){return o[ce.getDay()]}function me(ce){return a[ce.getDay()]}function pe(ce){return u[ce.getMonth()]}function de(ce){return s[ce.getMonth()]}function H(ce){return r[+(ce.getHours()>=12)]}function ne(ce){return 1+~~(ce.getMonth()/3)}function le(ce){return o[ce.getUTCDay()]}function ge(ce){return a[ce.getUTCDay()]}function _e(ce){return u[ce.getUTCMonth()]}function re(ce){return s[ce.getUTCMonth()]}function oe(ce){return r[+(ce.getUTCHours()>=12)]}function Ee(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Ce=U(ce+="",I);return Ce.toString=function(){return ce},Ce},parse:function(ce){var Ce=k(ce+="",!1);return Ce.toString=function(){return ce},Ce},utcFormat:function(ce){var Ce=U(ce+="",N);return Ce.toString=function(){return ce},Ce},utcParse:function(ce){var Ce=k(ce+="",!0);return Ce.toString=function(){return ce},Ce}}}var oF={"-":"",_:" ",0:"0"},ha=/^\s*\d+/,Mce=/^%/,wce=/[\\^$*+?|[\]().{}]/g;function Yn(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Cce(t){return t.replace(wce,"\\$&")}function b0(t){return new RegExp("^(?:"+t.map(Cce).join("|")+")","i")}function x0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Rce(t,e,n){var i=ha.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ice(t,e,n){var i=ha.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Pce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Nce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Dce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function sF(t,e,n){var i=ha.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function lF(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Oce(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Lce(t,e,n){var i=ha.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Uce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function uF(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Fce(t,e,n){var i=ha.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function cF(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function kce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Bce(t,e,n){var i=ha.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function zce(t,e,n){var i=ha.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Gce(t,e,n){var i=ha.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Vce(t,e,n){var i=Mce.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Hce(t,e,n){var i=ha.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function qce(t,e,n){var i=ha.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function fF(t,e){return Yn(t.getDate(),e,2)}function Wce(t,e){return Yn(t.getHours(),e,2)}function jce(t,e){return Yn(t.getHours()%12||12,e,2)}function Xce(t,e){return Yn(1+e_.count(tf(t),t),e,3)}function A8(t,e){return Yn(t.getMilliseconds(),e,3)}function Yce(t,e){return A8(t,e)+"000"}function $ce(t,e){return Yn(t.getMonth()+1,e,2)}function Kce(t,e){return Yn(t.getMinutes(),e,2)}function Jce(t,e){return Yn(t.getSeconds(),e,2)}function Zce(t){var e=t.getDay();return e===0?7:e}function Qce(t,e){return Yn(sT.count(tf(t)-1,t),e,2)}function M8(t){var e=t.getDay();return e>=4||e===0?dg(t):dg.ceil(t)}function efe(t,e){return t=M8(t),Yn(dg.count(tf(t),t)+(tf(t).getDay()===4),e,2)}function tfe(t){return t.getDay()}function nfe(t,e){return Yn(g1.count(tf(t)-1,t),e,2)}function ife(t,e){return Yn(t.getFullYear()%100,e,2)}function rfe(t,e){return t=M8(t),Yn(t.getFullYear()%100,e,2)}function afe(t,e){return Yn(t.getFullYear()%1e4,e,4)}function ofe(t,e){var n=t.getDay();return t=n>=4||n===0?dg(t):dg.ceil(t),Yn(t.getFullYear()%1e4,e,4)}function sfe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yn(e/60|0,"0",2)+Yn(e%60,"0",2)}function dF(t,e){return Yn(t.getUTCDate(),e,2)}function lfe(t,e){return Yn(t.getUTCHours(),e,2)}function ufe(t,e){return Yn(t.getUTCHours()%12||12,e,2)}function cfe(t,e){return Yn(1+oT.count(nf(t),t),e,3)}function w8(t,e){return Yn(t.getUTCMilliseconds(),e,3)}function ffe(t,e){return w8(t,e)+"000"}function dfe(t,e){return Yn(t.getUTCMonth()+1,e,2)}function hfe(t,e){return Yn(t.getUTCMinutes(),e,2)}function pfe(t,e){return Yn(t.getUTCSeconds(),e,2)}function mfe(t){var e=t.getUTCDay();return e===0?7:e}function gfe(t,e){return Yn(lT.count(nf(t)-1,t),e,2)}function C8(t){var e=t.getUTCDay();return e>=4||e===0?hg(t):hg.ceil(t)}function vfe(t,e){return t=C8(t),Yn(hg.count(nf(t),t)+(nf(t).getUTCDay()===4),e,2)}function yfe(t){return t.getUTCDay()}function _fe(t,e){return Yn(v1.count(nf(t)-1,t),e,2)}function bfe(t,e){return Yn(t.getUTCFullYear()%100,e,2)}function xfe(t,e){return t=C8(t),Yn(t.getUTCFullYear()%100,e,2)}function Sfe(t,e){return Yn(t.getUTCFullYear()%1e4,e,4)}function Efe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?hg(t):hg.ceil(t),Yn(t.getUTCFullYear()%1e4,e,4)}function Tfe(){return"+0000"}function hF(){return"%"}function pF(t){return+t}function mF(t){return Math.floor(+t/1e3)}var _m,R8,I8;Afe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Afe(t){return _m=Ace(t),R8=_m.format,_m.parse,I8=_m.utcFormat,_m.utcParse,_m}function Mfe(t){return new Date(t)}function wfe(t){return t instanceof Date?+t:+new Date(+t)}function RP(t,e,n,i,r,a,o,s,u,c){var d=mP(),p=d.invert,g=d.domain,y=c(".%L"),b=c(":%S"),T=c("%I:%M"),S=c("%I %p"),A=c("%a %d"),R=c("%b %d"),I=c("%B"),N=c("%Y");function D(U){return(u(U)<U?y:s(U)<U?b:o(U)<U?T:a(U)<U?S:i(U)<U?r(U)<U?A:R:n(U)<U?I:N)(U)}return d.invert=function(U){return new Date(p(U))},d.domain=function(U){return arguments.length?g(Array.from(U,wfe)):g().map(Mfe)},d.ticks=function(U){var k=g();return t(k[0],k[k.length-1],U??10)},d.tickFormat=function(U,k){return k==null?D:c(k)},d.nice=function(U){var k=g();return(!U||typeof U.range!="function")&&(U=e(k[0],k[k.length-1],U??10)),U?g(g8(k,U)):d},d.copy=function(){return Qy(d,RP(t,e,n,i,r,a,o,s,u,c))},d}function Cfe(){return pl.apply(RP(Ece,Tce,tf,wP,sT,e_,AP,EP,Gh,R8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rfe(){return pl.apply(RP(xce,Sce,nf,CP,lT,oT,MP,TP,Gh,I8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uT(){var t=0,e=1,n,i,r,a,o=go,s=!1,u;function c(p){return p==null||isNaN(p=+p)?u:o(r===0?.5:(p=(a(p)-n)*r,s?Math.max(0,Math.min(1,p)):p))}c.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),i=a(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(p){return arguments.length?(s=!!p,c):s},c.interpolator=function(p){return arguments.length?(o=p,c):o};function d(p){return function(g){var y,b;return arguments.length?([y,b]=g,o=p(y,b),c):[o(0),o(1)]}}return c.range=d(Ng),c.rangeRound=d(pP),c.unknown=function(p){return arguments.length?(u=p,c):u},function(p){return a=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),c}}function Cd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function P8(){var t=wd(uT()(go));return t.copy=function(){return Cd(t,P8())},df.apply(t,arguments)}function N8(){var t=yP(uT()).domain([1,10]);return t.copy=function(){return Cd(t,N8()).base(t.base())},df.apply(t,arguments)}function D8(){var t=_P(uT());return t.copy=function(){return Cd(t,D8()).constant(t.constant())},df.apply(t,arguments)}function IP(){var t=bP(uT());return t.copy=function(){return Cd(t,IP()).exponent(t.exponent())},df.apply(t,arguments)}function Ife(){return IP.apply(null,arguments).exponent(.5)}function O8(){var t=[],e=go;function n(i){if(i!=null&&!isNaN(i=+i))return e((Jy(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(gd),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,a)=>mue(t,a/i))},n.copy=function(){return O8(e).domain(t)},df.apply(n,arguments)}function cT(){var t=0,e=.5,n=1,i=1,r,a,o,s,u,c=go,d,p=!1,g;function y(T){return isNaN(T=+T)?g:(T=.5+((T=+d(T))-a)*(i*T<i*a?s:u),c(p?Math.max(0,Math.min(1,T)):T))}y.domain=function(T){return arguments.length?([t,e,n]=T,r=d(t=+t),a=d(e=+e),o=d(n=+n),s=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,y):[t,e,n]},y.clamp=function(T){return arguments.length?(p=!!T,y):p},y.interpolator=function(T){return arguments.length?(c=T,y):c};function b(T){return function(S){var A,R,I;return arguments.length?([A,R,I]=S,c=Vue(T,[A,R,I]),y):[c(0),c(.5),c(1)]}}return y.range=b(Ng),y.rangeRound=b(pP),y.unknown=function(T){return arguments.length?(g=T,y):g},function(T){return d=T,r=T(t),a=T(e),o=T(n),s=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,y}}function L8(){var t=wd(cT()(go));return t.copy=function(){return Cd(t,L8())},df.apply(t,arguments)}function U8(){var t=yP(cT()).domain([.1,1,10]);return t.copy=function(){return Cd(t,U8()).base(t.base())},df.apply(t,arguments)}function F8(){var t=_P(cT());return t.copy=function(){return Cd(t,F8()).constant(t.constant())},df.apply(t,arguments)}function PP(){var t=bP(cT());return t.copy=function(){return Cd(t,PP()).exponent(t.exponent())},df.apply(t,arguments)}function Pfe(){return PP.apply(null,arguments).exponent(.5)}const G0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fP,scaleDiverging:L8,scaleDivergingLog:U8,scaleDivergingPow:PP,scaleDivergingSqrt:Pfe,scaleDivergingSymlog:F8,scaleIdentity:m8,scaleImplicit:FR,scaleLinear:p8,scaleLog:v8,scaleOrdinal:cP,scalePoint:yue,scalePow:xP,scaleQuantile:b8,scaleQuantize:x8,scaleRadial:_8,scaleSequential:P8,scaleSequentialLog:N8,scaleSequentialPow:IP,scaleSequentialQuantile:O8,scaleSequentialSqrt:Ife,scaleSequentialSymlog:D8,scaleSqrt:fce,scaleSymlog:y8,scaleThreshold:S8,scaleTime:Cfe,scaleUtc:Rfe,tickFormat:h8},Symbol.toStringTag,{value:"Module"}));var Rd=t=>t.chartData,NP=Xe([Rd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),k8=(t,e,n,i)=>i?NP(t):Rd(t);function _d(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ur(e)&&Ur(n))return!0}return!1}function gF(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function B8(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,a;if(Ur(n))r=n;else if(typeof n=="function")return;if(Ur(i))a=i;else if(typeof i=="function")return;var o=[r,a];if(_d(o))return o}}function Nfe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(_d(i))return gF(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,a]=t,o,s;if(r==="auto")e!=null&&(o=Math.min(...e));else if(nn(r))o=r;else if(typeof r=="function")try{e!=null&&(o=r(e==null?void 0:e[0]))}catch{}else if(typeof r=="string"&&wU.test(r)){var u=wU.exec(r);if(u==null||u[1]==null||e==null)o=void 0;else{var c=+u[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(a==="auto")e!=null&&(s=Math.max(...e));else if(nn(a))s=a;else if(typeof a=="function")try{e!=null&&(s=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&CU.test(a)){var d=CU.exec(a);if(d==null||d[1]==null||e==null)s=void 0;else{var p=+d[1];s=e[1]+p}}else s=e==null?void 0:e[1];var g=[o,s];if(_d(g))return e==null?g:gF(g,e,n)}}}var Dg=1e9,Dfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OP,zi=!0,cl="[DecimalError] ",Yh=cl+"Invalid argument: ",DP=cl+"Exponent out of range: ",Og=Math.floor,Oh=Math.pow,Ofe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ps,la=1e7,Ni=7,z8=9007199254740991,y1=Og(z8/Ni),Ut={};Ut.absoluteValue=Ut.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ut.comparedTo=Ut.cmp=function(t){var e,n,i,r,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(i=a.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};Ut.decimalPlaces=Ut.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ni;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ut.dividedBy=Ut.div=function(t){return Wc(this,new this.constructor(t))};Ut.dividedToIntegerBy=Ut.idiv=function(t){var e=this,n=e.constructor;return pi(Wc(e,new n(t),0,1),n.precision)};Ut.equals=Ut.eq=function(t){return!this.cmp(t)};Ut.exponent=function(){return Or(this)};Ut.greaterThan=Ut.gt=function(t){return this.cmp(t)>0};Ut.greaterThanOrEqualTo=Ut.gte=function(t){return this.cmp(t)>=0};Ut.isInteger=Ut.isint=function(){return this.e>this.d.length-2};Ut.isNegative=Ut.isneg=function(){return this.s<0};Ut.isPositive=Ut.ispos=function(){return this.s>0};Ut.isZero=function(){return this.s===0};Ut.lessThan=Ut.lt=function(t){return this.cmp(t)<0};Ut.lessThanOrEqualTo=Ut.lte=function(t){return this.cmp(t)<1};Ut.logarithm=Ut.log=function(t){var e,n=this,i=n.constructor,r=i.precision,a=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(ps))throw Error(cl+"NaN");if(n.s<1)throw Error(cl+(n.s?"NaN":"-Infinity"));return n.eq(ps)?new i(0):(zi=!1,e=Wc(xy(n,a),xy(t,a),a),zi=!0,pi(e,r))};Ut.minus=Ut.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?H8(e,t):G8(e,(t.s=-t.s,t))};Ut.modulo=Ut.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(cl+"NaN");return n.s?(zi=!1,e=Wc(n,t,0,1).times(t),zi=!0,n.minus(e)):pi(new i(n),r)};Ut.naturalExponential=Ut.exp=function(){return V8(this)};Ut.naturalLogarithm=Ut.ln=function(){return xy(this)};Ut.negated=Ut.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ut.plus=Ut.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?G8(e,t):H8(e,(t.s=-t.s,t))};Ut.precision=Ut.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yh+t);if(e=Or(r)+1,i=r.d.length-1,n=i*Ni+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};Ut.squareRoot=Ut.sqrt=function(){var t,e,n,i,r,a,o,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(cl+"NaN")}for(t=Or(s),zi=!1,r=Math.sqrt(+s),r==0||r==1/0?(e=ku(s.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=Og((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new u(e)):i=new u(r.toString()),n=u.precision,r=o=n+3;;)if(a=i,i=a.plus(Wc(s,a,o+2)).times(.5),ku(a.d).slice(0,o)===(e=ku(i.d)).slice(0,o)){if(e=e.slice(o-3,o+1),r==o&&e=="4999"){if(pi(a,n+1,0),a.times(a).eq(s)){i=a;break}}else if(e!="9999")break;o+=4}return zi=!0,pi(i,n)};Ut.times=Ut.mul=function(t){var e,n,i,r,a,o,s,u,c,d=this,p=d.constructor,g=d.d,y=(t=new p(t)).d;if(!d.s||!t.s)return new p(0);for(t.s*=d.s,n=d.e+t.e,u=g.length,c=y.length,u<c&&(a=g,g=y,y=a,o=u,u=c,c=o),a=[],o=u+c,i=o;i--;)a.push(0);for(i=c;--i>=0;){for(e=0,r=u+i;r>i;)s=a[r]+y[i]*g[r-i-1]+e,a[r--]=s%la|0,e=s/la|0;a[r]=(a[r]+e)%la|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,zi?pi(t,p.precision):t};Ut.toDecimalPlaces=Ut.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Hu(t,0,Dg),e===void 0?e=i.rounding:Hu(e,0,8),pi(n,t+Or(n)+1,e))};Ut.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=ip(i,!0):(Hu(t,0,Dg),e===void 0?e=r.rounding:Hu(e,0,8),i=pi(new r(i),t+1,e),n=ip(i,!0,t+1)),n};Ut.toFixed=function(t,e){var n,i,r=this,a=r.constructor;return t===void 0?ip(r):(Hu(t,0,Dg),e===void 0?e=a.rounding:Hu(e,0,8),i=pi(new a(r),t+Or(r)+1,e),n=ip(i.abs(),!1,t+Or(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};Ut.toInteger=Ut.toint=function(){var t=this,e=t.constructor;return pi(new e(t),Or(t)+1,e.rounding)};Ut.toNumber=function(){return+this};Ut.toPower=Ut.pow=function(t){var e,n,i,r,a,o,s=this,u=s.constructor,c=12,d=+(t=new u(t));if(!t.s)return new u(ps);if(s=new u(s),!s.s){if(t.s<1)throw Error(cl+"Infinity");return s}if(s.eq(ps))return s;if(i=u.precision,t.eq(ps))return pi(s,i);if(e=t.e,n=t.d.length-1,o=e>=n,a=s.s,o){if((n=d<0?-d:d)<=z8){for(r=new u(ps),e=Math.ceil(i/Ni+4),zi=!1;n%2&&(r=r.times(s),yF(r.d,e)),n=Og(n/2),n!==0;)s=s.times(s),yF(s.d,e);return zi=!0,t.s<0?new u(ps).div(r):pi(r,i)}}else if(a<0)throw Error(cl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,zi=!1,r=t.times(xy(s,i+c)),zi=!0,r=V8(r),r.s=a,r};Ut.toPrecision=function(t,e){var n,i,r=this,a=r.constructor;return t===void 0?(n=Or(r),i=ip(r,n<=a.toExpNeg||n>=a.toExpPos)):(Hu(t,1,Dg),e===void 0?e=a.rounding:Hu(e,0,8),r=pi(new a(r),t,e),n=Or(r),i=ip(r,t<=n||n<=a.toExpNeg,t)),i};Ut.toSignificantDigits=Ut.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Hu(t,1,Dg),e===void 0?e=i.rounding:Hu(e,0,8)),pi(new i(n),t,e)};Ut.toString=Ut.valueOf=Ut.val=Ut.toJSON=Ut[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Or(t),n=t.constructor;return ip(t,e<=n.toExpNeg||e>=n.toExpPos)};function G8(t,e){var n,i,r,a,o,s,u,c,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),zi?pi(e,p):e;if(u=t.d,c=e.d,o=t.e,r=e.e,u=u.slice(),a=o-r,a){for(a<0?(i=u,a=-a,s=c.length):(i=c,r=o,s=u.length),o=Math.ceil(p/Ni),s=o>s?o+1:s+1,a>s&&(a=s,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(s=u.length,a=c.length,s-a<0&&(a=s,i=c,c=u,u=i),n=0;a;)n=(u[--a]=u[a]+c[a]+n)/la|0,u[a]%=la;for(n&&(u.unshift(n),++r),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=r,zi?pi(e,p):e}function Hu(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Yh+t)}function ku(t){var e,n,i,r=t.length-1,a="",o=t[0];if(r>0){for(a+=o,e=1;e<r;e++)i=t[e]+"",n=Ni-i.length,n&&(a+=ld(n)),a+=i;o=t[e],i=o+"",n=Ni-i.length,n&&(a+=ld(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Wc=(function(){function t(i,r){var a,o=0,s=i.length;for(i=i.slice();s--;)a=i[s]*r+o,i[s]=a%la|0,o=a/la|0;return o&&i.unshift(o),i}function e(i,r,a,o){var s,u;if(a!=o)u=a>o?1:-1;else for(s=u=0;s<a;s++)if(i[s]!=r[s]){u=i[s]>r[s]?1:-1;break}return u}function n(i,r,a){for(var o=0;a--;)i[a]-=o,o=i[a]<r[a]?1:0,i[a]=o*la+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,o){var s,u,c,d,p,g,y,b,T,S,A,R,I,N,D,U,k,z,L=i.constructor,F=i.s==r.s?1:-1,j=i.d,W=r.d;if(!i.s)return new L(i);if(!r.s)throw Error(cl+"Division by zero");for(u=i.e-r.e,k=W.length,D=j.length,y=new L(F),b=y.d=[],c=0;W[c]==(j[c]||0);)++c;if(W[c]>(j[c]||0)&&--u,a==null?R=a=L.precision:o?R=a+(Or(i)-Or(r))+1:R=a,R<0)return new L(0);if(R=R/Ni+2|0,c=0,k==1)for(d=0,W=W[0],R++;(c<D||d)&&R--;c++)I=d*la+(j[c]||0),b[c]=I/W|0,d=I%W|0;else{for(d=la/(W[0]+1)|0,d>1&&(W=t(W,d),j=t(j,d),k=W.length,D=j.length),N=k,T=j.slice(0,k),S=T.length;S<k;)T[S++]=0;z=W.slice(),z.unshift(0),U=W[0],W[1]>=la/2&&++U;do d=0,s=e(W,T,k,S),s<0?(A=T[0],k!=S&&(A=A*la+(T[1]||0)),d=A/U|0,d>1?(d>=la&&(d=la-1),p=t(W,d),g=p.length,S=T.length,s=e(p,T,g,S),s==1&&(d--,n(p,k<g?z:W,g))):(d==0&&(s=d=1),p=W.slice()),g=p.length,g<S&&p.unshift(0),n(T,p,S),s==-1&&(S=T.length,s=e(W,T,k,S),s<1&&(d++,n(T,k<S?z:W,S))),S=T.length):s===0&&(d++,T=[0]),b[c++]=d,s&&T[0]?T[S++]=j[N]||0:(T=[j[N]],S=1);while((N++<D||T[0]!==void 0)&&R--)}return b[0]||b.shift(),y.e=u,pi(y,o?a+Or(y)+1:a)}})();function V8(t,e){var n,i,r,a,o,s,u=0,c=0,d=t.constructor,p=d.precision;if(Or(t)>16)throw Error(DP+Or(t));if(!t.s)return new d(ps);for(zi=!1,s=p,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(i=Math.log(Oh(2,c))/Math.LN10*2+5|0,s+=i,n=r=a=new d(ps),d.precision=s;;){if(r=pi(r.times(t),s),n=n.times(++u),o=a.plus(Wc(r,n,s)),ku(o.d).slice(0,s)===ku(a.d).slice(0,s)){for(;c--;)a=pi(a.times(a),s);return d.precision=p,e==null?(zi=!0,pi(a,p)):a}a=o}}function Or(t){for(var e=t.e*Ni,n=t.d[0];n>=10;n/=10)e++;return e}function bw(t,e,n){if(e>t.LN10.sd())throw zi=!0,n&&(t.precision=n),Error(cl+"LN10 precision limit exceeded");return pi(new t(t.LN10),e)}function ld(t){for(var e="";t--;)e+="0";return e}function xy(t,e){var n,i,r,a,o,s,u,c,d,p=1,g=10,y=t,b=y.d,T=y.constructor,S=T.precision;if(y.s<1)throw Error(cl+(y.s?"NaN":"-Infinity"));if(y.eq(ps))return new T(0);if(e==null?(zi=!1,c=S):c=e,y.eq(10))return e==null&&(zi=!0),bw(T,c);if(c+=g,T.precision=c,n=ku(b),i=n.charAt(0),a=Or(y),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(t),n=ku(y.d),i=n.charAt(0),p++;a=Or(y),i>1?(y=new T("0."+n),a++):y=new T(i+"."+n.slice(1))}else return u=bw(T,c+2,S).times(a+""),y=xy(new T(i+"."+n.slice(1)),c-g).plus(u),T.precision=S,e==null?(zi=!0,pi(y,S)):y;for(s=o=y=Wc(y.minus(ps),y.plus(ps),c),d=pi(y.times(y),c),r=3;;){if(o=pi(o.times(d),c),u=s.plus(Wc(o,new T(r),c)),ku(u.d).slice(0,c)===ku(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(bw(T,c+2,S).times(a+""))),s=Wc(s,new T(p),c),T.precision=S,e==null?(zi=!0,pi(s,S)):s;s=u,r+=2}}function vF(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=Og(n/Ni),t.d=[],i=(n+1)%Ni,n<0&&(i+=Ni),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Ni;i<r;)t.d.push(+e.slice(i,i+=Ni));e=e.slice(i),i=Ni-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),zi&&(t.e>y1||t.e<-y1))throw Error(DP+n)}else t.s=0,t.e=0,t.d=[0];return t}function pi(t,e,n){var i,r,a,o,s,u,c,d,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(i=e-o,i<0)i+=Ni,r=e,c=p[d=0];else{if(d=Math.ceil((i+1)/Ni),a=p.length,d>=a)return t;for(c=a=p[d],o=1;a>=10;a/=10)o++;i%=Ni,r=i-Ni+o}if(n!==void 0&&(a=Oh(10,o-r-1),s=c/a%10|0,u=e<0||p[d+1]!==void 0||c%a,u=n<4?(s||u)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||u||n==6&&(i>0?r>0?c/Oh(10,o-r):0:p[d-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return u?(a=Or(t),p.length=1,e=e-a-1,p[0]=Oh(10,(Ni-e%Ni)%Ni),t.e=Og(-e/Ni)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=d,a=1,d--):(p.length=d+1,a=Oh(10,Ni-i),p[d]=r>0?(c/Oh(10,o-r)%Oh(10,r)|0)*a:0),u)for(;;)if(d==0){(p[0]+=a)==la&&(p[0]=1,++t.e);break}else{if(p[d]+=a,p[d]!=la)break;p[d--]=0,a=1}for(i=p.length;p[--i]===0;)p.pop();if(zi&&(t.e>y1||t.e<-y1))throw Error(DP+Or(t));return t}function H8(t,e){var n,i,r,a,o,s,u,c,d,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),zi?pi(e,y):e;if(u=t.d,p=e.d,i=e.e,c=t.e,u=u.slice(),o=c-i,o){for(d=o<0,d?(n=u,o=-o,s=p.length):(n=p,i=c,s=u.length),r=Math.max(Math.ceil(y/Ni),s)+2,o>r&&(o=r,n.length=1),n.reverse(),r=o;r--;)n.push(0);n.reverse()}else{for(r=u.length,s=p.length,d=r<s,d&&(s=r),r=0;r<s;r++)if(u[r]!=p[r]){d=u[r]<p[r];break}o=0}for(d&&(n=u,u=p,p=n,e.s=-e.s),s=u.length,r=p.length-s;r>0;--r)u[s++]=0;for(r=p.length;r>o;){if(u[--r]<p[r]){for(a=r;a&&u[--a]===0;)u[a]=la-1;--u[a],u[r]+=la}u[r]-=p[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--i;return u[0]?(e.d=u,e.e=i,zi?pi(e,y):e):new g(0)}function ip(t,e,n){var i,r=Or(t),a=ku(t.d),o=a.length;return e?(n&&(i=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ld(i):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+ld(-r-1)+a,n&&(i=n-o)>0&&(a+=ld(i))):r>=o?(a+=ld(r+1-o),n&&(i=n-r-1)>0&&(a=a+"."+ld(i))):((i=r+1)<o&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-o)>0&&(r+1===o&&(a+="."),a+=ld(i))),t.s<0?"-"+a:a}function yF(t,e){if(t.length>e)return t.length=e,!0}function q8(t){var e,n,i;function r(a){var o=this;if(!(o instanceof r))return new r(a);if(o.constructor=r,a instanceof r){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Yh+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return vF(o,a.toString())}else if(typeof a!="string")throw Error(Yh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Ofe.test(a))vF(o,a);else throw Error(Yh+a)}if(r.prototype=Ut,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=q8,r.config=r.set=Lfe,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function Lfe(t){if(!t||typeof t!="object")throw Error(cl+"Object expected");var e,n,i,r=["precision",1,Dg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(Og(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(Yh+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Yh+n+": "+i);return this}var OP=q8(Dfe);ps=new OP(1);const ii=OP;var Ufe=t=>t,W8={},j8=t=>t===W8,_F=t=>function e(){return arguments.length===0||arguments.length===1&&j8(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},X8=(t,e)=>t===1?e:_F(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=i.filter(o=>o!==W8).length;return a>=t?e(...i):X8(t-a,_F(function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=i.map(d=>j8(d)?s.shift():d);return e(...c,...s)}))}),Ffe=t=>X8(t.length,t),GR=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},kfe=Ffe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Bfe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return Ufe;var r=n.reverse(),a=r[0],o=r.slice(1);return function(){return o.reduce((s,u)=>u(s),a(...arguments))}};function Y8(t){var e;return t===0?e=1:e=Math.floor(new ii(t).abs().log(10).toNumber())+1,e}function $8(t,e,n){for(var i=new ii(t),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(n),r++;return a}var K8=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},J8=(t,e,n)=>{if(t.lte(0))return new ii(0);var i=Y8(t.toNumber()),r=new ii(10).pow(i),a=t.div(r),o=i!==1?.05:.1,s=new ii(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=s.mul(r);return e?new ii(u.toNumber()):new ii(Math.ceil(u.toNumber()))},zfe=(t,e,n)=>{var i=new ii(1),r=new ii(t);if(!r.isint()&&n){var a=Math.abs(t);a<1?(i=new ii(10).pow(Y8(t)-1),r=new ii(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new ii(Math.floor(t)))}else t===0?r=new ii(Math.floor((e-1)/2)):n||(r=new ii(Math.floor(t)));var o=Math.floor((e-1)/2),s=Bfe(kfe(u=>r.add(new ii(u-o).mul(i)).toNumber()),GR);return s(0,e)},Z8=function(e,n,i,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new ii(0),tickMin:new ii(0),tickMax:new ii(0)};var o=J8(new ii(n).sub(e).div(i-1),r,a),s;e<=0&&n>=0?s=new ii(0):(s=new ii(e).add(n).div(2),s=s.sub(new ii(s).mod(o)));var u=Math.ceil(s.sub(e).div(o).toNumber()),c=Math.ceil(new ii(n).sub(s).div(o).toNumber()),d=u+c+1;return d>i?Z8(e,n,i,r,a+1):(d<i&&(c=n>0?c+(i-d):c,u=n>0?u:u+(i-d)),{step:o,tickMin:s.sub(new ii(u).mul(o)),tickMax:s.add(new ii(c).mul(o))})},Gfe=function(e){var[n,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,u]=K8([n,i]);if(s===-1/0||u===1/0){var c=u===1/0?[s,...GR(0,r-1).map(()=>1/0)]:[...GR(0,r-1).map(()=>-1/0),u];return n>i?c.reverse():c}if(s===u)return zfe(s,r,a);var{step:d,tickMin:p,tickMax:g}=Z8(s,u,o,a,0),y=$8(p,g.add(new ii(.1).mul(d)),d);return n>i?y.reverse():y},Vfe=function(e,n){var[i,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=K8([i,r]);if(o===-1/0||s===1/0)return[i,r];if(o===s)return[o];var u=Math.max(n,2),c=J8(new ii(s).sub(o).div(u-1),a,0),d=[...$8(new ii(o),new ii(s),c),s];return a===!1&&(d=d.map(p=>Math.round(p))),i>r?d.reverse():d},Hfe=t=>t.rootProps.barCategoryGap,t_=t=>t.rootProps.stackOffset,Q8=t=>t.rootProps.reverseStackOrder,LP=t=>t.options.chartName,UP=t=>t.rootProps.syncId,eH=t=>t.rootProps.syncMethod,FP=t=>t.options.eventEmitter,Hl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Bc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},hs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},qfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Bc.angleAxisId,includeHidden:!1,name:void 0,reversed:Bc.reversed,scale:Bc.scale,tick:Bc.tick,tickCount:void 0,ticks:void 0,type:Bc.type,unit:void 0},Wfe={allowDataOverflow:hs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hs.scale,tick:hs.tick,tickCount:hs.tickCount,ticks:void 0,type:hs.type,unit:void 0},jfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bc.scale,tick:Bc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Xfe={allowDataOverflow:hs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hs.scale,tick:hs.tick,tickCount:hs.tickCount,ticks:void 0,type:"category",unit:void 0},kP=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?jfe:qfe,BP=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Xfe:Wfe,dT=t=>t.polarOptions,zP=Xe([cf,ff,da],e8),tH=Xe([dT,zP],(t,e)=>{if(t!=null)return vs(t.innerRadius,e,0)}),nH=Xe([dT,zP],(t,e)=>{if(t!=null)return vs(t.outerRadius,e,e*.8)}),Yfe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},iH=Xe([dT],Yfe);Xe([kP,iH],fT);var rH=Xe([zP,tH,nH],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Xe([BP,rH],fT);var aH=Xe([Ti,dT,tH,nH,cf,ff],(t,e,n,i,r,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:o,cy:s,startAngle:u,endAngle:c}=e;return{cx:vs(o,r,r/2),cy:vs(s,a,a/2),innerRadius:n,outerRadius:i,startAngle:u,endAngle:c,clockWise:!1}}}),Gi=(t,e)=>e,n_=(t,e,n)=>n;function oH(t){return t==null?void 0:t.id}function sH(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:a}=n,o=new Map;return t.forEach(s=>{var u,c=(u=s.data)!==null&&u!==void 0?u:i;if(!(c==null||c.length===0)){var d=oH(s);c.forEach((p,g)=>{var y=a==null||r?g:String(dr(p,a,null)),b=dr(p,s.dataKey,0),T;o.has(y)?T=o.get(y):T={},Object.assign(T,{[d]:b}),o.set(y,T)})}}),Array.from(o.values())}function GP(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var hT=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function pT(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function $fe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var $r=t=>{var e=Ti(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Lg=t=>t.tooltip.settings.axisId;function bF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function _1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bF(Object(n),!0).forEach(function(i){Kfe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kfe(t,e,n){return(e=Jfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jfe(t){var e=Zfe(t,"string");return typeof e=="symbol"?e:e+""}function Zfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VR=[0,"auto"],Qfe={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ede=(t,e)=>t.cartesianAxis.xAxis[e],Id=(t,e)=>{var n=ede(t,e);return n??Qfe},tde={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:VR,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:$y},nde=(t,e)=>t.cartesianAxis.yAxis[e],Pd=(t,e)=>{var n=nde(t,e);return n??tde},ide={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VP=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??ide},tr=(t,e,n)=>{switch(e){case"xAxis":return Id(t,n);case"yAxis":return Pd(t,n);case"zAxis":return VP(t,n);case"angleAxis":return kP(t,n);case"radiusAxis":return BP(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rde=(t,e,n)=>{switch(e){case"xAxis":return Id(t,n);case"yAxis":return Pd(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},i_=(t,e,n)=>{switch(e){case"xAxis":return Id(t,n);case"yAxis":return Pd(t,n);case"angleAxis":return kP(t,n);case"radiusAxis":return BP(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lH=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function HP(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var ade=t=>t.graphicalItems.cartesianItems,ode=Xe([Gi,n_],HP),qP=(t,e,n)=>t.filter(n).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),r_=Xe([ade,tr,ode],qP,{memoizeOptions:{resultEqualityCheck:pT}}),uH=Xe([r_],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(GP)),cH=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),sde=Xe([r_],cH),WP=t=>t.map(e=>e.data).filter(Boolean).flat(1),lde=Xe([r_],WP,{memoizeOptions:{resultEqualityCheck:pT}}),jP=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},XP=Xe([lde,k8],jP),YP=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:dr(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:dr(r,i)}))):t.map(i=>({value:i})),mT=Xe([XP,tr,r_],YP);function fH(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ES(t){if(Zc(t)||t instanceof Date){var e=Number(t);if(Ur(e))return e}}function xF(t){if(Array.isArray(t)){var e=[ES(t[0]),ES(t[1])];return _d(e)?e:void 0}var n=ES(t);if(n!=null)return[n,n]}function rf(t){return t.map(ES).filter(pre)}function ude(t,e,n){return!n||typeof e!="number"||Kc(e)?[]:n.length?rf(n.flatMap(i=>{var r=dr(t,i.dataKey),a,o;if(Array.isArray(r)?[a,o]=r:a=o=r,!(!Ur(a)||!Ur(o)))return[e-a,e+o]})):[]}var Kr=t=>{var e=$r(t),n=Lg(t);return i_(t,e,n)},a_=Xe([Kr],t=>t==null?void 0:t.dataKey),cde=Xe([uH,k8,Kr],sH),dH=(t,e,n,i)=>{var r={},a=e.reduce((o,s)=>{if(s.stackId==null)return o;var u=o[s.stackId];return u==null&&(u=[]),u.push(s),o[s.stackId]=u,o},r);return Object.fromEntries(Object.entries(a).map(o=>{var[s,u]=o,c=i?[...u].reverse():u,d=c.map(oH);return[s,{stackedData:Loe(t,d,n),graphicalItems:c}]}))},fde=Xe([cde,uH,t_,Q8],dH),hH=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:a}=e;if(i==null&&n!=="zAxis"){var o=koe(t,r,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},dde=Xe([tr],t=>t.allowDataOverflow),$P=t=>{var e;if(t==null||!("domain"in t))return VR;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=rf(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:VR},KP=Xe([tr],$P),JP=Xe([KP,dde],B8),hde=Xe([fde,Rd,Gi,JP],hH,{memoizeOptions:{resultEqualityCheck:hT}}),gT=t=>t.errorBars,pde=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>fH(n,i)),b1=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var a=r.flat(),o=Math.min(...a),s=Math.max(...a);return[o,s]}},ZP=(t,e,n,i,r)=>{var a,o;if(n.length>0&&t.forEach(s=>{n.forEach(u=>{var c,d,p=(c=i[u.id])===null||c===void 0?void 0:c.filter(A=>fH(r,A)),g=dr(s,(d=e.dataKey)!==null&&d!==void 0?d:u.dataKey),y=ude(s,g,p);if(y.length>=2){var b=Math.min(...y),T=Math.max(...y);(a==null||b<a)&&(a=b),(o==null||T>o)&&(o=T)}var S=xF(g);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),o=o==null?S[1]:Math.max(o,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(s=>{var u=xF(dr(s,e.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Ur(a)&&Ur(o))return[a,o]},mde=Xe([XP,tr,sde,gT,Gi],ZP,{memoizeOptions:{resultEqualityCheck:hT}});function gde(t){var{value:e}=t;if(Zc(e)||e instanceof Date)return e}var vde=(t,e,n)=>{var i=t.map(gde).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&zG(i))?r8(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},pH=t=>t.referenceElements.dots,Ug=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),yde=Xe([pH,Gi,n_],Ug),mH=t=>t.referenceElements.areas,_de=Xe([mH,Gi,n_],Ug),gH=t=>t.referenceElements.lines,bde=Xe([gH,Gi,n_],Ug),vH=(t,e)=>{if(t!=null){var n=rf(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},xde=Xe(yde,Gi,vH),yH=(t,e)=>{if(t!=null){var n=rf(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Sde=Xe([_de,Gi],yH);function Ede(t){var e;if(t.x!=null)return rf([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:rf(n)}function Tde(t){var e;if(t.y!=null)return rf([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:rf(n)}var _H=(t,e)=>{if(t!=null){var n=t.flatMap(i=>e==="xAxis"?Ede(i):Tde(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ade=Xe([bde,Gi],_H),Mde=Xe(xde,Ade,Sde,(t,e,n)=>b1(t,n,e)),QP=(t,e,n,i,r,a,o,s)=>{if(n!=null)return n;var u=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",c=u?b1(i,a,r):b1(a,r);return Nfe(e,c,t.allowDataOverflow)},wde=Xe([tr,KP,JP,hde,mde,Mde,Ti,Gi],QP,{memoizeOptions:{resultEqualityCheck:hT}}),Cde=[0,1],eN=(t,e,n,i,r,a,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:s,type:u}=t,c=dp(e,a);if(c&&s==null){var d;return r8(0,(d=n==null?void 0:n.length)!==null&&d!==void 0?d:0)}return u==="category"?vde(i,t,c):r==="expand"?Cde:o}},tN=Xe([tr,Ti,XP,mT,t_,Gi,wde],eN),bH=(t,e,n,i,r)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":o==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var s="scale".concat(Wy(a));return s in G0?s:"point"}}},Fg=Xe([tr,Ti,lH,LP,Gi],bH);function Rde(t){if(t!=null){if(t in G0)return G0[t]();var e="scale".concat(Wy(t));if(e in G0)return G0[e]()}}function nN(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=Rde(e);if(r!=null){var a=r.domain(n).range(i);return Poe(a),a}}}var iN=(t,e,n)=>{var i=$P(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&_d(t))return Gfe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&_d(t))return Vfe(t,e.tickCount,e.allowDecimals)}},rN=Xe([tN,i_,Fg],iN),aN=(t,e,n,i)=>{if(i!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&_d(e)&&Array.isArray(n)&&n.length>0){var r=e[0],a=n[0],o=e[1],s=n[n.length-1];return[Math.min(r,a),Math.max(o,s)]}return e},Ide=Xe([tr,tN,rN,Gi],aN),Pde=Xe(mT,tr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(rf(t.map(p=>p.value))).sort((p,g)=>p-g),r=i[0],a=i[i.length-1];if(r==null||a==null)return 1/0;var o=a-r;if(o===0)return 1/0;for(var s=0;s<i.length-1;s++){var u=i[s],c=i[s+1];if(!(u==null||c==null)){var d=c-u;n=Math.min(n,d)}}return n/o}}),xH=Xe(Pde,Ti,Hfe,da,(t,e,n,i,r)=>r,(t,e,n,i,r)=>{if(!Ur(t))return 0;var a=e==="vertical"?i.height:i.width;if(r==="gap")return t*a/2;if(r==="no-gap"){var o=vs(n,t*a),s=t*a/2;return s-o-(s-o)/a*o}return 0}),Nde=(t,e,n)=>{var i=Id(t,e);return i==null||typeof i.padding!="string"?0:xH(t,"xAxis",e,n,i.padding)},Dde=(t,e,n)=>{var i=Pd(t,e);return i==null||typeof i.padding!="string"?0:xH(t,"yAxis",e,n,i.padding)},Ode=Xe(Id,Nde,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),Lde=Xe(Pd,Dde,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),Ude=Xe([da,Ode,ZE,JE,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:a}=i;return r?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Fde=Xe([da,Ti,Lde,ZE,JE,(t,e,n)=>n],(t,e,n,i,r,a)=>{var{padding:o}=r;return a?[i.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),o_=(t,e,n,i)=>{var r;switch(e){case"xAxis":return Ude(t,n,i);case"yAxis":return Fde(t,n,i);case"zAxis":return(r=VP(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return iH(t);case"radiusAxis":return rH(t,n);default:return}},SH=Xe([tr,o_],fT),vT=Xe([tr,Fg,Ide,SH],nN);Xe([r_,gT,Gi],pde);function EH(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var yT=(t,e)=>e,_T=(t,e,n)=>n,kde=Xe($E,yT,_T,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(EH)),Bde=Xe(KE,yT,_T,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(EH)),TH=(t,e)=>({width:t.width,height:e.height}),zde=(t,e)=>{var n=typeof e.width=="number"?e.width:$y;return{width:n,height:t.height}};Xe(da,Id,TH);var Gde=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Vde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Hde=Xe(ff,da,kde,yT,_T,(t,e,n,i,r)=>{var a={},o;return n.forEach(s=>{var u=TH(e,s);o==null&&(o=Gde(e,i,t));var c=i==="top"&&!r||i==="bottom"&&r;a[s.id]=o-Number(c)*u.height,o+=(c?-1:1)*u.height}),a}),qde=Xe(cf,da,Bde,yT,_T,(t,e,n,i,r)=>{var a={},o;return n.forEach(s=>{var u=zde(e,s);o==null&&(o=Vde(e,i,t));var c=i==="left"&&!r||i==="right"&&r;a[s.id]=o-Number(c)*u.width,o+=(c?-1:1)*u.width}),a}),Wde=(t,e)=>{var n=Id(t,e);if(n!=null)return Hde(t,n.orientation,n.mirror)};Xe([da,Id,Wde,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n==null?void 0:n[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}});var jde=(t,e)=>{var n=Pd(t,e);if(n!=null)return qde(t,n.orientation,n.mirror)};Xe([da,Pd,jde,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n==null?void 0:n[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}});Xe(da,Pd,(t,e)=>{var n=typeof e.width=="number"?e.width:$y;return{width:n,height:t.height}});var AH=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:a,dataKey:o}=n,s=dp(t,i),u=e.map(c=>c.value);if(o&&s&&a==="category"&&r&&zG(u))return u}},oN=Xe([Ti,mT,tr,Gi],AH),MH=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:a}=n,o=dp(t,i);if(o&&(r==="number"||a!=="auto"))return e.map(s=>s.value)}},sN=Xe([Ti,mT,i_,Gi],MH);Xe([Ti,rde,Fg,vT,oN,sN,o_,rN,Gi],(t,e,n,i,r,a,o,s,u)=>{if(e!=null){var c=dp(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:a,duplicateDomain:r,isCategorical:c,niceTicks:s,range:o,realScaleType:n,scale:i}}});var Xde=(t,e,n,i,r,a,o,s,u)=>{if(!(e==null||i==null)){var c=dp(t,u),{type:d,ticks:p,tickCount:g}=e,y=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,b=d==="category"&&i.bandwidth?i.bandwidth()/y:0;b=u==="angleAxis"&&a!=null&&a.length>=2?$o(a[0]-a[1])*2*b:b;var T=p||r;if(T){var S=T.map((A,R)=>{var I=o?o.indexOf(A):A;return{index:R,coordinate:i(I)+b,value:A,offset:b}});return S.filter(A=>Ur(A.coordinate))}return c&&s?s.map((A,R)=>({coordinate:i(A)+b,value:A,index:R,offset:b})).filter(A=>Ur(A.coordinate)):i.ticks?i.ticks(g).map(A=>({coordinate:i(A)+b,value:A,offset:b})):i.domain().map((A,R)=>({coordinate:i(A)+b,value:o?o[A]:A,index:R,offset:b}))}};Xe([Ti,i_,Fg,vT,rN,o_,oN,sN,Gi],Xde);var Yde=(t,e,n,i,r,a,o)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var s=dp(t,o),{tickCount:u}=e,c=0;return c=o==="angleAxis"&&(i==null?void 0:i.length)>=2?$o(i[0]-i[1])*2*c:c,s&&a?a.map((d,p)=>({coordinate:n(d)+c,value:d,index:p,offset:c})):n.ticks?n.ticks(u).map(d=>({coordinate:n(d)+c,value:d,offset:c})):n.domain().map((d,p)=>({coordinate:n(d)+c,value:r?r[d]:d,index:p,offset:c}))}};Xe([Ti,i_,vT,o_,oN,sN,Gi],Yde);Xe(tr,vT,(t,e)=>{if(!(t==null||e==null))return _1(_1({},t),{},{scale:e})});var $de=Xe([tr,Fg,tN,SH],nN);Xe((t,e,n)=>VP(t,n),$de,(t,e)=>{if(!(t==null||e==null))return _1(_1({},t),{},{scale:e})});var Kde=Xe([Ti,$E,KE],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wH=t=>t.options.defaultTooltipEventType,CH=t=>t.options.validateTooltipEventTypes;function RH(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function lN(t,e){var n=wH(t),i=CH(t);return RH(e,n,i)}function Jde(t){return bn(e=>lN(e,t))}var IH=(t,e)=>{var n,i=Number(e);if(!(Kc(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},Zde=t=>t.tooltip.settings,ud={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Qde={itemInteraction:{click:ud,hover:ud},axisInteraction:{click:ud,hover:ud},keyboardInteraction:ud,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},PH=Zo({name:"tooltip",initialState:Qde,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Bi()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Xl(t).tooltipItemPayloads.indexOf(n);r>-1&&(t.tooltipItemPayloads[r]=i)},prepare:Bi()},removeTooltipEntrySettings:{reducer(t,e){var n=Xl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Bi()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:ehe,replaceTooltipEntrySettings:the,removeTooltipEntrySettings:nhe,setTooltipSettingsState:ihe,setActiveMouseOverItemIndex:NH,mouseLeaveItem:rhe,mouseLeaveChart:DH,setActiveClickItemIndex:ahe,setMouseOverAxisIndex:OH,setMouseClickAxisIndex:ohe,setSyncInteraction:HR,setKeyboardInteraction:qR}=PH.actions,she=PH.reducer;function SF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SF(Object(n),!0).forEach(function(i){lhe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lhe(t,e,n){return(e=uhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uhe(t){var e=che(t,"string");return typeof e=="symbol"?e:e+""}function che(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fhe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function dhe(t){return t.index!=null}var LH=(t,e,n,i)=>{if(e==null)return ud;var r=fhe(t,e,n);if(r==null)return ud;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(dhe(r)){if(a)return vx(vx({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return vx(vx({},ud),{},{coordinate:r.coordinate})};function hhe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function phe(t,e){var n=hhe(t),i=e[0],r=e[1];if(n===void 0)return!1;var a=Math.min(i,r),o=Math.max(i,r);return n>=a&&n<=o}function mhe(t,e,n){if(n==null||e==null)return!0;var i=dr(t,e);return i==null||!_d(n)?!0:phe(i,n)}var uN=(t,e,n,i)=>{var r=t==null?void 0:t.index;if(r==null)return null;var a=Number(r);if(!Ur(a))return r;var o=0,s=1/0;e.length>0&&(s=e.length-1);var u=Math.max(o,Math.min(a,s)),c=e[u];return c==null||mhe(c,n,i)?String(u):null},UH=(t,e,n,i,r,a,o,s)=>{if(!(a==null||s==null)){var u=o[0],c=u==null?void 0:s(u.positions,a);if(c!=null)return c;var d=r==null?void 0:r[Number(a)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:d.coordinate}}}},FH=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=t.itemInteraction.hover.graphicalItemId:r=t.itemInteraction.click.graphicalItemId,r==null&&i!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.graphicalItemId)===r})},s_=t=>t.options.tooltipPayloadSearcher,kg=t=>t.tooltip;function EF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function TF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(n),!0).forEach(function(i){ghe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ghe(t,e,n){return(e=vhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vhe(t){var e=yhe(t,"string");return typeof e=="symbol"?e:e+""}function yhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _he(t,e){return t??e}var kH=(t,e,n,i,r,a,o)=>{if(!(e==null||a==null)){var{chartData:s,computedData:u,dataStartIndex:c,dataEndIndex:d}=n,p=[];return t.reduce((g,y)=>{var b,{dataDefinedOnItem:T,settings:S}=y,A=_he(T,s),R=Array.isArray(A)?NV(A,c,d):A,I=(b=S==null?void 0:S.dataKey)!==null&&b!==void 0?b:i,N=S==null?void 0:S.nameKey,D;if(i&&Array.isArray(R)&&!Array.isArray(R[0])&&o==="axis"?D=hre(R,i,r):D=a(R,e,u,N),Array.isArray(D))D.forEach(k=>{var z=TF(TF({},S),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(IU({tooltipEntrySettings:z,dataKey:k.dataKey,payload:k.payload,value:dr(k.payload,k.dataKey),name:k.name}))});else{var U;g.push(IU({tooltipEntrySettings:S,dataKey:I,payload:D,value:dr(D,I),name:(U=dr(D,N))!==null&&U!==void 0?U:S==null?void 0:S.name}))}return g},p)}},cN=Xe([Kr,Ti,lH,LP,$r],bH),bhe=Xe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),xhe=Xe([$r,Lg],HP),Bg=Xe([bhe,Kr,xhe],qP,{memoizeOptions:{resultEqualityCheck:pT}}),She=Xe([Bg],t=>t.filter(GP)),Ehe=Xe([Bg],WP,{memoizeOptions:{resultEqualityCheck:pT}}),zg=Xe([Ehe,Rd],jP),The=Xe([She,Rd,Kr],sH),fN=Xe([zg,Kr,Bg],YP),BH=Xe([Kr],$P),Ahe=Xe([Kr],t=>t.allowDataOverflow),zH=Xe([BH,Ahe],B8),Mhe=Xe([Bg],t=>t.filter(GP)),whe=Xe([The,Mhe,t_,Q8],dH),Che=Xe([whe,Rd,$r,zH],hH),Rhe=Xe([Bg],cH),Ihe=Xe([zg,Kr,Rhe,gT,$r],ZP,{memoizeOptions:{resultEqualityCheck:hT}}),Phe=Xe([pH,$r,Lg],Ug),Nhe=Xe([Phe,$r],vH),Dhe=Xe([mH,$r,Lg],Ug),Ohe=Xe([Dhe,$r],yH),Lhe=Xe([gH,$r,Lg],Ug),Uhe=Xe([Lhe,$r],_H),Fhe=Xe([Nhe,Uhe,Ohe],b1),khe=Xe([Kr,BH,zH,Che,Ihe,Fhe,Ti,$r],QP),l_=Xe([Kr,Ti,zg,fN,t_,$r,khe],eN),Bhe=Xe([l_,Kr,cN],iN),zhe=Xe([Kr,l_,Bhe,$r],aN),GH=t=>{var e=$r(t),n=Lg(t),i=!1;return o_(t,e,n,i)},VH=Xe([Kr,GH],fT),HH=Xe([Kr,cN,zhe,VH],nN),Ghe=Xe([Ti,fN,Kr,$r],AH),Vhe=Xe([Ti,fN,Kr,$r],MH),Hhe=(t,e,n,i,r,a,o,s)=>{if(e){var{type:u}=e,c=dp(t,s);if(i){var d=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=u==="category"&&i.bandwidth?i.bandwidth()/d:0;return p=s==="angleAxis"&&r!=null&&(r==null?void 0:r.length)>=2?$o(r[0]-r[1])*2*p:p,c&&o?o.map((g,y)=>({coordinate:i(g)+p,value:g,index:y,offset:p})):i.domain().map((g,y)=>({coordinate:i(g)+p,value:a?a[g]:g,index:y,offset:p}))}}},hf=Xe([Ti,Kr,cN,HH,GH,Ghe,Vhe,$r],Hhe),dN=Xe([wH,CH,Zde],(t,e,n)=>RH(n.shared,t,e)),qH=t=>t.tooltip.settings.trigger,hN=t=>t.tooltip.settings.defaultIndex,u_=Xe([kg,dN,qH,hN],LH),Sy=Xe([u_,zg,a_,l_],uN),WH=Xe([hf,Sy],IH),jH=Xe([u_],t=>{if(t)return t.dataKey}),qhe=Xe([u_],t=>{if(t)return t.graphicalItemId}),XH=Xe([kg,dN,qH,hN],FH),Whe=Xe([cf,ff,Ti,da,hf,hN,XH,s_],UH),jhe=Xe([u_,Whe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Xhe=Xe([u_],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Yhe=Xe([XH,Sy,Rd,a_,WH,s_,dN],kH);Xe([Yhe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function AF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function MF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AF(Object(n),!0).forEach(function(i){$he(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $he(t,e,n){return(e=Khe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Khe(t){var e=Jhe(t,"string");return typeof e=="symbol"?e:e+""}function Jhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zhe=()=>bn(Kr),Qhe=()=>{var t=Zhe(),e=bn(hf),n=bn(HH);return RU(!t||!n?void 0:MF(MF({},t),{},{scale:n}),e)};function wF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(n),!0).forEach(function(i){epe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function epe(t,e,n){return(e=tpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tpe(t){var e=npe(t,"string");return typeof e=="symbol"?e:e+""}function npe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ipe=(t,e,n,i)=>{var r=e.find(a=>a&&a.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},rpe=(t,e,n,i)=>{var r=e.find(c=>c&&c.index===n);if(r){if(t==="centric"){var a=r.coordinate,{radius:o}=i;return bm(bm(bm({},i),Dr(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var s=r.coordinate,{angle:u}=i;return bm(bm(bm({},i),Dr(i.cx,i.cy,s,u)),{},{angle:u,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function ape(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var YH=(t,e,n,i,r)=>{var a,o=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(o<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var s=0;s<o;s++){var u,c,d,p,g,y=s>0?(u=n[s-1])===null||u===void 0?void 0:u.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,b=(d=n[s])===null||d===void 0?void 0:d.coordinate,T=s>=o-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(g=n[s+1])===null||g===void 0?void 0:g.coordinate,S=void 0;if(!(y==null||b==null||T==null))if($o(b-y)!==$o(T-b)){var A=[];if($o(T-b)===$o(r[1]-r[0])){S=T;var R=b+r[1]-r[0];A[0]=Math.min(R,(R+y)/2),A[1]=Math.max(R,(R+y)/2)}else{S=y;var I=T+r[1]-r[0];A[0]=Math.min(b,(I+b)/2),A[1]=Math.max(b,(I+b)/2)}var N=[Math.min(b,(S+b)/2),Math.max(b,(S+b)/2)];if(t>N[0]&&t<=N[1]||t>=A[0]&&t<=A[1]){var D;return(D=n[s])===null||D===void 0?void 0:D.index}}else{var U=Math.min(y,T),k=Math.max(y,T);if(t>(U+b)/2&&t<=(k+b)/2){var z;return(z=n[s])===null||z===void 0?void 0:z.index}}}else if(e)for(var L=0;L<o;L++){var F=e[L];if(F!=null){var j=e[L+1],W=e[L-1];if(L===0&&j!=null&&t<=(F.coordinate+j.coordinate)/2||L===o-1&&W!=null&&t>(F.coordinate+W.coordinate)/2||L>0&&L<o-1&&W!=null&&j!=null&&t>(F.coordinate+W.coordinate)/2&&t<=(F.coordinate+j.coordinate)/2)return F.index}}return-1},ope=()=>bn(LP),pN=(t,e)=>e,$H=(t,e,n)=>n,mN=(t,e,n,i)=>i,spe=Xe(hf,t=>BE(t,e=>e.coordinate)),gN=Xe([kg,pN,$H,mN],LH),vN=Xe([gN,zg,a_,l_],uN),lpe=(t,e,n)=>{if(e!=null){var i=kg(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},KH=Xe([kg,pN,$H,mN],FH),x1=Xe([cf,ff,Ti,da,hf,mN,KH,s_],UH),upe=Xe([gN,x1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),JH=Xe([hf,vN],IH),cpe=Xe([KH,vN,Rd,a_,JH,s_,pN],kH),fpe=Xe([gN,vN],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),dpe=(t,e,n,i,r,a,o)=>{if(!(!t||!n||!i||!r)&&ape(t,o)){var s=Boe(t,e),u=YH(s,a,r,n,i),c=ipe(e,r,u,t);return{activeIndex:String(u),activeCoordinate:c}}},hpe=(t,e,n,i,r,a,o)=>{if(!(!t||!i||!r||!a||!n)){var s=Yle(t,n);if(s){var u=zoe(s,e),c=YH(u,o,a,i,r),d=rpe(e,a,c,s);return{activeIndex:String(c),activeCoordinate:d}}}},ppe=(t,e,n,i,r,a,o,s)=>{if(!(!t||!e||!i||!r||!a))return e==="horizontal"||e==="vertical"?dpe(t,e,i,r,a,o,s):hpe(t,e,n,i,r,a,o)},mpe=Xe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElement:i.element}}),gpe=Xe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Hl)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:$fe}});function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function RF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(i){vpe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vpe(t,e,n){return(e=ype(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ype(t){var e=_pe(t,"string");return typeof e=="symbol"?e:e+""}function _pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bpe={},xpe={zIndexMap:Object.values(Hl).reduce((t,e)=>RF(RF({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),bpe)},Spe=new Set(Object.values(Hl));function Epe(t){return Spe.has(t)}var ZH=Zo({name:"zIndex",initialState:xpe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Bi()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Epe(n)&&delete t.zIndexMap[n])},prepare:Bi()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElement=i:t.zIndexMap[n].element=i:t.zIndexMap[n]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:Bi()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Bi()}}}),{registerZIndexPortal:Tpe,unregisterZIndexPortal:Ape,registerZIndexPortalElement:Mpe,unregisterZIndexPortalElement:wpe}=ZH.actions,Cpe=ZH.reducer;function c_(t){var{zIndex:e,children:n}=t,i=bse(),r=i&&e!==void 0&&e!==0,a=Md(),o=Xr();G.useLayoutEffect(()=>r?(o(Tpe({zIndex:e})),()=>{o(Ape({zIndex:e}))}):jy,[o,e,r]);var s=bn(u=>mpe(u,e,a));return r?s?sz.createPortal(n,s):null:n}function WR(){return WR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},WR.apply(null,arguments)}function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(i){Rpe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rpe(t,e,n){return(e=Ipe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ipe(t){var e=Ppe(t,"string");return typeof e=="symbol"?e:e+""}function Ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Npe(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return G.isValidElement(e)?G.cloneElement(e,i):G.createElement(n,i)}function Dpe(t){var e,{coordinate:n,payload:i,index:r,offset:a,tooltipAxisBandSize:o,layout:s,cursor:u,tooltipEventType:c,chartName:d}=t,p=n,g=i,y=r;if(!u||!p||d!=="ScatterChart"&&c!=="axis")return null;var b,T,S;if(d==="ScatterChart")b=p,T=lle,S=Hl.cursorLine;else if(d==="BarChart")b=ule(s,p,a,o),T=QV,S=Hl.cursorRectangle;else if(s==="radial"&&HG(p)){var{cx:A,cy:R,radius:I,startAngle:N,endAngle:D}=t8(p);b={cx:A,cy:R,startAngle:N,endAngle:D,innerRadius:I,outerRadius:I},T=i8,S=Hl.cursorLine}else b={points:Zle(s,p,a)},T=aP,S=Hl.cursorLine;var U=typeof u=="object"&&"className"in u?u.className:void 0,k=yx(yx(yx(yx({stroke:"#ccc",pointerEvents:"none"},a),b),iR(u)),{},{payload:g,payloadIndex:y,className:Lr("recharts-tooltip-cursor",U)});return G.createElement(c_,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:S},G.createElement(Npe,{cursor:u,cursorComp:T,cursorProps:k}))}function Ope(t){var e=Qhe(),n=vse(),i=eT(),r=ope();return e==null||n==null||i==null||r==null?null:G.createElement(Dpe,WR({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var QH=G.createContext(null),Lpe=()=>G.useContext(QH),xw={exports:{}},PF;function Upe(){return PF||(PF=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(u,c,d){this.fn=u,this.context=c,this.once=d||!1}function a(u,c,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new r(d,p||u,g),b=n?n+c:c;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],y]:u._events[b].push(y):(u._events[b]=y,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new i:delete u._events[c]}function s(){this._events=new i,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],d,p;if(this._eventsCount===0)return c;for(p in d=this._events)e.call(d,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},s.prototype.listeners=function(c){var d=n?n+c:c,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,b=new Array(y);g<y;g++)b[g]=p[g].fn;return b},s.prototype.listenerCount=function(c){var d=n?n+c:c,p=this._events[d];return p?p.fn?1:p.length:0},s.prototype.emit=function(c,d,p,g,y,b){var T=n?n+c:c;if(!this._events[T])return!1;var S=this._events[T],A=arguments.length,R,I;if(S.fn){switch(S.once&&this.removeListener(c,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,d),!0;case 3:return S.fn.call(S.context,d,p),!0;case 4:return S.fn.call(S.context,d,p,g),!0;case 5:return S.fn.call(S.context,d,p,g,y),!0;case 6:return S.fn.call(S.context,d,p,g,y,b),!0}for(I=1,R=new Array(A-1);I<A;I++)R[I-1]=arguments[I];S.fn.apply(S.context,R)}else{var N=S.length,D;for(I=0;I<N;I++)switch(S[I].once&&this.removeListener(c,S[I].fn,void 0,!0),A){case 1:S[I].fn.call(S[I].context);break;case 2:S[I].fn.call(S[I].context,d);break;case 3:S[I].fn.call(S[I].context,d,p);break;case 4:S[I].fn.call(S[I].context,d,p,g);break;default:if(!R)for(D=1,R=new Array(A-1);D<A;D++)R[D-1]=arguments[D];S[I].fn.apply(S[I].context,R)}}return!0},s.prototype.on=function(c,d,p){return a(this,c,d,p,!1)},s.prototype.once=function(c,d,p){return a(this,c,d,p,!0)},s.prototype.removeListener=function(c,d,p,g){var y=n?n+c:c;if(!this._events[y])return this;if(!d)return o(this,y),this;var b=this._events[y];if(b.fn)b.fn===d&&(!g||b.once)&&(!p||b.context===p)&&o(this,y);else{for(var T=0,S=[],A=b.length;T<A;T++)(b[T].fn!==d||g&&!b[T].once||p&&b[T].context!==p)&&S.push(b[T]);S.length?this._events[y]=S.length===1?S[0]:S:o(this,y)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(xw)),xw.exports}var Fpe=Upe();const kpe=dl(Fpe);var Ey=new kpe,jR="recharts.syncEvent.tooltip",NF="recharts.syncEvent.brush";function Bpe(t,e){if(e){var n=Number.parseInt(e,10);if(!Kc(n))return t==null?void 0:t[n]}}var zpe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},e9=Zo({name:"options",initialState:zpe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Gpe=e9.reducer,{createEventEmitter:Vpe}=e9.actions;function Hpe(t){return t.tooltip.syncInteraction}var qpe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},t9=Zo({name:"chartData",initialState:qpe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:DF,setDataStartEndIndexes:Wpe,setComputedData:NCe}=t9.actions,jpe=t9.reducer,Xpe=["x","y"];function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(i){Ype(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ype(t,e,n){return(e=$pe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $pe(t){var e=Kpe(t,"string");return typeof e=="symbol"?e:e+""}function Kpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jpe(t,e){if(t==null)return{};var n,i,r=Zpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zpe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Qpe(){var t=bn(UP),e=bn(FP),n=Xr(),i=bn(eH),r=bn(hf),a=eT(),o=QE(),s=bn(u=>u.rootProps.className);G.useEffect(()=>{if(t==null)return jy;var u=(c,d,p)=>{if(e!==p&&t===c){if(i==="index"){var g;if(o&&d!==null&&d!==void 0&&(g=d.payload)!==null&&g!==void 0&&g.coordinate&&d.payload.sourceViewBox){var y=d.payload.coordinate,{x:b,y:T}=y,S=Jpe(y,Xpe),{x:A,y:R,width:I,height:N}=d.payload.sourceViewBox,D=xm(xm({},S),{},{x:o.x+(I?(b-A)/I:0)*o.width,y:o.y+(N?(T-R)/N:0)*o.height});n(xm(xm({},d),{},{payload:xm(xm({},d.payload),{},{coordinate:D})}))}else n(d);return}if(r!=null){var U;if(typeof i=="function"){var k={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},z=i(r,k);U=r[z]}else i==="value"&&(U=r.find($=>String($.value)===d.payload.label));var{coordinate:L}=d.payload;if(U==null||d.payload.active===!1||L==null||o==null){n(HR({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:j}=L,W=Math.min(F,o.x+o.width),X=Math.min(j,o.y+o.height),Q={x:a==="horizontal"?U.coordinate:W,y:a==="horizontal"?X:U.coordinate},ae=HR({active:d.payload.active,coordinate:Q,dataKey:d.payload.dataKey,index:String(U.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(ae)}}};return Ey.on(jR,u),()=>{Ey.off(jR,u)}},[s,n,e,t,i,r,a,o])}function eme(){var t=bn(UP),e=bn(FP),n=Xr();G.useEffect(()=>{if(t==null)return jy;var i=(r,a,o)=>{e!==o&&t===r&&n(Wpe(a))};return Ey.on(NF,i),()=>{Ey.off(NF,i)}},[n,e,t])}function tme(){var t=Xr();G.useEffect(()=>{t(Vpe())},[t]),Qpe(),eme()}function nme(t,e,n,i,r,a){var o=bn(y=>lpe(y,t,e)),s=bn(FP),u=bn(UP),c=bn(eH),d=bn(Hpe),p=d==null?void 0:d.active,g=QE();G.useEffect(()=>{if(!p&&u!=null&&s!=null){var y=HR({active:a,coordinate:n,dataKey:o,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:g,graphicalItemId:void 0});Ey.emit(jR,u,y,s)}},[p,n,o,r,i,s,u,c,a,g])}function LF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function UF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(n),!0).forEach(function(i){ime(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ime(t,e,n){return(e=rme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rme(t){var e=ame(t,"string");return typeof e=="symbol"?e:e+""}function ame(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ome(t){return t.dataKey}function sme(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(Gse,e)}var FF=[],lme={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ume(t){var e,n,i=Yu(t,lme),{active:r,allowEscapeViewBox:a,animationDuration:o,animationEasing:s,content:u,filterNull:c,isAnimationActive:d,offset:p,payloadUniqBy:g,position:y,reverseDirection:b,useTranslate3d:T,wrapperStyle:S,cursor:A,shared:R,trigger:I,defaultIndex:N,portal:D,axisId:U}=i,k=Xr(),z=typeof N=="number"?String(N):N;G.useEffect(()=>{k(ihe({shared:R,trigger:I,axisId:U,active:r,defaultIndex:z}))},[k,R,I,U,r,z]);var L=QE(),F=YV(),j=Jde(R),{activeIndex:W,isActive:X}=(e=bn(oe=>fpe(oe,j,I,z)))!==null&&e!==void 0?e:{},Q=bn(oe=>cpe(oe,j,I,z)),ae=bn(oe=>JH(oe,j,I,z)),$=bn(oe=>upe(oe,j,I,z)),ie=Q,me=Lpe(),pe=(n=r??X)!==null&&n!==void 0?n:!1,[de,H]=Mae([ie,pe]),ne=j==="axis"?ae:void 0;nme(j,I,$,ne,W,pe);var le=D??me;if(le==null||L==null||j==null)return null;var ge=ie??FF;pe||(ge=FF),c&&ge.length&&(ge=Zre(ge.filter(oe=>oe.value!=null&&(oe.hide!==!0||i.includeHidden)),g,ome));var _e=ge.length>0,re=G.createElement(Yse,{allowEscapeViewBox:a,animationDuration:o,animationEasing:s,isAnimationActive:d,active:pe,coordinate:$,hasPayload:_e,offset:p,position:y,reverseDirection:b,useTranslate3d:T,viewBox:L,wrapperStyle:S,lastBoundingBox:de,innerRef:H,hasPortalFromProps:!!D},sme(u,UF(UF({},i),{},{payload:ge,label:ne,active:pe,activeIndex:W,coordinate:$,accessibilityLayer:F})));return G.createElement(G.Fragment,null,sz.createPortal(re,le),pe&&G.createElement(Ope,{cursor:A,tooltipEventType:j,coordinate:$,payload:ge,index:W}))}var bT=t=>null;bT.displayName="Cell";function cme(t,e,n){return(e=fme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fme(t){var e=dme(t,"string");return typeof e=="symbol"?e:e+""}function dme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class hme{constructor(e){cme(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function kF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kF(Object(n),!0).forEach(function(i){mme(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mme(t,e,n){return(e=gme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gme(t){var e=vme(t,"string");return typeof e=="symbol"?e:e+""}function vme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yme={cacheSize:2e3,enableCache:!0},n9=pme({},yme),BF=new hme(n9.cacheSize),_me={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zF="recharts_measurement_span";function bme(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",s=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(a,"|").concat(o,"|").concat(s)}var GF=(t,e)=>{try{var n=document.getElementById(zF);n||(n=document.createElement("span"),n.setAttribute("id",zF),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,_me,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},VF=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||oP.isSsr)return{width:0,height:0};if(!n9.enableCache)return GF(e,n);var i=bme(e,n),r=BF.get(i);if(r)return r;var a=GF(e,n);return BF.set(i,a),a},i9;function xme(t,e,n){return(e=Sme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sme(t){var e=Eme(t,"string");return typeof e=="symbol"?e:e+""}function Eme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ame=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mme={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wme=["cm","mm","pt","pc","in","Q","px"];function Cme(t){return wme.includes(t)}var Zm="NaN";function Rme(t,e){return t*Mme[e]}class Ca{static parse(e){var n,[,i,r]=(n=Ame.exec(e))!==null&&n!==void 0?n:[];return i==null?Ca.NaN:new Ca(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Kc(e)&&(this.unit=""),n!==""&&!Tme.test(n)&&(this.num=NaN,this.unit=""),Cme(n)&&(this.num=Rme(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Ca(NaN,""):new Ca(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ca(NaN,""):new Ca(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ca(NaN,""):new Ca(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ca(NaN,""):new Ca(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Kc(this.num)}}i9=Ca;xme(Ca,"NaN",new i9(NaN,""));function r9(t){if(t==null||t.includes(Zm))return Zm;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,a]=(n=HF.exec(e))!==null&&n!==void 0?n:[],o=Ca.parse(i??""),s=Ca.parse(a??""),u=r==="*"?o.multiply(s):o.divide(s);if(u.isNaN())return Zm;e=e.replace(HF,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,d,p,g]=(c=qF.exec(e))!==null&&c!==void 0?c:[],y=Ca.parse(d??""),b=Ca.parse(g??""),T=p==="+"?y.add(b):y.subtract(b);if(T.isNaN())return Zm;e=e.replace(qF,T.toString())}return e}var WF=/\(([^()]*)\)/;function Ime(t){for(var e=t,n;(n=WF.exec(e))!=null;){var[,i]=n;e=e.replace(WF,r9(i))}return e}function Pme(t){var e=t.replace(/\s+/g,"");return e=Ime(e),e=r9(e),e}function Nme(t){try{return Pme(t)}catch{return Zm}}function Sw(t){var e=Nme(t.slice(5,-1));return e===Zm?"":e}var Dme=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ome=["dx","dy","angle","className","breakAll"];function XR(){return XR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},XR.apply(null,arguments)}function jF(t,e){if(t==null)return{};var n,i,r=Lme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lme(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var a9=/[ \f\n\r\t\v\u2028\u2029]+/,o9=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];xs(e)||(n?r=e.toString().split(""):r=e.toString().split(a9));var a=r.map(s=>({word:s,width:VF(s,i).width})),o=n?0:VF("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function Ume(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var s9=(t,e,n,i)=>t.reduce((r,a)=>{var{word:o,width:s}=a,u=r[r.length-1];if(u&&s!=null&&(e==null||i||u.width+s+n<Number(e)))u.words.push(o),u.width+=s+n;else{var c={words:[o],width:s};r.push(c)}return r},[]),l9=t=>t.reduce((e,n)=>e.width>n.width?e:n),Fme="",XF=(t,e,n,i,r,a,o,s)=>{var u=t.slice(0,e),c=o9({breakAll:n,style:i,children:u+Fme});if(!c)return[!1,[]];var d=s9(c.wordsWithComputedWidth,a,o,s),p=d.length>r||l9(d).width>Number(a);return[p,d]},kme=(t,e,n,i,r)=>{var{maxLines:a,children:o,style:s,breakAll:u}=t,c=nn(a),d=String(o),p=s9(e,i,n,r);if(!c||r)return p;var g=p.length>a||l9(p).width>Number(i);if(!g)return p;for(var y=0,b=d.length-1,T=0,S;y<=b&&T<=d.length-1;){var A=Math.floor((y+b)/2),R=A-1,[I,N]=XF(d,R,u,s,a,i,n,r),[D]=XF(d,A,u,s,a,i,n,r);if(!I&&!D&&(y=A+1),I&&D&&(b=A-1),!I&&D){S=N;break}T++}return S||p},YF=t=>{var e=xs(t)?[]:t.toString().split(a9);return[{words:e,width:void 0}]},Bme=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:a,maxLines:o}=t;if((e||n)&&!oP.isSsr){var s,u,c=o9({breakAll:a,children:i,style:r});if(c){var{wordsWithComputedWidth:d,spaceWidth:p}=c;s=d,u=p}else return YF(i);return kme({breakAll:a,children:i,maxLines:o,style:r},s,u,e,!!n)}return YF(i)},u9="#808080",zme={angle:0,breakAll:!1,capHeight:"0.71em",fill:u9,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},yN=G.forwardRef((t,e)=>{var n=Yu(t,zme),{x:i,y:r,lineHeight:a,capHeight:o,fill:s,scaleToFit:u,textAnchor:c,verticalAnchor:d}=n,p=jF(n,Dme),g=G.useMemo(()=>Bme({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:y,dy:b,angle:T,className:S,breakAll:A}=p,R=jF(p,Ome);if(!Zc(i)||!Zc(r)||g.length===0)return null;var I=Number(i)+(nn(y)?y:0),N=Number(r)+(nn(b)?b:0);if(!Ur(I)||!Ur(N))return null;var D;switch(d){case"start":D=Sw("calc(".concat(o,")"));break;case"middle":D=Sw("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:D=Sw("calc(".concat(g.length-1," * -").concat(a,")"));break}var U=[];if(u){var k=g[0].width,{width:z}=p;U.push("scale(".concat(nn(z)&&nn(k)?z/k:1,")"))}return T&&U.push("rotate(".concat(T,", ").concat(I,", ").concat(N,")")),U.length&&(R.transform=U.join(" ")),G.createElement("text",XR({},ll(R),{ref:e,x:I,y:N,className:Lr("recharts-text",S),textAnchor:c,fill:s.includes("url")?u9:s}),g.map((L,F)=>{var j=L.words.join(A?"":" ");return G.createElement("tspan",{x:I,dy:F===0?D:a,key:"".concat(j,"-").concat(F)},j)}))});yN.displayName="Text";var Gme=["labelRef"],Vme=["content"];function $F(t,e){if(t==null)return{};var n,i,r=Hme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hme(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function KF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KF(Object(n),!0).forEach(function(i){qme(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qme(t,e,n){return(e=Wme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wme(t){var e=jme(t,"string");return typeof e=="symbol"?e:e+""}function jme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S1(){return S1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},S1.apply(null,arguments)}var Xme=G.createContext(null),Yme=()=>{var t=G.useContext(Xme),e=QE();return t||zV(e)},$me=G.createContext(null),Kme=()=>{var t=G.useContext($me),e=bn(aH);return t||e},Jme=t=>{var{value:e,formatter:n}=t,i=xs(t.children)?e:t.children;return typeof n=="function"?n(i):i},Zme=t=>t!=null&&typeof t=="function",Qme=(t,e)=>{var n=$o(e-t),i=Math.min(Math.abs(e-t),360);return n*i},ege=(t,e,n,i,r)=>{var{offset:a,className:o}=t,{cx:s,cy:u,innerRadius:c,outerRadius:d,startAngle:p,endAngle:g,clockWise:y}=r,b=(c+d)/2,T=Qme(p,g),S=T>=0?1:-1,A,R;switch(e){case"insideStart":A=p+S*a,R=y;break;case"insideEnd":A=g-S*a,R=!y;break;case"end":A=g+S*a,R=y;break;default:throw new Error("Unsupported position ".concat(e))}R=T<=0?R:!R;var I=Dr(s,u,b,A),N=Dr(s,u,b,A+(R?1:-1)*359),D="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(R?0:1,`,
    `).concat(N.x,",").concat(N.y),U=xs(t.id)?uy("recharts-radial-line-"):t.id;return G.createElement("text",S1({},i,{dominantBaseline:"central",className:Lr("recharts-radial-bar-label",o)}),G.createElement("defs",null,G.createElement("path",{id:U,d:D})),G.createElement("textPath",{xlinkHref:"#".concat(U)},n))},tge=(t,e,n)=>{var{cx:i,cy:r,innerRadius:a,outerRadius:o,startAngle:s,endAngle:u}=t,c=(s+u)/2;if(n==="outside"){var{x:d,y:p}=Dr(i,r,o+e,c);return{x:d,y:p,textAnchor:d>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var g=(a+o)/2,{x:y,y:b}=Dr(i,r,g,c);return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},YR=t=>"cx"in t&&nn(t.cx),nge=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,a;n!=null&&!YR(n)&&(a=n);var{x:o,y:s,upperWidth:u,lowerWidth:c,height:d}=e,p=o,g=o+(u-c)/2,y=(p+g)/2,b=(u+c)/2,T=p+u/2,S=d>=0?1:-1,A=S*i,R=S>0?"end":"start",I=S>0?"start":"end",N=u>=0?1:-1,D=N*i,U=N>0?"end":"start",k=N>0?"start":"end";if(r==="top"){var z={x:p+u/2,y:s-A,textAnchor:"middle",verticalAnchor:R};return Nr(Nr({},z),a?{height:Math.max(s-a.y,0),width:u}:{})}if(r==="bottom"){var L={x:g+c/2,y:s+d+A,textAnchor:"middle",verticalAnchor:I};return Nr(Nr({},L),a?{height:Math.max(a.y+a.height-(s+d),0),width:c}:{})}if(r==="left"){var F={x:y-D,y:s+d/2,textAnchor:U,verticalAnchor:"middle"};return Nr(Nr({},F),a?{width:Math.max(F.x-a.x,0),height:d}:{})}if(r==="right"){var j={x:y+b+D,y:s+d/2,textAnchor:k,verticalAnchor:"middle"};return Nr(Nr({},j),a?{width:Math.max(a.x+a.width-j.x,0),height:d}:{})}var W=a?{width:b,height:d}:{};return r==="insideLeft"?Nr({x:y+D,y:s+d/2,textAnchor:k,verticalAnchor:"middle"},W):r==="insideRight"?Nr({x:y+b-D,y:s+d/2,textAnchor:U,verticalAnchor:"middle"},W):r==="insideTop"?Nr({x:p+u/2,y:s+A,textAnchor:"middle",verticalAnchor:I},W):r==="insideBottom"?Nr({x:g+c/2,y:s+d-A,textAnchor:"middle",verticalAnchor:R},W):r==="insideTopLeft"?Nr({x:p+D,y:s+A,textAnchor:k,verticalAnchor:I},W):r==="insideTopRight"?Nr({x:p+u-D,y:s+A,textAnchor:U,verticalAnchor:I},W):r==="insideBottomLeft"?Nr({x:g+D,y:s+d-A,textAnchor:k,verticalAnchor:R},W):r==="insideBottomRight"?Nr({x:g+c-D,y:s+d-A,textAnchor:U,verticalAnchor:R},W):r&&typeof r=="object"&&(nn(r.x)||Jc(r.x))&&(nn(r.y)||Jc(r.y))?Nr({x:o+vs(r.x,b),y:s+vs(r.y,d),textAnchor:"end",verticalAnchor:"end"},W):Nr({x:T,y:s+d/2,textAnchor:"middle",verticalAnchor:"middle"},W)},ige={angle:0,offset:5,zIndex:Hl.label,position:"middle",textBreakAll:!1};function c9(t){var e=Yu(t,ige),{viewBox:n,position:i,value:r,children:a,content:o,className:s="",textBreakAll:u,labelRef:c}=e,d=Kme(),p=Yme(),g=i==="center"?p:d??p,y,b,T;if(n==null?y=g:YR(n)?y=n:y=zV(n),!y||xs(r)&&xs(a)&&!G.isValidElement(o)&&typeof o!="function")return null;var S=Nr(Nr({},e),{},{viewBox:y});if(G.isValidElement(o)){var{labelRef:A}=S,R=$F(S,Gme);return G.cloneElement(o,R)}if(typeof o=="function"){var{content:I}=S,N=$F(S,Vme);if(b=G.createElement(o,N),G.isValidElement(b))return b}else b=Jme(e);var D=ll(e);if(YR(y)){if(i==="insideStart"||i==="insideEnd"||i==="end")return ege(e,i,b,D,y);T=tge(y,e.offset,e.position)}else T=nge(e,y);return G.createElement(c_,{zIndex:e.zIndex},G.createElement(yN,S1({ref:c,className:Lr("recharts-label",s)},D,T,{textAnchor:Ume(D.textAnchor)?D.textAnchor:T.textAnchor,breakAll:u}),b))}c9.displayName="Label";var Ew={},Tw={},JF;function rge(){return JF||(JF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Tw)),Tw}var Aw={},ZF;function age(){return ZF||(ZF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Aw)),Aw}var QF;function oge(){return QF||(QF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rge(),n=age(),i=XI();function r(a){if(i.isArrayLike(a))return e.last(n.toArray(a))}t.last=r})(Ew)),Ew}var Mw,ek;function sge(){return ek||(ek=1,Mw=oge().last),Mw}var lge=sge();const uge=dl(lge);var cge=["valueAccessor"],fge=["dataKey","clockWise","id","textBreakAll","zIndex"];function E1(){return E1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},E1.apply(null,arguments)}function tk(t,e){if(t==null)return{};var n,i,r=dge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dge(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var hge=t=>Array.isArray(t.value)?uge(t.value):t.value,f9=G.createContext(void 0);f9.Provider;var d9=G.createContext(void 0),pge=d9.Provider;function mge(){return G.useContext(f9)}function gge(){return G.useContext(d9)}function TS(t){var{valueAccessor:e=hge}=t,n=tk(t,cge),{dataKey:i,clockWise:r,id:a,textBreakAll:o,zIndex:s}=n,u=tk(n,fge),c=mge(),d=gge(),p=c||d;return!p||!p.length?null:G.createElement(c_,{zIndex:s??Hl.label},G.createElement(vd,{className:"recharts-label-list"},p.map((g,y)=>{var b,T=xs(i)?e(g,y):dr(g&&g.payload,i),S=xs(a)?{}:{id:"".concat(a,"-").concat(y)};return G.createElement(c9,E1({key:"label-".concat(y)},ll(g),u,S,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:T,textBreakAll:o,viewBox:g.viewBox,index:y,zIndex:0}))})))}TS.displayName="LabelList";function vge(t){var{label:e}=t;return e?e===!0?G.createElement(TS,{key:"labelList-implicit"}):G.isValidElement(e)||Zme(e)?G.createElement(TS,{key:"labelList-implicit",content:e}):typeof e=="object"?G.createElement(TS,E1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var h9=t=>t.graphicalItems.polarItems,yge=Xe([Gi,n_],HP),xT=Xe([h9,tr,yge],qP),_ge=Xe([xT],WP),ST=Xe([_ge,NP],jP),bge=Xe([ST,tr,xT],YP);Xe([ST,tr,xT],(t,e,n)=>n.length>0?t.flatMap(i=>n.flatMap(r=>{var a,o=dr(i,(a=e.dataKey)!==null&&a!==void 0?a:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:dr(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})));var nk=()=>{},xge=Xe([ST,tr,xT,gT,Gi],ZP),Sge=Xe([tr,KP,JP,nk,xge,nk,Ti,Gi],QP),p9=Xe([tr,Ti,ST,bge,t_,Gi,Sge],eN),Ege=Xe([p9,tr,Fg],iN);Xe([tr,p9,Ege,Gi],aN);var Tge={radiusAxis:{},angleAxis:{}},m9=Zo({name:"polarAxis",initialState:Tge,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:DCe,removeRadiusAxis:OCe,addAngleAxis:LCe,removeAngleAxis:UCe}=m9.actions,Age=m9.reducer;function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(i){Mge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mge(t,e,n){return(e=wge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wge(t){var e=Cge(t,"string");return typeof e=="symbol"?e:e+""}function Cge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rge=(t,e)=>e,_N=Xe([h9,Rge],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Ige=[],bN=(t,e,n)=>(n==null?void 0:n.length)===0?Ige:n,g9=Xe([NP,_N,bN],(t,e,n)=>{var{chartData:i}=t;if(e!=null){var r;if((e==null?void 0:e.data)!=null&&e.data.length>0?r=e.data:r=i,(!r||!r.length)&&n!=null&&(r=n.map(a=>rk(rk({},e.presentationProps),a.props))),r!=null)return r}}),Pge=Xe([g9,_N,bN],(t,e,n)=>{if(!(t==null||e==null))return t.map((i,r)=>{var a,o=dr(i,e.nameKey,e.name),s;return n!=null&&(a=n[r])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?s=n[r].props.fill:typeof i=="object"&&i!=null&&"fill"in i?s=i.fill:s=e.fill,{value:DV(o,e.dataKey),color:s,payload:i,type:e.legendType}})}),Nge=Xe([g9,_N,bN,da],(t,e,n,i)=>{if(!(e==null||t==null))return Uve({offset:i,pieSettings:e,displayedData:t,cells:n})}),ww={exports:{}},fi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak;function Dge(){if(ak)return fi;ak=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function b(T){if(typeof T=="object"&&T!==null){var S=T.$$typeof;switch(S){case t:switch(T=T.type,T){case n:case r:case i:case u:case c:case g:return T;default:switch(T=T&&T.$$typeof,T){case o:case s:case p:case d:return T;case a:return T;default:return S}}case e:return S}}}return fi.ContextConsumer=a,fi.ContextProvider=o,fi.Element=t,fi.ForwardRef=s,fi.Fragment=n,fi.Lazy=p,fi.Memo=d,fi.Portal=e,fi.Profiler=r,fi.StrictMode=i,fi.Suspense=u,fi.SuspenseList=c,fi.isContextConsumer=function(T){return b(T)===a},fi.isContextProvider=function(T){return b(T)===o},fi.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===t},fi.isForwardRef=function(T){return b(T)===s},fi.isFragment=function(T){return b(T)===n},fi.isLazy=function(T){return b(T)===p},fi.isMemo=function(T){return b(T)===d},fi.isPortal=function(T){return b(T)===e},fi.isProfiler=function(T){return b(T)===r},fi.isStrictMode=function(T){return b(T)===i},fi.isSuspense=function(T){return b(T)===u},fi.isSuspenseList=function(T){return b(T)===c},fi.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===n||T===r||T===i||T===u||T===c||typeof T=="object"&&T!==null&&(T.$$typeof===p||T.$$typeof===d||T.$$typeof===o||T.$$typeof===a||T.$$typeof===s||T.$$typeof===y||T.getModuleId!==void 0)},fi.typeOf=b,fi}var ok;function Oge(){return ok||(ok=1,ww.exports=Dge()),ww.exports}var Lge=Oge(),sk=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",lk=null,Cw=null,v9=t=>{if(t===lk&&Array.isArray(Cw))return Cw;var e=[];return G.Children.forEach(t,n=>{xs(n)||(Lge.isFragment(n)?e=e.concat(v9(n.props.children)):e.push(n))}),Cw=e,lk=t,e};function y9(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(r=>sk(r)):i=[sk(e)],v9(t).forEach(r=>{var a=ly(r,"type.displayName")||ly(r,"type.name");a&&i.indexOf(a)!==-1&&n.push(r)}),n}var Rw={},uk;function Uge(){return uk||(uk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((r=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&r.writable)?!1:n.toString()===`[object ${a}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e})(Rw)),Rw}var Iw,ck;function Fge(){return ck||(ck=1,Iw=Uge().isPlainObject),Iw}var kge=Fge();const Bge=dl(kge);var fk,dk,hk,pk,mk;function gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(n),!0).forEach(function(i){zge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zge(t,e,n){return(e=Gge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gge(t){var e=Vge(t,"string");return typeof e=="symbol"?e:e+""}function Vge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T1(){return T1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},T1.apply(null,arguments)}function S0(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var yk=(t,e,n,i,r)=>{var a=n-i,o;return o=cr(fk||(fk=S0(["M ",",",""])),t,e),o+=cr(dk||(dk=S0(["L ",",",""])),t+n,e),o+=cr(hk||(hk=S0(["L ",",",""])),t+n-a/2,e+r),o+=cr(pk||(pk=S0(["L ",",",""])),t+n-a/2-i,e+r),o+=cr(mk||(mk=S0(["L ",","," Z"])),t,e),o},Hge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qge=t=>{var e=Yu(t,Hge),{x:n,y:i,upperWidth:r,lowerWidth:a,height:o,className:s}=e,{animationEasing:u,animationDuration:c,animationBegin:d,isUpdateAnimationActive:p}=e,g=G.useRef(null),[y,b]=G.useState(-1),T=G.useRef(r),S=G.useRef(a),A=G.useRef(o),R=G.useRef(n),I=G.useRef(i),N=lP(t,"trapezoid-");if(G.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var Q=g.current.getTotalLength();Q&&b(Q)}catch{}},[]),n!==+n||i!==+i||r!==+r||a!==+a||o!==+o||r===0&&a===0||o===0)return null;var D=Lr("recharts-trapezoid",s);if(!p)return G.createElement("g",null,G.createElement("path",T1({},ll(e),{className:D,d:yk(n,i,r,a,o)})));var U=T.current,k=S.current,z=A.current,L=R.current,F=I.current,j="0px ".concat(y===-1?1:y,"px"),W="".concat(y,"px 0px"),X=$V(["strokeDasharray"],c,u);return G.createElement(sP,{animationId:N,key:N,canBegin:y>0,duration:c,easing:u,isActive:p,begin:d},Q=>{var ae=kl(U,r,Q),$=kl(k,a,Q),ie=kl(z,o,Q),me=kl(L,n,Q),pe=kl(F,i,Q);g.current&&(T.current=ae,S.current=$,A.current=ie,R.current=me,I.current=pe);var de=Q>0?{transition:X,strokeDasharray:W}:{strokeDasharray:j};return G.createElement("path",T1({},ll(e),{className:D,d:yk(me,pe,ae,$,ie),ref:g,style:vk(vk({},de),e.style)}))})},Wge=["option","shapeType","activeClassName"];function jge(t,e){if(t==null)return{};var n,i,r=Xge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xge(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function A1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(i){Yge(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yge(t,e,n){return(e=$ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ge(t){var e=Kge(t,"string");return typeof e=="symbol"?e:e+""}function Kge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jge(t,e){return A1(A1({},e),t)}function Zge(t,e){return t==="symbols"}function bk(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return G.createElement(QV,n);case"trapezoid":return G.createElement(qge,n);case"sector":return G.createElement(i8,n);case"symbols":if(Zge(e))return G.createElement(VG,n);break;case"curve":return G.createElement(aP,n);default:return null}}function Qge(t){return G.isValidElement(t)?t.props:t}function eve(t){var{option:e,shapeType:n,activeClassName:i="recharts-active-shape"}=t,r=jge(t,Wge),a;if(G.isValidElement(e))a=G.cloneElement(e,A1(A1({},r),Qge(e)));else if(typeof e=="function")a=e(r,r.index);else if(Bge(e)&&typeof e!="boolean"){var o=Jge(e,r);a=G.createElement(bk,{shapeType:n,elementProps:o})}else{var s=r;a=G.createElement(bk,{shapeType:n,elementProps:s})}return r.isActive?G.createElement(vd,{className:i},a):a}var tve=(t,e,n)=>{var i=Xr();return(r,a)=>o=>{t==null||t(r,a,o),i(NH({activeIndex:String(a),activeDataKey:e,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},nve=t=>{var e=Xr();return(n,i)=>r=>{t==null||t(n,i,r),e(rhe())}},ive=(t,e,n)=>{var i=Xr();return(r,a)=>o=>{t==null||t(r,a,o),i(ahe({activeIndex:String(a),activeDataKey:e,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function rve(t){var{tooltipEntrySettings:e}=t,n=Xr(),i=Md(),r=G.useRef(null);return G.useLayoutEffect(()=>{i||(r.current===null?n(ehe(e)):r.current!==e&&n(the({prev:r.current,next:e})),r.current=e)},[e,n,i]),G.useLayoutEffect(()=>()=>{r.current&&(n(nhe(r.current)),r.current=null)},[n]),null}function ave(t){var{legendPayload:e}=t,n=Xr(),i=bn(Ti),r=G.useRef(null);return G.useLayoutEffect(()=>{i!=="centric"&&i!=="radial"||(r.current===null?n(Dse(e)):r.current!==e&&n(Ose({prev:r.current,next:e})),r.current=e)},[n,i,e]),G.useLayoutEffect(()=>()=>{r.current&&(n(Lse(r.current)),r.current=null)},[n]),null}var Pw,ove=()=>{var[t]=G.useState(()=>uy("uid-"));return t},sve=(Pw=qW.useId)!==null&&Pw!==void 0?Pw:ove;function lve(t,e){var n=sve();return e||(t?"".concat(t,"-").concat(n):n)}var uve=G.createContext(void 0),cve=t=>{var{id:e,type:n,children:i}=t,r=lve("recharts-".concat(n),e);return G.createElement(uve.Provider,{value:r},i(r))},fve={cartesianItems:[],polarItems:[]},_9=Zo({name:"graphicalItems",initialState:fve,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Bi()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Xl(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:Bi()},removeCartesianGraphicalItem:{reducer(t,e){var n=Xl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Bi()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Bi()},removePolarGraphicalItem:{reducer(t,e){var n=Xl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Bi()}}}),{addCartesianGraphicalItem:FCe,replaceCartesianGraphicalItem:kCe,removeCartesianGraphicalItem:BCe,addPolarGraphicalItem:dve,removePolarGraphicalItem:hve}=_9.actions,pve=_9.reducer;function mve(t){var e=Xr();return G.useLayoutEffect(()=>(e(dve(t)),()=>{e(hve(t))}),[e,t]),null}var gve=["key"],vve=["onMouseEnter","onClick","onMouseLeave"],yve=["id"],_ve=["id"];function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(i){bve(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bve(t,e,n){return(e=xve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xve(t){var e=Sve(t,"string");return typeof e=="symbol"?e:e+""}function Sve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bd.apply(null,arguments)}function ET(t,e){if(t==null)return{};var n,i,r=Eve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eve(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Tve(t){var e=G.useMemo(()=>y9(t.children,bT),[t.children]),n=bn(i=>Pge(i,t.id,e));return n==null?null:G.createElement(ave,{legendPayload:n})}var Ave=G.memo(t=>{var{dataKey:e,nameKey:n,sectors:i,stroke:r,strokeWidth:a,fill:o,name:s,hide:u,tooltipType:c,id:d}=t,p={dataDefinedOnItem:i.map(g=>g.tooltipPayload),positions:i.map(g=>g.tooltipPosition),settings:{stroke:r,strokeWidth:a,fill:o,dataKey:e,nameKey:n,name:DV(s,e),hide:u,type:c,color:o,unit:"",graphicalItemId:d}};return G.createElement(rve,{tooltipEntrySettings:p})}),Mve=(t,e)=>t>e?"start":t<e?"end":"middle",wve=(t,e,n)=>vs(typeof e=="function"?e(t):e,n,n*.8),Cve=(t,e,n)=>{var{top:i,left:r,width:a,height:o}=e,s=e8(a,o),u=r+vs(t.cx,a,a/2),c=i+vs(t.cy,o,o/2),d=vs(t.innerRadius,s,0),p=wve(n,t.outerRadius,s),g=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:u,cy:c,innerRadius:d,outerRadius:p,maxRadius:g}},Rve=(t,e)=>{var n=$o(e-t),i=Math.min(Math.abs(e-t),360);return n*i};function Ive(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Pve=(t,e)=>{if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Lr("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:i}=e,r=ET(e,gve);return G.createElement(aP,bd({},r,{type:"linear",className:n}))},Nve=(t,e,n)=>{if(G.isValidElement(t))return G.cloneElement(t,e);var i=n;if(typeof t=="function"&&(i=t(e),G.isValidElement(i)))return i;var r=Lr("recharts-pie-label-text",Ive(t));return G.createElement(yN,bd({},e,{alignmentBaseline:"middle",className:r}),i)};function Dve(t){var{sectors:e,props:n,showLabels:i}=t,{label:r,labelLine:a,dataKey:o}=n;if(!i||!r||!e)return null;var s=lg(n),u=iR(r),c=iR(a),d=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,p=e.map((g,y)=>{var b=(g.startAngle+g.endAngle)/2,T=Dr(g.cx,g.cy,g.outerRadius+d,b),S=fr(fr(fr(fr({},s),g),{},{stroke:"none"},u),{},{index:y,textAnchor:Mve(T.x,g.cx)},T),A=fr(fr(fr(fr({},s),g),{},{fill:"none",stroke:g.fill},c),{},{index:y,points:[Dr(g.cx,g.cy,g.outerRadius,b),T],key:"line"});return G.createElement(c_,{zIndex:Hl.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},G.createElement(vd,null,a&&Pve(a,A),Nve(r,S,dr(g,o))))});return G.createElement(vd,{className:"recharts-pie-labels"},p)}function Ove(t){var{sectors:e,props:n,showLabels:i}=t,{label:r}=n;return typeof r=="object"&&r!=null&&"position"in r?G.createElement(vge,{label:r}):G.createElement(Dve,{sectors:e,props:n,showLabels:i})}function Lve(t){var{sectors:e,activeShape:n,inactiveShape:i,allOtherPieProps:r,shape:a,id:o}=t,s=bn(Sy),u=bn(jH),c=bn(qhe),{onMouseEnter:d,onClick:p,onMouseLeave:g}=r,y=ET(r,vve),b=tve(d,r.dataKey,o),T=nve(g),S=ive(p,r.dataKey,o);return e==null||e.length===0?null:G.createElement(G.Fragment,null,e.map((A,R)=>{if((A==null?void 0:A.startAngle)===0&&(A==null?void 0:A.endAngle)===0&&e.length!==1)return null;var I=c==null||c===o,N=String(R)===s&&(u==null||r.dataKey===u)&&I,D=s?i:null,U=n&&N?n:D,k=fr(fr({},A),{},{stroke:A.stroke,tabIndex:-1,[LV]:R,[UV]:o});return G.createElement(vd,bd({key:"sector-".concat(A==null?void 0:A.startAngle,"-").concat(A==null?void 0:A.endAngle,"-").concat(A.midAngle,"-").concat(R),tabIndex:-1,className:"recharts-pie-sector"},wre(y,A,R),{onMouseEnter:b(A,R),onMouseLeave:T(A,R),onClick:S(A,R)}),G.createElement(eve,bd({option:a??U,index:R,shapeType:"sector",isActive:N},k)))}))}function Uve(t){var e,{pieSettings:n,displayedData:i,cells:r,offset:a}=t,{cornerRadius:o,startAngle:s,endAngle:u,dataKey:c,nameKey:d,tooltipType:p}=n,g=Math.abs(n.minAngle),y=Rve(s,u),b=Math.abs(y),T=i.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,S=i.filter(U=>dr(U,c,0)!==0).length,A=(b>=360?S:S-1)*T,R=b-S*g-A,I=i.reduce((U,k)=>{var z=dr(k,c,0);return U+(nn(z)?z:0)},0),N;if(I>0){var D;N=i.map((U,k)=>{var z=dr(U,c,0),L=dr(U,d,k),F=Cve(n,a,U),j=(nn(z)?z:0)/I,W,X=fr(fr({},U),r&&r[k]&&r[k].props);k?W=D.endAngle+$o(y)*T*(z!==0?1:0):W=s;var Q=W+$o(y)*((z!==0?g:0)+j*R),ae=(W+Q)/2,$=(F.innerRadius+F.outerRadius)/2,ie=[{name:L,value:z,payload:X,dataKey:c,type:p,graphicalItemId:n.id}],me=Dr(F.cx,F.cy,$,ae);return D=fr(fr(fr(fr({},n.presentationProps),{},{percent:j,cornerRadius:typeof o=="string"?parseFloat(o):o,name:L,tooltipPayload:ie,midAngle:ae,middleRadius:$,tooltipPosition:me},X),F),{},{value:z,dataKey:c,startAngle:W,endAngle:Q,payload:X,paddingAngle:$o(y)*T}),D})}return N}function Fve(t){var{showLabels:e,sectors:n,children:i}=t,r=G.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return G.createElement(pge,{value:e?r:void 0},i)}function kve(t){var{props:e,previousSectorsRef:n,id:i}=t,{sectors:r,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:u,activeShape:c,inactiveShape:d,onAnimationStart:p,onAnimationEnd:g}=e,y=lP(e,"recharts-pie-"),b=n.current,[T,S]=G.useState(!1),A=G.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),R=G.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return G.createElement(Fve,{showLabels:!T,sectors:r},G.createElement(sP,{animationId:y,begin:o,duration:s,isActive:a,easing:u,onAnimationStart:R,onAnimationEnd:A,key:y},I=>{var N=[],D=r&&r[0],U=D==null?void 0:D.startAngle;return r==null||r.forEach((k,z)=>{var L=b&&b[z],F=z>0?ly(k,"paddingAngle",0):0;if(L){var j=kl(L.endAngle-L.startAngle,k.endAngle-k.startAngle,I),W=fr(fr({},k),{},{startAngle:U+F,endAngle:U+j+F});N.push(W),U=W.endAngle}else{var{endAngle:X,startAngle:Q}=k,ae=kl(0,X-Q,I),$=fr(fr({},k),{},{startAngle:U+F,endAngle:U+ae+F});N.push($),U=$.endAngle}}),n.current=N,G.createElement(vd,null,G.createElement(Lve,{sectors:N,activeShape:c,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:i}))}),G.createElement(Ove,{showLabels:!T,sectors:r,props:e}),e.children)}var Bve={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Hl.area};function zve(t){var{id:e}=t,n=ET(t,yve),{hide:i,className:r,rootTabIndex:a}=t,o=G.useMemo(()=>y9(t.children,bT),[t.children]),s=bn(d=>Nge(d,e,o)),u=G.useRef(null),c=Lr("recharts-pie",r);return i||s==null?(u.current=null,G.createElement(vd,{tabIndex:a,className:c})):G.createElement(c_,{zIndex:t.zIndex},G.createElement(Ave,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:s,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),G.createElement(vd,{tabIndex:a,className:c},G.createElement(kve,{props:fr(fr({},n),{},{sectors:s}),previousSectorsRef:u,id:e})))}function b9(t){var e=Yu(t,Bve),{id:n}=e,i=ET(e,_ve),r=lg(i);return G.createElement(cve,{id:n,type:"pie"},a=>G.createElement(G.Fragment,null,G.createElement(mve,{type:"pie",id:a,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:r,maxRadius:e.maxRadius}),G.createElement(Tve,bd({},i,{id:a})),G.createElement(zve,bd({},i,{id:a}))))}b9.displayName="Pie";function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(i){Gve(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Gve(t,e,n){return(e=Vve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vve(t){var e=Hve(t,"string");return typeof e=="symbol"?e:e+""}function Hve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qve={xAxis:{},yAxis:{},zAxis:{}},x9=Zo({name:"cartesianAxis",initialState:qve,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Bi()},replaceXAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.xAxis[n.id],t.xAxis[i.id]=i)},prepare:Bi()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Bi()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Bi()},replaceYAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.yAxis[n.id],t.yAxis[i.id]=i)},prepare:Bi()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Bi()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Bi()},replaceZAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.zAxis[n.id],t.zAxis[i.id]=i)},prepare:Bi()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Bi()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var a=r.widthHistory||[];if(a.length===3&&a[0]===a[2]&&i===a[1]&&i!==r.width&&Math.abs(i-a[0])<=1)return;var o=[...a,i].slice(-3);t.yAxis[n]=Ek(Ek({},t.yAxis[n]),{},{width:i,widthHistory:o})}}}}),{addXAxis:zCe,replaceXAxis:GCe,removeXAxis:VCe,addYAxis:HCe,replaceYAxis:qCe,removeYAxis:WCe,addZAxis:jCe,replaceZAxis:XCe,removeZAxis:YCe,updateYAxisWidth:$Ce}=x9.actions,Wve=x9.reducer,jve=Xe([da],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Xve=Xe([jve,cf,ff],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Yve=()=>bn(Xve),$ve=t=>{var{chartData:e}=t,n=Xr(),i=Md();return G.useEffect(()=>i?()=>{}:(n(DF(e)),()=>{n(DF(void 0))}),[e,n,i]),null},Tk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},S9=Zo({name:"brush",initialState:Tk,reducers:{setBrushSettings(t,e){return e.payload==null?Tk:e.payload}}}),{setBrushSettings:KCe}=S9.actions,Kve=S9.reducer,Jve={dots:[],areas:[],lines:[]},E9=Zo({name:"referenceElements",initialState:Jve,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Xl(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Xl(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Xl(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:JCe,removeDot:ZCe,addArea:QCe,removeArea:eRe,addLine:tRe,removeLine:nRe}=E9.actions,Zve=E9.reducer,Qve=G.createContext(void 0),e0e=t=>{var{children:e}=t,[n]=G.useState("".concat(uy("recharts"),"-clip")),i=Yve();if(i==null)return null;var{x:r,y:a,width:o,height:s}=i;return G.createElement(Qve.Provider,{value:n},G.createElement("defs",null,G.createElement("clipPath",{id:n},G.createElement("rect",{x:r,y:a,height:s,width:o}))),e)},t0e={},T9=Zo({name:"errorBars",initialState:t0e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===i.dataKey&&a.direction===i.direction?r:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:iRe,replaceErrorBar:rRe,removeErrorBar:aRe}=T9.actions,n0e=T9.reducer,Nw={exports:{}},Dw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function i0e(){if(Ak)return Dw;Ak=1;var t=Tg();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,a=t.useEffect,o=t.useMemo,s=t.useDebugValue;return Dw.useSyncExternalStoreWithSelector=function(u,c,d,p,g){var y=r(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function S(D){if(!A){if(A=!0,R=D,D=p(D),g!==void 0&&b.hasValue){var U=b.value;if(g(U,D))return I=U}return I=D}if(U=I,n(R,D))return U;var k=p(D);return g!==void 0&&g(U,k)?(R=D,U):(R=D,I=k)}var A=!1,R,I,N=d===void 0?null:d;return[function(){return S(c())},N===null?void 0:function(){return S(N())}]},[c,d,p,g]);var T=i(u,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=T},[T]),s(T),T},Dw}var Mk;function r0e(){return Mk||(Mk=1,Nw.exports=i0e()),Nw.exports}r0e();function a0e(t){t()}function o0e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){a0e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var wk={notify(){},get:()=>[]};function s0e(t,e){let n,i=wk,r=0,a=!1;function o(T){d();const S=i.subscribe(T);let A=!1;return()=>{A||(A=!0,S(),p())}}function s(){i.notify()}function u(){b.onStateChange&&b.onStateChange()}function c(){return a}function d(){r++,n||(n=t.subscribe(u),i=o0e())}function p(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=wk)}function g(){a||(a=!0,d())}function y(){a&&(a=!1,p())}const b={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:u,isSubscribed:c,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>i};return b}var l0e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u0e=l0e(),c0e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f0e=c0e(),d0e=()=>u0e||f0e?G.useLayoutEffect:G.useEffect,h0e=d0e();function Ck(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function p0e(t,e){if(Ck(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Ck(t[n[r]],e[n[r]]))return!1;return!0}var Ow=Symbol.for("react-redux-context"),Lw=typeof globalThis<"u"?globalThis:{};function m0e(){if(!G.createContext)return{};const t=Lw[Ow]??(Lw[Ow]=new Map);let e=t.get(G.createContext);return e||(e=G.createContext(null),t.set(G.createContext,e)),e}var g0e=m0e();function v0e(t){const{children:e,context:n,serverState:i,store:r}=t,a=G.useMemo(()=>{const u=s0e(r);return{store:r,subscription:u,getServerState:i?()=>i:void 0}},[r,i]),o=G.useMemo(()=>r.getState(),[r]);h0e(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==r.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const s=n||g0e;return G.createElement(s.Provider,{value:a},e)}var y0e=v0e,_0e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function b0e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function x0e(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var i of n)if(_0e.has(i)){if(t[i]==null&&e[i]==null)continue;if(!p0e(t[i],e[i]))return!1}else if(!b0e(t[i],e[i]))return!1;return!0}var S0e=(t,e)=>e,xN=Xe([S0e,Ti,aH,$r,VH,hf,spe,da],ppe),SN=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},A9=ul("mouseClick"),M9=Yy();M9.startListening({actionCreator:A9,effect:(t,e)=>{var n=t.payload,i=xN(e.getState(),SN(n));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(ohe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var $R=ul("mouseMove"),w9=Yy(),_x=null;w9.startListening({actionCreator:$R,effect:(t,e)=>{var n=t.payload;_x!==null&&cancelAnimationFrame(_x);var i=SN(n);_x=requestAnimationFrame(()=>{var r=e.getState(),a=lN(r,r.tooltip.settings.shared);if(a==="axis"){var o=xN(r,i);(o==null?void 0:o.activeIndex)!=null?e.dispatch(OH({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(DH())}_x=null})}});function E0e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Rk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},C9=Zo({name:"rootProps",initialState:Rk,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:Rk.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),T0e=C9.reducer,{updateOptions:A0e}=C9.actions,R9=Zo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:M0e}=R9.actions,w0e=R9.reducer,I9=ul("keyDown"),P9=ul("focus"),EN=Yy();EN.startListening({actionCreator:I9,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=uN(r,zg(n),a_(n),l_(n)),s=o==null?-1:Number(o);if(!(!Number.isFinite(s)||s<0)){var u=hf(n);if(a==="Enter"){var c=x1(n,"axis","hover",String(r.index));e.dispatch(qR({active:!r.active,activeIndex:r.index,activeCoordinate:c}));return}var d=Kde(n),p=d==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,y=s+g*p;if(!(u==null||y>=u.length||y<0)){var b=x1(n,"axis","hover",String(y));e.dispatch(qR({active:!0,activeIndex:y.toString(),activeCoordinate:b}))}}}}}});EN.startListening({actionCreator:P9,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var a="0",o=x1(n,"axis","hover",String(a));e.dispatch(qR({active:!0,activeIndex:a,activeCoordinate:o}))}}}});var il=ul("externalEvent"),N9=Yy(),Uw=new Map;N9.startListening({actionCreator:il,effect:(t,e)=>{var{handler:n,reactEvent:i}=t.payload;if(n!=null){i.persist();var r=i.type,a=Uw.get(r);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var s=e.getState(),u={activeCoordinate:jhe(s),activeDataKey:jH(s),activeIndex:Sy(s),activeLabel:WH(s),activeTooltipIndex:Sy(s),isTooltipActive:Xhe(s)};n(u,i)}finally{Uw.delete(r)}});Uw.set(r,o)}}});var C0e=Xe([kg],t=>t.tooltipItemPayloads),R0e=Xe([C0e,s_,(t,e)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(s=>s.settings.graphicalItemId===i);if(r!=null){var{positions:a}=r;if(a!=null){var o=e(a,n);return o}}}),D9=ul("touchMove"),O9=Yy();O9.startListening({actionCreator:D9,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=lN(i,i.tooltip.settings.shared);if(r==="axis"){var a=n.touches[0];if(a==null)return;var o=xN(i,SN({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(OH({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var s,u=n.touches[0];if(document.elementFromPoint==null||u==null)return;var c=document.elementFromPoint(u.clientX,u.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(LV),p=(s=c.getAttribute(UV))!==null&&s!==void 0?s:void 0,g=Bg(i).find(T=>T.id===p);if(d==null||g==null||p==null)return;var{dataKey:y}=g,b=R0e(i,d,p);e.dispatch(NH({activeDataKey:y,activeIndex:d,activeCoordinate:b,activeGraphicalItemId:p}))}}}});var I0e=rV({brush:Kve,cartesianAxis:Wve,chartData:jpe,errorBars:n0e,graphicalItems:pve,layout:Moe,legend:Use,options:Gpe,polarAxis:Age,polarOptions:w0e,referenceElements:Zve,rootProps:T0e,tooltip:she,zIndex:Cpe}),P0e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Jae({reducer:I0e,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([M9.middleware,w9.middleware,EN.middleware,N9.middleware,O9.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(_V({type:"raf"}))},devTools:{serialize:{replacer:E0e},name:"recharts-".concat(n)}})};function N0e(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Md(),a=G.useRef(null);if(r)return n;a.current==null&&(a.current=P0e(e,i));var o=$I;return G.createElement(y0e,{context:o,store:a.current},n)}function D0e(t){var{layout:e,margin:n}=t,i=Xr(),r=Md();return G.useEffect(()=>{r||(i(Eoe(e)),i(Soe(n)))},[i,r,e,n]),null}var O0e=G.memo(D0e,x0e);function L0e(t){var e=Xr();return G.useEffect(()=>{e(A0e(t))},[e,t]),null}function Ik(t){var{zIndex:e,isPanorama:n}=t,i=G.useRef(null),r=Xr();return G.useLayoutEffect(()=>(i.current&&r(Mpe({zIndex:e,element:i.current,isPanorama:n})),()=>{r(wpe({zIndex:e,isPanorama:n}))}),[r,e,n]),G.createElement("g",{tabIndex:-1,ref:i})}function Pk(t){var{children:e,isPanorama:n}=t,i=bn(gpe);if(!i||i.length===0)return e;var r=i.filter(o=>o<0),a=i.filter(o=>o>0);return G.createElement(G.Fragment,null,r.map(o=>G.createElement(Ik,{key:o,zIndex:o,isPanorama:n})),e,a.map(o=>G.createElement(Ik,{key:o,zIndex:o,isPanorama:n})))}var U0e=["children"];function F0e(t,e){if(t==null)return{};var n,i,r=k0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k0e(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function M1(){return M1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},M1.apply(null,arguments)}var B0e={width:"100%",height:"100%",display:"block"},z0e=G.forwardRef((t,e)=>{var n=yse(),i=_se(),r=YV();if(!yd(n)||!yd(i))return null;var{children:a,otherAttributes:o,title:s,desc:u}=t,c,d;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=r?0:void 0,typeof o.role=="string"?d=o.role:d=r?"application":void 0),G.createElement(SG,M1({},o,{title:s,desc:u,role:d,tabIndex:c,width:n,height:i,style:B0e,ref:e}),a)}),G0e=t=>{var{children:e}=t,n=bn(ZE);if(!n)return null;var{width:i,height:r,y:a,x:o}=n;return G.createElement(SG,{width:i,height:r,x:o,y:a},e)},Nk=G.forwardRef((t,e)=>{var{children:n}=t,i=F0e(t,U0e),r=Md();return r?G.createElement(G0e,null,G.createElement(Pk,{isPanorama:!0},n)):G.createElement(z0e,M1({ref:e},i),G.createElement(Pk,{isPanorama:!1},n))});function V0e(){var t=Xr(),[e,n]=G.useState(null),i=bn(Goe);return G.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),a=r.width/e.offsetWidth;Ur(a)&&a!==i&&t(Aoe(a))}},[e,t,i]),n}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function H0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(i){q0e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function q0e(t,e,n){return(e=W0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W0e(t){var e=j0e(t,"string");return typeof e=="symbol"?e:e+""}function j0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rp.apply(null,arguments)}var X0e=()=>(tme(),null);function w1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Y0e=G.forwardRef((t,e)=>{var n,i,r=G.useRef(null),[a,o]=G.useState({containerWidth:w1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:w1((i=t.style)===null||i===void 0?void 0:i.height)}),s=G.useCallback((c,d)=>{o(p=>{var g=Math.round(c),y=Math.round(d);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=G.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:p}=c.getBoundingClientRect();s(d,p);var g=b=>{var{width:T,height:S}=b[0].contentRect;s(T,S)},y=new ResizeObserver(g);y.observe(c),r.current=y}},[e,s]);return G.useEffect(()=>()=>{var c=r.current;c!=null&&c.disconnect()},[s]),G.createElement(G.Fragment,null,G.createElement(tT,{width:a.containerWidth,height:a.containerHeight}),G.createElement("div",rp({ref:u},t)))}),$0e=G.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,a]=G.useState({containerWidth:w1(n),containerHeight:w1(i)}),o=G.useCallback((u,c)=>{a(d=>{var p=Math.round(u),g=Math.round(c);return d.containerWidth===p&&d.containerHeight===g?d:{containerWidth:p,containerHeight:g}})},[]),s=G.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:c,height:d}=u.getBoundingClientRect();o(c,d)}},[e,o]);return G.createElement(G.Fragment,null,G.createElement(tT,{width:r.containerWidth,height:r.containerHeight}),G.createElement("div",rp({ref:s},t)))}),K0e=G.forwardRef((t,e)=>{var{width:n,height:i}=t;return G.createElement(G.Fragment,null,G.createElement(tT,{width:n,height:i}),G.createElement("div",rp({ref:e},t)))}),J0e=G.forwardRef((t,e)=>{var{width:n,height:i}=t;return Jc(n)||Jc(i)?G.createElement($0e,rp({},t,{ref:e})):G.createElement(K0e,rp({},t,{ref:e}))});function Z0e(t){return t===!0?Y0e:J0e}var Q0e=G.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:u,onMouseEnter:c,onMouseLeave:d,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:b,onTouchStart:T,style:S,width:A,responsive:R,dispatchTouchEvents:I=!0}=t,N=G.useRef(null),D=Xr(),[U,k]=G.useState(null),[z,L]=G.useState(null),F=V0e(),j=nP(),W=(j==null?void 0:j.width)>0?j.width:A,X=(j==null?void 0:j.height)>0?j.height:r,Q=G.useCallback(ce=>{F(ce),typeof e=="function"&&e(ce),k(ce),L(ce),ce!=null&&(N.current=ce)},[F,e,k,L]),ae=G.useCallback(ce=>{D(A9(ce)),D(il({handler:a,reactEvent:ce}))},[D,a]),$=G.useCallback(ce=>{D($R(ce)),D(il({handler:c,reactEvent:ce}))},[D,c]),ie=G.useCallback(ce=>{D(DH()),D(il({handler:d,reactEvent:ce}))},[D,d]),me=G.useCallback(ce=>{D($R(ce)),D(il({handler:p,reactEvent:ce}))},[D,p]),pe=G.useCallback(()=>{D(P9())},[D]),de=G.useCallback(ce=>{D(I9(ce.key))},[D]),H=G.useCallback(ce=>{D(il({handler:o,reactEvent:ce}))},[D,o]),ne=G.useCallback(ce=>{D(il({handler:s,reactEvent:ce}))},[D,s]),le=G.useCallback(ce=>{D(il({handler:u,reactEvent:ce}))},[D,u]),ge=G.useCallback(ce=>{D(il({handler:g,reactEvent:ce}))},[D,g]),_e=G.useCallback(ce=>{D(il({handler:T,reactEvent:ce}))},[D,T]),re=G.useCallback(ce=>{I&&D(D9(ce)),D(il({handler:b,reactEvent:ce}))},[D,I,b]),oe=G.useCallback(ce=>{D(il({handler:y,reactEvent:ce}))},[D,y]),Ee=Z0e(R);return G.createElement(QH.Provider,{value:U},G.createElement(wie.Provider,{value:z},G.createElement(Ee,{width:W??(S==null?void 0:S.width),height:X??(S==null?void 0:S.height),className:Lr("recharts-wrapper",i),style:H0e({position:"relative",cursor:"default",width:W,height:X},S),onClick:ae,onContextMenu:H,onDoubleClick:ne,onFocus:pe,onKeyDown:de,onMouseDown:le,onMouseEnter:$,onMouseLeave:ie,onMouseMove:me,onMouseUp:ge,onTouchEnd:oe,onTouchMove:re,onTouchStart:_e,ref:Q},G.createElement(X0e,null),n)))}),eye=["width","height","responsive","children","className","style","compact","title","desc"];function tye(t,e){if(t==null)return{};var n,i,r=nye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nye(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var iye=G.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:a,className:o,style:s,compact:u,title:c,desc:d}=t,p=tye(t,eye),g=lg(p);return u?G.createElement(G.Fragment,null,G.createElement(tT,{width:n,height:i}),G.createElement(Nk,{otherAttributes:g,title:c,desc:d},a)):G.createElement(Q0e,{className:o,style:s,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},G.createElement(Nk,{otherAttributes:g,title:c,desc:d,ref:e},G.createElement(e0e,null,a)))});function rye(t){var e=Xr();return G.useEffect(()=>{e(M0e(t))},[e,t]),null}var aye=["layout"];function KR(){return KR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},KR.apply(null,arguments)}function oye(t,e){if(t==null)return{};var n,i,r=sye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sye(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var lye={top:5,right:5,bottom:5,left:5},L9={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lye,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uye=G.forwardRef(function(e,n){var i,r=Yu(e.categoricalChartProps,L9),{layout:a}=r,o=oye(r,aye),{chartName:s,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:d}=e,p={chartName:s,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return G.createElement(N0e,{preloadedState:{options:p},reduxStoreName:(i=r.id)!==null&&i!==void 0?i:s},G.createElement($ve,{chartData:r.data}),G.createElement(O0e,{layout:a,margin:r.margin}),G.createElement(L0e,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),G.createElement(rye,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),G.createElement(iye,KR({},o,{ref:n})))});function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(i){cye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cye(t,e,n){return(e=fye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fye(t){var e=dye(t,"string");return typeof e=="symbol"?e:e+""}function dye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hye=["item"],pye=Lk(Lk({},L9),{},{layout:"centric",startAngle:0,endAngle:360}),mye=G.forwardRef((t,e)=>{var n=Yu(t,pye);return G.createElement(uye,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hye,tooltipPayloadSearcher:Bpe,categoricalChartProps:n,ref:e})});const gye=async(t,e)=>{const n=await fetch("/api/post-tweet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t.resumen_tweet+(e?`

${e}`:"")})});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to post tweet")}},vye=({active:t,payload:e,lang:n})=>{if(t&&e&&e.length){const i=Pg[n],r=e&&Array.isArray(e)&&e.length>0?e[0]:null;if(!r)return null;const a=r.name===i.transparencyLevel;return ee.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-3 rounded-xl shadow-2xl max-w-[200px]",children:[ee.jsxs("p",{className:"text-sm font-bold mb-1",style:{color:r.fill},children:[r.name,": ",r.value,"%"]}),ee.jsx("p",{className:"text-[10px] text-slate-400 leading-tight",children:a?i.transparencyTooltip:i.opacityTooltip})]})}return null},yye=({data:t,boeId:e,title:n,lang:i,isLoggedIn:r})=>{const a=Pg[i],[o,s]=G.useState(!1),[u,c]=G.useState(!1),[d,p]=G.useState(!1),[g,y]=G.useState(t.tweet_sent||!1);G.useEffect(()=>{y(t.tweet_sent||!1)},[t.tweet_sent]);const b=[{name:a.transparencyLevel,value:t.nivel_transparencia},{name:a.opacityLevel,value:100-t.nivel_transparencia}],T=["#22c55e","#ef4444"],S=`https://www.boe.es/buscar/doc.php?id=${e}`,A=()=>{navigator.clipboard.writeText(`${t.resumen_tweet}

${S}`),s(!0),setTimeout(()=>s(!1),2e3)},R=async()=>{if(!g){p(!0);try{await gye(t,S);const D={...t,tweet_sent:!0};await B0(e,n,D),y(!0)}catch(D){console.error(D),alert("Error posting tweet: "+D.message)}finally{p(!1)}}},I=()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2)),c(!0),setTimeout(()=>c(!1),2e3)},N=()=>{const D=JSON.stringify({boe_id:e,timestamp:new Date().toISOString(),report:t},null,2),U=new Blob([D],{type:"application/json"}),k=URL.createObjectURL(U),z=document.createElement("a");z.href=k,z.download=`Audit_${e}_${new Date().getTime()}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(k)};return ee.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 pb-20",children:[ee.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[ee.jsxs("div",{className:"flex-1 bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl",children:[ee.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ee.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[ee.jsx(x3,{className:"text-emerald-400"}),a.transparencyLevel]}),ee.jsxs("span",{className:`text-4xl font-black ${t.nivel_transparencia<=33?"text-red-400":t.nivel_transparencia<70?"text-amber-400":"text-emerald-400"}`,children:[t.nivel_transparencia,"%"]})]}),ee.jsx("div",{className:"h-48 w-full",children:ee.jsx(mse,{width:"100%",height:"100%",children:ee.jsxs(mye,{children:[ee.jsx(b9,{data:b,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",stroke:"none",children:b.map((D,U)=>ee.jsx(bT,{fill:T[U%T.length]},`cell-${U}`))}),ee.jsx(ume,{content:D=>ee.jsx(vye,{...D,lang:i})})]})})}),ee.jsx("p",{className:"text-slate-400 text-sm mt-4 italic",children:a.transparencyDesc})]}),ee.jsxs("div",{className:"flex-[1.5] bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl flex flex-col",children:[ee.jsxs("div",{className:"flex justify-between items-start mb-4",children:[ee.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[ee.jsx(sY,{className:"text-blue-400"}),a.citizenSummary]}),ee.jsx("div",{className:"flex gap-2",children:ee.jsxs("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded-lg text-sm font-bold transition-all border border-slate-700 hover:border-blue-500/50",children:[ee.jsx(RI,{size:14}),a.viewOfficial]})})]}),ee.jsx("div",{className:"text-slate-200 leading-relaxed text-lg flex-1",children:t.resumen_ciudadano}),ee.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[ee.jsxs("span",{className:"bg-slate-800 px-3 py-1 rounded-full text-xs text-slate-400 font-mono",children:["ID: ",e]}),ee.jsx("span",{className:"bg-emerald-950/40 text-emerald-400 px-3 py-1 rounded-full text-xs border border-emerald-900/50",children:"Gemini 3 Flash"}),t.comunidad_autonoma&&ee.jsxs("span",{className:"bg-blue-950/40 text-blue-400 px-3 py-1 rounded-full text-xs border border-blue-900/50 flex items-center gap-1",children:[ee.jsx(pz,{size:10}),t.comunidad_autonoma]}),t.tipologia&&ee.jsxs("span",{className:"bg-purple-950/40 text-purple-400 px-3 py-1 rounded-full text-xs border border-purple-900/50 flex items-center gap-1",children:[ee.jsx(zC,{size:10}),t.tipologia]}),(()=>{const D=t.nivel_transparencia;let U=a.transparencyAcceptable,k="bg-emerald-950/40 text-emerald-400 border-emerald-900/50";return D<=33?(U=a.transparencyVeryBad,k="bg-red-950/40 text-red-400 border-red-900/50"):D<70&&(U=a.transparencyBad,k="bg-amber-950/40 text-amber-400 border-amber-900/50"),ee.jsx("span",{className:`${k} px-3 py-1 rounded-full text-xs border flex items-center gap-1`,children:U})})()]})]})]}),ee.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl",children:[ee.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4 text-red-400",children:[ee.jsx(CY,{}),a.redFlags]}),ee.jsx("ul",{className:"space-y-3",children:t.banderas_rojas.map((D,U)=>ee.jsxs("li",{className:"flex gap-3 items-start bg-red-950/20 border border-red-900/30 p-3 rounded-lg",children:[ee.jsx("span",{className:"text-red-500 mt-1",children:""}),ee.jsx("span",{className:"text-slate-300 text-sm",children:D})]},U))})]}),ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl",children:[ee.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-6",children:[ee.jsx(MY,{className:"text-purple-400"}),a.impactBalance]}),ee.jsxs("div",{className:"space-y-6",children:[ee.jsxs("div",{children:[ee.jsxs("h4",{className:"text-emerald-400 font-semibold mb-2 flex items-center gap-2 text-sm",children:[ee.jsx(x3,{size:14})," ",a.winners]}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:t.vencedores_vencidos.ganadores.map((D,U)=>ee.jsx("span",{className:"bg-emerald-900/30 text-emerald-100 px-3 py-1 rounded-lg border border-emerald-800/50 text-xs",children:D},U))})]}),ee.jsxs("div",{children:[ee.jsxs("h4",{className:"text-red-400 font-semibold mb-2 flex items-center gap-2 text-sm",children:[ee.jsx($X,{size:14})," ",a.losers]}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:t.vencedores_vencidos.perdedores.map((D,U)=>ee.jsx("span",{className:"bg-red-900/30 text-red-100 px-3 py-1 rounded-lg border border-red-800/50 text-xs",children:D},U))})]})]})]})]}),ee.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[ee.jsxs("div",{className:`${r?"lg:col-span-2":"lg:col-span-3"} bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl`,children:[ee.jsxs("h3",{className:"text-2xl font-bold mb-6 border-b border-slate-800 pb-4 flex items-center gap-3",children:[ee.jsx(TY,{className:"text-amber-400"}),a.criticalAnalysis]}),ee.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap first-letter:text-5xl first-letter:font-bold first-letter:float-left first-letter:mr-3 first-letter:mt-1",children:t.analisis_critico})]}),r&&ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl flex flex-col",children:[ee.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-emerald-400",children:[ee.jsx(dz,{size:20}),a.jsonExportTitle]}),ee.jsx("div",{className:"bg-slate-950 rounded-xl border border-slate-800 p-4 font-mono text-[10px] overflow-auto max-h-[300px] custom-scrollbar text-emerald-500/80 mb-4 flex-1",children:ee.jsx("pre",{children:JSON.stringify(t,null,2)})}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsxs("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-bold text-xs transition-all",children:[u?ee.jsx(QA,{size:14,className:"text-emerald-500"}):ee.jsx(S3,{size:14}),a.copyJson]}),ee.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-xl font-bold text-xs transition-all",children:[ee.jsx(fz,{size:14}),a.downloadJson]})]})]})]}),ee.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-4 shadow-xl max-w-2xl",children:[ee.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ee.jsxs("h4",{className:"text-sm font-bold flex items-center gap-2 text-slate-300",children:[ee.jsx(IY,{size:14,className:"text-blue-400"}),a.tweetSummaryTitle]}),ee.jsx("button",{onClick:A,className:"text-slate-500 hover:text-white transition-colors",children:o?ee.jsx(QA,{size:14,className:"text-emerald-500"}):ee.jsx(S3,{size:14})})]}),ee.jsxs("div",{className:"bg-slate-950 p-3 rounded-lg border border-slate-800 text-xs text-slate-400 leading-relaxed italic mb-3",children:['"',t.resumen_tweet,ee.jsx("br",{}),ee.jsx("br",{}),S,'"']}),ee.jsxs("button",{onClick:R,disabled:g||d||!r,className:`w-full py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all ${g?"bg-emerald-900/30 text-emerald-400 cursor-not-allowed border border-emerald-900/50":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20"}`,children:[d?ee.jsx(hz,{size:14,className:"animate-spin"}):g?ee.jsx(QA,{size:14}):ee.jsx(bY,{size:14}),g?"Tweet Enviado":"Publicar Tweet"]})]})]})},AS=({title:t,description:e,keywords:n=[]})=>(G.useEffect(()=>{document.title=t;const i=(a,o)=>{let s=document.querySelector(`meta[name="${a}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",a),document.head.appendChild(s)),s.setAttribute("content",o)};i("description",e),n.length>0&&i("keywords",n.join(", "));const r=(a,o)=>{let s=document.querySelector(`meta[property="${a}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",a),document.head.appendChild(s)),s.setAttribute("content",o)};r("og:title",t),r("og:description",e)},[t,e,n]),null),_ye=({performAudit:t,state:e,t:n,isLoggedIn:i,searchId:r,lang:a,resetState:o,history:s,isHistoryLoaded:u})=>{const{boeId:c}=Dj(),d=wg(),p=s.find(y=>y.boeId===(c||r)),g=(p==null?void 0:p.title)||c||"BOE Document";if(G.useEffect(()=>{c&&u&&t(c)},[c,i,u]),e.error)return ee.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 p-8 rounded-3xl flex flex-col items-center gap-4 text-red-200 mt-8",children:[ee.jsx(jX,{className:"text-red-500",size:64}),ee.jsx("h3",{className:"font-bold text-2xl",children:n.errorTitle}),ee.jsx("p",{className:"text-slate-400",children:e.error}),ee.jsx("button",{onClick:()=>c&&t(c),className:"bg-slate-800 hover:bg-slate-700 px-10 py-3 rounded-xl font-bold",children:n.retryBtn})]});if(e.loading||!u)return ee.jsxs("div",{className:"flex flex-col items-center justify-center py-24 space-y-6",children:[ee.jsx("div",{className:"w-16 h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"}),ee.jsxs("div",{className:"text-center space-y-2",children:[ee.jsx("h2",{className:"text-2xl font-bold",children:u?n.decodingOpacity:"Cargando historial..."}),ee.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:u?n.processingGemini:"Verificando auditoras previas"})]})]});if(e.result){const y=["BOE",r,"Auditora","Transparencia",...e.result.banderas_rojas||[],e.result.tipologia,e.result.comunidad_autonoma].filter(b=>!!b);return ee.jsxs("div",{className:"space-y-6",children:[ee.jsx(AS,{title:`Auditora ${r} - ${g}`,description:e.result.resumen_tweet||e.result.resumen_ciudadano.substring(0,160),keywords:y}),ee.jsxs("button",{onClick:()=>d("/"),className:"flex items-center gap-2 bg-slate-900 border border-slate-800 px-6 py-3 rounded-xl text-slate-300 hover:bg-slate-800 transition-all",children:[ee.jsx(uz,{size:18})," ",n.backToHome]}),ee.jsx(yye,{data:e.result,boeId:r,title:g,lang:a,isLoggedIn:i})]})}return null};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const f_="182",Lh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Uh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},U9=0,JR=1,F9=2,bye=3,k9=0,og=1,X0=2,Vh=3,af=0,yo=1,Vl=2,Vu=0,$h=1,C1=2,ZR=3,QR=4,B9=5,cd=100,z9=101,G9=102,V9=103,H9=104,q9=200,W9=201,j9=202,X9=203,R1=204,I1=205,Y9=206,$9=207,K9=208,J9=209,Z9=210,Q9=211,eq=212,tq=213,nq=214,P1=0,N1=1,D1=2,ap=3,O1=4,L1=5,U1=6,F1=7,d_=0,iq=1,rq=2,ol=0,TN=1,AN=2,MN=3,TT=4,wN=5,CN=6,RN=7,eI="attached",aq="detached",AT=300,qu=301,xd=302,Ty=303,Ay=304,Gg=306,My=1e3,Jo=1001,wy=1002,br=1003,IN=1004,xye=1004,Qm=1005,Sye=1005,mi=1006,Y0=1007,Eye=1007,Bu=1008,Tye=1008,po=1009,PN=1010,NN=1011,pg=1012,MT=1013,fl=1014,vo=1015,Wu=1016,wT=1017,CT=1018,mg=1020,DN=35902,ON=35899,LN=1021,UN=1022,ja=1023,ju=1026,hd=1027,RT=1028,h_=1029,op=1030,IT=1031,Aye=1032,PT=1033,$0=33776,K0=33777,J0=33778,Z0=33779,k1=35840,B1=35841,z1=35842,G1=35843,V1=36196,H1=37492,q1=37496,W1=37488,j1=37489,X1=37490,Y1=37491,$1=37808,K1=37809,J1=37810,Z1=37811,Q1=37812,eE=37813,tE=37814,nE=37815,iE=37816,rE=37817,aE=37818,oE=37819,sE=37820,lE=37821,uE=36492,cE=36494,fE=36495,dE=36283,hE=36284,pE=36285,mE=36286,oq=2200,sq=2201,lq=2202,Cy=2300,gE=2301,MS=2302,Hh=2400,qh=2401,Ry=2402,NT=2500,FN=2501,Mye=0,wye=1,Cye=2,uq=3200,cq=3201,Rye=3202,Iye=3203,Nd=0,fq=1,zc="",qa="srgb",Sd="srgb-linear",Iy="linear",ni="srgb",Pye="",Nye="rg",Dye="ga",Oye=0,Fh=7680,Lye=7681,Uye=7682,Fye=7683,kye=34055,Bye=34056,zye=5386,Gye=512,Vye=513,Hye=514,qye=515,Wye=516,jye=517,Xye=518,tI=519,dq=512,hq=513,pq=514,DT=515,mq=516,gq=517,OT=518,vq=519,Py=35044,Yye=35048,$ye=35040,Kye=35045,Jye=35049,Zye=35041,Qye=35046,e_e=35050,t_e=35042,n_e="100",nI="300 es",gs=2e3,gg=2001,i_e={COMPUTE:"compute",RENDER:"render"},r_e={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},a_e={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function yq(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const o_e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function eg(t,e){return new o_e[t](e)}function _q(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ny(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function bq(){const t=Ny("canvas");return t.style.display="block",t}const Uk={};let Ed=null;function s_e(t){Ed=t}function l_e(){return Ed}function Dy(...t){const e="THREE."+t.shift();Ed?Ed("log",e,...t):console.log(e,...t)}function Mt(...t){const e="THREE."+t.shift();Ed?Ed("warn",e,...t):console.warn(e,...t)}function Ht(...t){const e="THREE."+t.shift();Ed?Ed("error",e,...t):console.error(e,...t)}function vg(...t){const e=t.join(" ");e in Uk||(Uk[e]=!0,Mt(...t))}function u_e(t,e,n){return new Promise(function(i,r){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}let $u=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e);e.target=null}}};const Ga=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Fk=1234567;const Kh=Math.PI/180,yg=180/Math.PI;function _s(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ga[t&255]+Ga[t>>8&255]+Ga[t>>16&255]+Ga[t>>24&255]+"-"+Ga[e&255]+Ga[e>>8&255]+"-"+Ga[e>>16&15|64]+Ga[e>>24&255]+"-"+Ga[n&63|128]+Ga[n>>8&255]+"-"+Ga[n>>16&255]+Ga[n>>24&255]+Ga[i&255]+Ga[i>>8&255]+Ga[i>>16&255]+Ga[i>>24&255]).toLowerCase()}function Qt(t,e,n){return Math.max(e,Math.min(n,t))}function kN(t,e){return(t%e+e)%e}function c_e(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function f_e(t,e,n){return t!==e?(n-t)/(e-t):0}function Q0(t,e,n){return(1-n)*t+n*e}function d_e(t,e,n,i){return Q0(t,e,1-Math.exp(-n*i))}function h_e(t,e=1){return e-Math.abs(kN(t,e*2)-e)}function p_e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function m_e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function g_e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function v_e(t,e){return t+Math.random()*(e-t)}function y_e(t){return t*(.5-Math.random())}function __e(t){t!==void 0&&(Fk=t);let e=Fk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function b_e(t){return t*Kh}function x_e(t){return t*yg}function S_e(t){return(t&t-1)===0&&t!==0}function E_e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function T_e(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function A_e(t,e,n,i,r){const a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),c=a((e+i)/2),d=o((e+i)/2),p=a((e-i)/2),g=o((e-i)/2),y=a((i-e)/2),b=o((i-e)/2);switch(r){case"XYX":t.set(s*d,u*p,u*g,s*c);break;case"YZY":t.set(u*g,s*d,u*p,s*c);break;case"ZXZ":t.set(u*p,u*g,s*d,s*c);break;case"XZX":t.set(s*d,u*b,u*y,s*c);break;case"YXY":t.set(u*y,s*d,u*b,s*c);break;case"ZYZ":t.set(u*b,u*y,s*d,s*c);break;default:Mt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function mo(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function gn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const xq={DEG2RAD:Kh,RAD2DEG:yg,generateUUID:_s,clamp:Qt,euclideanModulo:kN,mapLinear:c_e,inverseLerp:f_e,lerp:Q0,damp:d_e,pingpong:h_e,smoothstep:p_e,smootherstep:m_e,randInt:g_e,randFloat:v_e,randFloatSpread:y_e,seededRandom:__e,degToRad:b_e,radToDeg:x_e,isPowerOfTwo:S_e,ceilPowerOfTwo:E_e,floorPowerOfTwo:T_e,setQuaternionFromProperEuler:A_e,normalize:gn,denormalize:mo};class st{constructor(e=0,n=0){st.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Qt(this.x,e.x,n.x),this.y=Qt(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Qt(this.x,e,n),this.y=Qt(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*i-o*r+e.x,this.y=a*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xa{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,o,s){let u=i[r+0],c=i[r+1],d=i[r+2],p=i[r+3],g=a[o+0],y=a[o+1],b=a[o+2],T=a[o+3];if(s<=0){e[n+0]=u,e[n+1]=c,e[n+2]=d,e[n+3]=p;return}if(s>=1){e[n+0]=g,e[n+1]=y,e[n+2]=b,e[n+3]=T;return}if(p!==T||u!==g||c!==y||d!==b){let S=u*g+c*y+d*b+p*T;S<0&&(g=-g,y=-y,b=-b,T=-T,S=-S);let A=1-s;if(S<.9995){const R=Math.acos(S),I=Math.sin(R);A=Math.sin(A*R)/I,s=Math.sin(s*R)/I,u=u*A+g*s,c=c*A+y*s,d=d*A+b*s,p=p*A+T*s}else{u=u*A+g*s,c=c*A+y*s,d=d*A+b*s,p=p*A+T*s;const R=1/Math.sqrt(u*u+c*c+d*d+p*p);u*=R,c*=R,d*=R,p*=R}}e[n]=u,e[n+1]=c,e[n+2]=d,e[n+3]=p}static multiplyQuaternionsFlat(e,n,i,r,a,o){const s=i[r],u=i[r+1],c=i[r+2],d=i[r+3],p=a[o],g=a[o+1],y=a[o+2],b=a[o+3];return e[n]=s*b+d*p+u*y-c*g,e[n+1]=u*b+d*g+c*p-s*y,e[n+2]=c*b+d*y+s*g-u*p,e[n+3]=d*b-s*p-u*g-c*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,a=e._z,o=e._order,s=Math.cos,u=Math.sin,c=s(i/2),d=s(r/2),p=s(a/2),g=u(i/2),y=u(r/2),b=u(a/2);switch(o){case"XYZ":this._x=g*d*p+c*y*b,this._y=c*y*p-g*d*b,this._z=c*d*b+g*y*p,this._w=c*d*p-g*y*b;break;case"YXZ":this._x=g*d*p+c*y*b,this._y=c*y*p-g*d*b,this._z=c*d*b-g*y*p,this._w=c*d*p+g*y*b;break;case"ZXY":this._x=g*d*p-c*y*b,this._y=c*y*p+g*d*b,this._z=c*d*b+g*y*p,this._w=c*d*p-g*y*b;break;case"ZYX":this._x=g*d*p-c*y*b,this._y=c*y*p+g*d*b,this._z=c*d*b-g*y*p,this._w=c*d*p+g*y*b;break;case"YZX":this._x=g*d*p+c*y*b,this._y=c*y*p+g*d*b,this._z=c*d*b-g*y*p,this._w=c*d*p-g*y*b;break;case"XZY":this._x=g*d*p-c*y*b,this._y=c*y*p-g*d*b,this._z=c*d*b+g*y*p,this._w=c*d*p+g*y*b;break;default:Mt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],u=n[9],c=n[2],d=n[6],p=n[10],g=i+s+p;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(d-u)*y,this._y=(a-c)*y,this._z=(o-r)*y}else if(i>s&&i>p){const y=2*Math.sqrt(1+i-s-p);this._w=(d-u)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(a+c)/y}else if(s>p){const y=2*Math.sqrt(1+s-i-p);this._w=(a-c)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(u+d)/y}else{const y=2*Math.sqrt(1+p-i-s);this._w=(o-r)/y,this._x=(a+c)/y,this._y=(u+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,o=e._w,s=n._x,u=n._y,c=n._z,d=n._w;return this._x=i*d+o*s+r*c-a*u,this._y=r*d+o*u+a*s-i*c,this._z=a*d+o*c+i*u-r*s,this._w=o*d-i*s-r*u-a*c,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,o=e._w,s=this.dot(e);s<0&&(i=-i,r=-r,a=-a,o=-o,s=-s);let u=1-n;if(s<.9995){const c=Math.acos(s),d=Math.sin(c);u=Math.sin(u*c)/d,n=Math.sin(n*c)/d,this._x=this._x*u+i*n,this._y=this._y*u+r*n,this._z=this._z*u+a*n,this._w=this._w*u+o*n,this._onChangeCallback()}else this._x=this._x*u+i*n,this._y=this._y*u+r*n,this._z=this._z*u+a*n,this._w=this._w*u+o*n,this.normalize();return this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,n=0,i=0){se.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(kk.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(kk.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,o=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*o,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*o,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,o=e.y,s=e.z,u=e.w,c=2*(o*r-s*i),d=2*(s*n-a*r),p=2*(a*i-o*n);return this.x=n+u*c+o*p-s*d,this.y=i+u*d+s*c-a*p,this.z=r+u*p+a*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Qt(this.x,e.x,n.x),this.y=Qt(this.y,e.y,n.y),this.z=Qt(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Qt(this.x,e,n),this.y=Qt(this.y,e,n),this.z=Qt(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,o=n.x,s=n.y,u=n.z;return this.x=r*u-a*s,this.y=a*o-i*u,this.z=i*s-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Fw.copy(this).projectOnVector(e),this.sub(Fw)}reflect(e){return this.sub(Fw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Fw=new se,kk=new Xa;class un{constructor(e,n,i,r,a,o,s,u,c){un.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,o,s,u,c)}set(e,n,i,r,a,o,s,u,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=s,d[3]=n,d[4]=a,d[5]=u,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,o=i[0],s=i[3],u=i[6],c=i[1],d=i[4],p=i[7],g=i[2],y=i[5],b=i[8],T=r[0],S=r[3],A=r[6],R=r[1],I=r[4],N=r[7],D=r[2],U=r[5],k=r[8];return a[0]=o*T+s*R+u*D,a[3]=o*S+s*I+u*U,a[6]=o*A+s*N+u*k,a[1]=c*T+d*R+p*D,a[4]=c*S+d*I+p*U,a[7]=c*A+d*N+p*k,a[2]=g*T+y*R+b*D,a[5]=g*S+y*I+b*U,a[8]=g*A+y*N+b*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],d=e[8];return n*o*d-n*s*c-i*a*d+i*s*u+r*a*c-r*o*u}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],d=e[8],p=d*o-s*c,g=s*u-d*a,y=c*a-o*u,b=n*p+i*g+r*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/b;return e[0]=p*T,e[1]=(r*c-d*i)*T,e[2]=(s*i-r*o)*T,e[3]=g*T,e[4]=(d*n-r*u)*T,e[5]=(r*a-s*n)*T,e[6]=y*T,e[7]=(i*u-c*n)*T,e[8]=(o*n-i*a)*T,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,o,s){const u=Math.cos(a),c=Math.sin(a);return this.set(i*u,i*c,-i*(u*o+c*s)+o+e,-r*c,r*u,-r*(-c*o+u*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(kw.makeScale(e,n)),this}rotate(e){return this.premultiply(kw.makeRotation(-e)),this}translate(e,n){return this.premultiply(kw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const kw=new un,Bk=new un().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),zk=new un().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function M_e(){const t={enabled:!0,workingColorSpace:Sd,spaces:{},convert:function(r,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===ni&&(r.r=jc(r.r),r.g=jc(r.g),r.b=jc(r.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ni&&(r.r=sg(r.r),r.g=sg(r.g),r.b=sg(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===zc?Iy:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,o){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return vg("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return vg("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Sd]:{primaries:e,whitePoint:i,transfer:Iy,toXYZ:Bk,fromXYZ:zk,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:qa},outputColorSpaceConfig:{drawingBufferColorSpace:qa}},[qa]:{primaries:e,whitePoint:i,transfer:ni,toXYZ:Bk,fromXYZ:zk,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:qa}}}),t}const Fn=M_e();function jc(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function sg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Sm;class Sq{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Sm===void 0&&(Sm=Ny("canvas")),Sm.width=e.width,Sm.height=e.height;const r=Sm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Sm}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Ny("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let o=0;o<a.length;o++)a[o]=jc(a[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(jc(n[i]/255)*255):n[i]=jc(n[i]);return{data:n,width:e.width,height:e.height}}else return Mt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let w_e=0;class pd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:w_e++}),this.uuid=_s(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):typeof VideoFrame<"u"&&n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let o=0,s=r.length;o<s;o++)r[o].isDataTexture?a.push(Bw(r[o].image)):a.push(Bw(r[o]))}else a=Bw(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function Bw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Sq.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(Mt("Texture: Unable to serialize Texture."),{})}let C_e=0;const zw=new se;class Qi extends $u{constructor(e=Qi.DEFAULT_IMAGE,n=Qi.DEFAULT_MAPPING,i=Jo,r=Jo,a=mi,o=Bu,s=ja,u=po,c=Qi.DEFAULT_ANISOTROPY,d=zc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C_e++}),this.uuid=_s(),this.name="",this.source=new pd(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=o,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=u,this.offset=new st(0,0),this.repeat=new st(1,1),this.center=new st(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(zw).x}get height(){return this.source.getSize(zw).y}get depth(){return this.source.getSize(zw).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){Mt(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){Mt(`Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==AT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case My:e.x=e.x-Math.floor(e.x);break;case Jo:e.x=e.x<0?0:1;break;case wy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case My:e.y=e.y-Math.floor(e.y);break;case Jo:e.y=e.y<0?0:1;break;case wy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Qi.DEFAULT_IMAGE=null;Qi.DEFAULT_MAPPING=AT;Qi.DEFAULT_ANISOTROPY=1;class ri{constructor(e=0,n=0,i=0,r=1){ri.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*a,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*a,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*a,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const u=e.elements,c=u[0],d=u[4],p=u[8],g=u[1],y=u[5],b=u[9],T=u[2],S=u[6],A=u[10];if(Math.abs(d-g)<.01&&Math.abs(p-T)<.01&&Math.abs(b-S)<.01){if(Math.abs(d+g)<.1&&Math.abs(p+T)<.1&&Math.abs(b+S)<.1&&Math.abs(c+y+A-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const I=(c+1)/2,N=(y+1)/2,D=(A+1)/2,U=(d+g)/4,k=(p+T)/4,z=(b+S)/4;return I>N&&I>D?I<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(I),r=U/i,a=k/i):N>D?N<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(N),i=U/r,a=z/r):D<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(D),i=k/a,r=z/a),this.set(i,r,a,n),this}let R=Math.sqrt((S-b)*(S-b)+(p-T)*(p-T)+(g-d)*(g-d));return Math.abs(R)<.001&&(R=1),this.x=(S-b)/R,this.y=(p-T)/R,this.z=(g-d)/R,this.w=Math.acos((c+y+A-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Qt(this.x,e.x,n.x),this.y=Qt(this.y,e.y,n.y),this.z=Qt(this.z,e.z,n.z),this.w=Qt(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Qt(this.x,e,n),this.y=Qt(this.y,e,n),this.z=Qt(this.z,e,n),this.w=Qt(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class BN extends $u{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new ri(0,0,e,n),this.scissorTest=!1,this.viewport=new ri(0,0,e,n);const r={width:e,height:n,depth:i.depth},a=new Qi(r);this.textures=[];const o=i.count;for(let s=0;s<o;s++)this.textures[s]=a.clone(),this.textures[s].isRenderTargetTexture=!0,this.textures[s].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:mi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new pd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bs extends BN{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class LT extends Qi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=br,this.minFilter=br,this.wrapR=Jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class R_e extends bs{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new LT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class UT extends Qi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=br,this.minFilter=br,this.wrapR=Jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class I_e extends bs{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new UT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ua{constructor(e=new se(1/0,1/0,1/0),n=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Ol.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Ol.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Ol.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)e.isMesh===!0?e.getVertexPosition(o,Ol):Ol.fromBufferAttribute(a,o),Ol.applyMatrix4(e.matrixWorld),this.expandByPoint(Ol);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bx.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),bx.copy(i.boundingBox)),bx.applyMatrix4(e.matrixWorld),this.union(bx)}const r=e.children;for(let a=0,o=r.length;a<o;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ol),Ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(E0),xx.subVectors(this.max,E0),Em.subVectors(e.a,E0),Tm.subVectors(e.b,E0),Am.subVectors(e.c,E0),td.subVectors(Tm,Em),nd.subVectors(Am,Tm),gh.subVectors(Em,Am);let n=[0,-td.z,td.y,0,-nd.z,nd.y,0,-gh.z,gh.y,td.z,0,-td.x,nd.z,0,-nd.x,gh.z,0,-gh.x,-td.y,td.x,0,-nd.y,nd.x,0,-gh.y,gh.x,0];return!Gw(n,Em,Tm,Am,xx)||(n=[1,0,0,0,1,0,0,0,1],!Gw(n,Em,Tm,Am,xx))?!1:(Sx.crossVectors(td,nd),n=[Sx.x,Sx.y,Sx.z],Gw(n,Em,Tm,Am,xx))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ol).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ic[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ic[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ic[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ic[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ic[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ic[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ic[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ic[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ic),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Ic=[new se,new se,new se,new se,new se,new se,new se,new se],Ol=new se,bx=new ua,Em=new se,Tm=new se,Am=new se,td=new se,nd=new se,gh=new se,E0=new se,xx=new se,Sx=new se,vh=new se;function Gw(t,e,n,i,r){for(let a=0,o=t.length-3;a<=o;a+=3){vh.fromArray(t,a);const s=r.x*Math.abs(vh.x)+r.y*Math.abs(vh.y)+r.z*Math.abs(vh.z),u=e.dot(vh),c=n.dot(vh),d=i.dot(vh);if(Math.max(-Math.max(u,c,d),Math.min(u,c,d))>s)return!1}return!0}const P_e=new ua,T0=new se,Vw=new se;class ca{constructor(e=new se,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):P_e.setFromPoints(e).getCenter(i);let r=0;for(let a=0,o=e.length;a<o;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;T0.subVectors(e,this.center);const n=T0.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(T0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Vw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(T0.copy(e.center).add(Vw)),this.expandByPoint(T0.copy(e.center).sub(Vw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Pc=new se,Hw=new se,Ex=new se,id=new se,qw=new se,Tx=new se,Ww=new se;class mp{constructor(e=new se,n=new se(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Pc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Pc.copy(this.origin).addScaledVector(this.direction,n),Pc.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){Hw.copy(e).add(n).multiplyScalar(.5),Ex.copy(n).sub(e).normalize(),id.copy(this.origin).sub(Hw);const a=e.distanceTo(n)*.5,o=-this.direction.dot(Ex),s=id.dot(this.direction),u=-id.dot(Ex),c=id.lengthSq(),d=Math.abs(1-o*o);let p,g,y,b;if(d>0)if(p=o*u-s,g=o*s-u,b=a*d,p>=0)if(g>=-b)if(g<=b){const T=1/d;p*=T,g*=T,y=p*(p+o*g+2*s)+g*(o*p+g+2*u)+c}else g=a,p=Math.max(0,-(o*g+s)),y=-p*p+g*(g+2*u)+c;else g=-a,p=Math.max(0,-(o*g+s)),y=-p*p+g*(g+2*u)+c;else g<=-b?(p=Math.max(0,-(-o*a+s)),g=p>0?-a:Math.min(Math.max(-a,-u),a),y=-p*p+g*(g+2*u)+c):g<=b?(p=0,g=Math.min(Math.max(-a,-u),a),y=g*(g+2*u)+c):(p=Math.max(0,-(o*a+s)),g=p>0?a:Math.min(Math.max(-a,-u),a),y=-p*p+g*(g+2*u)+c);else g=o>0?-a:a,p=Math.max(0,-(o*g+s)),y=-p*p+g*(g+2*u)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(Hw).addScaledVector(Ex,g),y}intersectSphere(e,n){Pc.subVectors(e.center,this.origin);const i=Pc.dot(this.direction),r=Pc.dot(Pc)-i*i,a=e.radius*e.radius;if(r>a)return null;const o=Math.sqrt(a-r),s=i-o,u=i+o;return u<0?null:s<0?this.at(u,n):this.at(s,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,o,s,u;const c=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,g=this.origin;return c>=0?(i=(e.min.x-g.x)*c,r=(e.max.x-g.x)*c):(i=(e.max.x-g.x)*c,r=(e.min.x-g.x)*c),d>=0?(a=(e.min.y-g.y)*d,o=(e.max.y-g.y)*d):(a=(e.max.y-g.y)*d,o=(e.min.y-g.y)*d),i>o||a>r||((a>i||isNaN(i))&&(i=a),(o<r||isNaN(r))&&(r=o),p>=0?(s=(e.min.z-g.z)*p,u=(e.max.z-g.z)*p):(s=(e.max.z-g.z)*p,u=(e.min.z-g.z)*p),i>u||s>r)||((s>i||i!==i)&&(i=s),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Pc)!==null}intersectTriangle(e,n,i,r,a){qw.subVectors(n,e),Tx.subVectors(i,e),Ww.crossVectors(qw,Tx);let o=this.direction.dot(Ww),s;if(o>0){if(r)return null;s=1}else if(o<0)s=-1,o=-o;else return null;id.subVectors(this.origin,e);const u=s*this.direction.dot(Tx.crossVectors(id,Tx));if(u<0)return null;const c=s*this.direction.dot(qw.cross(id));if(c<0||u+c>o)return null;const d=-s*id.dot(Ww);return d<0?null:this.at(d/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class en{constructor(e,n,i,r,a,o,s,u,c,d,p,g,y,b,T,S){en.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,o,s,u,c,d,p,g,y,b,T,S)}set(e,n,i,r,a,o,s,u,c,d,p,g,y,b,T,S){const A=this.elements;return A[0]=e,A[4]=n,A[8]=i,A[12]=r,A[1]=a,A[5]=o,A[9]=s,A[13]=u,A[2]=c,A[6]=d,A[10]=p,A[14]=g,A[3]=y,A[7]=b,A[11]=T,A[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new en().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return this.determinant()===0?(e.set(1,0,0),n.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const n=this.elements,i=e.elements,r=1/Mm.setFromMatrixColumn(e,0).length(),a=1/Mm.setFromMatrixColumn(e,1).length(),o=1/Mm.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,o=Math.cos(i),s=Math.sin(i),u=Math.cos(r),c=Math.sin(r),d=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const g=o*d,y=o*p,b=s*d,T=s*p;n[0]=u*d,n[4]=-u*p,n[8]=c,n[1]=y+b*c,n[5]=g-T*c,n[9]=-s*u,n[2]=T-g*c,n[6]=b+y*c,n[10]=o*u}else if(e.order==="YXZ"){const g=u*d,y=u*p,b=c*d,T=c*p;n[0]=g+T*s,n[4]=b*s-y,n[8]=o*c,n[1]=o*p,n[5]=o*d,n[9]=-s,n[2]=y*s-b,n[6]=T+g*s,n[10]=o*u}else if(e.order==="ZXY"){const g=u*d,y=u*p,b=c*d,T=c*p;n[0]=g-T*s,n[4]=-o*p,n[8]=b+y*s,n[1]=y+b*s,n[5]=o*d,n[9]=T-g*s,n[2]=-o*c,n[6]=s,n[10]=o*u}else if(e.order==="ZYX"){const g=o*d,y=o*p,b=s*d,T=s*p;n[0]=u*d,n[4]=b*c-y,n[8]=g*c+T,n[1]=u*p,n[5]=T*c+g,n[9]=y*c-b,n[2]=-c,n[6]=s*u,n[10]=o*u}else if(e.order==="YZX"){const g=o*u,y=o*c,b=s*u,T=s*c;n[0]=u*d,n[4]=T-g*p,n[8]=b*p+y,n[1]=p,n[5]=o*d,n[9]=-s*d,n[2]=-c*d,n[6]=y*p+b,n[10]=g-T*p}else if(e.order==="XZY"){const g=o*u,y=o*c,b=s*u,T=s*c;n[0]=u*d,n[4]=-p,n[8]=c*d,n[1]=g*p+T,n[5]=o*d,n[9]=y*p-b,n[2]=b*p-y,n[6]=s*d,n[10]=T*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(N_e,e,D_e)}lookAt(e,n,i){const r=this.elements;return cs.subVectors(e,n),cs.lengthSq()===0&&(cs.z=1),cs.normalize(),rd.crossVectors(i,cs),rd.lengthSq()===0&&(Math.abs(i.z)===1?cs.x+=1e-4:cs.z+=1e-4,cs.normalize(),rd.crossVectors(i,cs)),rd.normalize(),Ax.crossVectors(cs,rd),r[0]=rd.x,r[4]=Ax.x,r[8]=cs.x,r[1]=rd.y,r[5]=Ax.y,r[9]=cs.y,r[2]=rd.z,r[6]=Ax.z,r[10]=cs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,o=i[0],s=i[4],u=i[8],c=i[12],d=i[1],p=i[5],g=i[9],y=i[13],b=i[2],T=i[6],S=i[10],A=i[14],R=i[3],I=i[7],N=i[11],D=i[15],U=r[0],k=r[4],z=r[8],L=r[12],F=r[1],j=r[5],W=r[9],X=r[13],Q=r[2],ae=r[6],$=r[10],ie=r[14],me=r[3],pe=r[7],de=r[11],H=r[15];return a[0]=o*U+s*F+u*Q+c*me,a[4]=o*k+s*j+u*ae+c*pe,a[8]=o*z+s*W+u*$+c*de,a[12]=o*L+s*X+u*ie+c*H,a[1]=d*U+p*F+g*Q+y*me,a[5]=d*k+p*j+g*ae+y*pe,a[9]=d*z+p*W+g*$+y*de,a[13]=d*L+p*X+g*ie+y*H,a[2]=b*U+T*F+S*Q+A*me,a[6]=b*k+T*j+S*ae+A*pe,a[10]=b*z+T*W+S*$+A*de,a[14]=b*L+T*X+S*ie+A*H,a[3]=R*U+I*F+N*Q+D*me,a[7]=R*k+I*j+N*ae+D*pe,a[11]=R*z+I*W+N*$+D*de,a[15]=R*L+I*X+N*ie+D*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],o=e[1],s=e[5],u=e[9],c=e[13],d=e[2],p=e[6],g=e[10],y=e[14],b=e[3],T=e[7],S=e[11],A=e[15],R=u*y-c*g,I=s*y-c*p,N=s*g-u*p,D=o*y-c*d,U=o*g-u*d,k=o*p-s*d;return n*(T*R-S*I+A*N)-i*(b*R-S*D+A*U)+r*(b*I-T*D+A*k)-a*(b*N-T*U+S*k)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],d=e[8],p=e[9],g=e[10],y=e[11],b=e[12],T=e[13],S=e[14],A=e[15],R=p*S*c-T*g*c+T*u*y-s*S*y-p*u*A+s*g*A,I=b*g*c-d*S*c-b*u*y+o*S*y+d*u*A-o*g*A,N=d*T*c-b*p*c+b*s*y-o*T*y-d*s*A+o*p*A,D=b*p*u-d*T*u-b*s*g+o*T*g+d*s*S-o*p*S,U=n*R+i*I+r*N+a*D;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/U;return e[0]=R*k,e[1]=(T*g*a-p*S*a-T*r*y+i*S*y+p*r*A-i*g*A)*k,e[2]=(s*S*a-T*u*a+T*r*c-i*S*c-s*r*A+i*u*A)*k,e[3]=(p*u*a-s*g*a-p*r*c+i*g*c+s*r*y-i*u*y)*k,e[4]=I*k,e[5]=(d*S*a-b*g*a+b*r*y-n*S*y-d*r*A+n*g*A)*k,e[6]=(b*u*a-o*S*a-b*r*c+n*S*c+o*r*A-n*u*A)*k,e[7]=(o*g*a-d*u*a+d*r*c-n*g*c-o*r*y+n*u*y)*k,e[8]=N*k,e[9]=(b*p*a-d*T*a-b*i*y+n*T*y+d*i*A-n*p*A)*k,e[10]=(o*T*a-b*s*a+b*i*c-n*T*c-o*i*A+n*s*A)*k,e[11]=(d*s*a-o*p*a-d*i*c+n*p*c+o*i*y-n*s*y)*k,e[12]=D*k,e[13]=(d*T*r-b*p*r+b*i*g-n*T*g-d*i*S+n*p*S)*k,e[14]=(b*s*r-o*T*r-b*i*u+n*T*u+o*i*S-n*s*S)*k,e[15]=(o*p*r-d*s*r+d*i*u-n*p*u-o*i*g+n*s*g)*k,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,o=e.x,s=e.y,u=e.z,c=a*o,d=a*s;return this.set(c*o+i,c*s-r*u,c*u+r*s,0,c*s+r*u,d*s+i,d*u-r*o,0,c*u-r*s,d*u+r*o,a*u*u+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,o){return this.set(1,i,a,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,o=n._y,s=n._z,u=n._w,c=a+a,d=o+o,p=s+s,g=a*c,y=a*d,b=a*p,T=o*d,S=o*p,A=s*p,R=u*c,I=u*d,N=u*p,D=i.x,U=i.y,k=i.z;return r[0]=(1-(T+A))*D,r[1]=(y+N)*D,r[2]=(b-I)*D,r[3]=0,r[4]=(y-N)*U,r[5]=(1-(g+A))*U,r[6]=(S+R)*U,r[7]=0,r[8]=(b+I)*k,r[9]=(S-R)*k,r[10]=(1-(g+T))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),n.identity(),this;let a=Mm.set(r[0],r[1],r[2]).length();const o=Mm.set(r[4],r[5],r[6]).length(),s=Mm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),Ll.copy(this);const c=1/a,d=1/o,p=1/s;return Ll.elements[0]*=c,Ll.elements[1]*=c,Ll.elements[2]*=c,Ll.elements[4]*=d,Ll.elements[5]*=d,Ll.elements[6]*=d,Ll.elements[8]*=p,Ll.elements[9]*=p,Ll.elements[10]*=p,n.setFromRotationMatrix(Ll),i.x=a,i.y=o,i.z=s,this}makePerspective(e,n,i,r,a,o,s=gs,u=!1){const c=this.elements,d=2*a/(n-e),p=2*a/(i-r),g=(n+e)/(n-e),y=(i+r)/(i-r);let b,T;if(u)b=a/(o-a),T=o*a/(o-a);else if(s===gs)b=-(o+a)/(o-a),T=-2*o*a/(o-a);else if(s===gg)b=-o/(o-a),T=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return c[0]=d,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=p,c[9]=y,c[13]=0,c[2]=0,c[6]=0,c[10]=b,c[14]=T,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,r,a,o,s=gs,u=!1){const c=this.elements,d=2/(n-e),p=2/(i-r),g=-(n+e)/(n-e),y=-(i+r)/(i-r);let b,T;if(u)b=1/(o-a),T=o/(o-a);else if(s===gs)b=-2/(o-a),T=-(o+a)/(o-a);else if(s===gg)b=-1/(o-a),T=-a/(o-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return c[0]=d,c[4]=0,c[8]=0,c[12]=g,c[1]=0,c[5]=p,c[9]=0,c[13]=y,c[2]=0,c[6]=0,c[10]=b,c[14]=T,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Mm=new se,Ll=new en,N_e=new se(0,0,0),D_e=new se(1,1,1),rd=new se,Ax=new se,cs=new se,Gk=new en,Vk=new Xa;class Es{constructor(e=0,n=0,i=0,r=Es.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],o=r[4],s=r[8],u=r[1],c=r[5],d=r[9],p=r[2],g=r[6],y=r[10];switch(n){case"XYZ":this._y=Math.asin(Qt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(g,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(s,y),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Qt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Qt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(s,y));break;case"XZY":this._z=Math.asin(-Qt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-d,y),this._y=0);break;default:Mt("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return Gk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Gk,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Vk.setFromEuler(this),this.setFromQuaternion(Vk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Es.DEFAULT_ORDER="XYZ";class _g{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let O_e=0;const Hk=new se,wm=new Xa,Nc=new en,Mx=new se,A0=new se,L_e=new se,U_e=new Xa,qk=new se(1,0,0),Wk=new se(0,1,0),jk=new se(0,0,1),Xk={type:"added"},F_e={type:"removed"},Cm={type:"childadded",child:null},jw={type:"childremoved",child:null};class Hn extends $u{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:O_e++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const e=new se,n=new Es,i=new Xa,r=new se(1,1,1);function a(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new en},normalMatrix:{value:new un}}),this.matrix=new en,this.matrixWorld=new en,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _g,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return wm.setFromAxisAngle(e,n),this.quaternion.multiply(wm),this}rotateOnWorldAxis(e,n){return wm.setFromAxisAngle(e,n),this.quaternion.premultiply(wm),this}rotateX(e){return this.rotateOnAxis(qk,e)}rotateY(e){return this.rotateOnAxis(Wk,e)}rotateZ(e){return this.rotateOnAxis(jk,e)}translateOnAxis(e,n){return Hk.copy(e).applyQuaternion(this.quaternion),this.position.add(Hk.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(qk,e)}translateY(e){return this.translateOnAxis(Wk,e)}translateZ(e){return this.translateOnAxis(jk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Nc.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Mx.copy(e):Mx.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),A0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nc.lookAt(A0,Mx,this.up):Nc.lookAt(Mx,A0,this.up),this.quaternion.setFromRotationMatrix(Nc),r&&(Nc.extractRotation(r.matrixWorld),wm.setFromRotationMatrix(Nc),this.quaternion.premultiply(wm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(Ht("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Xk),Cm.child=e,this.dispatchEvent(Cm),Cm.child=null):Ht("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(F_e),jw.child=e,this.dispatchEvent(jw),jw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Nc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Nc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Nc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Xk),Cm.child=e,this.dispatchEvent(Cm),Cm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(A0,e,L_e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(A0,U_e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(s=>({...s,boundingBox:s.boundingBox?s.boundingBox.toJSON():void 0,boundingSphere:s.boundingSphere?s.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(s=>({...s})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(s,u){return s[u.uuid]===void 0&&(s[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const u=s.shapes;if(Array.isArray(u))for(let c=0,d=u.length;c<d;c++){const p=u[c];a(e.shapes,p)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let u=0,c=this.material.length;u<c;u++)s.push(a(e.materials,this.material[u]));r.material=s}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let s=0;s<this.animations.length;s++){const u=this.animations[s];r.animations.push(a(e.animations,u))}}if(n){const s=o(e.geometries),u=o(e.materials),c=o(e.textures),d=o(e.images),p=o(e.shapes),g=o(e.skeletons),y=o(e.animations),b=o(e.nodes);s.length>0&&(i.geometries=s),u.length>0&&(i.materials=u),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),p.length>0&&(i.shapes=p),g.length>0&&(i.skeletons=g),y.length>0&&(i.animations=y),b.length>0&&(i.nodes=b)}return i.object=r,i;function o(s){const u=[];for(const c in s){const d=s[c];delete d.metadata,u.push(d)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Hn.DEFAULT_UP=new se(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ul=new se,Dc=new se,Xw=new se,Oc=new se,Rm=new se,Im=new se,Yk=new se,Yw=new se,$w=new se,Kw=new se,Jw=new ri,Zw=new ri,Qw=new ri;class Yo{constructor(e=new se,n=new se,i=new se){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Ul.subVectors(e,n),r.cross(Ul);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){Ul.subVectors(r,n),Dc.subVectors(i,n),Xw.subVectors(e,n);const o=Ul.dot(Ul),s=Ul.dot(Dc),u=Ul.dot(Xw),c=Dc.dot(Dc),d=Dc.dot(Xw),p=o*c-s*s;if(p===0)return a.set(0,0,0),null;const g=1/p,y=(c*u-s*d)*g,b=(o*d-s*u)*g;return a.set(1-y-b,b,y)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Oc)===null?!1:Oc.x>=0&&Oc.y>=0&&Oc.x+Oc.y<=1}static getInterpolation(e,n,i,r,a,o,s,u){return this.getBarycoord(e,n,i,r,Oc)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Oc.x),u.addScaledVector(o,Oc.y),u.addScaledVector(s,Oc.z),u)}static getInterpolatedAttribute(e,n,i,r,a,o){return Jw.setScalar(0),Zw.setScalar(0),Qw.setScalar(0),Jw.fromBufferAttribute(e,n),Zw.fromBufferAttribute(e,i),Qw.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Jw,a.x),o.addScaledVector(Zw,a.y),o.addScaledVector(Qw,a.z),o}static isFrontFacing(e,n,i,r){return Ul.subVectors(i,n),Dc.subVectors(e,n),Ul.cross(Dc).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ul.subVectors(this.c,this.b),Dc.subVectors(this.a,this.b),Ul.cross(Dc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Yo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,a){return Yo.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return Yo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let o,s;Rm.subVectors(r,i),Im.subVectors(a,i),Yw.subVectors(e,i);const u=Rm.dot(Yw),c=Im.dot(Yw);if(u<=0&&c<=0)return n.copy(i);$w.subVectors(e,r);const d=Rm.dot($w),p=Im.dot($w);if(d>=0&&p<=d)return n.copy(r);const g=u*p-d*c;if(g<=0&&u>=0&&d<=0)return o=u/(u-d),n.copy(i).addScaledVector(Rm,o);Kw.subVectors(e,a);const y=Rm.dot(Kw),b=Im.dot(Kw);if(b>=0&&y<=b)return n.copy(a);const T=y*c-u*b;if(T<=0&&c>=0&&b<=0)return s=c/(c-b),n.copy(i).addScaledVector(Im,s);const S=d*b-y*p;if(S<=0&&p-d>=0&&y-b>=0)return Yk.subVectors(a,r),s=(p-d)/(p-d+(y-b)),n.copy(r).addScaledVector(Yk,s);const A=1/(S+T+g);return o=T*A,s=g*A,n.copy(i).addScaledVector(Rm,o).addScaledVector(Im,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Eq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={h:0,s:0,l:0},wx={h:0,s:0,l:0};function eC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ct{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=qa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fn.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=Fn.workingColorSpace){return this.r=e,this.g=n,this.b=i,Fn.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=Fn.workingColorSpace){if(e=kN(e,1),n=Qt(n,0,1),i=Qt(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,o=2*i-a;this.r=eC(o,a,e+1/3),this.g=eC(o,a,e),this.b=eC(o,a,e-1/3)}return Fn.colorSpaceToWorking(this,r),this}setStyle(e,n=qa){function i(a){a!==void 0&&parseFloat(a)<1&&Mt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:Mt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);Mt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=qa){const i=Eq[e.toLowerCase()];return i!==void 0?this.setHex(i,n):Mt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=jc(e.r),this.g=jc(e.g),this.b=jc(e.b),this}copyLinearToSRGB(e){return this.r=sg(e.r),this.g=sg(e.g),this.b=sg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qa){return Fn.workingToColorSpace(Va.copy(this),e),Math.round(Qt(Va.r*255,0,255))*65536+Math.round(Qt(Va.g*255,0,255))*256+Math.round(Qt(Va.b*255,0,255))}getHexString(e=qa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fn.workingColorSpace){Fn.workingToColorSpace(Va.copy(this),n);const i=Va.r,r=Va.g,a=Va.b,o=Math.max(i,r,a),s=Math.min(i,r,a);let u,c;const d=(s+o)/2;if(s===o)u=0,c=0;else{const p=o-s;switch(c=d<=.5?p/(o+s):p/(2-o-s),o){case i:u=(r-a)/p+(r<a?6:0);break;case r:u=(a-i)/p+2;break;case a:u=(i-r)/p+4;break}u/=6}return e.h=u,e.s=c,e.l=d,e}getRGB(e,n=Fn.workingColorSpace){return Fn.workingToColorSpace(Va.copy(this),n),e.r=Va.r,e.g=Va.g,e.b=Va.b,e}getStyle(e=qa){Fn.workingToColorSpace(Va.copy(this),e);const n=Va.r,i=Va.g,r=Va.b;return e!==qa?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(ad),this.setHSL(ad.h+e,ad.s+n,ad.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(ad),e.getHSL(wx);const i=Q0(ad.h,wx.h,n),r=Q0(ad.s,wx.s,n),a=Q0(ad.l,wx.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Va=new Ct;Ct.NAMES=Eq;let k_e=0;class Ya extends $u{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:k_e++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=$h,this.side=af,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=R1,this.blendDst=I1,this.blendEquation=cd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ct(0,0,0),this.blendAlpha=0,this.depthFunc=ap,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fh,this.stencilZFail=Fh,this.stencilZPass=Fh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){Mt(`Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){Mt(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$h&&(i.blending=this.blending),this.side!==af&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==R1&&(i.blendSrc=this.blendSrc),this.blendDst!==I1&&(i.blendDst=this.blendDst),this.blendEquation!==cd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ap&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==tI&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Fh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Fh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const o=[];for(const s in a){const u=a[s];delete u.metadata,o.push(u)}return o}if(n){const a=r(e.textures),o=r(e.images);a.length>0&&(i.textures=a),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class pf extends Ya{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Es,this.combine=d_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Gc=B_e();function B_e(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const c=u-127;c<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):c<-14?(i[u]=1024>>-c-14,i[u|256]=1024>>-c-14|32768,r[u]=-c-1,r[u|256]=-c-1):c<=15?(i[u]=c+15<<10,i[u|256]=c+15<<10|32768,r[u]=13,r[u|256]=13):c<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let u=1;u<1024;++u){let c=u<<13,d=0;for(;(c&8388608)===0;)c<<=1,d-=8388608;c&=-8388609,d+=947912704,a[u]=c|d}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(s[u]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:o,offsetTable:s}}function jo(t){Math.abs(t)>65504&&Mt("DataUtils.toHalfFloat(): Value out of range."),t=Qt(t,-65504,65504),Gc.floatView[0]=t;const e=Gc.uint32View[0],n=e>>23&511;return Gc.baseTable[n]+((e&8388607)>>Gc.shiftTable[n])}function V0(t){const e=t>>10;return Gc.uint32View[0]=Gc.mantissaTable[Gc.offsetTable[e]+(t&1023)]+Gc.exponentTable[e],Gc.floatView[0]}class z_e{static toHalfFloat(e){return jo(e)}static fromHalfFloat(e){return V0(e)}}const Pr=new se,Cx=new st;let G_e=0;class di{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:G_e++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Py,this.updateRanges=[],this.gpuType=vo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Cx.fromBufferAttribute(this,n),Cx.applyMatrix3(e),this.setXY(n,Cx.x,Cx.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Pr.fromBufferAttribute(this,n),Pr.applyMatrix3(e),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Pr.fromBufferAttribute(this,n),Pr.applyMatrix4(e),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Pr.fromBufferAttribute(this,n),Pr.applyNormalMatrix(e),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Pr.fromBufferAttribute(this,n),Pr.transformDirection(e),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=mo(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=mo(n,this.array)),n}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=mo(n,this.array)),n}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=mo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=mo(n,this.array)),n}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),a=gn(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Py&&(e.usage=this.usage),e}}class V_e extends di{constructor(e,n,i){super(new Int8Array(e),n,i)}}class H_e extends di{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class q_e extends di{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class W_e extends di{constructor(e,n,i){super(new Int16Array(e),n,i)}}class zN extends di{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class j_e extends di{constructor(e,n,i){super(new Int32Array(e),n,i)}}class GN extends di{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class X_e extends di{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=V0(this.array[e*this.itemSize]);return this.normalized&&(n=mo(n,this.array)),n}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize]=jo(n),this}getY(e){let n=V0(this.array[e*this.itemSize+1]);return this.normalized&&(n=mo(n,this.array)),n}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+1]=jo(n),this}getZ(e){let n=V0(this.array[e*this.itemSize+2]);return this.normalized&&(n=mo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+2]=jo(n),this}getW(e){let n=V0(this.array[e*this.itemSize+3]);return this.normalized&&(n=mo(n,this.array)),n}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+3]=jo(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(i),this.array[e+2]=jo(r),this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),a=gn(a,this.array)),this.array[e+0]=jo(n),this.array[e+1]=jo(i),this.array[e+2]=jo(r),this.array[e+3]=jo(a),this}}class Ft extends di{constructor(e,n,i){super(new Float32Array(e),n,i)}}let Y_e=0;const nl=new en,tC=new Hn,Pm=new se,fs=new ua,M0=new ua,sa=new se;class cn extends $u{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Y_e++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yq(e)?GN:zN)(e,1):this.index=e,this}setIndirect(e,n=0){return this.indirect=e,this.indirectOffset=n,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new un().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return nl.makeRotationFromQuaternion(e),this.applyMatrix4(nl),this}rotateX(e){return nl.makeRotationX(e),this.applyMatrix4(nl),this}rotateY(e){return nl.makeRotationY(e),this.applyMatrix4(nl),this}rotateZ(e){return nl.makeRotationZ(e),this.applyMatrix4(nl),this}translate(e,n,i){return nl.makeTranslation(e,n,i),this.applyMatrix4(nl),this}scale(e,n,i){return nl.makeScale(e,n,i),this.applyMatrix4(nl),this}lookAt(e){return tC.lookAt(e),tC.updateMatrix(),this.applyMatrix4(tC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ft(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&Mt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ua);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ht("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];fs.setFromBufferAttribute(a),this.morphTargetsRelative?(sa.addVectors(this.boundingBox.min,fs.min),this.boundingBox.expandByPoint(sa),sa.addVectors(this.boundingBox.max,fs.max),this.boundingBox.expandByPoint(sa)):(this.boundingBox.expandByPoint(fs.min),this.boundingBox.expandByPoint(fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ht('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ca);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ht("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(e){const i=this.boundingSphere.center;if(fs.setFromBufferAttribute(e),n)for(let a=0,o=n.length;a<o;a++){const s=n[a];M0.setFromBufferAttribute(s),this.morphTargetsRelative?(sa.addVectors(fs.min,M0.min),fs.expandByPoint(sa),sa.addVectors(fs.max,M0.max),fs.expandByPoint(sa)):(fs.expandByPoint(M0.min),fs.expandByPoint(M0.max))}fs.getCenter(i);let r=0;for(let a=0,o=e.count;a<o;a++)sa.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(sa));if(n)for(let a=0,o=n.length;a<o;a++){const s=n[a],u=this.morphTargetsRelative;for(let c=0,d=s.count;c<d;c++)sa.fromBufferAttribute(s,c),u&&(Pm.fromBufferAttribute(e,c),sa.add(Pm)),r=Math.max(r,i.distanceToSquared(sa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Ht('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){Ht("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new di(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),s=[],u=[];for(let z=0;z<i.count;z++)s[z]=new se,u[z]=new se;const c=new se,d=new se,p=new se,g=new st,y=new st,b=new st,T=new se,S=new se;function A(z,L,F){c.fromBufferAttribute(i,z),d.fromBufferAttribute(i,L),p.fromBufferAttribute(i,F),g.fromBufferAttribute(a,z),y.fromBufferAttribute(a,L),b.fromBufferAttribute(a,F),d.sub(c),p.sub(c),y.sub(g),b.sub(g);const j=1/(y.x*b.y-b.x*y.y);isFinite(j)&&(T.copy(d).multiplyScalar(b.y).addScaledVector(p,-y.y).multiplyScalar(j),S.copy(p).multiplyScalar(y.x).addScaledVector(d,-b.x).multiplyScalar(j),s[z].add(T),s[L].add(T),s[F].add(T),u[z].add(S),u[L].add(S),u[F].add(S))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let z=0,L=R.length;z<L;++z){const F=R[z],j=F.start,W=F.count;for(let X=j,Q=j+W;X<Q;X+=3)A(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const I=new se,N=new se,D=new se,U=new se;function k(z){D.fromBufferAttribute(r,z),U.copy(D);const L=s[z];I.copy(L),I.sub(D.multiplyScalar(D.dot(L))).normalize(),N.crossVectors(U,L);const j=N.dot(u[z])<0?-1:1;o.setXYZW(z,I.x,I.y,I.z,j)}for(let z=0,L=R.length;z<L;++z){const F=R[z],j=F.start,W=F.count;for(let X=j,Q=j+W;X<Q;X+=3)k(e.getX(X+0)),k(e.getX(X+1)),k(e.getX(X+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new di(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let g=0,y=i.count;g<y;g++)i.setXYZ(g,0,0,0);const r=new se,a=new se,o=new se,s=new se,u=new se,c=new se,d=new se,p=new se;if(e)for(let g=0,y=e.count;g<y;g+=3){const b=e.getX(g+0),T=e.getX(g+1),S=e.getX(g+2);r.fromBufferAttribute(n,b),a.fromBufferAttribute(n,T),o.fromBufferAttribute(n,S),d.subVectors(o,a),p.subVectors(r,a),d.cross(p),s.fromBufferAttribute(i,b),u.fromBufferAttribute(i,T),c.fromBufferAttribute(i,S),s.add(d),u.add(d),c.add(d),i.setXYZ(b,s.x,s.y,s.z),i.setXYZ(T,u.x,u.y,u.z),i.setXYZ(S,c.x,c.y,c.z)}else for(let g=0,y=n.count;g<y;g+=3)r.fromBufferAttribute(n,g+0),a.fromBufferAttribute(n,g+1),o.fromBufferAttribute(n,g+2),d.subVectors(o,a),p.subVectors(r,a),d.cross(p),i.setXYZ(g+0,d.x,d.y,d.z),i.setXYZ(g+1,d.x,d.y,d.z),i.setXYZ(g+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)sa.fromBufferAttribute(e,n),sa.normalize(),e.setXYZ(n,sa.x,sa.y,sa.z)}toNonIndexed(){function e(s,u){const c=s.array,d=s.itemSize,p=s.normalized,g=new c.constructor(u.length*d);let y=0,b=0;for(let T=0,S=u.length;T<S;T++){s.isInterleavedBufferAttribute?y=u[T]*s.data.stride+s.offset:y=u[T]*d;for(let A=0;A<d;A++)g[b++]=c[y++]}return new di(g,d,p)}if(this.index===null)return Mt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new cn,i=this.index.array,r=this.attributes;for(const s in r){const u=r[s],c=e(u,i);n.setAttribute(s,c)}const a=this.morphAttributes;for(const s in a){const u=[],c=a[s];for(let d=0,p=c.length;d<p;d++){const g=c[d],y=e(g,i);u.push(y)}n.morphAttributes[s]=u}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,u=o.length;s<u;s++){const c=o[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const c in u)u[c]!==void 0&&(e[c]=u[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const u in i){const c=i[u];e.data.attributes[u]=c.toJSON(e.data)}const r={};let a=!1;for(const u in this.morphAttributes){const c=this.morphAttributes[u],d=[];for(let p=0,g=c.length;p<g;p++){const y=c[p];d.push(y.toJSON(e.data))}d.length>0&&(r[u]=d,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere=s.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(n))}const a=e.morphAttributes;for(const c in a){const d=[],p=a[c];for(let g=0,y=p.length;g<y;g++)d.push(p[g].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const p=o[c];this.addGroup(p.start,p.count,p.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $k=new en,yh=new mp,Rx=new ca,Kk=new se,Ix=new se,Px=new se,Nx=new se,nC=new se,Dx=new se,Jk=new se,Ox=new se;class er extends Hn{constructor(e=new cn,n=new pf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(a&&s){Dx.set(0,0,0);for(let u=0,c=a.length;u<c;u++){const d=s[u],p=a[u];d!==0&&(nC.fromBufferAttribute(p,e),o?Dx.addScaledVector(nC,d):Dx.addScaledVector(nC.sub(n),d))}n.add(Dx)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Rx.copy(i.boundingSphere),Rx.applyMatrix4(a),yh.copy(e.ray).recast(e.near),!(Rx.containsPoint(yh.origin)===!1&&(yh.intersectSphere(Rx,Kk)===null||yh.origin.distanceToSquared(Kk)>(e.far-e.near)**2))&&($k.copy(a).invert(),yh.copy(e.ray).applyMatrix4($k),!(i.boundingBox!==null&&yh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,yh)))}_computeIntersections(e,n,i){let r;const a=this.geometry,o=this.material,s=a.index,u=a.attributes.position,c=a.attributes.uv,d=a.attributes.uv1,p=a.attributes.normal,g=a.groups,y=a.drawRange;if(s!==null)if(Array.isArray(o))for(let b=0,T=g.length;b<T;b++){const S=g[b],A=o[S.materialIndex],R=Math.max(S.start,y.start),I=Math.min(s.count,Math.min(S.start+S.count,y.start+y.count));for(let N=R,D=I;N<D;N+=3){const U=s.getX(N),k=s.getX(N+1),z=s.getX(N+2);r=Lx(this,A,e,i,c,d,p,U,k,z),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const b=Math.max(0,y.start),T=Math.min(s.count,y.start+y.count);for(let S=b,A=T;S<A;S+=3){const R=s.getX(S),I=s.getX(S+1),N=s.getX(S+2);r=Lx(this,o,e,i,c,d,p,R,I,N),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let b=0,T=g.length;b<T;b++){const S=g[b],A=o[S.materialIndex],R=Math.max(S.start,y.start),I=Math.min(u.count,Math.min(S.start+S.count,y.start+y.count));for(let N=R,D=I;N<D;N+=3){const U=N,k=N+1,z=N+2;r=Lx(this,A,e,i,c,d,p,U,k,z),r&&(r.faceIndex=Math.floor(N/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const b=Math.max(0,y.start),T=Math.min(u.count,y.start+y.count);for(let S=b,A=T;S<A;S+=3){const R=S,I=S+1,N=S+2;r=Lx(this,o,e,i,c,d,p,R,I,N),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}}}function $_e(t,e,n,i,r,a,o,s){let u;if(e.side===yo?u=i.intersectTriangle(o,a,r,!0,s):u=i.intersectTriangle(r,a,o,e.side===af,s),u===null)return null;Ox.copy(s),Ox.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Ox);return c<n.near||c>n.far?null:{distance:c,point:Ox.clone(),object:t}}function Lx(t,e,n,i,r,a,o,s,u,c){t.getVertexPosition(s,Ix),t.getVertexPosition(u,Px),t.getVertexPosition(c,Nx);const d=$_e(t,e,n,i,Ix,Px,Nx,Jk);if(d){const p=new se;Yo.getBarycoord(Jk,Ix,Px,Nx,p),r&&(d.uv=Yo.getInterpolatedAttribute(r,s,u,c,p,new st)),a&&(d.uv1=Yo.getInterpolatedAttribute(a,s,u,c,p,new st)),o&&(d.normal=Yo.getInterpolatedAttribute(o,s,u,c,p,new se),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const g={a:s,b:u,c,normal:new se,materialIndex:0};Yo.getNormal(Ix,Px,Nx,g.normal),d.face=g,d.barycoord=p}return d}class gp extends cn{constructor(e=1,n=1,i=1,r=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:o};const s=this;r=Math.floor(r),a=Math.floor(a),o=Math.floor(o);const u=[],c=[],d=[],p=[];let g=0,y=0;b("z","y","x",-1,-1,i,n,e,o,a,0),b("z","y","x",1,-1,i,n,-e,o,a,1),b("x","z","y",1,1,e,i,n,r,o,2),b("x","z","y",1,-1,e,i,-n,r,o,3),b("x","y","z",1,-1,e,n,i,r,a,4),b("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new Ft(c,3)),this.setAttribute("normal",new Ft(d,3)),this.setAttribute("uv",new Ft(p,2));function b(T,S,A,R,I,N,D,U,k,z,L){const F=N/k,j=D/z,W=N/2,X=D/2,Q=U/2,ae=k+1,$=z+1;let ie=0,me=0;const pe=new se;for(let de=0;de<$;de++){const H=de*j-X;for(let ne=0;ne<ae;ne++){const le=ne*F-W;pe[T]=le*R,pe[S]=H*I,pe[A]=Q,c.push(pe.x,pe.y,pe.z),pe[T]=0,pe[S]=0,pe[A]=U>0?1:-1,d.push(pe.x,pe.y,pe.z),p.push(ne/k),p.push(1-de/z),ie+=1}}for(let de=0;de<z;de++)for(let H=0;H<k;H++){const ne=g+H+ae*de,le=g+H+ae*(de+1),ge=g+(H+1)+ae*(de+1),_e=g+(H+1)+ae*de;u.push(ne,le,_e),u.push(le,ge,_e),me+=6}s.addGroup(y,me,L),y+=me,g+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bg(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Mt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function fo(t){const e={};for(let n=0;n<t.length;n++){const i=bg(t[n]);for(const r in i)e[r]=i[r]}return e}function K_e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Tq(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Fn.workingColorSpace}const VN={clone:bg,merge:fo};var J_e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Z_e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ts extends Ya{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=J_e,this.fragmentShader=Z_e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bg(e.uniforms),this.uniformsGroups=K_e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class FT extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new en,this.projectionMatrix=new en,this.projectionMatrixInverse=new en,this.coordinateSystem=gs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const od=new se,Zk=new st,Qk=new st;class _r extends FT{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=yg*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yg*2*Math.atan(Math.tan(Kh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){od.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(od.x,od.y).multiplyScalar(-e/od.z),od.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(od.x,od.y).multiplyScalar(-e/od.z)}getViewSize(e,n){return this.getViewBounds(e,Zk,Qk),n.subVectors(Qk,Zk)}setViewOffset(e,n,i,r,a,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Kh*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,c=o.fullHeight;a+=o.offsetX*r/u,n-=o.offsetY*i/c,r*=o.width/u,i*=o.height/c}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Nm=-90,Dm=1;class Aq extends Hn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new _r(Nm,Dm,e,n);r.layers=this.layers,this.add(r);const a=new _r(Nm,Dm,e,n);a.layers=this.layers,this.add(a);const o=new _r(Nm,Dm,e,n);o.layers=this.layers,this.add(o);const s=new _r(Nm,Dm,e,n);s.layers=this.layers,this.add(s);const u=new _r(Nm,Dm,e,n);u.layers=this.layers,this.add(u);const c=new _r(Nm,Dm,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,a,o,s,u]=n;for(const c of n)this.remove(c);if(e===gs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===gg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,s,u,c,d]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const T=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,a),e.setRenderTarget(i,1,r),e.render(n,o),e.setRenderTarget(i,2,r),e.render(n,s),e.setRenderTarget(i,3,r),e.render(n,u),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=T,e.setRenderTarget(i,5,r),e.render(n,d),e.setRenderTarget(p,g,y),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class p_ extends Qi{constructor(e=[],n=qu,i,r,a,o,s,u,c,d){super(e,n,i,r,a,o,s,u,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class HN extends bs{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new p_(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new gp(5,5,5),a=new Ts({name:"CubemapFromEquirect",uniforms:bg(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:yo,blending:Vu});a.uniforms.tEquirect.value=n;const o=new er(r,a),s=n.minFilter;return n.minFilter===Bu&&(n.minFilter=mi),new Aq(1,10,this).update(e,o),n.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(a)}}class tg extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Q_e={type:"move"};class wS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new tg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new tg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new tg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,o=null;const s=this._targetRay,u=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const T of e.hand.values()){const S=n.getJointPose(T,i),A=this._getHandJoint(c,T);S!==null&&(A.matrix.fromArray(S.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=S.radius),A.visible=S!==null}const d=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],g=d.position.distanceTo(p.position),y=.02,b=.005;c.inputState.pinching&&g>y+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&g<=y-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));s!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Q_e)))}return s!==null&&(s.visible=r!==null),u!==null&&(u.visible=a!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new tg;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class kT{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ct(e),this.density=n}clone(){return new kT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class BT{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ct(e),this.near=n,this.far=i}clone(){return new BT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class qN extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Es,this.environmentIntensity=1,this.environmentRotation=new Es,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class zT{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Py,this.updateRanges=[],this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const co=new se;class sp{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)co.fromBufferAttribute(this,n),co.applyMatrix4(e),this.setXYZ(n,co.x,co.y,co.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)co.fromBufferAttribute(this,n),co.applyNormalMatrix(e),this.setXYZ(n,co.x,co.y,co.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)co.fromBufferAttribute(this,n),co.transformDirection(e),this.setXYZ(n,co.x,co.y,co.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=mo(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=gn(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=mo(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=mo(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=mo(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=mo(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=gn(n,this.array),i=gn(i,this.array),r=gn(r,this.array),a=gn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){Dy("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new di(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Dy("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class WN extends Ya{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Om;const w0=new se,Lm=new se,Um=new se,Fm=new st,C0=new st,Mq=new en,Ux=new se,R0=new se,Fx=new se,e4=new st,iC=new st,t4=new st;class wq extends Hn{constructor(e=new WN){if(super(),this.isSprite=!0,this.type="Sprite",Om===void 0){Om=new cn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new zT(n,5);Om.setIndex([0,1,2,0,2,3]),Om.setAttribute("position",new sp(i,3,0,!1)),Om.setAttribute("uv",new sp(i,2,3,!1))}this.geometry=Om,this.material=e,this.center=new st(.5,.5),this.count=1}raycast(e,n){e.camera===null&&Ht('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lm.setFromMatrixScale(this.matrixWorld),Mq.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Um.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Lm.multiplyScalar(-Um.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const o=this.center;kx(Ux.set(-.5,-.5,0),Um,o,Lm,r,a),kx(R0.set(.5,-.5,0),Um,o,Lm,r,a),kx(Fx.set(.5,.5,0),Um,o,Lm,r,a),e4.set(0,0),iC.set(1,0),t4.set(1,1);let s=e.ray.intersectTriangle(Ux,R0,Fx,!1,w0);if(s===null&&(kx(R0.set(-.5,.5,0),Um,o,Lm,r,a),iC.set(0,1),s=e.ray.intersectTriangle(Ux,Fx,R0,!1,w0),s===null))return;const u=e.ray.origin.distanceTo(w0);u<e.near||u>e.far||n.push({distance:u,point:w0.clone(),uv:Yo.getInterpolation(w0,Ux,R0,Fx,e4,iC,t4,new st),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function kx(t,e,n,i,r,a){Fm.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(C0.x=a*Fm.x-r*Fm.y,C0.y=r*Fm.x+a*Fm.y):C0.copy(Fm),t.copy(e),t.x+=C0.x,t.y+=C0.y,t.applyMatrix4(Mq)}const Bx=new se,n4=new se;class Cq extends Hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let a;for(a=0;a<r.length&&!(n<r[a].distance);a++);return r.splice(a,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),e<a)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Bx.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Bx);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Bx.setFromMatrixPosition(e.matrixWorld),n4.setFromMatrixPosition(this.matrixWorld);const i=Bx.distanceTo(n4)/e.zoom;n[0].object.visible=!0;let r,a;for(r=1,a=n.length;r<a;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const i4=new se,r4=new ri,a4=new ri,ebe=new se,o4=new en,zx=new se,rC=new ca,s4=new en,aC=new mp;class Rq extends er{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=eI,this.bindMatrix=new en,this.bindMatrixInverse=new en,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ua),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,zx),this.boundingBox.expandByPoint(zx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ca),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,zx),this.boundingSphere.expandByPoint(zx)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rC.copy(this.boundingSphere),rC.applyMatrix4(r),e.ray.intersectsSphere(rC)!==!1&&(s4.copy(r).invert(),aC.copy(e.ray).applyMatrix4(s4),!(this.boundingBox!==null&&aC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,aC)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ri,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===eI?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aq?this.bindMatrixInverse.copy(this.bindMatrix).invert():Mt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;r4.fromBufferAttribute(r.attributes.skinIndex,e),a4.fromBufferAttribute(r.attributes.skinWeight,e),i4.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const o=a4.getComponent(a);if(o!==0){const s=r4.getComponent(a);o4.multiplyMatrices(i.bones[s].matrixWorld,i.boneInverses[s]),n.addScaledVector(ebe.copy(i4).applyMatrix4(o4),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class jN extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yl extends Qi{constructor(e=null,n=1,i=1,r,a,o,s,u,c=br,d=br,p,g){super(null,o,s,u,c,d,r,a,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const l4=new en,tbe=new en;class GT{constructor(e=[],n=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){Mt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new en)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new en;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const s=e[a]?e[a].matrixWorld:tbe;l4.multiplyMatrices(s,n[a]),l4.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new GT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Yl(n,e,e,ja,vo);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let o=n[a];o===void 0&&(Mt("Skeleton: No bone found with UUID:",a),o=new jN),this.bones.push(o),this.boneInverses.push(new en().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const o=n[r];e.bones.push(o.uuid);const s=i[r];e.boneInverses.push(s.toArray())}return e}}class lp extends di{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const km=new en,u4=new en,Gx=[],c4=new ua,nbe=new en,I0=new er,P0=new ca;class Iq extends er{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new lp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,nbe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ua),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,km),c4.copy(e.boundingBox).applyMatrix4(km),this.boundingBox.union(c4)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new ca),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,km),P0.copy(e.boundingSphere).applyMatrix4(km),this.boundingSphere.union(P0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,o=e*a+1;for(let s=0;s<i.length;s++)i[s]=r[o+s]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(I0.geometry=this.geometry,I0.material=this.material,I0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),P0.copy(this.boundingSphere),P0.applyMatrix4(i),e.ray.intersectsSphere(P0)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,km),u4.multiplyMatrices(i,km),I0.matrixWorld=u4,I0.raycast(e,Gx);for(let o=0,s=Gx.length;o<s;o++){const u=Gx[o];u.instanceId=a,u.object=this,n.push(u)}Gx.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new lp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Yl(new Float32Array(r*this.count),r,this.count,RT,vo));const a=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const s=this.geometry.morphTargetsRelative?1:1-o,u=r*e;a[u]=s,a.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const oC=new se,ibe=new se,rbe=new un;class kc{constructor(e=new se(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=oC.subVectors(i,n).cross(ibe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(oC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||rbe.getNormalMatrix(e),r=this.coplanarPoint(oC).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new ca,abe=new st(.5,.5),Vx=new se;class Vg{constructor(e=new kc,n=new kc,i=new kc,r=new kc,a=new kc,o=new kc){this.planes=[e,n,i,r,a,o]}set(e,n,i,r,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(i),s[3].copy(r),s[4].copy(a),s[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=gs,i=!1){const r=this.planes,a=e.elements,o=a[0],s=a[1],u=a[2],c=a[3],d=a[4],p=a[5],g=a[6],y=a[7],b=a[8],T=a[9],S=a[10],A=a[11],R=a[12],I=a[13],N=a[14],D=a[15];if(r[0].setComponents(c-o,y-d,A-b,D-R).normalize(),r[1].setComponents(c+o,y+d,A+b,D+R).normalize(),r[2].setComponents(c+s,y+p,A+T,D+I).normalize(),r[3].setComponents(c-s,y-p,A-T,D-I).normalize(),i)r[4].setComponents(u,g,S,N).normalize(),r[5].setComponents(c-u,y-g,A-S,D-N).normalize();else if(r[4].setComponents(c-u,y-g,A-S,D-N).normalize(),n===gs)r[5].setComponents(c+u,y+g,A+S,D+N).normalize();else if(n===gg)r[5].setComponents(u,g,S,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),_h.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){_h.center.set(0,0,0);const n=abe.distanceTo(e.center);return _h.radius=.7071067811865476+n,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Vx.x=r.normal.x>0?e.max.x:e.min.x,Vx.y=r.normal.y>0?e.max.y:e.min.y,Vx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Vx)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Lu=new en,Uu=new Vg;class VT{constructor(){this.coordinateSystem=gs}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Lu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Uu.setFromProjectionMatrix(Lu,r.coordinateSystem,r.reversedDepth),Uu.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Lu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Uu.setFromProjectionMatrix(Lu,r.coordinateSystem,r.reversedDepth),Uu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Lu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Uu.setFromProjectionMatrix(Lu,r.coordinateSystem,r.reversedDepth),Uu.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Lu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Uu.setFromProjectionMatrix(Lu,r.coordinateSystem,r.reversedDepth),Uu.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Lu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Uu.setFromProjectionMatrix(Lu,r.coordinateSystem,r.reversedDepth),Uu.containsPoint(e))return!0}return!1}clone(){return new VT}}function sC(t,e){return t-e}function obe(t,e){return t.z-e.z}function sbe(t,e){return e.z-t.z}class lbe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const a=this.pool,o=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const s=a[this.index];o.push(s),this.index++,s.start=e,s.count=n,s.z=i,s.index=r}reset(){this.list.length=0,this.index=0}}const Wo=new en,ube=new Ct(1,1,1),f4=new Vg,cbe=new VT,Hx=new ua,bh=new ca,N0=new se,d4=new se,fbe=new se,lC=new lbe,Ha=new er,qx=[];function dbe(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let a=0;a<r;a++)for(let o=0;o<i;o++)e.setComponent(a+n,o,t.getComponent(a,o))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function xh(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class Pq extends er{constructor(e,n,i=n*2,r){super(new cn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Yl(n,e,e,ja,vo);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new Yl(n,e,e,h_,fl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new Yl(n,e,e,ja,vo);i.colorSpace=Fn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const o=e.getAttribute(a),{array:s,itemSize:u,normalized:c}=o,d=new s.constructor(i*u),p=new di(d,u,c);n.setAttribute(a,p)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new di(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=n.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ua);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Wo),this.getBoundingBoxAt(a,Hx).applyMatrix4(Wo),e.union(Hx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ca);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Wo),this.getBoundingSphereAt(a,bh).applyMatrix4(Wo),e.union(bh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(sC),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Wo.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const o=this._colorsTexture;return o&&(ube.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(sC),u=this._availableGeometryIds.shift(),a[u]=r):(u=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),o=n.getIndex(),s=this._geometryInfo[e];if(r&&o.count>s.reservedIndexCount||n.attributes.position.count>s.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=s.vertexStart,c=s.reservedVertexCount;s.vertexCount=n.getAttribute("position").count;for(const d in i.attributes){const p=n.getAttribute(d),g=i.getAttribute(d);dbe(p,g,u);const y=p.itemSize;for(let b=p.count,T=c;b<T;b++){const S=u+b;for(let A=0;A<y;A++)g.setComponent(S,A,0)}g.needsUpdate=!0,g.addUpdateRange(u*y,c*y)}if(r){const d=s.indexStart,p=s.reservedIndexCount;s.indexCount=n.getIndex().count;for(let g=0;g<o.count;g++)a.setX(d+g,u+o.getX(g));for(let g=o.count,y=p;g<y;g++)a.setX(d+g,u);a.needsUpdate=!0,a.addUpdateRange(d,s.reservedIndexCount)}return s.start=r?s.indexStart:s.vertexStart,s.count=r?s.indexCount:s.vertexCount,s.boundingBox=null,n.boundingBox!==null&&(s.boundingBox=n.boundingBox.clone()),s.boundingSphere=null,n.boundingSphere!==null&&(s.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((o,s)=>s).sort((o,s)=>i[o].vertexStart-i[s].vertexStart),a=this.geometry;for(let o=0,s=i.length;o<s;o++){const u=r[o],c=i[u];if(c.active!==!1){if(a.index!==null){if(c.indexStart!==n){const{indexStart:d,vertexStart:p,reservedIndexCount:g}=c,y=a.index,b=y.array,T=e-p;for(let S=d;S<d+g;S++)b[S]=b[S]+T;y.array.copyWithin(n,d,d+g),y.addUpdateRange(n,g),y.needsUpdate=!0,c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:d,reservedVertexCount:p}=c,g=a.attributes;for(const y in g){const b=g[y],{array:T,itemSize:S}=b;T.copyWithin(e*S,d*S,(d+p)*S),b.addUpdateRange(e*S,p*S),b.needsUpdate=!0}c.vertexStart=e}e+=c.reservedVertexCount,c.start=a.index?c.indexStart:c.vertexStart,this._nextIndexStart=a.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new ua,o=i.index,s=i.attributes.position;for(let u=r.start,c=r.start+r.count;u<c;u++){let d=u;o&&(d=o.getX(d)),a.expandByPoint(N0.fromBufferAttribute(s,d))}r.boundingBox=a}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new ca;this.getBoundingBoxAt(e,Hx),Hx.getCenter(a.center);const o=i.index,s=i.attributes.position;let u=0;for(let c=r.start,d=r.start+r.count;c<d;c++){let p=c;o&&(p=o.getX(p)),N0.fromBufferAttribute(s,p),u=Math.max(u,a.center.distanceToSquared(N0))}a.radius=Math.sqrt(u),r.boundingSphere=a}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(sC);n[n.length-1]===i.length-1;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);xh(this._multiDrawCounts,r),xh(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const o=this._indirectTexture,s=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),xh(o.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),xh(s.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),xh(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(s=>s.active);if(Math.max(...i.map(s=>s.vertexStart+s.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new cn,this._initializeGeometry(a));const o=this.geometry;a.index&&xh(a.index.array,o.index.array);for(const s in a.attributes)xh(a.attributes[s].array,o.attributes[s].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,o=this.geometry;Ha.material=this.material,Ha.geometry.index=o.index,Ha.geometry.attributes=o.attributes,Ha.geometry.boundingBox===null&&(Ha.geometry.boundingBox=new ua),Ha.geometry.boundingSphere===null&&(Ha.geometry.boundingSphere=new ca);for(let s=0,u=i.length;s<u;s++){if(!i[s].visible||!i[s].active)continue;const c=i[s].geometryIndex,d=r[c];Ha.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(s,Ha.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Ha.geometry.boundingBox),this.getBoundingSphereAt(c,Ha.geometry.boundingSphere),Ha.raycast(e,qx);for(let p=0,g=qx.length;p<g;p++){const y=qx[p];y.object=this,y.batchId=s,n.push(y)}qx.length=0}Ha.material=null,Ha.geometry.index=null,Ha.geometry.attributes={},Ha.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),s=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,p=this._geometryInfo,g=this.perObjectFrustumCulled,y=this._indirectTexture,b=y.image.data,T=i.isArrayCamera?cbe:f4;g&&!i.isArrayCamera&&(Wo.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),f4.setFromProjectionMatrix(Wo,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){Wo.copy(this.matrixWorld).invert(),N0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Wo),d4.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Wo);for(let I=0,N=u.length;I<N;I++)if(u[I].visible&&u[I].active){const D=u[I].geometryIndex;this.getMatrixAt(I,Wo),this.getBoundingSphereAt(D,bh).applyMatrix4(Wo);let U=!1;if(g&&(U=!T.intersectsSphere(bh,i)),!U){const k=p[D],z=fbe.subVectors(bh.center,N0).dot(d4);lC.push(k.start,k.count,z,I)}}const A=lC.list,R=this.customSort;R===null?A.sort(a.transparent?sbe:obe):R.call(this,A,i);for(let I=0,N=A.length;I<N;I++){const D=A[I];c[S]=D.start*s,d[S]=D.count,b[S]=D.index,S++}lC.reset()}else for(let A=0,R=u.length;A<R;A++)if(u[A].visible&&u[A].active){const I=u[A].geometryIndex;let N=!1;if(g&&(this.getMatrixAt(A,Wo),this.getBoundingSphereAt(I,bh).applyMatrix4(Wo),N=!T.intersectsSphere(bh,i)),!N){const D=p[I];c[S]=D.start*s,d[S]=D.count,b[S]=A,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,a,o){this.onBeforeRender(e,null,r,a,o)}}class xo extends Ya{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vE=new se,yE=new se,h4=new en,D0=new mp,Wx=new ca,uC=new se,p4=new se;class Td extends Hn{constructor(e=new cn,n=new xo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)vE.fromBufferAttribute(n,r-1),yE.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=vE.distanceTo(yE);e.setAttribute("lineDistance",new Ft(i,1))}else Mt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Wx.copy(i.boundingSphere),Wx.applyMatrix4(r),Wx.radius+=a,e.ray.intersectsSphere(Wx)===!1)return;h4.copy(r).invert(),D0.copy(e.ray).applyMatrix4(h4);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=s*s,c=this.isLineSegments?2:1,d=i.index,g=i.attributes.position;if(d!==null){const y=Math.max(0,o.start),b=Math.min(d.count,o.start+o.count);for(let T=y,S=b-1;T<S;T+=c){const A=d.getX(T),R=d.getX(T+1),I=jx(this,e,D0,u,A,R,T);I&&n.push(I)}if(this.isLineLoop){const T=d.getX(b-1),S=d.getX(y),A=jx(this,e,D0,u,T,S,b-1);A&&n.push(A)}}else{const y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count);for(let T=y,S=b-1;T<S;T+=c){const A=jx(this,e,D0,u,T,T+1,T);A&&n.push(A)}if(this.isLineLoop){const T=jx(this,e,D0,u,b-1,y,b-1);T&&n.push(T)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}function jx(t,e,n,i,r,a,o){const s=t.geometry.attributes.position;if(vE.fromBufferAttribute(s,r),yE.fromBufferAttribute(s,a),n.distanceSqToSegment(vE,yE,uC,p4)>i)return;uC.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(uC);if(!(c<e.near||c>e.far))return{distance:c,point:p4.clone().applyMatrix4(t.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:t}}const m4=new se,g4=new se;class Ku extends Td{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)m4.fromBufferAttribute(n,r),g4.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+m4.distanceTo(g4);e.setAttribute("lineDistance",new Ft(i,1))}else Mt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Nq extends Td{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class XN extends Ya{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const v4=new en,iI=new mp,Xx=new ca,Yx=new se;class Dq extends Hn{constructor(e=new cn,n=new XN){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Xx.copy(i.boundingSphere),Xx.applyMatrix4(r),Xx.radius+=a,e.ray.intersectsSphere(Xx)===!1)return;v4.copy(r).invert(),iI.copy(e.ray).applyMatrix4(v4);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=s*s,c=i.index,p=i.attributes.position;if(c!==null){const g=Math.max(0,o.start),y=Math.min(c.count,o.start+o.count);for(let b=g,T=y;b<T;b++){const S=c.getX(b);Yx.fromBufferAttribute(p,S),y4(Yx,S,u,r,e,n,this)}}else{const g=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let b=g,T=y;b<T;b++)Yx.fromBufferAttribute(p,b),y4(Yx,b,u,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}function y4(t,e,n,i,r,a,o){const s=iI.distanceSqToPoint(t);if(s<n){const u=new se;iI.closestPointToPoint(t,u),u.applyMatrix4(i);const c=r.ray.origin.distanceTo(u);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Oq extends Qi{constructor(e,n,i,r,a=mi,o=mi,s,u,c){super(e,n,i,r,a,o,s,u,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const d=this;function p(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class hbe extends Oq{constructor(e,n,i,r,a,o,s,u){super({},e,n,i,r,a,o,s,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class pbe extends Qi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=br,this.minFilter=br,this.generateMipmaps=!1,this.needsUpdate=!0}}class HT extends Qi{constructor(e,n,i,r,a,o,s,u,c,d,p,g){super(null,o,s,u,c,d,r,a,p,g),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class mbe extends HT{constructor(e,n,i,r,a,o){super(e,n,i,a,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Jo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gbe extends HT{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class vbe extends Qi{constructor(e,n,i,r,a,o,s,u,c){super(e,n,i,r,a,o,s,u,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xg extends Qi{constructor(e,n,i=fl,r,a,o,s=br,u=br,c,d=ju,p=1){if(d!==ju&&d!==hd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const g={width:e,height:n,depth:p};super(g,r,a,o,s,u,d,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class Lq extends xg{constructor(e,n=fl,i=qu,r,a,o=br,s=br,u,c=ju){const d={width:e,height:e,depth:1},p=[d,d,d,d,d,d];super(e,e,n,i,r,a,o,s,u,c),this.image=p,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class YN extends Qi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class qT extends cn{constructor(e=1,n=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:a},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const o=[],s=[],u=[],c=[],d=n/2,p=Math.PI/2*e,g=n,y=2*p+g,b=i*2+a,T=r+1,S=new se,A=new se;for(let R=0;R<=b;R++){let I=0,N=0,D=0,U=0;if(R<=i){const L=R/i,F=L*Math.PI/2;N=-d-e*Math.cos(F),D=e*Math.sin(F),U=-e*Math.cos(F),I=L*p}else if(R<=i+a){const L=(R-i)/a;N=-d+L*n,D=e,U=0,I=p+L*g}else{const L=(R-i-a)/i,F=L*Math.PI/2;N=d+e*Math.sin(F),D=e*Math.cos(F),U=e*Math.sin(F),I=p+g+L*p}const k=Math.max(0,Math.min(1,I/y));let z=0;R===0?z=.5/r:R===b&&(z=-.5/r);for(let L=0;L<=r;L++){const F=L/r,j=F*Math.PI*2,W=Math.sin(j),X=Math.cos(j);A.x=-D*X,A.y=N,A.z=D*W,s.push(A.x,A.y,A.z),S.set(-D*X,U,D*W),S.normalize(),u.push(S.x,S.y,S.z),c.push(F+z,k)}if(R>0){const L=(R-1)*T;for(let F=0;F<r;F++){const j=L+F,W=L+F+1,X=R*T+F,Q=R*T+F+1;o.push(j,W,X),o.push(W,Q,X)}}}this.setIndex(o),this.setAttribute("position",new Ft(s,3)),this.setAttribute("normal",new Ft(u,3)),this.setAttribute("uv",new Ft(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qT(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class WT extends cn{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const a=[],o=[],s=[],u=[],c=new se,d=new st;o.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const y=i+p/n*r;c.x=e*Math.cos(y),c.y=e*Math.sin(y),o.push(c.x,c.y,c.z),s.push(0,0,1),d.x=(o[g]/e+1)/2,d.y=(o[g+1]/e+1)/2,u.push(d.x,d.y)}for(let p=1;p<=n;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new Ft(o,3)),this.setAttribute("normal",new Ft(s,3)),this.setAttribute("uv",new Ft(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class m_ extends cn{constructor(e=1,n=1,i=1,r=32,a=1,o=!1,s=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};const c=this;r=Math.floor(r),a=Math.floor(a);const d=[],p=[],g=[],y=[];let b=0;const T=[],S=i/2;let A=0;R(),o===!1&&(e>0&&I(!0),n>0&&I(!1)),this.setIndex(d),this.setAttribute("position",new Ft(p,3)),this.setAttribute("normal",new Ft(g,3)),this.setAttribute("uv",new Ft(y,2));function R(){const N=new se,D=new se;let U=0;const k=(n-e)/i;for(let z=0;z<=a;z++){const L=[],F=z/a,j=F*(n-e)+e;for(let W=0;W<=r;W++){const X=W/r,Q=X*u+s,ae=Math.sin(Q),$=Math.cos(Q);D.x=j*ae,D.y=-F*i+S,D.z=j*$,p.push(D.x,D.y,D.z),N.set(ae,k,$).normalize(),g.push(N.x,N.y,N.z),y.push(X,1-F),L.push(b++)}T.push(L)}for(let z=0;z<r;z++)for(let L=0;L<a;L++){const F=T[L][z],j=T[L+1][z],W=T[L+1][z+1],X=T[L][z+1];(e>0||L!==0)&&(d.push(F,j,X),U+=3),(n>0||L!==a-1)&&(d.push(j,W,X),U+=3)}c.addGroup(A,U,0),A+=U}function I(N){const D=b,U=new st,k=new se;let z=0;const L=N===!0?e:n,F=N===!0?1:-1;for(let W=1;W<=r;W++)p.push(0,S*F,0),g.push(0,F,0),y.push(.5,.5),b++;const j=b;for(let W=0;W<=r;W++){const Q=W/r*u+s,ae=Math.cos(Q),$=Math.sin(Q);k.x=L*$,k.y=S*F,k.z=L*ae,p.push(k.x,k.y,k.z),g.push(0,F,0),U.x=ae*.5+.5,U.y=$*.5*F+.5,y.push(U.x,U.y),b++}for(let W=0;W<r;W++){const X=D+W,Q=j+W;N===!0?d.push(Q,Q+1,X):d.push(Q+1,Q,X),z+=3}c.addGroup(A,z,N===!0?1:2),A+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class g_ extends m_{constructor(e=1,n=1,i=32,r=1,a=!1,o=0,s=Math.PI*2){super(0,e,n,i,r,a,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s}}static fromJSON(e){return new g_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dd extends cn{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const a=[],o=[];s(r),c(i),d(),this.setAttribute("position",new Ft(a,3)),this.setAttribute("normal",new Ft(a.slice(),3)),this.setAttribute("uv",new Ft(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function s(R){const I=new se,N=new se,D=new se;for(let U=0;U<n.length;U+=3)y(n[U+0],I),y(n[U+1],N),y(n[U+2],D),u(I,N,D,R)}function u(R,I,N,D){const U=D+1,k=[];for(let z=0;z<=U;z++){k[z]=[];const L=R.clone().lerp(N,z/U),F=I.clone().lerp(N,z/U),j=U-z;for(let W=0;W<=j;W++)W===0&&z===U?k[z][W]=L:k[z][W]=L.clone().lerp(F,W/j)}for(let z=0;z<U;z++)for(let L=0;L<2*(U-z)-1;L++){const F=Math.floor(L/2);L%2===0?(g(k[z][F+1]),g(k[z+1][F]),g(k[z][F])):(g(k[z][F+1]),g(k[z+1][F+1]),g(k[z+1][F]))}}function c(R){const I=new se;for(let N=0;N<a.length;N+=3)I.x=a[N+0],I.y=a[N+1],I.z=a[N+2],I.normalize().multiplyScalar(R),a[N+0]=I.x,a[N+1]=I.y,a[N+2]=I.z}function d(){const R=new se;for(let I=0;I<a.length;I+=3){R.x=a[I+0],R.y=a[I+1],R.z=a[I+2];const N=S(R)/2/Math.PI+.5,D=A(R)/Math.PI+.5;o.push(N,1-D)}b(),p()}function p(){for(let R=0;R<o.length;R+=6){const I=o[R+0],N=o[R+2],D=o[R+4],U=Math.max(I,N,D),k=Math.min(I,N,D);U>.9&&k<.1&&(I<.2&&(o[R+0]+=1),N<.2&&(o[R+2]+=1),D<.2&&(o[R+4]+=1))}}function g(R){a.push(R.x,R.y,R.z)}function y(R,I){const N=R*3;I.x=e[N+0],I.y=e[N+1],I.z=e[N+2]}function b(){const R=new se,I=new se,N=new se,D=new se,U=new st,k=new st,z=new st;for(let L=0,F=0;L<a.length;L+=9,F+=6){R.set(a[L+0],a[L+1],a[L+2]),I.set(a[L+3],a[L+4],a[L+5]),N.set(a[L+6],a[L+7],a[L+8]),U.set(o[F+0],o[F+1]),k.set(o[F+2],o[F+3]),z.set(o[F+4],o[F+5]),D.copy(R).add(I).add(N).divideScalar(3);const j=S(D);T(U,F+0,R,j),T(k,F+2,I,j),T(z,F+4,N,j)}}function T(R,I,N,D){D<0&&R.x===1&&(o[I]=R.x-1),N.x===0&&N.z===0&&(o[I]=D/2/Math.PI+.5)}function S(R){return Math.atan2(R.z,-R.x)}function A(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dd(e.vertices,e.indices,e.radius,e.detail)}}class jT extends Dd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new jT(e.radius,e.detail)}}const $x=new se,Kx=new se,cC=new se,Jx=new Yo;class Uq extends cn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos(Kh*n),o=e.getIndex(),s=e.getAttribute("position"),u=o?o.count:s.count,c=[0,0,0],d=["a","b","c"],p=new Array(3),g={},y=[];for(let b=0;b<u;b+=3){o?(c[0]=o.getX(b),c[1]=o.getX(b+1),c[2]=o.getX(b+2)):(c[0]=b,c[1]=b+1,c[2]=b+2);const{a:T,b:S,c:A}=Jx;if(T.fromBufferAttribute(s,c[0]),S.fromBufferAttribute(s,c[1]),A.fromBufferAttribute(s,c[2]),Jx.getNormal(cC),p[0]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let R=0;R<3;R++){const I=(R+1)%3,N=p[R],D=p[I],U=Jx[d[R]],k=Jx[d[I]],z=`${N}_${D}`,L=`${D}_${N}`;L in g&&g[L]?(cC.dot(g[L].normal)<=a&&(y.push(U.x,U.y,U.z),y.push(k.x,k.y,k.z)),g[L]=null):z in g||(g[z]={index0:c[R],index1:c[I],normal:cC.clone()})}}for(const b in g)if(g[b]){const{index0:T,index1:S}=g[b];$x.fromBufferAttribute(s,T),Kx.fromBufferAttribute(s,S),y.push($x.x,$x.y,$x.z),y.push(Kx.x,Kx.y,Kx.z)}this.setAttribute("position",new Ft(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ql{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Mt("Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),a=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),a+=i.distanceTo(r),n.push(a),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const a=i.length;let o;n?o=n:o=e*i[a-1];let s=0,u=a-1,c;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),c=i[r]-o,c<0)s=r+1;else if(c>0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(a-1);const d=i[r],g=i[r+1]-d,y=(o-d)/g;return(r+y)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const o=this.getPoint(r),s=this.getPoint(a),u=n||(o.isVector2?new st:new se);return u.copy(s).sub(o).normalize(),u}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new se,r=[],a=[],o=[],s=new se,u=new en;for(let y=0;y<=e;y++){const b=y/e;r[y]=this.getTangentAt(b,new se)}a[0]=new se,o[0]=new se;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),p=Math.abs(r[0].y),g=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),p<=c&&(c=p,i.set(0,1,0)),g<=c&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],s),o[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),o[y]=o[y-1].clone(),s.crossVectors(r[y-1],r[y]),s.length()>Number.EPSILON){s.normalize();const b=Math.acos(Qt(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(u.makeRotationAxis(s,b))}o[y].crossVectors(r[y],a[y])}if(n===!0){let y=Math.acos(Qt(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(s.crossVectors(a[0],a[e]))>0&&(y=-y);for(let b=1;b<=e;b++)a[b].applyMatrix4(u.makeRotationAxis(r[b],y*b)),o[b].crossVectors(r[b],a[b])}return{tangents:r,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class XT extends Ql{constructor(e=0,n=0,i=1,r=1,a=0,o=Math.PI*2,s=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=u}getPoint(e,n=new st){const i=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(o?a=0:a=r),this.aClockwise===!0&&!o&&(a===r?a=-r:a=a-r);const s=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=u-this.aX,y=c-this.aY;u=g*d-y*p+this.aX,c=g*p+y*d+this.aY}return i.set(u,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Fq extends XT{constructor(e,n,i,r,a,o){super(e,n,i,i,r,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function $N(){let t=0,e=0,n=0,i=0;function r(a,o,s,u){t=a,e=s,n=-3*a+3*o-2*s-u,i=2*a-2*o+s+u}return{initCatmullRom:function(a,o,s,u,c){r(o,s,c*(s-a),c*(u-o))},initNonuniformCatmullRom:function(a,o,s,u,c,d,p){let g=(o-a)/c-(s-a)/(c+d)+(s-o)/d,y=(s-o)/d-(u-o)/(d+p)+(u-s)/p;g*=d,y*=d,r(o,s,g,y)},calc:function(a){const o=a*a,s=o*a;return t+e*a+n*o+i*s}}}const Zx=new se,fC=new $N,dC=new $N,hC=new $N;class kq extends Ql{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new se){const i=n,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),u=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:u===0&&s===a-1&&(s=a-2,u=1);let c,d;this.closed||s>0?c=r[(s-1)%a]:(Zx.subVectors(r[0],r[1]).add(r[0]),c=Zx);const p=r[s%a],g=r[(s+1)%a];if(this.closed||s+2<a?d=r[(s+2)%a]:(Zx.subVectors(r[a-1],r[a-2]).add(r[a-1]),d=Zx),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(p),y),T=Math.pow(p.distanceToSquared(g),y),S=Math.pow(g.distanceToSquared(d),y);T<1e-4&&(T=1),b<1e-4&&(b=T),S<1e-4&&(S=T),fC.initNonuniformCatmullRom(c.x,p.x,g.x,d.x,b,T,S),dC.initNonuniformCatmullRom(c.y,p.y,g.y,d.y,b,T,S),hC.initNonuniformCatmullRom(c.z,p.z,g.z,d.z,b,T,S)}else this.curveType==="catmullrom"&&(fC.initCatmullRom(c.x,p.x,g.x,d.x,this.tension),dC.initCatmullRom(c.y,p.y,g.y,d.y,this.tension),hC.initCatmullRom(c.z,p.z,g.z,d.z,this.tension));return i.set(fC.calc(u),dC.calc(u),hC.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new se().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _4(t,e,n,i,r){const a=(i-e)*.5,o=(r-n)*.5,s=t*t,u=t*s;return(2*n-2*i+a+o)*u+(-3*n+3*i-2*a-o)*s+a*t+n}function ybe(t,e){const n=1-t;return n*n*e}function _be(t,e){return 2*(1-t)*t*e}function bbe(t,e){return t*t*e}function ey(t,e,n,i){return ybe(t,e)+_be(t,n)+bbe(t,i)}function xbe(t,e){const n=1-t;return n*n*n*e}function Sbe(t,e){const n=1-t;return 3*n*n*t*e}function Ebe(t,e){return 3*(1-t)*t*t*e}function Tbe(t,e){return t*t*t*e}function ty(t,e,n,i,r){return xbe(t,e)+Sbe(t,n)+Ebe(t,i)+Tbe(t,r)}class KN extends Ql{constructor(e=new st,n=new st,i=new st,r=new st){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new st){const i=n,r=this.v0,a=this.v1,o=this.v2,s=this.v3;return i.set(ty(e,r.x,a.x,o.x,s.x),ty(e,r.y,a.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bq extends Ql{constructor(e=new se,n=new se,i=new se,r=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new se){const i=n,r=this.v0,a=this.v1,o=this.v2,s=this.v3;return i.set(ty(e,r.x,a.x,o.x,s.x),ty(e,r.y,a.y,o.y,s.y),ty(e,r.z,a.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class JN extends Ql{constructor(e=new st,n=new st){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new st){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new st){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zq extends Ql{constructor(e=new se,n=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new se){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new se){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZN extends Ql{constructor(e=new st,n=new st,i=new st){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new st){const i=n,r=this.v0,a=this.v1,o=this.v2;return i.set(ey(e,r.x,a.x,o.x),ey(e,r.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QN extends Ql{constructor(e=new se,n=new se,i=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new se){const i=n,r=this.v0,a=this.v1,o=this.v2;return i.set(ey(e,r.x,a.x,o.x),ey(e,r.y,a.y,o.y),ey(e,r.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eD extends Ql{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new st){const i=n,r=this.points,a=(r.length-1)*e,o=Math.floor(a),s=a-o,u=r[o===0?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(_4(s,u.x,c.x,d.x,p.x),_4(s,u.y,c.y,d.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new st().fromArray(r))}return this}}var _E=Object.freeze({__proto__:null,ArcCurve:Fq,CatmullRomCurve3:kq,CubicBezierCurve:KN,CubicBezierCurve3:Bq,EllipseCurve:XT,LineCurve:JN,LineCurve3:zq,QuadraticBezierCurve:ZN,QuadraticBezierCurve3:QN,SplineCurve:eD});class Gq extends Ql{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new _E[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const o=r[a]-i,s=this.curves[a],u=s.getLength(),c=u===0?0:1-o/u;return s.getPointAt(c,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const o=a[r],s=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(s);for(let c=0;c<u.length;c++){const d=u[c];i&&i.equals(d)||(n.push(d),i=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new _E[r.type]().fromJSON(r))}return this}}class bE extends Gq{constructor(e){super(),this.type="Path",this.currentPoint=new st,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new JN(this.currentPoint.clone(),new st(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const a=new ZN(this.currentPoint.clone(),new st(e,n),new st(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,a,o){const s=new KN(this.currentPoint.clone(),new st(e,n),new st(i,r),new st(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new eD(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,a,o){const s=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+s,n+u,i,r,a,o),this}absarc(e,n,i,r,a,o){return this.absellipse(e,n,i,i,r,a,o),this}ellipse(e,n,i,r,a,o,s,u){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,n+d,i,r,a,o,s,u),this}absellipse(e,n,i,r,a,o,s,u){const c=new XT(e,n,i,r,a,o,s,u);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Jh extends bE{constructor(e){super(e),this.uuid=_s(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new bE().fromJSON(r))}return this}}function Abe(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=Vq(t,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,u,c;if(i&&(a=Ibe(t,e,a,n)),t.length>80*n){s=t[0],u=t[1];let d=s,p=u;for(let g=n;g<r;g+=n){const y=t[g],b=t[g+1];y<s&&(s=y),b<u&&(u=b),y>d&&(d=y),b>p&&(p=b)}c=Math.max(d-s,p-u),c=c!==0?32767/c:0}return Oy(a,o,n,s,u,c,0),o}function Vq(t,e,n,i,r){let a;if(r===Gbe(t,e,n,i)>0)for(let o=e;o<n;o+=i)a=b4(o/i|0,t[o],t[o+1],a);else for(let o=n-i;o>=e;o-=i)a=b4(o/i|0,t[o],t[o+1],a);return a&&Sg(a,a.next)&&(Uy(a),a=a.next),a}function up(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Sg(n,n.next)||Ji(n.prev,n,n.next)===0)){if(Uy(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Oy(t,e,n,i,r,a,o){if(!t)return;!o&&a&&Lbe(t,i,r,a);let s=t;for(;t.prev!==t.next;){const u=t.prev,c=t.next;if(a?wbe(t,i,r,a):Mbe(t)){e.push(u.i,t.i,c.i),Uy(t),t=c.next,s=c.next;continue}if(t=c,t===s){o?o===1?(t=Cbe(up(t),e),Oy(t,e,n,i,r,a,2)):o===2&&Rbe(t,e,n,i,r,a):Oy(up(t),e,n,i,r,a,1);break}}}function Mbe(t){const e=t.prev,n=t,i=t.next;if(Ji(e,n,i)>=0)return!1;const r=e.x,a=n.x,o=i.x,s=e.y,u=n.y,c=i.y,d=Math.min(r,a,o),p=Math.min(s,u,c),g=Math.max(r,a,o),y=Math.max(s,u,c);let b=i.next;for(;b!==e;){if(b.x>=d&&b.x<=g&&b.y>=p&&b.y<=y&&H0(r,s,a,u,o,c,b.x,b.y)&&Ji(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function wbe(t,e,n,i){const r=t.prev,a=t,o=t.next;if(Ji(r,a,o)>=0)return!1;const s=r.x,u=a.x,c=o.x,d=r.y,p=a.y,g=o.y,y=Math.min(s,u,c),b=Math.min(d,p,g),T=Math.max(s,u,c),S=Math.max(d,p,g),A=rI(y,b,e,n,i),R=rI(T,S,e,n,i);let I=t.prevZ,N=t.nextZ;for(;I&&I.z>=A&&N&&N.z<=R;){if(I.x>=y&&I.x<=T&&I.y>=b&&I.y<=S&&I!==r&&I!==o&&H0(s,d,u,p,c,g,I.x,I.y)&&Ji(I.prev,I,I.next)>=0||(I=I.prevZ,N.x>=y&&N.x<=T&&N.y>=b&&N.y<=S&&N!==r&&N!==o&&H0(s,d,u,p,c,g,N.x,N.y)&&Ji(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;I&&I.z>=A;){if(I.x>=y&&I.x<=T&&I.y>=b&&I.y<=S&&I!==r&&I!==o&&H0(s,d,u,p,c,g,I.x,I.y)&&Ji(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;N&&N.z<=R;){if(N.x>=y&&N.x<=T&&N.y>=b&&N.y<=S&&N!==r&&N!==o&&H0(s,d,u,p,c,g,N.x,N.y)&&Ji(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function Cbe(t,e){let n=t;do{const i=n.prev,r=n.next.next;!Sg(i,r)&&qq(i,n,n.next,r)&&Ly(i,r)&&Ly(r,i)&&(e.push(i.i,n.i,r.i),Uy(n),Uy(n.next),n=t=r),n=n.next}while(n!==t);return up(n)}function Rbe(t,e,n,i,r,a){let o=t;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&kbe(o,s)){let u=Wq(o,s);o=up(o,o.next),u=up(u,u.next),Oy(o,e,n,i,r,a,0),Oy(u,e,n,i,r,a,0);return}s=s.next}o=o.next}while(o!==t)}function Ibe(t,e,n,i){const r=[];for(let a=0,o=e.length;a<o;a++){const s=e[a]*i,u=a<o-1?e[a+1]*i:t.length,c=Vq(t,s,u,i,!1);c===c.next&&(c.steiner=!0),r.push(Fbe(c))}r.sort(Pbe);for(let a=0;a<r.length;a++)n=Nbe(r[a],n);return n}function Pbe(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function Nbe(t,e){const n=Dbe(t,e);if(!n)return e;const i=Wq(n,t);return up(i,i.next),up(n,n.next)}function Dbe(t,e){let n=e;const i=t.x,r=t.y;let a=-1/0,o;if(Sg(t,n))return n;do{if(Sg(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const p=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=i&&p>a&&(a=p,o=n.x<n.next.x?n:n.next,p===i))return o}n=n.next}while(n!==e);if(!o)return null;const s=o,u=o.x,c=o.y;let d=1/0;n=o;do{if(i>=n.x&&n.x>=u&&i!==n.x&&Hq(r<c?i:a,r,u,c,r<c?a:i,r,n.x,n.y)){const p=Math.abs(r-n.y)/(i-n.x);Ly(n,t)&&(p<d||p===d&&(n.x>o.x||n.x===o.x&&Obe(o,n)))&&(o=n,d=p)}n=n.next}while(n!==s);return o}function Obe(t,e){return Ji(t.prev,t,e.prev)<0&&Ji(e.next,t,t.next)<0}function Lbe(t,e,n,i){let r=t;do r.z===0&&(r.z=rI(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Ube(r)}function Ube(t){let e,n=1;do{let i=t,r;t=null;let a=null;for(e=0;i;){e++;let o=i,s=0;for(let c=0;c<n&&(s++,o=o.nextZ,!!o);c++);let u=n;for(;s>0||u>0&&o;)s!==0&&(u===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,s--):(r=o,o=o.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=o}a.nextZ=null,n*=2}while(e>1);return t}function rI(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Fbe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Hq(t,e,n,i,r,a,o,s){return(r-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(i-s)>=(n-o)*(e-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function H0(t,e,n,i,r,a,o,s){return!(t===o&&e===s)&&Hq(t,e,n,i,r,a,o,s)}function kbe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Bbe(t,e)&&(Ly(t,e)&&Ly(e,t)&&zbe(t,e)&&(Ji(t.prev,t,e.prev)||Ji(t,e.prev,e))||Sg(t,e)&&Ji(t.prev,t,t.next)>0&&Ji(e.prev,e,e.next)>0)}function Ji(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Sg(t,e){return t.x===e.x&&t.y===e.y}function qq(t,e,n,i){const r=eS(Ji(t,e,n)),a=eS(Ji(t,e,i)),o=eS(Ji(n,i,t)),s=eS(Ji(n,i,e));return!!(r!==a&&o!==s||r===0&&Qx(t,n,e)||a===0&&Qx(t,i,e)||o===0&&Qx(n,t,i)||s===0&&Qx(n,e,i))}function Qx(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function eS(t){return t>0?1:t<0?-1:0}function Bbe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&qq(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Ly(t,e){return Ji(t.prev,t,t.next)<0?Ji(t,e,t.next)>=0&&Ji(t,t.prev,e)>=0:Ji(t,e,t.prev)<0||Ji(t,t.next,e)<0}function zbe(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function Wq(t,e){const n=aI(t.i,t.x,t.y),i=aI(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function b4(t,e,n,i){const r=aI(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Uy(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function aI(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Gbe(t,e,n,i){let r=0;for(let a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}class Vbe{static triangulate(e,n,i=2){return Abe(e,n,i)}}class ql{static area(e){const n=e.length;let i=0;for(let r=n-1,a=0;a<n;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return ql.area(e)<0}static triangulateShape(e,n){const i=[],r=[],a=[];x4(e),S4(i,e);let o=e.length;n.forEach(x4);for(let u=0;u<n.length;u++)r.push(o),o+=n[u].length,S4(i,n[u]);const s=Vbe.triangulate(i,r);for(let u=0;u<s.length;u+=3)a.push(s.slice(u,u+3));return a}}function x4(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function S4(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class YT extends cn{constructor(e=new Jh([new st(.5,.5),new st(-.5,.5),new st(-.5,-.5),new st(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let s=0,u=e.length;s<u;s++){const c=e[s];o(c)}this.setAttribute("position",new Ft(r,3)),this.setAttribute("uv",new Ft(a,2)),this.computeVertexNormals();function o(s){const u=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,y=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:y-.1,T=n.bevelOffset!==void 0?n.bevelOffset:0,S=n.bevelSegments!==void 0?n.bevelSegments:3;const A=n.extrudePath,R=n.UVGenerator!==void 0?n.UVGenerator:Hbe;let I,N=!1,D,U,k,z;if(A){I=A.getSpacedPoints(d),N=!0,g=!1;const Se=A.isCatmullRomCurve3?A.closed:!1;D=A.computeFrenetFrames(d,Se),U=new se,k=new se,z=new se}g||(S=0,y=0,b=0,T=0);const L=s.extractPoints(c);let F=L.shape;const j=L.holes;if(!ql.isClockWise(F)){F=F.reverse();for(let Se=0,Oe=j.length;Se<Oe;Se++){const Me=j[Se];ql.isClockWise(Me)&&(j[Se]=Me.reverse())}}function X(Se){const Me=10000000000000001e-36;let Je=Se[0];for(let Z=1;Z<=Se.length;Z++){const it=Z%Se.length,je=Se[it],Re=je.x-Je.x,He=je.y-Je.y,Y=Re*Re+He*He,q=Math.max(Math.abs(je.x),Math.abs(je.y),Math.abs(Je.x),Math.abs(Je.y)),fe=Me*q*q;if(Y<=fe){Se.splice(it,1),Z--;continue}Je=je}}X(F),j.forEach(X);const Q=j.length,ae=F;for(let Se=0;Se<Q;Se++){const Oe=j[Se];F=F.concat(Oe)}function $(Se,Oe,Me){return Oe||Ht("ExtrudeGeometry: vec does not exist"),Se.clone().addScaledVector(Oe,Me)}const ie=F.length;function me(Se,Oe,Me){let Je,Z,it;const je=Se.x-Oe.x,Re=Se.y-Oe.y,He=Me.x-Se.x,Y=Me.y-Se.y,q=je*je+Re*Re,fe=je*Y-Re*He;if(Math.abs(fe)>Number.EPSILON){const Le=Math.sqrt(q),Ie=Math.sqrt(He*He+Y*Y),Te=Oe.x-Re/Le,ot=Oe.y+je/Le,rt=Me.x-Y/Ie,mt=Me.y+He/Ie,xt=((rt-Te)*Y-(mt-ot)*He)/(je*Y-Re*He);Je=Te+je*xt-Se.x,Z=ot+Re*xt-Se.y;const We=Je*Je+Z*Z;if(We<=2)return new st(Je,Z);it=Math.sqrt(We/2)}else{let Le=!1;je>Number.EPSILON?He>Number.EPSILON&&(Le=!0):je<-Number.EPSILON?He<-Number.EPSILON&&(Le=!0):Math.sign(Re)===Math.sign(Y)&&(Le=!0),Le?(Je=-Re,Z=je,it=Math.sqrt(q)):(Je=je,Z=Re,it=Math.sqrt(q/2))}return new st(Je/it,Z/it)}const pe=[];for(let Se=0,Oe=ae.length,Me=Oe-1,Je=Se+1;Se<Oe;Se++,Me++,Je++)Me===Oe&&(Me=0),Je===Oe&&(Je=0),pe[Se]=me(ae[Se],ae[Me],ae[Je]);const de=[];let H,ne=pe.concat();for(let Se=0,Oe=Q;Se<Oe;Se++){const Me=j[Se];H=[];for(let Je=0,Z=Me.length,it=Z-1,je=Je+1;Je<Z;Je++,it++,je++)it===Z&&(it=0),je===Z&&(je=0),H[Je]=me(Me[Je],Me[it],Me[je]);de.push(H),ne=ne.concat(H)}let le;if(S===0)le=ql.triangulateShape(ae,j);else{const Se=[],Oe=[];for(let Me=0;Me<S;Me++){const Je=Me/S,Z=y*Math.cos(Je*Math.PI/2),it=b*Math.sin(Je*Math.PI/2)+T;for(let je=0,Re=ae.length;je<Re;je++){const He=$(ae[je],pe[je],it);ce(He.x,He.y,-Z),Je===0&&Se.push(He)}for(let je=0,Re=Q;je<Re;je++){const He=j[je];H=de[je];const Y=[];for(let q=0,fe=He.length;q<fe;q++){const Le=$(He[q],H[q],it);ce(Le.x,Le.y,-Z),Je===0&&Y.push(Le)}Je===0&&Oe.push(Y)}}le=ql.triangulateShape(Se,Oe)}const ge=le.length,_e=b+T;for(let Se=0;Se<ie;Se++){const Oe=g?$(F[Se],ne[Se],_e):F[Se];N?(k.copy(D.normals[0]).multiplyScalar(Oe.x),U.copy(D.binormals[0]).multiplyScalar(Oe.y),z.copy(I[0]).add(k).add(U),ce(z.x,z.y,z.z)):ce(Oe.x,Oe.y,0)}for(let Se=1;Se<=d;Se++)for(let Oe=0;Oe<ie;Oe++){const Me=g?$(F[Oe],ne[Oe],_e):F[Oe];N?(k.copy(D.normals[Se]).multiplyScalar(Me.x),U.copy(D.binormals[Se]).multiplyScalar(Me.y),z.copy(I[Se]).add(k).add(U),ce(z.x,z.y,z.z)):ce(Me.x,Me.y,p/d*Se)}for(let Se=S-1;Se>=0;Se--){const Oe=Se/S,Me=y*Math.cos(Oe*Math.PI/2),Je=b*Math.sin(Oe*Math.PI/2)+T;for(let Z=0,it=ae.length;Z<it;Z++){const je=$(ae[Z],pe[Z],Je);ce(je.x,je.y,p+Me)}for(let Z=0,it=j.length;Z<it;Z++){const je=j[Z];H=de[Z];for(let Re=0,He=je.length;Re<He;Re++){const Y=$(je[Re],H[Re],Je);N?ce(Y.x,Y.y+I[d-1].y,I[d-1].x+Me):ce(Y.x,Y.y,p+Me)}}}re(),oe();function re(){const Se=r.length/3;if(g){let Oe=0,Me=ie*Oe;for(let Je=0;Je<ge;Je++){const Z=le[Je];Ce(Z[2]+Me,Z[1]+Me,Z[0]+Me)}Oe=d+S*2,Me=ie*Oe;for(let Je=0;Je<ge;Je++){const Z=le[Je];Ce(Z[0]+Me,Z[1]+Me,Z[2]+Me)}}else{for(let Oe=0;Oe<ge;Oe++){const Me=le[Oe];Ce(Me[2],Me[1],Me[0])}for(let Oe=0;Oe<ge;Oe++){const Me=le[Oe];Ce(Me[0]+ie*d,Me[1]+ie*d,Me[2]+ie*d)}}i.addGroup(Se,r.length/3-Se,0)}function oe(){const Se=r.length/3;let Oe=0;Ee(ae,Oe),Oe+=ae.length;for(let Me=0,Je=j.length;Me<Je;Me++){const Z=j[Me];Ee(Z,Oe),Oe+=Z.length}i.addGroup(Se,r.length/3-Se,1)}function Ee(Se,Oe){let Me=Se.length;for(;--Me>=0;){const Je=Me;let Z=Me-1;Z<0&&(Z=Se.length-1);for(let it=0,je=d+S*2;it<je;it++){const Re=ie*it,He=ie*(it+1),Y=Oe+Je+Re,q=Oe+Z+Re,fe=Oe+Z+He,Le=Oe+Je+He;Ue(Y,q,fe,Le)}}}function ce(Se,Oe,Me){u.push(Se),u.push(Oe),u.push(Me)}function Ce(Se,Oe,Me){ve(Se),ve(Oe),ve(Me);const Je=r.length/3,Z=R.generateTopUV(i,r,Je-3,Je-2,Je-1);ft(Z[0]),ft(Z[1]),ft(Z[2])}function Ue(Se,Oe,Me,Je){ve(Se),ve(Oe),ve(Je),ve(Oe),ve(Me),ve(Je);const Z=r.length/3,it=R.generateSideWallUV(i,r,Z-6,Z-3,Z-2,Z-1);ft(it[0]),ft(it[1]),ft(it[3]),ft(it[1]),ft(it[2]),ft(it[3])}function ve(Se){r.push(u[Se*3+0]),r.push(u[Se*3+1]),r.push(u[Se*3+2])}function ft(Se){a.push(Se.x),a.push(Se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return qbe(n,i,e)}static fromJSON(e,n){const i=[];for(let a=0,o=e.shapes.length;a<o;a++){const s=n[e.shapes[a]];i.push(s)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new _E[r.type]().fromJSON(r)),new YT(i,e.options)}}const Hbe={generateTopUV:function(t,e,n,i,r){const a=e[n*3],o=e[n*3+1],s=e[i*3],u=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new st(a,o),new st(s,u),new st(c,d)]},generateSideWallUV:function(t,e,n,i,r,a){const o=e[n*3],s=e[n*3+1],u=e[n*3+2],c=e[i*3],d=e[i*3+1],p=e[i*3+2],g=e[r*3],y=e[r*3+1],b=e[r*3+2],T=e[a*3],S=e[a*3+1],A=e[a*3+2];return Math.abs(s-d)<Math.abs(o-c)?[new st(o,1-u),new st(c,1-p),new st(g,1-b),new st(T,1-A)]:[new st(s,1-u),new st(d,1-p),new st(y,1-b),new st(S,1-A)]}};function qbe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class $T extends Dd{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new $T(e.radius,e.detail)}}class KT extends cn{constructor(e=[new st(0,-.5),new st(.5,0),new st(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Qt(r,0,Math.PI*2);const a=[],o=[],s=[],u=[],c=[],d=1/n,p=new se,g=new st,y=new se,b=new se,T=new se;let S=0,A=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:S=e[R+1].x-e[R].x,A=e[R+1].y-e[R].y,y.x=A*1,y.y=-S,y.z=A*0,T.copy(y),y.normalize(),u.push(y.x,y.y,y.z);break;case e.length-1:u.push(T.x,T.y,T.z);break;default:S=e[R+1].x-e[R].x,A=e[R+1].y-e[R].y,y.x=A*1,y.y=-S,y.z=A*0,b.copy(y),y.x+=T.x,y.y+=T.y,y.z+=T.z,y.normalize(),u.push(y.x,y.y,y.z),T.copy(b)}for(let R=0;R<=n;R++){const I=i+R*d*r,N=Math.sin(I),D=Math.cos(I);for(let U=0;U<=e.length-1;U++){p.x=e[U].x*N,p.y=e[U].y,p.z=e[U].x*D,o.push(p.x,p.y,p.z),g.x=R/n,g.y=U/(e.length-1),s.push(g.x,g.y);const k=u[3*U+0]*N,z=u[3*U+1],L=u[3*U+0]*D;c.push(k,z,L)}}for(let R=0;R<n;R++)for(let I=0;I<e.length-1;I++){const N=I+R*e.length,D=N,U=N+e.length,k=N+e.length+1,z=N+1;a.push(D,U,z),a.push(k,z,U)}this.setIndex(a),this.setAttribute("position",new Ft(o,3)),this.setAttribute("uv",new Ft(s,2)),this.setAttribute("normal",new Ft(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KT(e.points,e.segments,e.phiStart,e.phiLength)}}class v_ extends Dd{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new v_(e.radius,e.detail)}}class mf extends cn{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,o=n/2,s=Math.floor(i),u=Math.floor(r),c=s+1,d=u+1,p=e/s,g=n/u,y=[],b=[],T=[],S=[];for(let A=0;A<d;A++){const R=A*g-o;for(let I=0;I<c;I++){const N=I*p-a;b.push(N,-R,0),T.push(0,0,1),S.push(I/s),S.push(1-A/u)}}for(let A=0;A<u;A++)for(let R=0;R<s;R++){const I=R+c*A,N=R+c*(A+1),D=R+1+c*(A+1),U=R+1+c*A;y.push(I,N,U),y.push(N,D,U)}this.setIndex(y),this.setAttribute("position",new Ft(b,3)),this.setAttribute("normal",new Ft(T,3)),this.setAttribute("uv",new Ft(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mf(e.width,e.height,e.widthSegments,e.heightSegments)}}class JT extends cn{constructor(e=.5,n=1,i=32,r=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const s=[],u=[],c=[],d=[];let p=e;const g=(n-e)/r,y=new se,b=new st;for(let T=0;T<=r;T++){for(let S=0;S<=i;S++){const A=a+S/i*o;y.x=p*Math.cos(A),y.y=p*Math.sin(A),u.push(y.x,y.y,y.z),c.push(0,0,1),b.x=(y.x/n+1)/2,b.y=(y.y/n+1)/2,d.push(b.x,b.y)}p+=g}for(let T=0;T<r;T++){const S=T*(i+1);for(let A=0;A<i;A++){const R=A+S,I=R,N=R+i+1,D=R+i+2,U=R+1;s.push(I,N,U),s.push(N,D,U)}}this.setIndex(s),this.setAttribute("position",new Ft(u,3)),this.setAttribute("normal",new Ft(c,3)),this.setAttribute("uv",new Ft(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new JT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ZT extends cn{constructor(e=new Jh([new st(0,.5),new st(-.5,-.5),new st(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],o=[];let s=0,u=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(s,u,d),s+=u,u=0;this.setIndex(i),this.setAttribute("position",new Ft(r,3)),this.setAttribute("normal",new Ft(a,3)),this.setAttribute("uv",new Ft(o,2));function c(d){const p=r.length/3,g=d.extractPoints(n);let y=g.shape;const b=g.holes;ql.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,A=b.length;S<A;S++){const R=b[S];ql.isClockWise(R)===!0&&(b[S]=R.reverse())}const T=ql.triangulateShape(y,b);for(let S=0,A=b.length;S<A;S++){const R=b[S];y=y.concat(R)}for(let S=0,A=y.length;S<A;S++){const R=y[S];r.push(R.x,R.y,0),a.push(0,0,1),o.push(R.x,R.y)}for(let S=0,A=T.length;S<A;S++){const R=T[S],I=R[0]+p,N=R[1]+p,D=R[2]+p;i.push(I,N,D),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Wbe(n,e)}static fromJSON(e,n){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=n[e.shapes[r]];i.push(o)}return new ZT(i,e.curveSegments)}}function Wbe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class y_ extends cn{constructor(e=1,n=32,i=16,r=0,a=Math.PI*2,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:o,thetaLength:s},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const u=Math.min(o+s,Math.PI);let c=0;const d=[],p=new se,g=new se,y=[],b=[],T=[],S=[];for(let A=0;A<=i;A++){const R=[],I=A/i;let N=0;A===0&&o===0?N=.5/n:A===i&&u===Math.PI&&(N=-.5/n);for(let D=0;D<=n;D++){const U=D/n;p.x=-e*Math.cos(r+U*a)*Math.sin(o+I*s),p.y=e*Math.cos(o+I*s),p.z=e*Math.sin(r+U*a)*Math.sin(o+I*s),b.push(p.x,p.y,p.z),g.copy(p).normalize(),T.push(g.x,g.y,g.z),S.push(U+N,1-I),R.push(c++)}d.push(R)}for(let A=0;A<i;A++)for(let R=0;R<n;R++){const I=d[A][R+1],N=d[A][R],D=d[A+1][R],U=d[A+1][R+1];(A!==0||o>0)&&y.push(I,N,U),(A!==i-1||u<Math.PI)&&y.push(N,D,U)}this.setIndex(y),this.setAttribute("position",new Ft(b,3)),this.setAttribute("normal",new Ft(T,3)),this.setAttribute("uv",new Ft(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class QT extends Dd{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new QT(e.radius,e.detail)}}class eA extends cn{constructor(e=1,n=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const o=[],s=[],u=[],c=[],d=new se,p=new se,g=new se;for(let y=0;y<=i;y++)for(let b=0;b<=r;b++){const T=b/r*a,S=y/i*Math.PI*2;p.x=(e+n*Math.cos(S))*Math.cos(T),p.y=(e+n*Math.cos(S))*Math.sin(T),p.z=n*Math.sin(S),s.push(p.x,p.y,p.z),d.x=e*Math.cos(T),d.y=e*Math.sin(T),g.subVectors(p,d).normalize(),u.push(g.x,g.y,g.z),c.push(b/r),c.push(y/i)}for(let y=1;y<=i;y++)for(let b=1;b<=r;b++){const T=(r+1)*y+b-1,S=(r+1)*(y-1)+b-1,A=(r+1)*(y-1)+b,R=(r+1)*y+b;o.push(T,S,R),o.push(S,A,R)}this.setIndex(o),this.setAttribute("position",new Ft(s,3)),this.setAttribute("normal",new Ft(u,3)),this.setAttribute("uv",new Ft(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class tA extends cn{constructor(e=1,n=.4,i=64,r=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:a,q:o},i=Math.floor(i),r=Math.floor(r);const s=[],u=[],c=[],d=[],p=new se,g=new se,y=new se,b=new se,T=new se,S=new se,A=new se;for(let I=0;I<=i;++I){const N=I/i*a*Math.PI*2;R(N,a,o,e,y),R(N+.01,a,o,e,b),S.subVectors(b,y),A.addVectors(b,y),T.crossVectors(S,A),A.crossVectors(T,S),T.normalize(),A.normalize();for(let D=0;D<=r;++D){const U=D/r*Math.PI*2,k=-n*Math.cos(U),z=n*Math.sin(U);p.x=y.x+(k*A.x+z*T.x),p.y=y.y+(k*A.y+z*T.y),p.z=y.z+(k*A.z+z*T.z),u.push(p.x,p.y,p.z),g.subVectors(p,y).normalize(),c.push(g.x,g.y,g.z),d.push(I/i),d.push(D/r)}}for(let I=1;I<=i;I++)for(let N=1;N<=r;N++){const D=(r+1)*(I-1)+(N-1),U=(r+1)*I+(N-1),k=(r+1)*I+N,z=(r+1)*(I-1)+N;s.push(D,U,z),s.push(U,k,z)}this.setIndex(s),this.setAttribute("position",new Ft(u,3)),this.setAttribute("normal",new Ft(c,3)),this.setAttribute("uv",new Ft(d,2));function R(I,N,D,U,k){const z=Math.cos(I),L=Math.sin(I),F=D/N*I,j=Math.cos(F);k.x=U*(2+j)*.5*z,k.y=U*(2+j)*L*.5,k.z=U*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class nA extends cn{constructor(e=new QN(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),n=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:a};const o=e.computeFrenetFrames(n,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new se,u=new se,c=new st;let d=new se;const p=[],g=[],y=[],b=[];T(),this.setIndex(b),this.setAttribute("position",new Ft(p,3)),this.setAttribute("normal",new Ft(g,3)),this.setAttribute("uv",new Ft(y,2));function T(){for(let I=0;I<n;I++)S(I);S(a===!1?n:0),R(),A()}function S(I){d=e.getPointAt(I/n,d);const N=o.normals[I],D=o.binormals[I];for(let U=0;U<=r;U++){const k=U/r*Math.PI*2,z=Math.sin(k),L=-Math.cos(k);u.x=L*N.x+z*D.x,u.y=L*N.y+z*D.y,u.z=L*N.z+z*D.z,u.normalize(),g.push(u.x,u.y,u.z),s.x=d.x+i*u.x,s.y=d.y+i*u.y,s.z=d.z+i*u.z,p.push(s.x,s.y,s.z)}}function A(){for(let I=1;I<=n;I++)for(let N=1;N<=r;N++){const D=(r+1)*(I-1)+(N-1),U=(r+1)*I+(N-1),k=(r+1)*I+N,z=(r+1)*(I-1)+N;b.push(D,U,z),b.push(U,k,z)}}function R(){for(let I=0;I<=n;I++)for(let N=0;N<=r;N++)c.x=I/n,c.y=N/r,y.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new nA(new _E[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jq extends cn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new se,a=new se;if(e.index!==null){const o=e.attributes.position,s=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:s.count,materialIndex:0}]);for(let c=0,d=u.length;c<d;++c){const p=u[c],g=p.start,y=p.count;for(let b=g,T=g+y;b<T;b+=3)for(let S=0;S<3;S++){const A=s.getX(b+S),R=s.getX(b+(S+1)%3);r.fromBufferAttribute(o,A),a.fromBufferAttribute(o,R),E4(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let s=0,u=o.count/3;s<u;s++)for(let c=0;c<3;c++){const d=3*s+c,p=3*s+(c+1)%3;r.fromBufferAttribute(o,d),a.fromBufferAttribute(o,p),E4(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ft(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function E4(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var T4=Object.freeze({__proto__:null,BoxGeometry:gp,CapsuleGeometry:qT,CircleGeometry:WT,ConeGeometry:g_,CylinderGeometry:m_,DodecahedronGeometry:jT,EdgesGeometry:Uq,ExtrudeGeometry:YT,IcosahedronGeometry:$T,LatheGeometry:KT,OctahedronGeometry:v_,PlaneGeometry:mf,PolyhedronGeometry:Dd,RingGeometry:JT,ShapeGeometry:ZT,SphereGeometry:y_,TetrahedronGeometry:QT,TorusGeometry:eA,TorusKnotGeometry:tA,TubeGeometry:nA,WireframeGeometry:jq});class Xq extends Ya{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ct(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tD extends Ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class nD extends Ya{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ct(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Es,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yq extends nD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new st(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ct(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ct(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ct(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $q extends Ya{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ct(16777215),this.specular=new Ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Es,this.combine=d_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Kq extends Ya{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ct(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Jq extends Ya{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Zq extends Ya{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Es,this.combine=d_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iA extends Ya{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=uq,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rA extends Ya{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Qq extends Ya{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ct(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nd,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e7 extends xo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wh(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function t7(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function oI(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,o=0;o!==i;++a){const s=n[a]*e;for(let u=0;u!==e;++u)r[o++]=t[s+u]}return r}function iD(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(e.push(a.time),n.push(...o)),a=t[r++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do o=a[i],o!==void 0&&(e.push(a.time),n.push(o)),a=t[r++];while(a!==void 0)}function jbe(t,e,n,i,r=30){const a=t.clone();a.name=e;const o=[];for(let u=0;u<a.tracks.length;++u){const c=a.tracks[u],d=c.getValueSize(),p=[],g=[];for(let y=0;y<c.times.length;++y){const b=c.times[y]*r;if(!(b<n||b>=i)){p.push(c.times[y]);for(let T=0;T<d;++T)g.push(c.values[y*d+T])}}p.length!==0&&(c.times=Wh(p,c.times.constructor),c.values=Wh(g,c.values.constructor),o.push(c))}a.tracks=o;let s=1/0;for(let u=0;u<a.tracks.length;++u)s>a.tracks[u].times[0]&&(s=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*s);return a.resetDuration(),a}function Xbe(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let o=0;o<r;++o){const s=n.tracks[o],u=s.ValueTypeName;if(u==="bool"||u==="string")continue;const c=t.tracks.find(function(A){return A.name===s.name&&A.ValueTypeName===u});if(c===void 0)continue;let d=0;const p=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let g=0;const y=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const b=s.times.length-1;let T;if(a<=s.times[0]){const A=d,R=p-d;T=s.values.slice(A,R)}else if(a>=s.times[b]){const A=b*p+d,R=A+p-d;T=s.values.slice(A,R)}else{const A=s.createInterpolant(),R=d,I=p-d;A.evaluate(a),T=A.resultBuffer.slice(R,I)}u==="quaternion"&&new Xa().fromArray(T).normalize().conjugate().toArray(T);const S=c.times.length;for(let A=0;A<S;++A){const R=A*y+g;if(u==="quaternion")Xa.multiplyQuaternionsFlat(c.values,R,T,0,c.values,R);else{const I=y-g*2;for(let N=0;N<I;++N)c.values[R+N]-=T[N]}}}return t.blendMode=FN,t}class Ybe{static convertArray(e,n){return Wh(e,n)}static isTypedArray(e){return _q(e)}static getKeyframeOrder(e){return t7(e)}static sortedArray(e,n,i){return oI(e,n,i)}static flattenJSON(e,n,i,r){iD(e,n,i,r)}static subclip(e,n,i,r,a=30){return jbe(e,n,i,r,a)}static makeClipAdditive(e,n=0,i=e,r=30){return Xbe(e,n,i,r)}}class __{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let s=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(a=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=a)){const s=n[1];e<s&&(i=2,a=s);for(let u=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=a,a=n[--i-1],e>=a)break t}o=i,i=0;break n}break e}for(;i<o;){const s=i+o>>>1;e<n[s]?o=s:i=s+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let o=0;o!==r;++o)n[o]=i[a+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n7 extends __{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hh,endingEnd:Hh}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,o=e+1,s=r[a],u=r[o];if(s===void 0)switch(this.getSettings_().endingStart){case qh:a=e,s=2*n-i;break;case Ry:a=r.length-2,s=n+r[a]-r[a+1];break;default:a=e,s=i}if(u===void 0)switch(this.getSettings_().endingEnd){case qh:o=e,u=2*i-n;break;case Ry:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=n}const c=(i-n)*.5,d=this.valueSize;this._weightPrev=c/(n-s),this._weightNext=c/(u-i),this._offsetPrev=a*d,this._offsetNext=o*d}interpolate_(e,n,i,r){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=e*s,c=u-s,d=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,b=(i-n)/(r-n),T=b*b,S=T*b,A=-g*S+2*g*T-g*b,R=(1+g)*S+(-1.5-2*g)*T+(-.5+g)*b+1,I=(-1-y)*S+(1.5+y)*T+.5*b,N=y*S-y*T;for(let D=0;D!==s;++D)a[D]=A*o[d+D]+R*o[c+D]+I*o[u+D]+N*o[p+D];return a}}class rD extends __{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=e*s,c=u-s,d=(i-n)/(r-n),p=1-d;for(let g=0;g!==s;++g)a[g]=o[c+g]*p+o[u+g]*d;return a}}class i7 extends __{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ml{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wh(n,this.TimeBufferType),this.values=Wh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Wh(e.times,Array),values:Wh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new i7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new n7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Cy:n=this.InterpolantFactoryMethodDiscrete;break;case gE:n=this.InterpolantFactoryMethodLinear;break;case MS:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Mt("KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cy;case this.InterpolantFactoryMethodLinear:return gE;case this.InterpolantFactoryMethodSmooth:return MS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,o=r-1;for(;a!==r&&i[a]<e;)++a;for(;o!==-1&&i[o]>n;)--o;if(++o,a!==0||o!==r){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=i.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(Ht("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Ht("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const u=i[s];if(typeof u=="number"&&isNaN(u)){Ht("KeyframeTrack: Time is not a valid number.",this,s,u),e=!1;break}if(o!==null&&o>u){Ht("KeyframeTrack: Out of order keys.",this,s,u,o),e=!1;break}o=u}if(r!==void 0&&_q(r))for(let s=0,u=r.length;s!==u;++s){const c=r[s];if(isNaN(c)){Ht("KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===MS,a=e.length-1;let o=1;for(let s=1;s<a;++s){let u=!1;const c=e[s],d=e[s+1];if(c!==d&&(s!==1||c!==e[0]))if(r)u=!0;else{const p=s*i,g=p-i,y=p+i;for(let b=0;b!==i;++b){const T=n[p+b];if(T!==n[g+b]||T!==n[y+b]){u=!0;break}}}if(u){if(s!==o){e[o]=e[s];const p=s*i,g=o*i;for(let y=0;y!==i;++y)n[g+y]=n[p+y]}++o}}if(a>0){e[o]=e[a];for(let s=a*i,u=o*i,c=0;c!==i;++c)n[u+c]=n[s+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}ml.prototype.ValueTypeName="";ml.prototype.TimeBufferType=Float32Array;ml.prototype.ValueBufferType=Float32Array;ml.prototype.DefaultInterpolation=gE;class vp extends ml{constructor(e,n,i){super(e,n,i)}}vp.prototype.ValueTypeName="bool";vp.prototype.ValueBufferType=Array;vp.prototype.DefaultInterpolation=Cy;vp.prototype.InterpolantFactoryMethodLinear=void 0;vp.prototype.InterpolantFactoryMethodSmooth=void 0;class aD extends ml{constructor(e,n,i,r){super(e,n,i,r)}}aD.prototype.ValueTypeName="color";class Fy extends ml{constructor(e,n,i,r){super(e,n,i,r)}}Fy.prototype.ValueTypeName="number";class r7 extends __{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=(i-n)/(r-n);let c=e*s;for(let d=c+s;c!==d;c+=4)Xa.slerpFlat(a,0,o,c-s,o,c,u);return a}}class b_ extends ml{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new r7(this.times,this.values,this.getValueSize(),e)}}b_.prototype.ValueTypeName="quaternion";b_.prototype.InterpolantFactoryMethodSmooth=void 0;class yp extends ml{constructor(e,n,i){super(e,n,i)}}yp.prototype.ValueTypeName="string";yp.prototype.ValueBufferType=Array;yp.prototype.DefaultInterpolation=Cy;yp.prototype.InterpolantFactoryMethodLinear=void 0;yp.prototype.InterpolantFactoryMethodSmooth=void 0;class ky extends ml{constructor(e,n,i,r){super(e,n,i,r)}}ky.prototype.ValueTypeName="vector";class By{constructor(e="",n=-1,i=[],r=NT){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=_s(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,s=i.length;o!==s;++o)n.push(Kbe(i[o]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,o=i.length;a!==o;++a)n.push(ml.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,o=[];for(let s=0;s<a;s++){let u=[],c=[];u.push((s+a-1)%a,s,(s+1)%a),c.push(0,1,0);const d=t7(u);u=oI(u,1,d),c=oI(c,1,d),!r&&u[0]===0&&(u.push(a),c.push(c[0])),o.push(new Fy(".morphTargetInfluences["+n[s].name+"]",u,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,u=e.length;s<u;s++){const c=e[s],d=c.name.match(a);if(d&&d.length>1){const p=d[1];let g=r[p];g||(r[p]=g=[]),g.push(c)}}const o=[];for(const s in r)o.push(this.CreateFromMorphTargetSequence(s,r[s],n,i));return o}static parseAnimation(e,n){if(Mt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Ht("AnimationClip: No animation in JSONLoader data."),null;const i=function(p,g,y,b,T){if(y.length!==0){const S=[],A=[];iD(y,S,A,b),S.length!==0&&T.push(new p(g,S,A))}},r=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let u=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const g=c[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let b;for(b=0;b<g.length;b++)if(g[b].morphTargets)for(let T=0;T<g[b].morphTargets.length;T++)y[g[b].morphTargets[T]]=-1;for(const T in y){const S=[],A=[];for(let R=0;R!==g[b].morphTargets.length;++R){const I=g[b];S.push(I.time),A.push(I.morphTarget===T?1:0)}r.push(new Fy(".morphTargetInfluence["+T+"]",S,A))}u=y.length*o}else{const y=".bones["+n[p].name+"]";i(ky,y+".position",g,"pos",r),i(b_,y+".quaternion",g,"rot",r),i(ky,y+".scale",g,"scl",r)}}return r.length===0?null:new this(a,u,r,s)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function $be(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fy;case"vector":case"vector2":case"vector3":case"vector4":return ky;case"color":return aD;case"quaternion":return b_;case"bool":case"boolean":return vp;case"string":return yp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Kbe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=$be(t.type);if(t.times===void 0){const n=[],i=[];iD(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const zu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class oD{constructor(e,n,i){const r=this;let a=!1,o=0,s=0,u;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this._abortController=null,this.itemStart=function(d){s++,a===!1&&r.onStart!==void 0&&r.onStart(d,o,s),a=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,s),o===s&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,p){return c.push(d,p),this},this.removeHandler=function(d){const p=c.indexOf(d);return p!==-1&&c.splice(p,2),this},this.getHandler=function(d){for(let p=0,g=c.length;p<g;p+=2){const y=c[p],b=c[p+1];if(y.global&&(y.lastIndex=0),y.test(d))return b}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const a7=new oD;class Qo{constructor(e){this.manager=e!==void 0?e:a7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Qo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Lc={};class Jbe extends Error{constructor(e,n){super(e),this.response=n}}class of extends Qo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=zu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Lc[e]!==void 0){Lc[e].push({onLoad:n,onProgress:i,onError:r});return}Lc[e]=[],Lc[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),s=this.mimeType,u=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&Mt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Lc[e],p=c.body.getReader(),g=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),y=g?parseInt(g):0,b=y!==0;let T=0;const S=new ReadableStream({start(A){R();function R(){p.read().then(({done:I,value:N})=>{if(I)A.close();else{T+=N.byteLength;const D=new ProgressEvent("progress",{lengthComputable:b,loaded:T,total:y});for(let U=0,k=d.length;U<k;U++){const z=d[U];z.onProgress&&z.onProgress(D)}A.enqueue(N),R()}},I=>{A.error(I)})}}});return new Response(S)}else throw new Jbe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(u){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,s));case"json":return c.json();default:if(s==="")return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(s),g=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(g);return c.arrayBuffer().then(b=>y.decode(b))}}}).then(c=>{zu.add(`file:${e}`,c);const d=Lc[e];delete Lc[e];for(let p=0,g=d.length;p<g;p++){const y=d[p];y.onLoad&&y.onLoad(c)}}).catch(c=>{const d=Lc[e];if(d===void 0)throw this.manager.itemError(e),c;delete Lc[e];for(let p=0,g=d.length;p<g;p++){const y=d[p];y.onError&&y.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Zbe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=new of(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{n(a.parse(JSON.parse(s)))}catch(u){r?r(u):Ht(u),a.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=By.parse(e[i]);n.push(r)}return n}}class Qbe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=[],s=new HT,u=new of(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let c=0;function d(p){u.load(e[p],function(g){const y=a.parse(g,!0);o[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},c+=1,c===6&&(y.mipmapCount===1&&(s.minFilter=mi),s.image=o,s.format=y.format,s.needsUpdate=!0,n&&n(s))},i,r)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)d(p);else u.load(e,function(p){const g=a.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let b=0;b<y;b++){o[b]={mipmaps:[]};for(let T=0;T<g.mipmapCount;T++)o[b].mipmaps.push(g.mipmaps[b*g.mipmapCount+T]),o[b].format=g.format,o[b].width=g.width,o[b].height=g.height}s.image=o}else s.image.width=g.width,s.image.height=g.height,s.mipmaps=g.mipmaps;g.mipmapCount===1&&(s.minFilter=mi),s.format=g.format,s.needsUpdate=!0,n&&n(s)},i,r);return s}}const Bm=new WeakMap;class zy extends Qo{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=zu.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0);else{let p=Bm.get(o);p===void 0&&(p=[],Bm.set(o,p)),p.push({onLoad:n,onError:r})}return o}const s=Ny("img");function u(){d(),n&&n(this);const p=Bm.get(this)||[];for(let g=0;g<p.length;g++){const y=p[g];y.onLoad&&y.onLoad(this)}Bm.delete(this),a.manager.itemEnd(e)}function c(p){d(),r&&r(p),zu.remove(`image:${e}`);const g=Bm.get(this)||[];for(let y=0;y<g.length;y++){const b=g[y];b.onError&&b.onError(p)}Bm.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){s.removeEventListener("load",u,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",u,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),zu.add(`image:${e}`,s),a.manager.itemStart(e),s.src=e,s}}class exe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=new p_;a.colorSpace=qa;const o=new zy(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function u(c){o.load(e[c],function(d){a.images[c]=d,s++,s===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let c=0;c<e.length;++c)u(c);return a}}class txe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=new Yl,s=new of(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(a.withCredentials),s.load(e,function(u){let c;try{c=a.parse(u)}catch(d){if(r!==void 0)r(d);else{d(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Jo,o.wrapT=c.wrapT!==void 0?c.wrapT:Jo,o.magFilter=c.magFilter!==void 0?c.magFilter:mi,o.minFilter=c.minFilter!==void 0?c.minFilter:mi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Bu),c.mipmapCount===1&&(o.minFilter=mi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},i,r),o}}class nxe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=new Qi,o=new zy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class Od extends Hn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ct(e),this.intensity=n}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,n}}class o7 extends Od{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ct(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}toJSON(e){const n=super.toJSON(e);return n.object.groundColor=this.groundColor.getHex(),n}}const pC=new en,A4=new se,M4=new se;class sD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new st(512,512),this.mapType=po,this.map=null,this.mapPass=null,this.matrix=new en,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vg,this._frameExtents=new st(1,1),this._viewportCount=1,this._viewports=[new ri(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;A4.setFromMatrixPosition(e.matrixWorld),n.position.copy(A4),M4.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(M4),n.updateMatrixWorld(),pC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pC,n.coordinateSystem,n.reversedDepth),n.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(pC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ixe extends sD{constructor(){super(new _r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=yg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class s7 extends Od{constructor(e,n,i=0,r=Math.PI/3,a=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new ixe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.angle=this.angle,n.object.decay=this.decay,n.object.penumbra=this.penumbra,n.object.target=this.target.uuid,this.map&&this.map.isTexture&&(n.object.map=this.map.toJSON(e).uuid),n.object.shadow=this.shadow.toJSON(),n}}class rxe extends sD{constructor(){super(new _r(90,1,.5,500)),this.isPointLightShadow=!0}}class l7 extends Od{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new rxe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.decay=this.decay,n.object.shadow=this.shadow.toJSON(),n}}class Xc extends FT{constructor(e=-1,n=1,i=1,r=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,o=i+e,s=r+n,u=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,o=a+c*this.view.width,s-=d*this.view.offsetY,u=s-d*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,u,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class axe extends sD{constructor(){super(new Xc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class u7 extends Od{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new axe}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.shadow=this.shadow.toJSON(),n.object.target=this.target.uuid,n}}class c7 extends Od{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class f7 extends Od{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class lD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*a),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*a)),n.addScaledVector(o[6],.315392*(3*a*a-1)),n.addScaledVector(o[7],1.092548*(i*a)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*a),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*a),n.addScaledVector(o[6],.743125*a*a-.247708),n.addScaledVector(o[7],2*.429043*i*a),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}class d7 extends Od{constructor(e=new lD,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class aA extends Qo{constructor(e){super(e),this.textures={}}load(e,n,i,r){const a=this,o=new of(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{n(a.parse(JSON.parse(s)))}catch(u){r?r(u):Ht(u),a.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(a){return n[a]===void 0&&Mt("MaterialLoader: Undefined texture",a),n[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ct().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=new Ct().setHex(o.value);break;case"v2":r.uniforms[a].value=new st().fromArray(o.value);break;case"v3":r.uniforms[a].value=new se().fromArray(o.value);break;case"v4":r.uniforms[a].value=new ri().fromArray(o.value);break;case"m3":r.uniforms[a].value=new un().fromArray(o.value);break;case"m4":r.uniforms[a].value=new en().fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new st().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new st().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return aA.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:Xq,SpriteMaterial:WN,RawShaderMaterial:tD,ShaderMaterial:Ts,PointsMaterial:XN,MeshPhysicalMaterial:Yq,MeshStandardMaterial:nD,MeshPhongMaterial:$q,MeshToonMaterial:Kq,MeshNormalMaterial:Jq,MeshLambertMaterial:Zq,MeshDepthMaterial:iA,MeshDistanceMaterial:rA,MeshBasicMaterial:pf,MeshMatcapMaterial:Qq,LineDashedMaterial:e7,LineBasicMaterial:xo,Material:Ya};return new n[e]}}class sI{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class uD extends cn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class h7 extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=new of(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(s){try{n(a.parse(JSON.parse(s)))}catch(u){r?r(u):Ht(u),a.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(y,b){if(n[b]!==void 0)return n[b];const S=y.interleavedBuffers[b],A=a(y,S.buffer),R=eg(S.type,A),I=new zT(R,S.stride);return I.uuid=S.uuid,n[b]=I,I}function a(y,b){if(i[b]!==void 0)return i[b];const S=y.arrayBuffers[b],A=new Uint32Array(S).buffer;return i[b]=A,A}const o=e.isInstancedBufferGeometry?new uD:new cn,s=e.data.index;if(s!==void 0){const y=eg(s.type,s.array);o.setIndex(new di(y,1))}const u=e.data.attributes;for(const y in u){const b=u[y];let T;if(b.isInterleavedBufferAttribute){const S=r(e.data,b.data);T=new sp(S,b.itemSize,b.offset,b.normalized)}else{const S=eg(b.type,b.array),A=b.isInstancedBufferAttribute?lp:di;T=new A(S,b.itemSize,b.normalized)}b.name!==void 0&&(T.name=b.name),b.usage!==void 0&&T.setUsage(b.usage),o.setAttribute(y,T)}const c=e.data.morphAttributes;if(c)for(const y in c){const b=c[y],T=[];for(let S=0,A=b.length;S<A;S++){const R=b[S];let I;if(R.isInterleavedBufferAttribute){const N=r(e.data,R.data);I=new sp(N,R.itemSize,R.offset,R.normalized)}else{const N=eg(R.type,R.array);I=new di(N,R.itemSize,R.normalized)}R.name!==void 0&&(I.name=R.name),T.push(I)}o.morphAttributes[y]=T}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,b=p.length;y!==b;++y){const T=p[y];o.addGroup(T.start,T.count,T.materialIndex)}const g=e.data.boundingSphere;return g!==void 0&&(o.boundingSphere=new ca().fromJSON(g)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class oxe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=this.path===""?sI.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new of(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(u){let c=null;try{c=JSON.parse(u)}catch(p){r!==void 0&&r(p),p("ObjectLoader: Can't parse "+e+".",p.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Ht("ObjectLoader: Can't load "+e);return}a.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?sI.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new of(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(e,n),s=JSON.parse(o),u=s.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(s)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),s=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,a,u,s,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),n!==void 0){let p=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,s,o,n),c=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,c),this.bindLightTargets(u),u}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Jh().fromJSON(e[i]);n[a.uuid]=a}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=new GT().fromJSON(e[a],r);i[s.uuid]=s}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new h7;for(let a=0,o=e.length;a<o;a++){let s;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(u);break;default:u.type in T4?s=T4[u.type].fromJSON(u,n):Mt(`ObjectLoader: Unsupported geometry type "${u.type}"`)}s.uuid=u.uuid,u.name!==void 0&&(s.name=u.name),u.userData!==void 0&&(s.userData=u.userData),i[u.uuid]=s}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const a=new aA;a.setTextures(n);for(let o=0,s=e.length;o<s;o++){const u=e[o];i[u.uuid]===void 0&&(i[u.uuid]=a.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=By.parse(r);n[a.uuid]=a}return n}parseImages(e,n){const i=this,r={};let a;function o(u){return i.manager.itemStart(u),a.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function s(u){if(typeof u=="string"){const c=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(d)}else return u.data?{data:eg(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new oD(n);a=new zy(u),a.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const p=e[c],g=p.url;if(Array.isArray(g)){const y=[];for(let b=0,T=g.length;b<T;b++){const S=g[b],A=s(S);A!==null&&(A instanceof HTMLImageElement?y.push(A):y.push(new Yl(A.data,A.width,A.height)))}r[p.uuid]=new pd(y)}else{const y=s(p.url);r[p.uuid]=new pd(y)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function a(o){if(typeof o=="string"){const s=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:n.resourcePath+s;return await r.loadAsync(u)}else return o.data?{data:eg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new zy(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,s=e.length;o<s;o++){const u=e[o],c=u.url;if(Array.isArray(c)){const d=[];for(let p=0,g=c.length;p<g;p++){const y=c[p],b=await a(y);b!==null&&(b instanceof HTMLImageElement?d.push(b):d.push(new Yl(b.data,b.width,b.height)))}i[u.uuid]=new pd(d)}else{const d=await a(u.url);i[u.uuid]=new pd(d)}}}return i}parseTextures(e,n){function i(a,o){return typeof a=="number"?a:(Mt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const r={};if(e!==void 0)for(let a=0,o=e.length;a<o;a++){const s=e[a];s.image===void 0&&Mt('ObjectLoader: No "image" specified for',s.uuid),n[s.image]===void 0&&Mt("ObjectLoader: Undefined image",s.image);const u=n[s.image],c=u.data;let d;Array.isArray(c)?(d=new p_,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Yl:d=new Qi,c&&(d.needsUpdate=!0)),d.source=u,d.uuid=s.uuid,s.name!==void 0&&(d.name=s.name),s.mapping!==void 0&&(d.mapping=i(s.mapping,sxe)),s.channel!==void 0&&(d.channel=s.channel),s.offset!==void 0&&d.offset.fromArray(s.offset),s.repeat!==void 0&&d.repeat.fromArray(s.repeat),s.center!==void 0&&d.center.fromArray(s.center),s.rotation!==void 0&&(d.rotation=s.rotation),s.wrap!==void 0&&(d.wrapS=i(s.wrap[0],w4),d.wrapT=i(s.wrap[1],w4)),s.format!==void 0&&(d.format=s.format),s.internalFormat!==void 0&&(d.internalFormat=s.internalFormat),s.type!==void 0&&(d.type=s.type),s.colorSpace!==void 0&&(d.colorSpace=s.colorSpace),s.minFilter!==void 0&&(d.minFilter=i(s.minFilter,C4)),s.magFilter!==void 0&&(d.magFilter=i(s.magFilter,C4)),s.anisotropy!==void 0&&(d.anisotropy=s.anisotropy),s.flipY!==void 0&&(d.flipY=s.flipY),s.generateMipmaps!==void 0&&(d.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(d.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(d.compareFunction=s.compareFunction),s.userData!==void 0&&(d.userData=s.userData),r[s.uuid]=d}return r}parseObject(e,n,i,r,a){let o;function s(g){return n[g]===void 0&&Mt("ObjectLoader: Undefined geometry",g),n[g]}function u(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let b=0,T=g.length;b<T;b++){const S=g[b];i[S]===void 0&&Mt("ObjectLoader: Undefined material",S),y.push(i[S])}return y}return i[g]===void 0&&Mt("ObjectLoader: Undefined material",g),i[g]}}function c(g){return r[g]===void 0&&Mt("ObjectLoader: Undefined texture",g),r[g]}let d,p;switch(e.type){case"Scene":o=new qN,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ct(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new BT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new kT(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new _r(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Xc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new c7(e.color,e.intensity);break;case"DirectionalLight":o=new u7(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new l7(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new f7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new s7(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new o7(e.color,e.groundColor,e.intensity);break;case"LightProbe":const g=new lD().fromArray(e.sh);o=new d7(g,e.intensity);break;case"SkinnedMesh":d=s(e.geometry),p=u(e.material),o=new Rq(d,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=s(e.geometry),p=u(e.material),o=new er(d,p);break;case"InstancedMesh":d=s(e.geometry),p=u(e.material);const y=e.count,b=e.instanceMatrix,T=e.instanceColor;o=new Iq(d,p,y),o.instanceMatrix=new lp(new Float32Array(b.array),16),T!==void 0&&(o.instanceColor=new lp(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":d=s(e.geometry),p=u(e.material),o=new Pq(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(S=>{let A=null,R=null;return S.boundingBox!==void 0&&(A=new ua().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(R=new ca().fromJSON(S.boundingSphere)),{...S,boundingBox:A,boundingSphere:R}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=c(e.matricesTexture.uuid),o._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new ca().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new ua().fromJSON(e.boundingBox));break;case"LOD":o=new Cq;break;case"Line":o=new Td(s(e.geometry),u(e.material));break;case"LineLoop":o=new Nq(s(e.geometry),u(e.material));break;case"LineSegments":o=new Ku(s(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new Dq(s(e.geometry),u(e.material));break;case"Sprite":o=new wq(u(e.material));break;case"Group":o=new tg;break;case"Bone":o=new jN;break;default:o=new Hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],n,i,r,a))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const b=g[y];o.animations.push(a[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const b=g[y],T=o.getObjectByProperty("uuid",b.object);T!==void 0&&o.addLevel(T,b.distance,b.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?Mt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new Hn}})}}const sxe={UVMapping:AT,CubeReflectionMapping:qu,CubeRefractionMapping:xd,EquirectangularReflectionMapping:Ty,EquirectangularRefractionMapping:Ay,CubeUVReflectionMapping:Gg},w4={RepeatWrapping:My,ClampToEdgeWrapping:Jo,MirroredRepeatWrapping:wy},C4={NearestFilter:br,NearestMipmapNearestFilter:IN,NearestMipmapLinearFilter:Qm,LinearFilter:mi,LinearMipmapNearestFilter:Y0,LinearMipmapLinearFilter:Bu},mC=new WeakMap;class lxe extends Qo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Mt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Mt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=zu.get(`image-bitmap:${e}`);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(c=>{if(mC.has(o)===!0)r&&r(mC.get(o)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(c),a.manager.itemEnd(e),c});return}return setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0),o}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,s.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const u=fetch(e,s).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){return zu.add(`image-bitmap:${e}`,c),n&&n(c),a.manager.itemEnd(e),c}).catch(function(c){r&&r(c),mC.set(u,c),zu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});zu.add(`image-bitmap:${e}`,u),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let tS;class cD{static getContext(){return tS===void 0&&(tS=new(window.AudioContext||window.webkitAudioContext)),tS}static setContext(e){tS=e}}class uxe extends Qo{constructor(e){super(e)}load(e,n,i,r){const a=this,o=new of(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const c=u.slice(0);cD.getContext().decodeAudioData(c,function(p){n(p)}).catch(s)}catch(c){s(c)}},i,r);function s(u){r?r(u):Ht(u),a.manager.itemError(e)}}}const R4=new en,I4=new en,Sh=new en;class cxe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _r,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _r,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Sh.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,o=n.near*Math.tan(Kh*n.fov*.5)/n.zoom;let s,u;I4.elements[12]=-r,R4.elements[12]=r,s=-o*n.aspect+a,u=o*n.aspect+a,Sh.elements[0]=2*n.near/(u-s),Sh.elements[8]=(u+s)/(u-s),this.cameraL.projectionMatrix.copy(Sh),s=-o*n.aspect-a,u=o*n.aspect-a,Sh.elements[0]=2*n.near/(u-s),Sh.elements[8]=(u+s)/(u-s),this.cameraR.projectionMatrix.copy(Sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(I4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(R4)}}class p7 extends _r{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class fD{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const Eh=new se,gC=new Xa,fxe=new se,Th=new se,Ah=new se;class dxe extends Hn{constructor(){super(),this.type="AudioListener",this.context=cD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Eh,gC,fxe),Th.set(0,0,-1).applyQuaternion(gC),Ah.set(0,1,0).applyQuaternion(gC),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Eh.x,i),n.positionY.linearRampToValueAtTime(Eh.y,i),n.positionZ.linearRampToValueAtTime(Eh.z,i),n.forwardX.linearRampToValueAtTime(Th.x,i),n.forwardY.linearRampToValueAtTime(Th.y,i),n.forwardZ.linearRampToValueAtTime(Th.z,i),n.upX.linearRampToValueAtTime(Ah.x,i),n.upY.linearRampToValueAtTime(Ah.y,i),n.upZ.linearRampToValueAtTime(Ah.z,i)}else n.setPosition(Eh.x,Eh.y,Eh.z),n.setOrientation(Th.x,Th.y,Th.z,Ah.x,Ah.y,Ah.z)}}class m7 extends Hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Mt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Mt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(Mt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Mh=new se,P4=new Xa,hxe=new se,wh=new se;class pxe extends m7{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Mh,P4,hxe),wh.set(0,0,1).applyQuaternion(P4);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Mh.x,i),n.positionY.linearRampToValueAtTime(Mh.y,i),n.positionZ.linearRampToValueAtTime(Mh.z,i),n.orientationX.linearRampToValueAtTime(wh.x,i),n.orientationY.linearRampToValueAtTime(wh.y,i),n.orientationZ.linearRampToValueAtTime(wh.z,i)}else n.setPosition(Mh.x,Mh.y,Mh.z),n.setOrientation(wh.x,wh.y,wh.z)}}class mxe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class g7{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,a,o;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,a=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==r;++s)i[a+s]=i[s];o=n}else{o+=n;const s=n/o;this._mixBufferRegion(i,a,0,s,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=n*this._origIndex;this._mixBufferRegion(i,r,u,1-a,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let u=n,c=n+n;u!==c;++u)if(i[u]!==i[u+n]){s.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let a=i,o=r;a!==o;++a)n[a]=n[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,a){if(r>=.5)for(let o=0;o!==a;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Xa.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,a){const o=this._workIndex*a;Xa.multiplyQuaternionsFlat(e,o,e,n,e,i),Xa.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,a){const o=1-r;for(let s=0;s!==a;++s){const u=n+s;e[u]=e[u]*o+e[i+s]*r}}_lerpAdditive(e,n,i,r,a){for(let o=0;o!==a;++o){const s=n+o;e[s]=e[s]+e[i+o]*r}}}const dD="\\[\\]\\.:\\/",gxe=new RegExp("["+dD+"]","g"),hD="[^"+dD+"]",vxe="[^"+dD.replace("\\.","")+"]",yxe=/((?:WC+[\/:])*)/.source.replace("WC",hD),_xe=/(WCOD+)?/.source.replace("WCOD",vxe),bxe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hD),xxe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hD),Sxe=new RegExp("^"+yxe+_xe+bxe+xxe+"$"),Exe=["material","materials","bones","map"];class Txe{constructor(e,n,i){const r=i||Vn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Vn{constructor(e,n,i){this.path=n,this.parsedPath=i||Vn.parseTrackName(n),this.node=Vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Vn.Composite(e,n,i):new Vn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gxe,"")}static parseTrackName(e){const n=Sxe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);Exe.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===n||s.uuid===n)return s;const u=i(s.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=Vn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Mt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){Ht("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Ht("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Ht("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Ht("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Ht("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Ht("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){Ht("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;Ht("PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?s=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Ht("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Ht("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vn.Composite=Txe;Vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vn.prototype.GetterByBindingType=[Vn.prototype._getValue_direct,Vn.prototype._getValue_array,Vn.prototype._getValue_arrayElement,Vn.prototype._getValue_toArray];Vn.prototype.SetterByBindingTypeAndVersioning=[[Vn.prototype._setValue_direct,Vn.prototype._setValue_direct_setNeedsUpdate,Vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_array,Vn.prototype._setValue_array_setNeedsUpdate,Vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_arrayElement,Vn.prototype._setValue_arrayElement_setNeedsUpdate,Vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_fromArray,Vn.prototype._setValue_fromArray_setNeedsUpdate,Vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Axe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=_s(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length;let s,u=e.length,c=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const g=arguments[d],y=g.uuid;let b=n[y];if(b===void 0){b=u++,n[y]=b,e.push(g);for(let T=0,S=o;T!==S;++T)a[T].push(new Vn(g,i[T],r[T]))}else if(b<c){s=e[b];const T=--c,S=e[T];n[S.uuid]=b,e[b]=S,n[y]=T,e[T]=g;for(let A=0,R=o;A!==R;++A){const I=a[A],N=I[T];let D=I[b];I[b]=N,D===void 0&&(D=new Vn(g,i[A],r[A])),I[T]=D}}else e[b]!==s&&Ht("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const u=arguments[o],c=u.uuid,d=n[c];if(d!==void 0&&d>=a){const p=a++,g=e[p];n[g.uuid]=d,e[d]=g,n[c]=p,e[p]=u;for(let y=0,b=r;y!==b;++y){const T=i[y],S=T[p],A=T[d];T[d]=S,T[p]=A}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,o=e.length;for(let s=0,u=arguments.length;s!==u;++s){const c=arguments[s],d=c.uuid,p=n[d];if(p!==void 0)if(delete n[d],p<a){const g=--a,y=e[g],b=--o,T=e[b];n[y.uuid]=p,e[p]=y,n[T.uuid]=g,e[g]=T,e.pop();for(let S=0,A=r;S!==A;++S){const R=i[S],I=R[g],N=R[b];R[p]=I,R[g]=N,R.pop()}}else{const g=--o,y=e[g];g>0&&(n[y.uuid]=p),e[p]=y,e.pop();for(let b=0,T=r;b!==T;++b){const S=i[b];S[p]=S[g],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const o=this._paths,s=this._parsedPaths,u=this._objects,c=u.length,d=this.nCachedObjects_,p=new Array(c);r=a.length,i[e]=r,o.push(e),s.push(n),a.push(p);for(let g=d,y=u.length;g!==y;++g){const b=u[g];p[g]=new Vn(b,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length-1,u=o[s],c=e[s];n[c]=i,o[i]=u,o.pop(),a[i]=a[s],a.pop(),r[i]=r[s],r.pop()}}}class v7{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,o=a.length,s=new Array(o),u={endingStart:Hh,endingEnd:Hh};for(let c=0;c!==o;++c){const d=a[c].createInterpolant(null);s[c]=d,d.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=sq,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,a=e._clip.duration,o=a/r,s=r/a;e.warp(1,o,n),this.warp(s,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const u=s.parameterPositions,c=s.sampleValues;return u[0]=a,u[1]=a+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*i;u<0||i===0?n=0:(this._startTime=null,n=i*u)}n*=this._updateTimeScale(e);const o=this._updateTime(n),s=this._updateWeight(e);if(s>0){const u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case FN:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(o),c[d].accumulateAdditive(s);break;case NT:default:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(o),c[d].accumulate(r,s)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const o=i===lq;if(e===0)return a===-1?r:o&&(a&1)===1?n-r:r;if(i===oq){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const s=Math.floor(r/n);r-=n*s,a+=Math.abs(s);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(o&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=qh,r.endingEnd=qh):(e?r.endingStart=this.zeroSlopeAtStart?qh:Hh:r.endingStart=Ry,n?r.endingEnd=this.zeroSlopeAtEnd?qh:Hh:r.endingEnd=Ry)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,u=o.sampleValues;return s[0]=a,u[0]=n,s[1]=a+e,u[1]=i,this}}const Mxe=new Float32Array(1);class wxe extends $u{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,o=e._propertyBindings,s=e._interpolants,u=i.uuid,c=this._bindingsByRootAndName;let d=c[u];d===void 0&&(d={},c[u]=d);for(let p=0;p!==a;++p){const g=r[p],y=g.name;let b=d[y];if(b!==void 0)++b.referenceCount,o[p]=b;else{if(b=o[p],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,y));continue}const T=n&&n._propertyBindings[p].binding.parsedPath;b=new g7(Vn.create(i,y,T),g.ValueTypeName,g.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,y),o[p]=b}s[p].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,a=this._actionsByClip;let o=a[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,s=o[a],u=s.knownActions,c=u[u.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,u[d]=c,u.pop(),e._byClipCacheIndex=null;const p=s.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],u.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,a=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,o=this._bindingsByRootAndName,s=o[r],u=n[n.length-1],c=e._cacheIndex;u._cacheIndex=c,n[c]=u,n.pop(),delete s[a],Object.keys(s).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new rD(new Float32Array(2),new Float32Array(2),1,Mxe),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=i,n[i]=a}clipAction(e,n,i){const r=n||this._root,a=r.uuid;let o=typeof e=="string"?By.findByName(r,e):e;const s=o!==null?o.uuid:e,u=this._actionsByClip[s];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=NT),u!==void 0){const p=u.actionByRoot[a];if(p!==void 0&&p.blendMode===i)return p;c=u.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new v7(this,o,n,i);return this._bindAction(d,c),this._addInactiveAction(d,s,a),d}existingAction(e,n){const i=n||this._root,r=i.uuid,a=typeof e=="string"?By.findByName(i,e):e,o=a?a.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,a,o);const s=this._bindings,u=this._nActiveBindings;for(let c=0;c!==u;++c)s[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const o=a.knownActions;for(let s=0,u=o.length;s!==u;++s){const c=o[s];this._deactivateAction(c);const d=c._cacheIndex,p=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=d,n[d]=p,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const s=i[o].actionByRoot,u=s[n];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Cxe extends BN{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new UT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class pD{constructor(e){this.value=e}clone(){return new pD(this.value.clone===void 0?this.value:this.value.clone())}}let Rxe=0;class Ixe extends $u{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Rxe++}),this.name="",this.usage=Py,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const a=Array.isArray(n[i])?n[i]:[n[i]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Pxe extends zT{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Nxe{constructor(e,n,i,r,a,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const N4=new en;class y7{constructor(e,n,i=0,r=1/0){this.ray=new mp(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new _g,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):Ht("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return N4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(N4),this}intersectObject(e,n=!0,i=[]){return lI(e,this,i,n),i.sort(D4),i}intersectObjects(e,n=!0,i=[]){for(let r=0,a=e.length;r<a;r++)lI(e[r],this,i,n);return i.sort(D4),i}}function D4(t,e){return t.distance-e.distance}function lI(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const a=t.children;for(let o=0,s=a.length;o<s;o++)lI(a[o],e,n,!0)}}class Dxe{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Oxe.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Oxe(){this._document.hidden===!1&&this.reset()}class xE{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qt(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Lxe{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class mD{constructor(e,n,i,r){mD.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=r,this}}const O4=new st;class Uxe{constructor(e=new st(1/0,1/0),n=new st(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=O4.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,O4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const L4=new se,nS=new se,zm=new se,Gm=new se,vC=new se,Fxe=new se,kxe=new se;class Bxe{constructor(e=new se,n=new se){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){L4.subVectors(e,this.start),nS.subVectors(this.end,this.start);const i=nS.dot(nS);let a=nS.dot(L4)/i;return n&&(a=Qt(a,0,1)),a}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,n=Fxe,i=kxe){const r=10000000000000001e-32;let a,o;const s=this.start,u=e.start,c=this.end,d=e.end;zm.subVectors(c,s),Gm.subVectors(d,u),vC.subVectors(s,u);const p=zm.dot(zm),g=Gm.dot(Gm),y=Gm.dot(vC);if(p<=r&&g<=r)return n.copy(s),i.copy(u),n.sub(i),n.dot(n);if(p<=r)a=0,o=y/g,o=Qt(o,0,1);else{const b=zm.dot(vC);if(g<=r)o=0,a=Qt(-b/p,0,1);else{const T=zm.dot(Gm),S=p*g-T*T;S!==0?a=Qt((T*y-b*g)/S,0,1):a=0,o=(T*a+y)/g,o<0?(o=0,a=Qt(-b/p,0,1)):o>1&&(o=1,a=Qt((T-b)/p,0,1))}}return n.copy(s).add(zm.multiplyScalar(a)),i.copy(u).add(Gm.multiplyScalar(o)),n.sub(i),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const U4=new se;class zxe extends Hn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new cn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,u=32;o<u;o++,s++){const c=o/u*Math.PI*2,d=s/u*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Ft(r,3));const a=new xo({fog:!1,toneMapped:!1});this.cone=new Ku(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),U4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(U4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const sd=new se,iS=new en,yC=new en;class Gxe extends Ku{constructor(e){const n=_7(e),i=new cn,r=[],a=[];for(let c=0;c<n.length;c++){const d=n[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Ft(r,3)),i.setAttribute("color",new Ft(a,3));const o=new xo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const s=new Ct(255),u=new Ct(65280);this.setColors(s,u)}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");yC.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<n.length;a++){const s=n[a];s.parent&&s.parent.isBone&&(iS.multiplyMatrices(yC,s.matrixWorld),sd.setFromMatrixPosition(iS),r.setXYZ(o,sd.x,sd.y,sd.z),iS.multiplyMatrices(yC,s.parent.matrixWorld),sd.setFromMatrixPosition(iS),r.setXYZ(o+1,sd.x,sd.y,sd.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,n.r,n.g,n.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function _7(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(..._7(t.children[n]));return e}class Vxe extends er{constructor(e,n,i){const r=new y_(n,4,2),a=new pf({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Hxe=new se,F4=new Ct,k4=new Ct;class qxe extends Hn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new v_(n);r.rotateY(Math.PI*.5),this.material=new pf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),o=new Float32Array(a.count*3);r.setAttribute("color",new di(o,3)),this.add(new er(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");F4.copy(this.light.color),k4.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const a=i<r/2?F4:k4;n.setXYZ(i,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Hxe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Wxe extends Ku{constructor(e=10,n=10,i=4473924,r=8947848){i=new Ct(i),r=new Ct(r);const a=n/2,o=e/n,s=e/2,u=[],c=[];for(let g=0,y=0,b=-s;g<=n;g++,b+=o){u.push(-s,0,b,s,0,b),u.push(b,0,-s,b,0,s);const T=g===a?i:r;T.toArray(c,y),y+=3,T.toArray(c,y),y+=3,T.toArray(c,y),y+=3,T.toArray(c,y),y+=3}const d=new cn;d.setAttribute("position",new Ft(u,3)),d.setAttribute("color",new Ft(c,3));const p=new xo({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class jxe extends Ku{constructor(e=10,n=16,i=8,r=64,a=4473924,o=8947848){a=new Ct(a),o=new Ct(o);const s=[],u=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),y=Math.sin(g)*e,b=Math.cos(g)*e;s.push(0,0,0),s.push(y,0,b);const T=p&1?a:o;u.push(T.r,T.g,T.b),u.push(T.r,T.g,T.b)}for(let p=0;p<i;p++){const g=p&1?a:o,y=e-e/i*p;for(let b=0;b<r;b++){let T=b/r*(Math.PI*2),S=Math.sin(T)*y,A=Math.cos(T)*y;s.push(S,0,A),u.push(g.r,g.g,g.b),T=(b+1)/r*(Math.PI*2),S=Math.sin(T)*y,A=Math.cos(T)*y,s.push(S,0,A),u.push(g.r,g.g,g.b)}}const c=new cn;c.setAttribute("position",new Ft(s,3)),c.setAttribute("color",new Ft(u,3));const d=new xo({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const B4=new se,rS=new se,z4=new se;class Xxe extends Hn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new cn;r.setAttribute("position",new Ft([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new xo({fog:!1,toneMapped:!1});this.lightPlane=new Td(r,a),this.add(this.lightPlane),r=new cn,r.setAttribute("position",new Ft([0,0,0,0,0,1],3)),this.targetLine=new Td(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),B4.setFromMatrixPosition(this.light.matrixWorld),rS.setFromMatrixPosition(this.light.target.matrixWorld),z4.subVectors(rS,B4),this.lightPlane.lookAt(rS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rS),this.targetLine.scale.z=z4.length()}}const aS=new se,lr=new FT;class Yxe extends Ku{constructor(e){const n=new cn,i=new xo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],o={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(b,T){u(b),u(T)}function u(b){r.push(0,0,0),a.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(r.length/3-1)}n.setAttribute("position",new Ft(r,3)),n.setAttribute("color",new Ft(a,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ct(16755200),d=new Ct(16711680),p=new Ct(43775),g=new Ct(16777215),y=new Ct(3355443);this.setColors(c,d,p,g,y)}setColors(e,n,i,r,a){const s=this.geometry.getAttribute("color");return s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,n.r,n.g,n.b),s.setXYZ(25,n.r,n.g,n.b),s.setXYZ(26,n.r,n.g,n.b),s.setXYZ(27,n.r,n.g,n.b),s.setXYZ(28,n.r,n.g,n.b),s.setXYZ(29,n.r,n.g,n.b),s.setXYZ(30,n.r,n.g,n.b),s.setXYZ(31,n.r,n.g,n.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,a.r,a.g,a.b),s.setXYZ(41,a.r,a.g,a.b),s.setXYZ(42,a.r,a.g,a.b),s.setXYZ(43,a.r,a.g,a.b),s.setXYZ(44,a.r,a.g,a.b),s.setXYZ(45,a.r,a.g,a.b),s.setXYZ(46,a.r,a.g,a.b),s.setXYZ(47,a.r,a.g,a.b),s.setXYZ(48,a.r,a.g,a.b),s.setXYZ(49,a.r,a.g,a.b),s.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;let a,o;if(lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,o=0;else if(this.camera.coordinateSystem===gs)a=-1,o=1;else if(this.camera.coordinateSystem===gg)a=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);yr("c",n,e,lr,0,0,a),yr("t",n,e,lr,0,0,o),yr("n1",n,e,lr,-i,-r,a),yr("n2",n,e,lr,i,-r,a),yr("n3",n,e,lr,-i,r,a),yr("n4",n,e,lr,i,r,a),yr("f1",n,e,lr,-i,-r,o),yr("f2",n,e,lr,i,-r,o),yr("f3",n,e,lr,-i,r,o),yr("f4",n,e,lr,i,r,o),yr("u1",n,e,lr,i*.7,r*1.1,a),yr("u2",n,e,lr,-i*.7,r*1.1,a),yr("u3",n,e,lr,0,r*2,a),yr("cf1",n,e,lr,-i,0,o),yr("cf2",n,e,lr,i,0,o),yr("cf3",n,e,lr,0,-r,o),yr("cf4",n,e,lr,0,r,o),yr("cn1",n,e,lr,-i,0,a),yr("cn2",n,e,lr,i,0,a),yr("cn3",n,e,lr,0,-r,a),yr("cn4",n,e,lr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function yr(t,e,n,i,r,a,o){aS.set(r,a,o).unproject(i);const s=e[t];if(s!==void 0){const u=n.getAttribute("position");for(let c=0,d=s.length;c<d;c++)u.setXYZ(s[c],aS.x,aS.y,aS.z)}}const oS=new ua;class $xe extends Ku{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new cn;a.setIndex(new di(i,1)),a.setAttribute("position",new di(r,3)),super(a,new xo({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&oS.setFromObject(this.object),oS.isEmpty())return;const e=oS.min,n=oS.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kxe extends Ku{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new cn;a.setIndex(new di(i,1)),a.setAttribute("position",new Ft(r,3)),super(a,new xo({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jxe extends Td{constructor(e,n=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new cn;o.setAttribute("position",new Ft(a,3)),o.computeBoundingSphere(),super(o,new xo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new cn;u.setAttribute("position",new Ft(s,3)),u.computeBoundingSphere(),this.add(new er(u,new pf({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const G4=new se;let sS,_C;class Zxe extends Hn{constructor(e=new se(0,0,1),n=new se(0,0,0),i=1,r=16776960,a=i*.2,o=a*.2){super(),this.type="ArrowHelper",sS===void 0&&(sS=new cn,sS.setAttribute("position",new Ft([0,0,0,0,1,0],3)),_C=new g_(.5,1,5,1),_C.translate(0,-.5,0)),this.position.copy(n),this.line=new Td(sS,new xo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new er(_C,new pf({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{G4.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(G4,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Qxe extends Ku{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new cn;r.setAttribute("position",new Ft(n,3)),r.setAttribute("color",new Ft(i,3));const a=new xo({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,n,i){const r=new Ct,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(n),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class eSe{constructor(){this.type="ShapePath",this.color=new Ct,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new bE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,a,o){return this.currentPath.bezierCurveTo(e,n,i,r,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(A){const R=[];for(let I=0,N=A.length;I<N;I++){const D=A[I],U=new Jh;U.curves=D.curves,R.push(U)}return R}function i(A,R){const I=R.length;let N=!1;for(let D=I-1,U=0;U<I;D=U++){let k=R[D],z=R[U],L=z.x-k.x,F=z.y-k.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(k=R[U],L=-L,z=R[D],F=-F),A.y<k.y||A.y>z.y)continue;if(A.y===k.y){if(A.x===k.x)return!0}else{const j=F*(A.x-k.x)-L*(A.y-k.y);if(j===0)return!0;if(j<0)continue;N=!N}}else{if(A.y!==k.y)continue;if(z.x<=A.x&&A.x<=k.x||k.x<=A.x&&A.x<=z.x)return!0}}return N}const r=ql.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,s,u;const c=[];if(a.length===1)return s=a[0],u=new Jh,u.curves=s.curves,c.push(u),c;let d=!r(a[0].getPoints());d=e?!d:d;const p=[],g=[];let y=[],b=0,T;g[b]=void 0,y[b]=[];for(let A=0,R=a.length;A<R;A++)s=a[A],T=s.getPoints(),o=r(T),o=e?!o:o,o?(!d&&g[b]&&b++,g[b]={s:new Jh,p:T},g[b].s.curves=s.curves,d&&b++,y[b]=[]):y[b].push({h:s,p:T[0]});if(!g[0])return n(a);if(g.length>1){let A=!1,R=0;for(let I=0,N=g.length;I<N;I++)p[I]=[];for(let I=0,N=g.length;I<N;I++){const D=y[I];for(let U=0;U<D.length;U++){const k=D[U];let z=!0;for(let L=0;L<g.length;L++)i(k.p,g[L].p)&&(I!==L&&R++,z?(z=!1,p[L].push(k)):A=!0);z&&p[I].push(k)}}R>0&&A===!1&&(y=p)}let S;for(let A=0,R=g.length;A<R;A++){u=g[A].s,c.push(u),S=y[A];for(let I=0,N=S.length;I<N;I++)u.holes.push(S[I].h)}return c}}class tSe extends $u{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Mt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function nSe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function iSe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function rSe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function uI(t,e,n,i){const r=aSe(i);switch(n){case LN:return t*e;case RT:return t*e/r.components*r.byteLength;case h_:return t*e/r.components*r.byteLength;case op:return t*e*2/r.components*r.byteLength;case IT:return t*e*2/r.components*r.byteLength;case UN:return t*e*3/r.components*r.byteLength;case ja:return t*e*4/r.components*r.byteLength;case PT:return t*e*4/r.components*r.byteLength;case $0:case K0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case J0:case Z0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case B1:case G1:return Math.max(t,16)*Math.max(e,8)/4;case k1:case z1:return Math.max(t,8)*Math.max(e,8)/2;case V1:case H1:case W1:case j1:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case q1:case X1:case Y1:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case $1:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case K1:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case J1:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Z1:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Q1:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case eE:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case tE:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case nE:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case iE:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case rE:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case aE:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case oE:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case sE:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case lE:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case uE:case cE:case fE:return Math.ceil(t/4)*Math.ceil(e/4)*16;case dE:case hE:return Math.ceil(t/4)*Math.ceil(e/4)*8;case pE:case mE:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function aSe(t){switch(t){case po:case PN:return{byteLength:1,components:1};case pg:case NN:case Wu:return{byteLength:2,components:1};case wT:case CT:return{byteLength:2,components:4};case fl:case MT:case vo:return{byteLength:4,components:1};case DN:case ON:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class oSe{static contain(e,n){return nSe(e,n)}static cover(e,n){return iSe(e,n)}static fill(e){return rSe(e)}static getByteLength(e,n,i,r){return uI(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:f_}}));typeof window<"u"&&(window.__THREE__?Mt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=f_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function b7(){let t=null,e=!1,n=null,i=null;function r(a,o){n(a,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function sSe(t){const e=new WeakMap;function n(s,u){const c=s.array,d=s.usage,p=c.byteLength,g=t.createBuffer();t.bindBuffer(u,g),t.bufferData(u,c,d),s.onUploadCallback();let y;if(c instanceof Float32Array)y=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)y=t.HALF_FLOAT;else if(c instanceof Uint16Array)s.isFloat16BufferAttribute?y=t.HALF_FLOAT:y=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)y=t.SHORT;else if(c instanceof Uint32Array)y=t.UNSIGNED_INT;else if(c instanceof Int32Array)y=t.INT;else if(c instanceof Int8Array)y=t.BYTE;else if(c instanceof Uint8Array)y=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)y=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:g,type:y,bytesPerElement:c.BYTES_PER_ELEMENT,version:s.version,size:p}}function i(s,u,c){const d=u.array,p=u.updateRanges;if(t.bindBuffer(c,s),p.length===0)t.bufferSubData(c,0,d);else{p.sort((y,b)=>y.start-b.start);let g=0;for(let y=1;y<p.length;y++){const b=p[g],T=p[y];T.start<=b.start+b.count+1?b.count=Math.max(b.count,T.start+T.count-b.start):(++g,p[g]=T)}p.length=g+1;for(let y=0,b=p.length;y<b;y++){const T=p[y];t.bufferSubData(c,T.start*d.BYTES_PER_ELEMENT,d,T.start,T.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(s){return s.isInterleavedBufferAttribute&&(s=s.data),e.get(s)}function a(s){s.isInterleavedBufferAttribute&&(s=s.data);const u=e.get(s);u&&(t.deleteBuffer(u.buffer),e.delete(s))}function o(s,u){if(s.isInterleavedBufferAttribute&&(s=s.data),s.isGLBufferAttribute){const d=e.get(s);(!d||d.version<s.version)&&e.set(s,{buffer:s.buffer,type:s.type,bytesPerElement:s.elementSize,version:s.version});return}const c=e.get(s);if(c===void 0)e.set(s,n(s,u));else if(c.version<s.version){if(c.size!==s.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,s,u),c.version=s.version}}return{get:r,remove:a,update:o}}var lSe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,uSe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cSe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,fSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dSe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,hSe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gSe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,vSe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ySe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_Se=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bSe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xSe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,SSe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ESe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,TSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ASe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,MSe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wSe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CSe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RSe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ISe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,PSe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NSe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DSe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,OSe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,LSe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,USe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FSe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,kSe="gl_FragColor = linearToOutputTexel( gl_FragColor );",BSe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zSe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,GSe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,VSe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HSe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qSe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WSe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jSe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XSe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,YSe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$Se=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,KSe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,JSe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ZSe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,QSe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,e1e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,t1e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,n1e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,i1e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,r1e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,a1e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,o1e=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,s1e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,l1e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,u1e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,c1e=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,f1e=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,d1e=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,h1e=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,p1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,m1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,g1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,v1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,y1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,b1e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,x1e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,S1e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,E1e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,T1e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,A1e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,M1e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,w1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,C1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,R1e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,I1e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,P1e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,N1e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,D1e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,O1e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,L1e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,U1e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,F1e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,k1e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,B1e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,z1e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,G1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,V1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,H1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,q1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,W1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,j1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,X1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Y1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,K1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,J1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Z1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Q1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,iEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,oEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lEe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,mEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,vEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_Ee=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EEe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TEe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,MEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wEe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,CEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,REe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IEe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PEe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NEe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DEe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OEe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LEe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,UEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FEe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kEe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BEe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mn={alphahash_fragment:lSe,alphahash_pars_fragment:uSe,alphamap_fragment:cSe,alphamap_pars_fragment:fSe,alphatest_fragment:dSe,alphatest_pars_fragment:hSe,aomap_fragment:pSe,aomap_pars_fragment:mSe,batching_pars_vertex:gSe,batching_vertex:vSe,begin_vertex:ySe,beginnormal_vertex:_Se,bsdfs:bSe,iridescence_fragment:xSe,bumpmap_pars_fragment:SSe,clipping_planes_fragment:ESe,clipping_planes_pars_fragment:TSe,clipping_planes_pars_vertex:ASe,clipping_planes_vertex:MSe,color_fragment:wSe,color_pars_fragment:CSe,color_pars_vertex:RSe,color_vertex:ISe,common:PSe,cube_uv_reflection_fragment:NSe,defaultnormal_vertex:DSe,displacementmap_pars_vertex:OSe,displacementmap_vertex:LSe,emissivemap_fragment:USe,emissivemap_pars_fragment:FSe,colorspace_fragment:kSe,colorspace_pars_fragment:BSe,envmap_fragment:zSe,envmap_common_pars_fragment:GSe,envmap_pars_fragment:VSe,envmap_pars_vertex:HSe,envmap_physical_pars_fragment:e1e,envmap_vertex:qSe,fog_vertex:WSe,fog_pars_vertex:jSe,fog_fragment:XSe,fog_pars_fragment:YSe,gradientmap_pars_fragment:$Se,lightmap_pars_fragment:KSe,lights_lambert_fragment:JSe,lights_lambert_pars_fragment:ZSe,lights_pars_begin:QSe,lights_toon_fragment:t1e,lights_toon_pars_fragment:n1e,lights_phong_fragment:i1e,lights_phong_pars_fragment:r1e,lights_physical_fragment:a1e,lights_physical_pars_fragment:o1e,lights_fragment_begin:s1e,lights_fragment_maps:l1e,lights_fragment_end:u1e,logdepthbuf_fragment:c1e,logdepthbuf_pars_fragment:f1e,logdepthbuf_pars_vertex:d1e,logdepthbuf_vertex:h1e,map_fragment:p1e,map_pars_fragment:m1e,map_particle_fragment:g1e,map_particle_pars_fragment:v1e,metalnessmap_fragment:y1e,metalnessmap_pars_fragment:_1e,morphinstance_vertex:b1e,morphcolor_vertex:x1e,morphnormal_vertex:S1e,morphtarget_pars_vertex:E1e,morphtarget_vertex:T1e,normal_fragment_begin:A1e,normal_fragment_maps:M1e,normal_pars_fragment:w1e,normal_pars_vertex:C1e,normal_vertex:R1e,normalmap_pars_fragment:I1e,clearcoat_normal_fragment_begin:P1e,clearcoat_normal_fragment_maps:N1e,clearcoat_pars_fragment:D1e,iridescence_pars_fragment:O1e,opaque_fragment:L1e,packing:U1e,premultiplied_alpha_fragment:F1e,project_vertex:k1e,dithering_fragment:B1e,dithering_pars_fragment:z1e,roughnessmap_fragment:G1e,roughnessmap_pars_fragment:V1e,shadowmap_pars_fragment:H1e,shadowmap_pars_vertex:q1e,shadowmap_vertex:W1e,shadowmask_pars_fragment:j1e,skinbase_vertex:X1e,skinning_pars_vertex:Y1e,skinning_vertex:$1e,skinnormal_vertex:K1e,specularmap_fragment:J1e,specularmap_pars_fragment:Z1e,tonemapping_fragment:Q1e,tonemapping_pars_fragment:eEe,transmission_fragment:tEe,transmission_pars_fragment:nEe,uv_pars_fragment:iEe,uv_pars_vertex:rEe,uv_vertex:aEe,worldpos_vertex:oEe,background_vert:sEe,background_frag:lEe,backgroundCube_vert:uEe,backgroundCube_frag:cEe,cube_vert:fEe,cube_frag:dEe,depth_vert:hEe,depth_frag:pEe,distance_vert:mEe,distance_frag:gEe,equirect_vert:vEe,equirect_frag:yEe,linedashed_vert:_Ee,linedashed_frag:bEe,meshbasic_vert:xEe,meshbasic_frag:SEe,meshlambert_vert:EEe,meshlambert_frag:TEe,meshmatcap_vert:AEe,meshmatcap_frag:MEe,meshnormal_vert:wEe,meshnormal_frag:CEe,meshphong_vert:REe,meshphong_frag:IEe,meshphysical_vert:PEe,meshphysical_frag:NEe,meshtoon_vert:DEe,meshtoon_frag:OEe,points_vert:LEe,points_frag:UEe,shadow_vert:FEe,shadow_frag:kEe,sprite_vert:BEe,sprite_frag:zEe},wt={common:{diffuse:{value:new Ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new un}},envmap:{envMap:{value:null},envMapRotation:{value:new un},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new un}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new un}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new un},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new un},normalScale:{value:new st(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new un},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new un}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new un}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new un}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0},uvTransform:{value:new un}},sprite:{diffuse:{value:new Ct(16777215)},opacity:{value:1},center:{value:new st(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}}},Fl={basic:{uniforms:fo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:mn.meshbasic_vert,fragmentShader:mn.meshbasic_frag},lambert:{uniforms:fo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:mn.meshlambert_vert,fragmentShader:mn.meshlambert_frag},phong:{uniforms:fo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)},specular:{value:new Ct(1118481)},shininess:{value:30}}]),vertexShader:mn.meshphong_vert,fragmentShader:mn.meshphong_frag},standard:{uniforms:fo([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag},toon:{uniforms:fo([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:mn.meshtoon_vert,fragmentShader:mn.meshtoon_frag},matcap:{uniforms:fo([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:mn.meshmatcap_vert,fragmentShader:mn.meshmatcap_frag},points:{uniforms:fo([wt.points,wt.fog]),vertexShader:mn.points_vert,fragmentShader:mn.points_frag},dashed:{uniforms:fo([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mn.linedashed_vert,fragmentShader:mn.linedashed_frag},depth:{uniforms:fo([wt.common,wt.displacementmap]),vertexShader:mn.depth_vert,fragmentShader:mn.depth_frag},normal:{uniforms:fo([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:mn.meshnormal_vert,fragmentShader:mn.meshnormal_frag},sprite:{uniforms:fo([wt.sprite,wt.fog]),vertexShader:mn.sprite_vert,fragmentShader:mn.sprite_frag},background:{uniforms:{uvTransform:{value:new un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mn.background_vert,fragmentShader:mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new un}},vertexShader:mn.backgroundCube_vert,fragmentShader:mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mn.cube_vert,fragmentShader:mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mn.equirect_vert,fragmentShader:mn.equirect_frag},distance:{uniforms:fo([wt.common,wt.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mn.distance_vert,fragmentShader:mn.distance_frag},shadow:{uniforms:fo([wt.lights,wt.fog,{color:{value:new Ct(0)},opacity:{value:1}}]),vertexShader:mn.shadow_vert,fragmentShader:mn.shadow_frag}};Fl.physical={uniforms:fo([Fl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new un},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new un},clearcoatNormalScale:{value:new st(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new un},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new un},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new un},sheen:{value:0},sheenColor:{value:new Ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new un},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new un},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new un},transmissionSamplerSize:{value:new st},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new un},attenuationDistance:{value:0},attenuationColor:{value:new Ct(0)},specularColor:{value:new Ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new un},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new un},anisotropyVector:{value:new st},anisotropyMap:{value:null},anisotropyMapTransform:{value:new un}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag};const lS={r:0,b:0,g:0},Ch=new Es,GEe=new en;function VEe(t,e,n,i,r,a,o){const s=new Ct(0);let u=a===!0?0:1,c,d,p=null,g=0,y=null;function b(I){let N=I.isScene===!0?I.background:null;return N&&N.isTexture&&(N=(I.backgroundBlurriness>0?n:e).get(N)),N}function T(I){let N=!1;const D=b(I);D===null?A(s,u):D&&D.isColor&&(A(D,1),N=!0);const U=t.xr.getEnvironmentBlendMode();U==="additive"?i.buffers.color.setClear(0,0,0,1,o):U==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||N)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function S(I,N){const D=b(N);D&&(D.isCubeTexture||D.mapping===Gg)?(d===void 0&&(d=new er(new gp(1,1,1),new Ts({name:"BackgroundCubeMaterial",uniforms:bg(Fl.backgroundCube.uniforms),vertexShader:Fl.backgroundCube.vertexShader,fragmentShader:Fl.backgroundCube.fragmentShader,side:yo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(U,k,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Ch.copy(N.backgroundRotation),Ch.x*=-1,Ch.y*=-1,Ch.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Ch.y*=-1,Ch.z*=-1),d.material.uniforms.envMap.value=D,d.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(GEe.makeRotationFromEuler(Ch)),d.material.toneMapped=Fn.getTransfer(D.colorSpace)!==ni,(p!==D||g!==D.version||y!==t.toneMapping)&&(d.material.needsUpdate=!0,p=D,g=D.version,y=t.toneMapping),d.layers.enableAll(),I.unshift(d,d.geometry,d.material,0,0,null)):D&&D.isTexture&&(c===void 0&&(c=new er(new mf(2,2),new Ts({name:"BackgroundMaterial",uniforms:bg(Fl.background.uniforms),vertexShader:Fl.background.vertexShader,fragmentShader:Fl.background.fragmentShader,side:af,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=D,c.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,c.material.toneMapped=Fn.getTransfer(D.colorSpace)!==ni,D.matrixAutoUpdate===!0&&D.updateMatrix(),c.material.uniforms.uvTransform.value.copy(D.matrix),(p!==D||g!==D.version||y!==t.toneMapping)&&(c.material.needsUpdate=!0,p=D,g=D.version,y=t.toneMapping),c.layers.enableAll(),I.unshift(c,c.geometry,c.material,0,0,null))}function A(I,N){I.getRGB(lS,Tq(t)),i.buffers.color.setClear(lS.r,lS.g,lS.b,N,o)}function R(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return s},setClearColor:function(I,N=1){s.set(I),u=N,A(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(I){u=I,A(s,u)},render:T,addToRenderList:S,dispose:R}}function HEe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=g(null);let a=r,o=!1;function s(F,j,W,X,Q){let ae=!1;const $=p(X,W,j);a!==$&&(a=$,c(a.object)),ae=y(F,X,W,Q),ae&&b(F,X,W,Q),Q!==null&&e.update(Q,t.ELEMENT_ARRAY_BUFFER),(ae||o)&&(o=!1,N(F,j,W,X),Q!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function u(){return t.createVertexArray()}function c(F){return t.bindVertexArray(F)}function d(F){return t.deleteVertexArray(F)}function p(F,j,W){const X=W.wireframe===!0;let Q=i[F.id];Q===void 0&&(Q={},i[F.id]=Q);let ae=Q[j.id];ae===void 0&&(ae={},Q[j.id]=ae);let $=ae[X];return $===void 0&&($=g(u()),ae[X]=$),$}function g(F){const j=[],W=[],X=[];for(let Q=0;Q<n;Q++)j[Q]=0,W[Q]=0,X[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:W,attributeDivisors:X,object:F,attributes:{},index:null}}function y(F,j,W,X){const Q=a.attributes,ae=j.attributes;let $=0;const ie=W.getAttributes();for(const me in ie)if(ie[me].location>=0){const de=Q[me];let H=ae[me];if(H===void 0&&(me==="instanceMatrix"&&F.instanceMatrix&&(H=F.instanceMatrix),me==="instanceColor"&&F.instanceColor&&(H=F.instanceColor)),de===void 0||de.attribute!==H||H&&de.data!==H.data)return!0;$++}return a.attributesNum!==$||a.index!==X}function b(F,j,W,X){const Q={},ae=j.attributes;let $=0;const ie=W.getAttributes();for(const me in ie)if(ie[me].location>=0){let de=ae[me];de===void 0&&(me==="instanceMatrix"&&F.instanceMatrix&&(de=F.instanceMatrix),me==="instanceColor"&&F.instanceColor&&(de=F.instanceColor));const H={};H.attribute=de,de&&de.data&&(H.data=de.data),Q[me]=H,$++}a.attributes=Q,a.attributesNum=$,a.index=X}function T(){const F=a.newAttributes;for(let j=0,W=F.length;j<W;j++)F[j]=0}function S(F){A(F,0)}function A(F,j){const W=a.newAttributes,X=a.enabledAttributes,Q=a.attributeDivisors;W[F]=1,X[F]===0&&(t.enableVertexAttribArray(F),X[F]=1),Q[F]!==j&&(t.vertexAttribDivisor(F,j),Q[F]=j)}function R(){const F=a.newAttributes,j=a.enabledAttributes;for(let W=0,X=j.length;W<X;W++)j[W]!==F[W]&&(t.disableVertexAttribArray(W),j[W]=0)}function I(F,j,W,X,Q,ae,$){$===!0?t.vertexAttribIPointer(F,j,W,Q,ae):t.vertexAttribPointer(F,j,W,X,Q,ae)}function N(F,j,W,X){T();const Q=X.attributes,ae=W.getAttributes(),$=j.defaultAttributeValues;for(const ie in ae){const me=ae[ie];if(me.location>=0){let pe=Q[ie];if(pe===void 0&&(ie==="instanceMatrix"&&F.instanceMatrix&&(pe=F.instanceMatrix),ie==="instanceColor"&&F.instanceColor&&(pe=F.instanceColor)),pe!==void 0){const de=pe.normalized,H=pe.itemSize,ne=e.get(pe);if(ne===void 0)continue;const le=ne.buffer,ge=ne.type,_e=ne.bytesPerElement,re=ge===t.INT||ge===t.UNSIGNED_INT||pe.gpuType===MT;if(pe.isInterleavedBufferAttribute){const oe=pe.data,Ee=oe.stride,ce=pe.offset;if(oe.isInstancedInterleavedBuffer){for(let Ce=0;Ce<me.locationSize;Ce++)A(me.location+Ce,oe.meshPerAttribute);F.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Ce=0;Ce<me.locationSize;Ce++)S(me.location+Ce);t.bindBuffer(t.ARRAY_BUFFER,le);for(let Ce=0;Ce<me.locationSize;Ce++)I(me.location+Ce,H/me.locationSize,ge,de,Ee*_e,(ce+H/me.locationSize*Ce)*_e,re)}else{if(pe.isInstancedBufferAttribute){for(let oe=0;oe<me.locationSize;oe++)A(me.location+oe,pe.meshPerAttribute);F.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let oe=0;oe<me.locationSize;oe++)S(me.location+oe);t.bindBuffer(t.ARRAY_BUFFER,le);for(let oe=0;oe<me.locationSize;oe++)I(me.location+oe,H/me.locationSize,ge,de,H*_e,H/me.locationSize*oe*_e,re)}}else if($!==void 0){const de=$[ie];if(de!==void 0)switch(de.length){case 2:t.vertexAttrib2fv(me.location,de);break;case 3:t.vertexAttrib3fv(me.location,de);break;case 4:t.vertexAttrib4fv(me.location,de);break;default:t.vertexAttrib1fv(me.location,de)}}}}R()}function D(){z();for(const F in i){const j=i[F];for(const W in j){const X=j[W];for(const Q in X)d(X[Q].object),delete X[Q];delete j[W]}delete i[F]}}function U(F){if(i[F.id]===void 0)return;const j=i[F.id];for(const W in j){const X=j[W];for(const Q in X)d(X[Q].object),delete X[Q];delete j[W]}delete i[F.id]}function k(F){for(const j in i){const W=i[j];if(W[F.id]===void 0)continue;const X=W[F.id];for(const Q in X)d(X[Q].object),delete X[Q];delete W[F.id]}}function z(){L(),o=!0,a!==r&&(a=r,c(a.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:s,reset:z,resetDefaultState:L,dispose:D,releaseStatesOfGeometry:U,releaseStatesOfProgram:k,initAttributes:T,enableAttribute:S,disableUnusedAttributes:R}}function qEe(t,e,n){let i;function r(c){i=c}function a(c,d){t.drawArrays(i,c,d),n.update(d,i,1)}function o(c,d,p){p!==0&&(t.drawArraysInstanced(i,c,d,p),n.update(d,i,p))}function s(c,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,d,0,p);let y=0;for(let b=0;b<p;b++)y+=d[b];n.update(y,i,1)}function u(c,d,p,g){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<c.length;b++)o(c[b],d[b],g[b]);else{y.multiDrawArraysInstancedWEBGL(i,c,0,d,0,g,0,p);let b=0;for(let T=0;T<p;T++)b+=d[T]*g[T];n.update(b,i,1)}}this.setMode=r,this.render=a,this.renderInstances=o,this.renderMultiDraw=s,this.renderMultiDrawInstances=u}function WEe(t,e,n,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==ja&&i.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function s(k){const z=k===Wu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==po&&i.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==vo&&!z)}function u(k){if(k==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const d=u(c);d!==c&&(Mt("WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const p=n.logarithmicDepthBuffer===!0,g=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=t.getParameter(t.MAX_TEXTURE_SIZE),S=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),A=t.getParameter(t.MAX_VERTEX_ATTRIBS),R=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),I=t.getParameter(t.MAX_VARYING_VECTORS),N=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),D=t.getParameter(t.MAX_SAMPLES),U=t.getParameter(t.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:s,precision:c,logarithmicDepthBuffer:p,reversedDepthBuffer:g,maxTextures:y,maxVertexTextures:b,maxTextureSize:T,maxCubemapSize:S,maxAttributes:A,maxVertexUniforms:R,maxVaryings:I,maxFragmentUniforms:N,maxSamples:D,samples:U}}function jEe(t){const e=this;let n=null,i=0,r=!1,a=!1;const o=new kc,s=new un,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const y=p.length!==0||g||i!==0||r;return r=g,i=p.length,y},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,g){n=d(p,g,0)},this.setState=function(p,g,y){const b=p.clippingPlanes,T=p.clipIntersection,S=p.clipShadows,A=t.get(p);if(!r||b===null||b.length===0||a&&!S)a?d(null):c();else{const R=a?0:i,I=R*4;let N=A.clippingState||null;u.value=N,N=d(b,g,I,y);for(let D=0;D!==I;++D)N[D]=n[D];A.clippingState=N,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=R}};function c(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(p,g,y,b){const T=p!==null?p.length:0;let S=null;if(T!==0){if(S=u.value,b!==!0||S===null){const A=y+T*4,R=g.matrixWorldInverse;s.getNormalMatrix(R),(S===null||S.length<A)&&(S=new Float32Array(A));for(let I=0,N=y;I!==T;++I,N+=4)o.copy(p[I]).applyMatrix4(R,s),o.normal.toArray(S,N),S[N+3]=o.constant}u.value=S,u.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,S}}function XEe(t){let e=new WeakMap;function n(o,s){return s===Ty?o.mapping=qu:s===Ay&&(o.mapping=xd),o}function i(o){if(o&&o.isTexture){const s=o.mapping;if(s===Ty||s===Ay)if(e.has(o)){const u=e.get(o).texture;return n(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const c=new HN(u.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const s=o.target;s.removeEventListener("dispose",r);const u=e.get(s);u!==void 0&&(e.delete(s),u.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const md=4,V4=[.125,.215,.35,.446,.526,.582],kh=20,YEe=256,O0=new Xc,H4=new Ct;let bC=null,xC=0,SC=0,EC=!1;const $Ee=new se;class cI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,i=.1,r=100,a={}){const{size:o=256,position:s=$Ee}=a;bC=this._renderer.getRenderTarget(),xC=this._renderer.getActiveCubeFace(),SC=this._renderer.getActiveMipmapLevel(),EC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,s),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=W4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(bC,xC,SC),this._renderer.xr.enabled=EC,e.scissorTest=!1,Vm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===qu||e.mapping===xd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bC=this._renderer.getRenderTarget(),xC=this._renderer.getActiveCubeFace(),SC=this._renderer.getActiveMipmapLevel(),EC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:mi,minFilter:mi,generateMipmaps:!1,type:Wu,format:ja,colorSpace:Sd,depthBuffer:!1},r=q4(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=q4(e,n,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=KEe(a)),this._blurMaterial=ZEe(a,e,n),this._ggxMaterial=JEe(a,e,n)}return r}_compileMaterial(e){const n=new er(new cn,e);this._renderer.compile(n,O0)}_sceneToCubeUV(e,n,i,r,a){const u=new _r(90,1,n,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,y=p.toneMapping;p.getClearColor(H4),p.toneMapping=ol,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(r),p.clearDepth(),p.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new er(new gp,new pf({name:"PMREM.Background",side:yo,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,S=T.material;let A=!1;const R=e.background;R?R.isColor&&(S.color.copy(R),e.background=null,A=!0):(S.color.copy(H4),A=!0);for(let I=0;I<6;I++){const N=I%3;N===0?(u.up.set(0,c[I],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x+d[I],a.y,a.z)):N===1?(u.up.set(0,0,c[I]),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y+d[I],a.z)):(u.up.set(0,c[I],0),u.position.set(a.x,a.y,a.z),u.lookAt(a.x,a.y,a.z+d[I]));const D=this._cubeSize;Vm(r,N*D,I>2?D:0,D,D),p.setRenderTarget(r),A&&p.render(T,u),p.render(e,u)}p.toneMapping=y,p.autoClear=g,e.background=R}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===qu||e.mapping===xd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=j4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=W4());const a=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=a;const s=a.uniforms;s.envMap.value=e;const u=this._cubeSize;Vm(n,0,0,3*u,2*u),i.setRenderTarget(n),i.render(o,O0)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);n.autoClear=i}_applyGGXFilter(e,n,i){const r=this._renderer,a=this._pingPongRenderTarget,o=this._ggxMaterial,s=this._lodMeshes[i];s.material=o;const u=o.uniforms,c=i/(this._lodMeshes.length-1),d=n/(this._lodMeshes.length-1),p=Math.sqrt(c*c-d*d),g=0+c*1.25,y=p*g,{_lodMax:b}=this,T=this._sizeLods[i],S=3*T*(i>b-md?i-b+md:0),A=4*(this._cubeSize-T);u.envMap.value=e.texture,u.roughness.value=y,u.mipInt.value=b-n,Vm(a,S,A,3*T,2*T),r.setRenderTarget(a),r.render(s,O0),u.envMap.value=a.texture,u.roughness.value=0,u.mipInt.value=b-i,Vm(e,S,A,3*T,2*T),r.setRenderTarget(e),r.render(s,O0)}_blur(e,n,i,r,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",a),this._halfBlur(o,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,o,s){const u=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&Ht("blur direction must be either latitudinal or longitudinal!");const d=3,p=this._lodMeshes[r];p.material=c;const g=c.uniforms,y=this._sizeLods[i]-1,b=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*kh-1),T=a/b,S=isFinite(a)?1+Math.floor(d*T):kh;S>kh&&Mt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${kh}`);const A=[];let R=0;for(let k=0;k<kh;++k){const z=k/T,L=Math.exp(-z*z/2);A.push(L),k===0?R+=L:k<S&&(R+=2*L)}for(let k=0;k<A.length;k++)A[k]=A[k]/R;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=A,g.latitudinal.value=o==="latitudinal",s&&(g.poleAxis.value=s);const{_lodMax:I}=this;g.dTheta.value=b,g.mipInt.value=I-i;const N=this._sizeLods[r],D=3*N*(r>I-md?r-I+md:0),U=4*(this._cubeSize-N);Vm(n,D,U,3*N,2*N),u.setRenderTarget(n),u.render(p,O0)}}function KEe(t){const e=[],n=[],i=[];let r=t;const a=t-md+1+V4.length;for(let o=0;o<a;o++){const s=Math.pow(2,r);e.push(s);let u=1/s;o>t-md?u=V4[o-t+md-1]:o===0&&(u=0),n.push(u);const c=1/(s-2),d=-c,p=1+c,g=[d,d,p,d,p,p,d,d,p,p,d,p],y=6,b=6,T=3,S=2,A=1,R=new Float32Array(T*b*y),I=new Float32Array(S*b*y),N=new Float32Array(A*b*y);for(let U=0;U<y;U++){const k=U%3*2/3-1,z=U>2?0:-1,L=[k,z,0,k+2/3,z,0,k+2/3,z+1,0,k,z,0,k+2/3,z+1,0,k,z+1,0];R.set(L,T*b*U),I.set(g,S*b*U);const F=[U,U,U,U,U,U];N.set(F,A*b*U)}const D=new cn;D.setAttribute("position",new di(R,T)),D.setAttribute("uv",new di(I,S)),D.setAttribute("faceIndex",new di(N,A)),i.push(new er(D,null)),r>md&&r--}return{lodMeshes:i,sizeLods:e,sigmas:n}}function q4(t,e,n){const i=new bs(t,e,n);return i.texture.mapping=Gg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function JEe(t,e,n){return new Ts({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:YEe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:oA(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function ZEe(t,e,n){const i=new Float32Array(kh),r=new se(0,1,0);return new Ts({name:"SphericalGaussianBlur",defines:{n:kh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:oA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function W4(){return new Ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function j4(){return new Ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function oA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function QEe(t){let e=new WeakMap,n=null;function i(s){if(s&&s.isTexture){const u=s.mapping,c=u===Ty||u===Ay,d=u===qu||u===xd;if(c||d){let p=e.get(s);const g=p!==void 0?p.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==g)return n===null&&(n=new cI(t)),p=c?n.fromEquirectangular(s,p):n.fromCubemap(s,p),p.texture.pmremVersion=s.pmremVersion,e.set(s,p),p.texture;if(p!==void 0)return p.texture;{const y=s.image;return c&&y&&y.height>0||d&&y&&r(y)?(n===null&&(n=new cI(t)),p=c?n.fromEquirectangular(s):n.fromCubemap(s),p.texture.pmremVersion=s.pmremVersion,e.set(s,p),s.addEventListener("dispose",a),p.texture):null}}}return s}function r(s){let u=0;const c=6;for(let d=0;d<c;d++)s[d]!==void 0&&u++;return u===c}function a(s){const u=s.target;u.removeEventListener("dispose",a);const c=e.get(u);c!==void 0&&(e.delete(u),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function eTe(t){const e={};function n(i){if(e[i]!==void 0)return e[i];const r=t.getExtension(i);return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&vg("WebGLRenderer: "+i+" extension not supported."),r}}}function tTe(t,e,n,i){const r={},a=new WeakMap;function o(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const b in g.attributes)e.remove(g.attributes[b]);g.removeEventListener("dispose",o),delete r[g.id];const y=a.get(g);y&&(e.remove(y),a.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function s(p,g){return r[g.id]===!0||(g.addEventListener("dispose",o),r[g.id]=!0,n.memory.geometries++),g}function u(p){const g=p.attributes;for(const y in g)e.update(g[y],t.ARRAY_BUFFER)}function c(p){const g=[],y=p.index,b=p.attributes.position;let T=0;if(y!==null){const R=y.array;T=y.version;for(let I=0,N=R.length;I<N;I+=3){const D=R[I+0],U=R[I+1],k=R[I+2];g.push(D,U,U,k,k,D)}}else if(b!==void 0){const R=b.array;T=b.version;for(let I=0,N=R.length/3-1;I<N;I+=3){const D=I+0,U=I+1,k=I+2;g.push(D,U,U,k,k,D)}}else return;const S=new(yq(g)?GN:zN)(g,1);S.version=T;const A=a.get(p);A&&e.remove(A),a.set(p,S)}function d(p){const g=a.get(p);if(g){const y=p.index;y!==null&&g.version<y.version&&c(p)}else c(p);return a.get(p)}return{get:s,update:u,getWireframeAttribute:d}}function nTe(t,e,n){let i;function r(g){i=g}let a,o;function s(g){a=g.type,o=g.bytesPerElement}function u(g,y){t.drawElements(i,y,a,g*o),n.update(y,i,1)}function c(g,y,b){b!==0&&(t.drawElementsInstanced(i,y,a,g*o,b),n.update(y,i,b))}function d(g,y,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,a,g,0,b);let S=0;for(let A=0;A<b;A++)S+=y[A];n.update(S,i,1)}function p(g,y,b,T){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let A=0;A<g.length;A++)c(g[A]/o,y[A],T[A]);else{S.multiDrawElementsInstancedWEBGL(i,y,0,a,g,0,T,0,b);let A=0;for(let R=0;R<b;R++)A+=y[R]*T[R];n.update(A,i,1)}}this.setMode=r,this.setIndex=s,this.render=u,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function iTe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,s){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=s*(a/3);break;case t.LINES:n.lines+=s*(a/2);break;case t.LINE_STRIP:n.lines+=s*(a-1);break;case t.LINE_LOOP:n.lines+=s*a;break;case t.POINTS:n.points+=s*a;break;default:Ht("WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function rTe(t,e,n){const i=new WeakMap,r=new ri;function a(o,s,u){const c=o.morphTargetInfluences,d=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,p=d!==void 0?d.length:0;let g=i.get(s);if(g===void 0||g.count!==p){let F=function(){z.dispose(),i.delete(s),s.removeEventListener("dispose",F)};var y=F;g!==void 0&&g.texture.dispose();const b=s.morphAttributes.position!==void 0,T=s.morphAttributes.normal!==void 0,S=s.morphAttributes.color!==void 0,A=s.morphAttributes.position||[],R=s.morphAttributes.normal||[],I=s.morphAttributes.color||[];let N=0;b===!0&&(N=1),T===!0&&(N=2),S===!0&&(N=3);let D=s.attributes.position.count*N,U=1;D>e.maxTextureSize&&(U=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const k=new Float32Array(D*U*4*p),z=new LT(k,D,U,p);z.type=vo,z.needsUpdate=!0;const L=N*4;for(let j=0;j<p;j++){const W=A[j],X=R[j],Q=I[j],ae=D*U*4*j;for(let $=0;$<W.count;$++){const ie=$*L;b===!0&&(r.fromBufferAttribute(W,$),k[ae+ie+0]=r.x,k[ae+ie+1]=r.y,k[ae+ie+2]=r.z,k[ae+ie+3]=0),T===!0&&(r.fromBufferAttribute(X,$),k[ae+ie+4]=r.x,k[ae+ie+5]=r.y,k[ae+ie+6]=r.z,k[ae+ie+7]=0),S===!0&&(r.fromBufferAttribute(Q,$),k[ae+ie+8]=r.x,k[ae+ie+9]=r.y,k[ae+ie+10]=r.z,k[ae+ie+11]=Q.itemSize===4?r.w:1)}}g={count:p,texture:z,size:new st(D,U)},i.set(s,g),s.addEventListener("dispose",F)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let b=0;for(let S=0;S<c.length;S++)b+=c[S];const T=s.morphTargetsRelative?1:1-b;u.getUniforms().setValue(t,"morphTargetBaseInfluence",T),u.getUniforms().setValue(t,"morphTargetInfluences",c)}u.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}return{update:a}}function aTe(t,e,n,i){let r=new WeakMap;function a(u){const c=i.render.frame,d=u.geometry,p=e.get(u,d);if(r.get(p)!==c&&(e.update(p),r.set(p,c)),u.isInstancedMesh&&(u.hasEventListener("dispose",s)===!1&&u.addEventListener("dispose",s),r.get(u)!==c&&(n.update(u.instanceMatrix,t.ARRAY_BUFFER),u.instanceColor!==null&&n.update(u.instanceColor,t.ARRAY_BUFFER),r.set(u,c))),u.isSkinnedMesh){const g=u.skeleton;r.get(g)!==c&&(g.update(),r.set(g,c))}return p}function o(){r=new WeakMap}function s(u){const c=u.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:a,dispose:o}}const oTe={[TN]:"LINEAR_TONE_MAPPING",[AN]:"REINHARD_TONE_MAPPING",[MN]:"CINEON_TONE_MAPPING",[TT]:"ACES_FILMIC_TONE_MAPPING",[CN]:"AGX_TONE_MAPPING",[RN]:"NEUTRAL_TONE_MAPPING",[wN]:"CUSTOM_TONE_MAPPING"};function sTe(t,e,n,i,r){const a=new bs(e,n,{type:t,depthBuffer:i,stencilBuffer:r}),o=new bs(e,n,{type:Wu,depthBuffer:!1,stencilBuffer:!1}),s=new cn;s.setAttribute("position",new Ft([-1,3,0,-1,-1,0,3,-1,0],3)),s.setAttribute("uv",new Ft([0,2,0,0,2,0],2));const u=new tD({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),c=new er(s,u),d=new Xc(-1,1,1,-1,0,1);let p=null,g=null,y=!1,b,T=null,S=[],A=!1;this.setSize=function(R,I){a.setSize(R,I),o.setSize(R,I);for(let N=0;N<S.length;N++){const D=S[N];D.setSize&&D.setSize(R,I)}},this.setEffects=function(R){S=R,A=S.length>0&&S[0].isRenderPass===!0;const I=a.width,N=a.height;for(let D=0;D<S.length;D++){const U=S[D];U.setSize&&U.setSize(I,N)}},this.begin=function(R,I){if(y||R.toneMapping===ol&&S.length===0)return!1;if(T=I,I!==null){const N=I.width,D=I.height;(a.width!==N||a.height!==D)&&this.setSize(N,D)}return A===!1&&R.setRenderTarget(a),b=R.toneMapping,R.toneMapping=ol,!0},this.hasRenderPass=function(){return A},this.end=function(R,I){R.toneMapping=b,y=!0;let N=a,D=o;for(let U=0;U<S.length;U++){const k=S[U];if(k.enabled!==!1&&(k.render(R,D,N,I),k.needsSwap!==!1)){const z=N;N=D,D=z}}if(p!==R.outputColorSpace||g!==R.toneMapping){p=R.outputColorSpace,g=R.toneMapping,u.defines={},Fn.getTransfer(p)===ni&&(u.defines.SRGB_TRANSFER="");const U=oTe[g];U&&(u.defines[U]=""),u.needsUpdate=!0}u.uniforms.tDiffuse.value=N.texture,R.setRenderTarget(T),R.render(c,d),T=null,y=!1},this.isCompositing=function(){return y},this.dispose=function(){a.dispose(),o.dispose(),s.dispose(),u.dispose()}}const x7=new Qi,fI=new xg(1,1),S7=new LT,E7=new UT,T7=new p_,X4=[],Y4=[],$4=new Float32Array(16),K4=new Float32Array(9),J4=new Float32Array(4);function Hg(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=X4[r];if(a===void 0&&(a=new Float32Array(r),X4[r]=a),e!==0){i.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Wr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function jr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function sA(t,e){let n=Y4[e];n===void 0&&(n=new Int32Array(e),Y4[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function lTe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function uTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wr(n,e))return;t.uniform2fv(this.addr,e),jr(n,e)}}function cTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Wr(n,e))return;t.uniform3fv(this.addr,e),jr(n,e)}}function fTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wr(n,e))return;t.uniform4fv(this.addr,e),jr(n,e)}}function dTe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Wr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),jr(n,e)}else{if(Wr(n,i))return;J4.set(i),t.uniformMatrix2fv(this.addr,!1,J4),jr(n,i)}}function hTe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Wr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),jr(n,e)}else{if(Wr(n,i))return;K4.set(i),t.uniformMatrix3fv(this.addr,!1,K4),jr(n,i)}}function pTe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Wr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),jr(n,e)}else{if(Wr(n,i))return;$4.set(i),t.uniformMatrix4fv(this.addr,!1,$4),jr(n,i)}}function mTe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function gTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wr(n,e))return;t.uniform2iv(this.addr,e),jr(n,e)}}function vTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Wr(n,e))return;t.uniform3iv(this.addr,e),jr(n,e)}}function yTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wr(n,e))return;t.uniform4iv(this.addr,e),jr(n,e)}}function _Te(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function bTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wr(n,e))return;t.uniform2uiv(this.addr,e),jr(n,e)}}function xTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Wr(n,e))return;t.uniform3uiv(this.addr,e),jr(n,e)}}function STe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wr(n,e))return;t.uniform4uiv(this.addr,e),jr(n,e)}}function ETe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let a;this.type===t.SAMPLER_2D_SHADOW?(fI.compareFunction=n.isReversedDepthBuffer()?OT:DT,a=fI):a=x7,n.setTexture2D(e||a,r)}function TTe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||E7,r)}function ATe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||T7,r)}function MTe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||S7,r)}function wTe(t){switch(t){case 5126:return lTe;case 35664:return uTe;case 35665:return cTe;case 35666:return fTe;case 35674:return dTe;case 35675:return hTe;case 35676:return pTe;case 5124:case 35670:return mTe;case 35667:case 35671:return gTe;case 35668:case 35672:return vTe;case 35669:case 35673:return yTe;case 5125:return _Te;case 36294:return bTe;case 36295:return xTe;case 36296:return STe;case 35678:case 36198:case 36298:case 36306:case 35682:return ETe;case 35679:case 36299:case 36307:return TTe;case 35680:case 36300:case 36308:case 36293:return ATe;case 36289:case 36303:case 36311:case 36292:return MTe}}function CTe(t,e){t.uniform1fv(this.addr,e)}function RTe(t,e){const n=Hg(e,this.size,2);t.uniform2fv(this.addr,n)}function ITe(t,e){const n=Hg(e,this.size,3);t.uniform3fv(this.addr,n)}function PTe(t,e){const n=Hg(e,this.size,4);t.uniform4fv(this.addr,n)}function NTe(t,e){const n=Hg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function DTe(t,e){const n=Hg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function OTe(t,e){const n=Hg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function LTe(t,e){t.uniform1iv(this.addr,e)}function UTe(t,e){t.uniform2iv(this.addr,e)}function FTe(t,e){t.uniform3iv(this.addr,e)}function kTe(t,e){t.uniform4iv(this.addr,e)}function BTe(t,e){t.uniform1uiv(this.addr,e)}function zTe(t,e){t.uniform2uiv(this.addr,e)}function GTe(t,e){t.uniform3uiv(this.addr,e)}function VTe(t,e){t.uniform4uiv(this.addr,e)}function HTe(t,e,n){const i=this.cache,r=e.length,a=sA(n,r);Wr(i,a)||(t.uniform1iv(this.addr,a),jr(i,a));let o;this.type===t.SAMPLER_2D_SHADOW?o=fI:o=x7;for(let s=0;s!==r;++s)n.setTexture2D(e[s]||o,a[s])}function qTe(t,e,n){const i=this.cache,r=e.length,a=sA(n,r);Wr(i,a)||(t.uniform1iv(this.addr,a),jr(i,a));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||E7,a[o])}function WTe(t,e,n){const i=this.cache,r=e.length,a=sA(n,r);Wr(i,a)||(t.uniform1iv(this.addr,a),jr(i,a));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||T7,a[o])}function jTe(t,e,n){const i=this.cache,r=e.length,a=sA(n,r);Wr(i,a)||(t.uniform1iv(this.addr,a),jr(i,a));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||S7,a[o])}function XTe(t){switch(t){case 5126:return CTe;case 35664:return RTe;case 35665:return ITe;case 35666:return PTe;case 35674:return NTe;case 35675:return DTe;case 35676:return OTe;case 5124:case 35670:return LTe;case 35667:case 35671:return UTe;case 35668:case 35672:return FTe;case 35669:case 35673:return kTe;case 5125:return BTe;case 36294:return zTe;case 36295:return GTe;case 36296:return VTe;case 35678:case 36198:case 36298:case 36306:case 35682:return HTe;case 35679:case 36299:case 36307:return qTe;case 35680:case 36300:case 36308:case 36293:return WTe;case 36289:case 36303:case 36311:case 36292:return jTe}}class YTe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=wTe(n.type)}}class $Te{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=XTe(n.type)}}class KTe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,o=r.length;a!==o;++a){const s=r[a];s.setValue(e,n[s.id],i)}}}const TC=/(\w+)(\])?(\[|\.)?/g;function Z4(t,e){t.seq.push(e),t.map[e.id]=e}function JTe(t,e,n){const i=t.name,r=i.length;for(TC.lastIndex=0;;){const a=TC.exec(i),o=TC.lastIndex;let s=a[1];const u=a[2]==="]",c=a[3];if(u&&(s=s|0),c===void 0||c==="["&&o+2===r){Z4(n,c===void 0?new YTe(s,t,e):new $Te(s,t,e));break}else{let p=n.map[s];p===void 0&&(p=new KTe(s),Z4(n,p)),n=p}}}class CS{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const s=e.getActiveUniform(n,o),u=e.getUniformLocation(n,s.name);JTe(s,u,this)}const r=[],a=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(o):a.push(o);r.length>0&&(this.seq=r.concat(a))}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,o=n.length;a!==o;++a){const s=n[a],u=i[s.id];u.needsUpdate!==!1&&s.setValue(e,u.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function Q4(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const ZTe=37297;let QTe=0;function eAe(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let o=r;o<a;o++){const s=o+1;i.push(`${s===e?">":" "} ${s}: ${n[o]}`)}return i.join(`
`)}const eB=new un;function tAe(t){Fn._getMatrix(eB,Fn.workingColorSpace,t);const e=`mat3( ${eB.elements.map(n=>n.toFixed(4))} )`;switch(Fn.getTransfer(t)){case Iy:return[e,"LinearTransferOETF"];case ni:return[e,"sRGBTransferOETF"];default:return Mt("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function tB(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+a+`

`+eAe(t.getShaderSource(e),s)}else return a}function nAe(t,e){const n=tAe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}const iAe={[TN]:"Linear",[AN]:"Reinhard",[MN]:"Cineon",[TT]:"ACESFilmic",[CN]:"AgX",[RN]:"Neutral",[wN]:"Custom"};function rAe(t,e){const n=iAe[e];return n===void 0?(Mt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+t+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const uS=new se;function aAe(){Fn.getLuminanceCoefficients(uS);const t=uS.x.toFixed(4),e=uS.y.toFixed(4),n=uS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function oAe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(q0).join(`
`)}function sAe(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function lAe(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=t.getActiveAttrib(e,r),o=a.name;let s=1;a.type===t.FLOAT_MAT2&&(s=2),a.type===t.FLOAT_MAT3&&(s=3),a.type===t.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function q0(t){return t!==""}function nB(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iB(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const uAe=/^[ \t]*#include +<([\w\d./]+)>/gm;function dI(t){return t.replace(uAe,fAe)}const cAe=new Map;function fAe(t,e){let n=mn[e];if(n===void 0){const i=cAe.get(e);if(i!==void 0)n=mn[i],Mt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return dI(n)}const dAe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rB(t){return t.replace(dAe,hAe)}function hAe(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function aB(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const pAe={[og]:"SHADOWMAP_TYPE_PCF",[Vh]:"SHADOWMAP_TYPE_VSM"};function mAe(t){return pAe[t.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const gAe={[qu]:"ENVMAP_TYPE_CUBE",[xd]:"ENVMAP_TYPE_CUBE",[Gg]:"ENVMAP_TYPE_CUBE_UV"};function vAe(t){return t.envMap===!1?"ENVMAP_TYPE_CUBE":gAe[t.envMapMode]||"ENVMAP_TYPE_CUBE"}const yAe={[xd]:"ENVMAP_MODE_REFRACTION"};function _Ae(t){return t.envMap===!1?"ENVMAP_MODE_REFLECTION":yAe[t.envMapMode]||"ENVMAP_MODE_REFLECTION"}const bAe={[d_]:"ENVMAP_BLENDING_MULTIPLY",[iq]:"ENVMAP_BLENDING_MIX",[rq]:"ENVMAP_BLENDING_ADD"};function xAe(t){return t.envMap===!1?"ENVMAP_BLENDING_NONE":bAe[t.combine]||"ENVMAP_BLENDING_NONE"}function SAe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}function EAe(t,e,n,i){const r=t.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const u=mAe(n),c=vAe(n),d=_Ae(n),p=xAe(n),g=SAe(n),y=oAe(n),b=sAe(a),T=r.createProgram();let S,A,R=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(q0).join(`
`),S.length>0&&(S+=`
`),A=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(q0).join(`
`),A.length>0&&(A+=`
`)):(S=[aB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(q0).join(`
`),A=[aB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ol?"#define TONE_MAPPING":"",n.toneMapping!==ol?mn.tonemapping_pars_fragment:"",n.toneMapping!==ol?rAe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",mn.colorspace_pars_fragment,nAe("linearToOutputTexel",n.outputColorSpace),aAe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(q0).join(`
`)),o=dI(o),o=nB(o,n),o=iB(o,n),s=dI(s),s=nB(s,n),s=iB(s,n),o=rB(o),s=rB(s),n.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,A=["#define varying in",n.glslVersion===nI?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===nI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const I=R+S+o,N=R+A+s,D=Q4(r,r.VERTEX_SHADER,I),U=Q4(r,r.FRAGMENT_SHADER,N);r.attachShader(T,D),r.attachShader(T,U),n.index0AttributeName!==void 0?r.bindAttribLocation(T,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T);function k(j){if(t.debug.checkShaderErrors){const W=r.getProgramInfoLog(T)||"",X=r.getShaderInfoLog(D)||"",Q=r.getShaderInfoLog(U)||"",ae=W.trim(),$=X.trim(),ie=Q.trim();let me=!0,pe=!0;if(r.getProgramParameter(T,r.LINK_STATUS)===!1)if(me=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,T,D,U);else{const de=tB(r,D,"vertex"),H=tB(r,U,"fragment");Ht("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+ae+`
`+de+`
`+H)}else ae!==""?Mt("WebGLProgram: Program Info Log:",ae):($===""||ie==="")&&(pe=!1);pe&&(j.diagnostics={runnable:me,programLog:ae,vertexShader:{log:$,prefix:S},fragmentShader:{log:ie,prefix:A}})}r.deleteShader(D),r.deleteShader(U),z=new CS(r,T),L=lAe(r,T)}let z;this.getUniforms=function(){return z===void 0&&k(this),z};let L;this.getAttributes=function(){return L===void 0&&k(this),L};let F=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=r.getProgramParameter(T,ZTe)),F},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=QTe++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=D,this.fragmentShader=U,this}let TAe=0;class AAe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new MAe(e),n.set(e,i)),i}}class MAe{constructor(e){this.id=TAe++,this.code=e,this.usedTimes=0}}function wAe(t,e,n,i,r,a,o){const s=new _g,u=new AAe,c=new Set,d=[],p=new Map,g=r.logarithmicDepthBuffer;let y=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(L){return c.add(L),L===0?"uv":`uv${L}`}function S(L,F,j,W,X){const Q=W.fog,ae=X.geometry,$=L.isMeshStandardMaterial?W.environment:null,ie=(L.isMeshStandardMaterial?n:e).get(L.envMap||$),me=ie&&ie.mapping===Gg?ie.image.height:null,pe=b[L.type];L.precision!==null&&(y=r.getMaxPrecision(L.precision),y!==L.precision&&Mt("WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const de=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,H=de!==void 0?de.length:0;let ne=0;ae.morphAttributes.position!==void 0&&(ne=1),ae.morphAttributes.normal!==void 0&&(ne=2),ae.morphAttributes.color!==void 0&&(ne=3);let le,ge,_e,re;if(pe){const Lt=Fl[pe];le=Lt.vertexShader,ge=Lt.fragmentShader}else le=L.vertexShader,ge=L.fragmentShader,u.update(L),_e=u.getVertexShaderID(L),re=u.getFragmentShaderID(L);const oe=t.getRenderTarget(),Ee=t.state.buffers.depth.getReversed(),ce=X.isInstancedMesh===!0,Ce=X.isBatchedMesh===!0,Ue=!!L.map,ve=!!L.matcap,ft=!!ie,Se=!!L.aoMap,Oe=!!L.lightMap,Me=!!L.bumpMap,Je=!!L.normalMap,Z=!!L.displacementMap,it=!!L.emissiveMap,je=!!L.metalnessMap,Re=!!L.roughnessMap,He=L.anisotropy>0,Y=L.clearcoat>0,q=L.dispersion>0,fe=L.iridescence>0,Le=L.sheen>0,Ie=L.transmission>0,Te=He&&!!L.anisotropyMap,ot=Y&&!!L.clearcoatMap,rt=Y&&!!L.clearcoatNormalMap,mt=Y&&!!L.clearcoatRoughnessMap,xt=fe&&!!L.iridescenceMap,We=fe&&!!L.iridescenceThicknessMap,Ke=Le&&!!L.sheenColorMap,et=Le&&!!L.sheenRoughnessMap,ue=!!L.specularMap,we=!!L.specularColorMap,ht=!!L.specularIntensityMap,he=Ie&&!!L.transmissionMap,Ye=Ie&&!!L.thicknessMap,tt=!!L.gradientMap,vt=!!L.alphaMap,nt=L.alphaTest>0,Be=!!L.alphaHash,lt=!!L.extensions;let Et=ol;L.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(Et=t.toneMapping);const St={shaderID:pe,shaderType:L.type,shaderName:L.name,vertexShader:le,fragmentShader:ge,defines:L.defines,customVertexShaderID:_e,customFragmentShaderID:re,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,batching:Ce,batchingColor:Ce&&X._colorsTexture!==null,instancing:ce,instancingColor:ce&&X.instanceColor!==null,instancingMorph:ce&&X.morphTexture!==null,outputColorSpace:oe===null?t.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:Sd,alphaToCoverage:!!L.alphaToCoverage,map:Ue,matcap:ve,envMap:ft,envMapMode:ft&&ie.mapping,envMapCubeUVHeight:me,aoMap:Se,lightMap:Oe,bumpMap:Me,normalMap:Je,displacementMap:Z,emissiveMap:it,normalMapObjectSpace:Je&&L.normalMapType===fq,normalMapTangentSpace:Je&&L.normalMapType===Nd,metalnessMap:je,roughnessMap:Re,anisotropy:He,anisotropyMap:Te,clearcoat:Y,clearcoatMap:ot,clearcoatNormalMap:rt,clearcoatRoughnessMap:mt,dispersion:q,iridescence:fe,iridescenceMap:xt,iridescenceThicknessMap:We,sheen:Le,sheenColorMap:Ke,sheenRoughnessMap:et,specularMap:ue,specularColorMap:we,specularIntensityMap:ht,transmission:Ie,transmissionMap:he,thicknessMap:Ye,gradientMap:tt,opaque:L.transparent===!1&&L.blending===$h&&L.alphaToCoverage===!1,alphaMap:vt,alphaTest:nt,alphaHash:Be,combine:L.combine,mapUv:Ue&&T(L.map.channel),aoMapUv:Se&&T(L.aoMap.channel),lightMapUv:Oe&&T(L.lightMap.channel),bumpMapUv:Me&&T(L.bumpMap.channel),normalMapUv:Je&&T(L.normalMap.channel),displacementMapUv:Z&&T(L.displacementMap.channel),emissiveMapUv:it&&T(L.emissiveMap.channel),metalnessMapUv:je&&T(L.metalnessMap.channel),roughnessMapUv:Re&&T(L.roughnessMap.channel),anisotropyMapUv:Te&&T(L.anisotropyMap.channel),clearcoatMapUv:ot&&T(L.clearcoatMap.channel),clearcoatNormalMapUv:rt&&T(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:mt&&T(L.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&T(L.iridescenceMap.channel),iridescenceThicknessMapUv:We&&T(L.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&T(L.sheenColorMap.channel),sheenRoughnessMapUv:et&&T(L.sheenRoughnessMap.channel),specularMapUv:ue&&T(L.specularMap.channel),specularColorMapUv:we&&T(L.specularColorMap.channel),specularIntensityMapUv:ht&&T(L.specularIntensityMap.channel),transmissionMapUv:he&&T(L.transmissionMap.channel),thicknessMapUv:Ye&&T(L.thicknessMap.channel),alphaMapUv:vt&&T(L.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(Je||He),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!ae.attributes.uv&&(Ue||vt),fog:!!Q,useFog:L.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:Ee,skinning:X.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:ne,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:t.shadowMap.enabled&&j.length>0,shadowMapType:t.shadowMap.type,toneMapping:Et,decodeVideoTexture:Ue&&L.map.isVideoTexture===!0&&Fn.getTransfer(L.map.colorSpace)===ni,decodeVideoTextureEmissive:it&&L.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(L.emissiveMap.colorSpace)===ni,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Vl,flipSided:L.side===yo,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:lt&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&L.extensions.multiDraw===!0||Ce)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return St.vertexUv1s=c.has(1),St.vertexUv2s=c.has(2),St.vertexUv3s=c.has(3),c.clear(),St}function A(L){const F=[];if(L.shaderID?F.push(L.shaderID):(F.push(L.customVertexShaderID),F.push(L.customFragmentShaderID)),L.defines!==void 0)for(const j in L.defines)F.push(j),F.push(L.defines[j]);return L.isRawShaderMaterial===!1&&(R(F,L),I(F,L),F.push(t.outputColorSpace)),F.push(L.customProgramCacheKey),F.join()}function R(L,F){L.push(F.precision),L.push(F.outputColorSpace),L.push(F.envMapMode),L.push(F.envMapCubeUVHeight),L.push(F.mapUv),L.push(F.alphaMapUv),L.push(F.lightMapUv),L.push(F.aoMapUv),L.push(F.bumpMapUv),L.push(F.normalMapUv),L.push(F.displacementMapUv),L.push(F.emissiveMapUv),L.push(F.metalnessMapUv),L.push(F.roughnessMapUv),L.push(F.anisotropyMapUv),L.push(F.clearcoatMapUv),L.push(F.clearcoatNormalMapUv),L.push(F.clearcoatRoughnessMapUv),L.push(F.iridescenceMapUv),L.push(F.iridescenceThicknessMapUv),L.push(F.sheenColorMapUv),L.push(F.sheenRoughnessMapUv),L.push(F.specularMapUv),L.push(F.specularColorMapUv),L.push(F.specularIntensityMapUv),L.push(F.transmissionMapUv),L.push(F.thicknessMapUv),L.push(F.combine),L.push(F.fogExp2),L.push(F.sizeAttenuation),L.push(F.morphTargetsCount),L.push(F.morphAttributeCount),L.push(F.numDirLights),L.push(F.numPointLights),L.push(F.numSpotLights),L.push(F.numSpotLightMaps),L.push(F.numHemiLights),L.push(F.numRectAreaLights),L.push(F.numDirLightShadows),L.push(F.numPointLightShadows),L.push(F.numSpotLightShadows),L.push(F.numSpotLightShadowsWithMaps),L.push(F.numLightProbes),L.push(F.shadowMapType),L.push(F.toneMapping),L.push(F.numClippingPlanes),L.push(F.numClipIntersection),L.push(F.depthPacking)}function I(L,F){s.disableAll(),F.instancing&&s.enable(0),F.instancingColor&&s.enable(1),F.instancingMorph&&s.enable(2),F.matcap&&s.enable(3),F.envMap&&s.enable(4),F.normalMapObjectSpace&&s.enable(5),F.normalMapTangentSpace&&s.enable(6),F.clearcoat&&s.enable(7),F.iridescence&&s.enable(8),F.alphaTest&&s.enable(9),F.vertexColors&&s.enable(10),F.vertexAlphas&&s.enable(11),F.vertexUv1s&&s.enable(12),F.vertexUv2s&&s.enable(13),F.vertexUv3s&&s.enable(14),F.vertexTangents&&s.enable(15),F.anisotropy&&s.enable(16),F.alphaHash&&s.enable(17),F.batching&&s.enable(18),F.dispersion&&s.enable(19),F.batchingColor&&s.enable(20),F.gradientMap&&s.enable(21),L.push(s.mask),s.disableAll(),F.fog&&s.enable(0),F.useFog&&s.enable(1),F.flatShading&&s.enable(2),F.logarithmicDepthBuffer&&s.enable(3),F.reversedDepthBuffer&&s.enable(4),F.skinning&&s.enable(5),F.morphTargets&&s.enable(6),F.morphNormals&&s.enable(7),F.morphColors&&s.enable(8),F.premultipliedAlpha&&s.enable(9),F.shadowMapEnabled&&s.enable(10),F.doubleSided&&s.enable(11),F.flipSided&&s.enable(12),F.useDepthPacking&&s.enable(13),F.dithering&&s.enable(14),F.transmission&&s.enable(15),F.sheen&&s.enable(16),F.opaque&&s.enable(17),F.pointsUvs&&s.enable(18),F.decodeVideoTexture&&s.enable(19),F.decodeVideoTextureEmissive&&s.enable(20),F.alphaToCoverage&&s.enable(21),L.push(s.mask)}function N(L){const F=b[L.type];let j;if(F){const W=Fl[F];j=VN.clone(W.uniforms)}else j=L.uniforms;return j}function D(L,F){let j=p.get(F);return j!==void 0?++j.usedTimes:(j=new EAe(t,F,L,a),d.push(j),p.set(F,j)),j}function U(L){if(--L.usedTimes===0){const F=d.indexOf(L);d[F]=d[d.length-1],d.pop(),p.delete(L.cacheKey),L.destroy()}}function k(L){u.remove(L)}function z(){u.dispose()}return{getParameters:S,getProgramCacheKey:A,getUniforms:N,acquireProgram:D,releaseProgram:U,releaseShaderCache:k,programs:d,dispose:z}}function CAe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let s=t.get(o);return s===void 0&&(s={},t.set(o,s)),s}function i(o){t.delete(o)}function r(o,s,u){t.get(o)[s]=u}function a(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:a}}function RAe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oB(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function sB(){const t=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function o(p,g,y,b,T,S){let A=t[e];return A===void 0?(A={id:p.id,object:p,geometry:g,material:y,groupOrder:b,renderOrder:p.renderOrder,z:T,group:S},t[e]=A):(A.id=p.id,A.object=p,A.geometry=g,A.material=y,A.groupOrder=b,A.renderOrder=p.renderOrder,A.z=T,A.group=S),e++,A}function s(p,g,y,b,T,S){const A=o(p,g,y,b,T,S);y.transmission>0?i.push(A):y.transparent===!0?r.push(A):n.push(A)}function u(p,g,y,b,T,S){const A=o(p,g,y,b,T,S);y.transmission>0?i.unshift(A):y.transparent===!0?r.unshift(A):n.unshift(A)}function c(p,g){n.length>1&&n.sort(p||RAe),i.length>1&&i.sort(g||oB),r.length>1&&r.sort(g||oB)}function d(){for(let p=e,g=t.length;p<g;p++){const y=t[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:s,unshift:u,finish:d,sort:c}}function IAe(){let t=new WeakMap;function e(i,r){const a=t.get(i);let o;return a===void 0?(o=new sB,t.set(i,[o])):r>=a.length?(o=new sB,a.push(o)):o=a[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function PAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new se,color:new Ct};break;case"SpotLight":n={position:new se,direction:new se,color:new Ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new se,color:new Ct,distance:0,decay:0};break;case"HemisphereLight":n={direction:new se,skyColor:new Ct,groundColor:new Ct};break;case"RectAreaLight":n={color:new Ct,position:new se,halfWidth:new se,halfHeight:new se};break}return t[e.id]=n,n}}}function NAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let DAe=0;function OAe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function LAe(t){const e=new PAe,n=NAe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new se);const r=new se,a=new en,o=new en;function s(c){let d=0,p=0,g=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let y=0,b=0,T=0,S=0,A=0,R=0,I=0,N=0,D=0,U=0,k=0;c.sort(OAe);for(let L=0,F=c.length;L<F;L++){const j=c[L],W=j.color,X=j.intensity,Q=j.distance;let ae=null;if(j.shadow&&j.shadow.map&&(j.shadow.map.texture.format===op?ae=j.shadow.map.texture:ae=j.shadow.map.depthTexture||j.shadow.map.texture),j.isAmbientLight)d+=W.r*X,p+=W.g*X,g+=W.b*X;else if(j.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(j.sh.coefficients[$],X);k++}else if(j.isDirectionalLight){const $=e.get(j);if($.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const ie=j.shadow,me=n.get(j);me.shadowIntensity=ie.intensity,me.shadowBias=ie.bias,me.shadowNormalBias=ie.normalBias,me.shadowRadius=ie.radius,me.shadowMapSize=ie.mapSize,i.directionalShadow[y]=me,i.directionalShadowMap[y]=ae,i.directionalShadowMatrix[y]=j.shadow.matrix,R++}i.directional[y]=$,y++}else if(j.isSpotLight){const $=e.get(j);$.position.setFromMatrixPosition(j.matrixWorld),$.color.copy(W).multiplyScalar(X),$.distance=Q,$.coneCos=Math.cos(j.angle),$.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),$.decay=j.decay,i.spot[T]=$;const ie=j.shadow;if(j.map&&(i.spotLightMap[D]=j.map,D++,ie.updateMatrices(j),j.castShadow&&U++),i.spotLightMatrix[T]=ie.matrix,j.castShadow){const me=n.get(j);me.shadowIntensity=ie.intensity,me.shadowBias=ie.bias,me.shadowNormalBias=ie.normalBias,me.shadowRadius=ie.radius,me.shadowMapSize=ie.mapSize,i.spotShadow[T]=me,i.spotShadowMap[T]=ae,N++}T++}else if(j.isRectAreaLight){const $=e.get(j);$.color.copy(W).multiplyScalar(X),$.halfWidth.set(j.width*.5,0,0),$.halfHeight.set(0,j.height*.5,0),i.rectArea[S]=$,S++}else if(j.isPointLight){const $=e.get(j);if($.color.copy(j.color).multiplyScalar(j.intensity),$.distance=j.distance,$.decay=j.decay,j.castShadow){const ie=j.shadow,me=n.get(j);me.shadowIntensity=ie.intensity,me.shadowBias=ie.bias,me.shadowNormalBias=ie.normalBias,me.shadowRadius=ie.radius,me.shadowMapSize=ie.mapSize,me.shadowCameraNear=ie.camera.near,me.shadowCameraFar=ie.camera.far,i.pointShadow[b]=me,i.pointShadowMap[b]=ae,i.pointShadowMatrix[b]=j.shadow.matrix,I++}i.point[b]=$,b++}else if(j.isHemisphereLight){const $=e.get(j);$.skyColor.copy(j.color).multiplyScalar(X),$.groundColor.copy(j.groundColor).multiplyScalar(X),i.hemi[A]=$,A++}}S>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=wt.LTC_FLOAT_1,i.rectAreaLTC2=wt.LTC_FLOAT_2):(i.rectAreaLTC1=wt.LTC_HALF_1,i.rectAreaLTC2=wt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=g;const z=i.hash;(z.directionalLength!==y||z.pointLength!==b||z.spotLength!==T||z.rectAreaLength!==S||z.hemiLength!==A||z.numDirectionalShadows!==R||z.numPointShadows!==I||z.numSpotShadows!==N||z.numSpotMaps!==D||z.numLightProbes!==k)&&(i.directional.length=y,i.spot.length=T,i.rectArea.length=S,i.point.length=b,i.hemi.length=A,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=I,i.spotLightMatrix.length=N+D-U,i.spotLightMap.length=D,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=k,z.directionalLength=y,z.pointLength=b,z.spotLength=T,z.rectAreaLength=S,z.hemiLength=A,z.numDirectionalShadows=R,z.numPointShadows=I,z.numSpotShadows=N,z.numSpotMaps=D,z.numLightProbes=k,i.version=DAe++)}function u(c,d){let p=0,g=0,y=0,b=0,T=0;const S=d.matrixWorldInverse;for(let A=0,R=c.length;A<R;A++){const I=c[A];if(I.isDirectionalLight){const N=i.directional[p];N.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(S),p++}else if(I.isSpotLight){const N=i.spot[y];N.position.setFromMatrixPosition(I.matrixWorld),N.position.applyMatrix4(S),N.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(S),y++}else if(I.isRectAreaLight){const N=i.rectArea[b];N.position.setFromMatrixPosition(I.matrixWorld),N.position.applyMatrix4(S),o.identity(),a.copy(I.matrixWorld),a.premultiply(S),o.extractRotation(a),N.halfWidth.set(I.width*.5,0,0),N.halfHeight.set(0,I.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),b++}else if(I.isPointLight){const N=i.point[g];N.position.setFromMatrixPosition(I.matrixWorld),N.position.applyMatrix4(S),g++}else if(I.isHemisphereLight){const N=i.hemi[T];N.direction.setFromMatrixPosition(I.matrixWorld),N.direction.transformDirection(S),T++}}}return{setup:s,setupView:u,state:i}}function lB(t){const e=new LAe(t),n=[],i=[];function r(d){c.camera=d,n.length=0,i.length=0}function a(d){n.push(d)}function o(d){i.push(d)}function s(){e.setup(n)}function u(d){e.setupView(n,d)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:s,setupLightsView:u,pushLight:a,pushShadow:o}}function UAe(t){let e=new WeakMap;function n(r,a=0){const o=e.get(r);let s;return o===void 0?(s=new lB(t),e.set(r,[s])):a>=o.length?(s=new lB(t),o.push(s)):s=o[a],s}function i(){e=new WeakMap}return{get:n,dispose:i}}const FAe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kAe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,BAe=[new se(1,0,0),new se(-1,0,0),new se(0,1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1)],zAe=[new se(0,-1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1),new se(0,-1,0),new se(0,-1,0)],uB=new en,L0=new se,AC=new se;function GAe(t,e,n){let i=new Vg;const r=new st,a=new st,o=new ri,s=new iA,u=new rA,c={},d=n.maxTextureSize,p={[af]:yo,[yo]:af,[Vl]:Vl},g=new Ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new st},radius:{value:4}},vertexShader:FAe,fragmentShader:kAe}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const b=new cn;b.setAttribute("position",new di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new er(b,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=og;let A=this.type;this.render=function(U,k,z){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||U.length===0)return;U.type===X0&&(Mt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),U.type=og);const L=t.getRenderTarget(),F=t.getActiveCubeFace(),j=t.getActiveMipmapLevel(),W=t.state;W.setBlending(Vu),W.buffers.depth.getReversed()===!0?W.buffers.color.setClear(0,0,0,0):W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const X=A!==this.type;X&&k.traverse(function(Q){Q.material&&(Array.isArray(Q.material)?Q.material.forEach(ae=>ae.needsUpdate=!0):Q.material.needsUpdate=!0)});for(let Q=0,ae=U.length;Q<ae;Q++){const $=U[Q],ie=$.shadow;if(ie===void 0){Mt("WebGLShadowMap:",$,"has no shadow.");continue}if(ie.autoUpdate===!1&&ie.needsUpdate===!1)continue;r.copy(ie.mapSize);const me=ie.getFrameExtents();if(r.multiply(me),a.copy(ie.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(a.x=Math.floor(d/me.x),r.x=a.x*me.x,ie.mapSize.x=a.x),r.y>d&&(a.y=Math.floor(d/me.y),r.y=a.y*me.y,ie.mapSize.y=a.y)),ie.map===null||X===!0){if(ie.map!==null&&(ie.map.depthTexture!==null&&(ie.map.depthTexture.dispose(),ie.map.depthTexture=null),ie.map.dispose()),this.type===Vh){if($.isPointLight){Mt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}ie.map=new bs(r.x,r.y,{format:op,type:Wu,minFilter:mi,magFilter:mi,generateMipmaps:!1}),ie.map.texture.name=$.name+".shadowMap",ie.map.depthTexture=new xg(r.x,r.y,vo),ie.map.depthTexture.name=$.name+".shadowMapDepth",ie.map.depthTexture.format=ju,ie.map.depthTexture.compareFunction=null,ie.map.depthTexture.minFilter=br,ie.map.depthTexture.magFilter=br}else{$.isPointLight?(ie.map=new HN(r.x),ie.map.depthTexture=new Lq(r.x,fl)):(ie.map=new bs(r.x,r.y),ie.map.depthTexture=new xg(r.x,r.y,fl)),ie.map.depthTexture.name=$.name+".shadowMap",ie.map.depthTexture.format=ju;const de=t.state.buffers.depth.getReversed();this.type===og?(ie.map.depthTexture.compareFunction=de?OT:DT,ie.map.depthTexture.minFilter=mi,ie.map.depthTexture.magFilter=mi):(ie.map.depthTexture.compareFunction=null,ie.map.depthTexture.minFilter=br,ie.map.depthTexture.magFilter=br)}ie.camera.updateProjectionMatrix()}const pe=ie.map.isWebGLCubeRenderTarget?6:1;for(let de=0;de<pe;de++){if(ie.map.isWebGLCubeRenderTarget)t.setRenderTarget(ie.map,de),t.clear();else{de===0&&(t.setRenderTarget(ie.map),t.clear());const H=ie.getViewport(de);o.set(a.x*H.x,a.y*H.y,a.x*H.z,a.y*H.w),W.viewport(o)}if($.isPointLight){const H=ie.camera,ne=ie.matrix,le=$.distance||H.far;le!==H.far&&(H.far=le,H.updateProjectionMatrix()),L0.setFromMatrixPosition($.matrixWorld),H.position.copy(L0),AC.copy(H.position),AC.add(BAe[de]),H.up.copy(zAe[de]),H.lookAt(AC),H.updateMatrixWorld(),ne.makeTranslation(-L0.x,-L0.y,-L0.z),uB.multiplyMatrices(H.projectionMatrix,H.matrixWorldInverse),ie._frustum.setFromProjectionMatrix(uB,H.coordinateSystem,H.reversedDepth)}else ie.updateMatrices($);i=ie.getFrustum(),N(k,z,ie.camera,$,this.type)}ie.isPointLightShadow!==!0&&this.type===Vh&&R(ie,z),ie.needsUpdate=!1}A=this.type,S.needsUpdate=!1,t.setRenderTarget(L,F,j)};function R(U,k){const z=e.update(T);g.defines.VSM_SAMPLES!==U.blurSamples&&(g.defines.VSM_SAMPLES=U.blurSamples,y.defines.VSM_SAMPLES=U.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new bs(r.x,r.y,{format:op,type:Wu})),g.uniforms.shadow_pass.value=U.map.depthTexture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,t.setRenderTarget(U.mapPass),t.clear(),t.renderBufferDirect(k,null,z,g,T,null),y.uniforms.shadow_pass.value=U.mapPass.texture,y.uniforms.resolution.value=U.mapSize,y.uniforms.radius.value=U.radius,t.setRenderTarget(U.map),t.clear(),t.renderBufferDirect(k,null,z,y,T,null)}function I(U,k,z,L){let F=null;const j=z.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(j!==void 0)F=j;else if(F=z.isPointLight===!0?u:s,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const W=F.uuid,X=k.uuid;let Q=c[W];Q===void 0&&(Q={},c[W]=Q);let ae=Q[X];ae===void 0&&(ae=F.clone(),Q[X]=ae,k.addEventListener("dispose",D)),F=ae}if(F.visible=k.visible,F.wireframe=k.wireframe,L===Vh?F.side=k.shadowSide!==null?k.shadowSide:k.side:F.side=k.shadowSide!==null?k.shadowSide:p[k.side],F.alphaMap=k.alphaMap,F.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,F.map=k.map,F.clipShadows=k.clipShadows,F.clippingPlanes=k.clippingPlanes,F.clipIntersection=k.clipIntersection,F.displacementMap=k.displacementMap,F.displacementScale=k.displacementScale,F.displacementBias=k.displacementBias,F.wireframeLinewidth=k.wireframeLinewidth,F.linewidth=k.linewidth,z.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const W=t.properties.get(F);W.light=z}return F}function N(U,k,z,L,F){if(U.visible===!1)return;if(U.layers.test(k.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&F===Vh)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,U.matrixWorld);const X=e.update(U),Q=U.material;if(Array.isArray(Q)){const ae=X.groups;for(let $=0,ie=ae.length;$<ie;$++){const me=ae[$],pe=Q[me.materialIndex];if(pe&&pe.visible){const de=I(U,pe,L,F);U.onBeforeShadow(t,U,k,z,X,de,me),t.renderBufferDirect(z,null,X,de,U,me),U.onAfterShadow(t,U,k,z,X,de,me)}}}else if(Q.visible){const ae=I(U,Q,L,F);U.onBeforeShadow(t,U,k,z,X,ae,null),t.renderBufferDirect(z,null,X,ae,U,null),U.onAfterShadow(t,U,k,z,X,ae,null)}}const W=U.children;for(let X=0,Q=W.length;X<Q;X++)N(W[X],k,z,L,F)}function D(U){U.target.removeEventListener("dispose",D);for(const z in c){const L=c[z],F=U.target.uuid;F in L&&(L[F].dispose(),delete L[F])}}}const VAe={[P1]:N1,[D1]:U1,[O1]:F1,[ap]:L1,[N1]:P1,[U1]:D1,[F1]:O1,[L1]:ap};function HAe(t,e){function n(){let he=!1;const Ye=new ri;let tt=null;const vt=new ri(0,0,0,0);return{setMask:function(nt){tt!==nt&&!he&&(t.colorMask(nt,nt,nt,nt),tt=nt)},setLocked:function(nt){he=nt},setClear:function(nt,Be,lt,Et,St){St===!0&&(nt*=Et,Be*=Et,lt*=Et),Ye.set(nt,Be,lt,Et),vt.equals(Ye)===!1&&(t.clearColor(nt,Be,lt,Et),vt.copy(Ye))},reset:function(){he=!1,tt=null,vt.set(-1,0,0,0)}}}function i(){let he=!1,Ye=!1,tt=null,vt=null,nt=null;return{setReversed:function(Be){if(Ye!==Be){const lt=e.get("EXT_clip_control");Be?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Ye=Be;const Et=nt;nt=null,this.setClear(Et)}},getReversed:function(){return Ye},setTest:function(Be){Be?oe(t.DEPTH_TEST):Ee(t.DEPTH_TEST)},setMask:function(Be){tt!==Be&&!he&&(t.depthMask(Be),tt=Be)},setFunc:function(Be){if(Ye&&(Be=VAe[Be]),vt!==Be){switch(Be){case P1:t.depthFunc(t.NEVER);break;case N1:t.depthFunc(t.ALWAYS);break;case D1:t.depthFunc(t.LESS);break;case ap:t.depthFunc(t.LEQUAL);break;case O1:t.depthFunc(t.EQUAL);break;case L1:t.depthFunc(t.GEQUAL);break;case U1:t.depthFunc(t.GREATER);break;case F1:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}vt=Be}},setLocked:function(Be){he=Be},setClear:function(Be){nt!==Be&&(Ye&&(Be=1-Be),t.clearDepth(Be),nt=Be)},reset:function(){he=!1,tt=null,vt=null,nt=null,Ye=!1}}}function r(){let he=!1,Ye=null,tt=null,vt=null,nt=null,Be=null,lt=null,Et=null,St=null;return{setTest:function(Lt){he||(Lt?oe(t.STENCIL_TEST):Ee(t.STENCIL_TEST))},setMask:function(Lt){Ye!==Lt&&!he&&(t.stencilMask(Lt),Ye=Lt)},setFunc:function(Lt,vn,wn){(tt!==Lt||vt!==vn||nt!==wn)&&(t.stencilFunc(Lt,vn,wn),tt=Lt,vt=vn,nt=wn)},setOp:function(Lt,vn,wn){(Be!==Lt||lt!==vn||Et!==wn)&&(t.stencilOp(Lt,vn,wn),Be=Lt,lt=vn,Et=wn)},setLocked:function(Lt){he=Lt},setClear:function(Lt){St!==Lt&&(t.clearStencil(Lt),St=Lt)},reset:function(){he=!1,Ye=null,tt=null,vt=null,nt=null,Be=null,lt=null,Et=null,St=null}}}const a=new n,o=new i,s=new r,u=new WeakMap,c=new WeakMap;let d={},p={},g=new WeakMap,y=[],b=null,T=!1,S=null,A=null,R=null,I=null,N=null,D=null,U=null,k=new Ct(0,0,0),z=0,L=!1,F=null,j=null,W=null,X=null,Q=null;const ae=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,ie=0;const me=t.getParameter(t.VERSION);me.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(me)[1]),$=ie>=1):me.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),$=ie>=2);let pe=null,de={};const H=t.getParameter(t.SCISSOR_BOX),ne=t.getParameter(t.VIEWPORT),le=new ri().fromArray(H),ge=new ri().fromArray(ne);function _e(he,Ye,tt,vt){const nt=new Uint8Array(4),Be=t.createTexture();t.bindTexture(he,Be),t.texParameteri(he,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(he,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let lt=0;lt<tt;lt++)he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?t.texImage3D(Ye,0,t.RGBA,1,1,vt,0,t.RGBA,t.UNSIGNED_BYTE,nt):t.texImage2D(Ye+lt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,nt);return Be}const re={};re[t.TEXTURE_2D]=_e(t.TEXTURE_2D,t.TEXTURE_2D,1),re[t.TEXTURE_CUBE_MAP]=_e(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),re[t.TEXTURE_2D_ARRAY]=_e(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),re[t.TEXTURE_3D]=_e(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),oe(t.DEPTH_TEST),o.setFunc(ap),Me(!1),Je(JR),oe(t.CULL_FACE),Se(Vu);function oe(he){d[he]!==!0&&(t.enable(he),d[he]=!0)}function Ee(he){d[he]!==!1&&(t.disable(he),d[he]=!1)}function ce(he,Ye){return p[he]!==Ye?(t.bindFramebuffer(he,Ye),p[he]=Ye,he===t.DRAW_FRAMEBUFFER&&(p[t.FRAMEBUFFER]=Ye),he===t.FRAMEBUFFER&&(p[t.DRAW_FRAMEBUFFER]=Ye),!0):!1}function Ce(he,Ye){let tt=y,vt=!1;if(he){tt=g.get(Ye),tt===void 0&&(tt=[],g.set(Ye,tt));const nt=he.textures;if(tt.length!==nt.length||tt[0]!==t.COLOR_ATTACHMENT0){for(let Be=0,lt=nt.length;Be<lt;Be++)tt[Be]=t.COLOR_ATTACHMENT0+Be;tt.length=nt.length,vt=!0}}else tt[0]!==t.BACK&&(tt[0]=t.BACK,vt=!0);vt&&t.drawBuffers(tt)}function Ue(he){return b!==he?(t.useProgram(he),b=he,!0):!1}const ve={[cd]:t.FUNC_ADD,[z9]:t.FUNC_SUBTRACT,[G9]:t.FUNC_REVERSE_SUBTRACT};ve[V9]=t.MIN,ve[H9]=t.MAX;const ft={[q9]:t.ZERO,[W9]:t.ONE,[j9]:t.SRC_COLOR,[R1]:t.SRC_ALPHA,[Z9]:t.SRC_ALPHA_SATURATE,[K9]:t.DST_COLOR,[Y9]:t.DST_ALPHA,[X9]:t.ONE_MINUS_SRC_COLOR,[I1]:t.ONE_MINUS_SRC_ALPHA,[J9]:t.ONE_MINUS_DST_COLOR,[$9]:t.ONE_MINUS_DST_ALPHA,[Q9]:t.CONSTANT_COLOR,[eq]:t.ONE_MINUS_CONSTANT_COLOR,[tq]:t.CONSTANT_ALPHA,[nq]:t.ONE_MINUS_CONSTANT_ALPHA};function Se(he,Ye,tt,vt,nt,Be,lt,Et,St,Lt){if(he===Vu){T===!0&&(Ee(t.BLEND),T=!1);return}if(T===!1&&(oe(t.BLEND),T=!0),he!==B9){if(he!==S||Lt!==L){if((A!==cd||N!==cd)&&(t.blendEquation(t.FUNC_ADD),A=cd,N=cd),Lt)switch(he){case $h:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case C1:t.blendFunc(t.ONE,t.ONE);break;case ZR:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case QR:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:Ht("WebGLState: Invalid blending: ",he);break}else switch(he){case $h:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case C1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case ZR:Ht("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case QR:Ht("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ht("WebGLState: Invalid blending: ",he);break}R=null,I=null,D=null,U=null,k.set(0,0,0),z=0,S=he,L=Lt}return}nt=nt||Ye,Be=Be||tt,lt=lt||vt,(Ye!==A||nt!==N)&&(t.blendEquationSeparate(ve[Ye],ve[nt]),A=Ye,N=nt),(tt!==R||vt!==I||Be!==D||lt!==U)&&(t.blendFuncSeparate(ft[tt],ft[vt],ft[Be],ft[lt]),R=tt,I=vt,D=Be,U=lt),(Et.equals(k)===!1||St!==z)&&(t.blendColor(Et.r,Et.g,Et.b,St),k.copy(Et),z=St),S=he,L=!1}function Oe(he,Ye){he.side===Vl?Ee(t.CULL_FACE):oe(t.CULL_FACE);let tt=he.side===yo;Ye&&(tt=!tt),Me(tt),he.blending===$h&&he.transparent===!1?Se(Vu):Se(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),o.setFunc(he.depthFunc),o.setTest(he.depthTest),o.setMask(he.depthWrite),a.setMask(he.colorWrite);const vt=he.stencilWrite;s.setTest(vt),vt&&(s.setMask(he.stencilWriteMask),s.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),s.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),it(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?oe(t.SAMPLE_ALPHA_TO_COVERAGE):Ee(t.SAMPLE_ALPHA_TO_COVERAGE)}function Me(he){F!==he&&(he?t.frontFace(t.CW):t.frontFace(t.CCW),F=he)}function Je(he){he!==U9?(oe(t.CULL_FACE),he!==j&&(he===JR?t.cullFace(t.BACK):he===F9?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ee(t.CULL_FACE),j=he}function Z(he){he!==W&&($&&t.lineWidth(he),W=he)}function it(he,Ye,tt){he?(oe(t.POLYGON_OFFSET_FILL),(X!==Ye||Q!==tt)&&(t.polygonOffset(Ye,tt),X=Ye,Q=tt)):Ee(t.POLYGON_OFFSET_FILL)}function je(he){he?oe(t.SCISSOR_TEST):Ee(t.SCISSOR_TEST)}function Re(he){he===void 0&&(he=t.TEXTURE0+ae-1),pe!==he&&(t.activeTexture(he),pe=he)}function He(he,Ye,tt){tt===void 0&&(pe===null?tt=t.TEXTURE0+ae-1:tt=pe);let vt=de[tt];vt===void 0&&(vt={type:void 0,texture:void 0},de[tt]=vt),(vt.type!==he||vt.texture!==Ye)&&(pe!==tt&&(t.activeTexture(tt),pe=tt),t.bindTexture(he,Ye||re[he]),vt.type=he,vt.texture=Ye)}function Y(){const he=de[pe];he!==void 0&&he.type!==void 0&&(t.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function q(){try{t.compressedTexImage2D(...arguments)}catch(he){Ht("WebGLState:",he)}}function fe(){try{t.compressedTexImage3D(...arguments)}catch(he){Ht("WebGLState:",he)}}function Le(){try{t.texSubImage2D(...arguments)}catch(he){Ht("WebGLState:",he)}}function Ie(){try{t.texSubImage3D(...arguments)}catch(he){Ht("WebGLState:",he)}}function Te(){try{t.compressedTexSubImage2D(...arguments)}catch(he){Ht("WebGLState:",he)}}function ot(){try{t.compressedTexSubImage3D(...arguments)}catch(he){Ht("WebGLState:",he)}}function rt(){try{t.texStorage2D(...arguments)}catch(he){Ht("WebGLState:",he)}}function mt(){try{t.texStorage3D(...arguments)}catch(he){Ht("WebGLState:",he)}}function xt(){try{t.texImage2D(...arguments)}catch(he){Ht("WebGLState:",he)}}function We(){try{t.texImage3D(...arguments)}catch(he){Ht("WebGLState:",he)}}function Ke(he){le.equals(he)===!1&&(t.scissor(he.x,he.y,he.z,he.w),le.copy(he))}function et(he){ge.equals(he)===!1&&(t.viewport(he.x,he.y,he.z,he.w),ge.copy(he))}function ue(he,Ye){let tt=c.get(Ye);tt===void 0&&(tt=new WeakMap,c.set(Ye,tt));let vt=tt.get(he);vt===void 0&&(vt=t.getUniformBlockIndex(Ye,he.name),tt.set(he,vt))}function we(he,Ye){const vt=c.get(Ye).get(he);u.get(Ye)!==vt&&(t.uniformBlockBinding(Ye,vt,he.__bindingPointIndex),u.set(Ye,vt))}function ht(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},pe=null,de={},p={},g=new WeakMap,y=[],b=null,T=!1,S=null,A=null,R=null,I=null,N=null,D=null,U=null,k=new Ct(0,0,0),z=0,L=!1,F=null,j=null,W=null,X=null,Q=null,le.set(0,0,t.canvas.width,t.canvas.height),ge.set(0,0,t.canvas.width,t.canvas.height),a.reset(),o.reset(),s.reset()}return{buffers:{color:a,depth:o,stencil:s},enable:oe,disable:Ee,bindFramebuffer:ce,drawBuffers:Ce,useProgram:Ue,setBlending:Se,setMaterial:Oe,setFlipSided:Me,setCullFace:Je,setLineWidth:Z,setPolygonOffset:it,setScissorTest:je,activeTexture:Re,bindTexture:He,unbindTexture:Y,compressedTexImage2D:q,compressedTexImage3D:fe,texImage2D:xt,texImage3D:We,updateUBOMapping:ue,uniformBlockBinding:we,texStorage2D:rt,texStorage3D:mt,texSubImage2D:Le,texSubImage3D:Ie,compressedTexSubImage2D:Te,compressedTexSubImage3D:ot,scissor:Ke,viewport:et,reset:ht}}function qAe(t,e,n,i,r,a,o){const s=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new st,d=new WeakMap;let p;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Y,q){return y?new OffscreenCanvas(Y,q):Ny("canvas")}function T(Y,q,fe){let Le=1;const Ie=He(Y);if((Ie.width>fe||Ie.height>fe)&&(Le=fe/Math.max(Ie.width,Ie.height)),Le<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const Te=Math.floor(Le*Ie.width),ot=Math.floor(Le*Ie.height);p===void 0&&(p=b(Te,ot));const rt=q?b(Te,ot):p;return rt.width=Te,rt.height=ot,rt.getContext("2d").drawImage(Y,0,0,Te,ot),Mt("WebGLRenderer: Texture has been resized from ("+Ie.width+"x"+Ie.height+") to ("+Te+"x"+ot+")."),rt}else return"data"in Y&&Mt("WebGLRenderer: Image in DataTexture is too big ("+Ie.width+"x"+Ie.height+")."),Y;return Y}function S(Y){return Y.generateMipmaps}function A(Y){t.generateMipmap(Y)}function R(Y){return Y.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?t.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function I(Y,q,fe,Le,Ie=!1){if(Y!==null){if(t[Y]!==void 0)return t[Y];Mt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Te=q;if(q===t.RED&&(fe===t.FLOAT&&(Te=t.R32F),fe===t.HALF_FLOAT&&(Te=t.R16F),fe===t.UNSIGNED_BYTE&&(Te=t.R8)),q===t.RED_INTEGER&&(fe===t.UNSIGNED_BYTE&&(Te=t.R8UI),fe===t.UNSIGNED_SHORT&&(Te=t.R16UI),fe===t.UNSIGNED_INT&&(Te=t.R32UI),fe===t.BYTE&&(Te=t.R8I),fe===t.SHORT&&(Te=t.R16I),fe===t.INT&&(Te=t.R32I)),q===t.RG&&(fe===t.FLOAT&&(Te=t.RG32F),fe===t.HALF_FLOAT&&(Te=t.RG16F),fe===t.UNSIGNED_BYTE&&(Te=t.RG8)),q===t.RG_INTEGER&&(fe===t.UNSIGNED_BYTE&&(Te=t.RG8UI),fe===t.UNSIGNED_SHORT&&(Te=t.RG16UI),fe===t.UNSIGNED_INT&&(Te=t.RG32UI),fe===t.BYTE&&(Te=t.RG8I),fe===t.SHORT&&(Te=t.RG16I),fe===t.INT&&(Te=t.RG32I)),q===t.RGB_INTEGER&&(fe===t.UNSIGNED_BYTE&&(Te=t.RGB8UI),fe===t.UNSIGNED_SHORT&&(Te=t.RGB16UI),fe===t.UNSIGNED_INT&&(Te=t.RGB32UI),fe===t.BYTE&&(Te=t.RGB8I),fe===t.SHORT&&(Te=t.RGB16I),fe===t.INT&&(Te=t.RGB32I)),q===t.RGBA_INTEGER&&(fe===t.UNSIGNED_BYTE&&(Te=t.RGBA8UI),fe===t.UNSIGNED_SHORT&&(Te=t.RGBA16UI),fe===t.UNSIGNED_INT&&(Te=t.RGBA32UI),fe===t.BYTE&&(Te=t.RGBA8I),fe===t.SHORT&&(Te=t.RGBA16I),fe===t.INT&&(Te=t.RGBA32I)),q===t.RGB&&(fe===t.UNSIGNED_INT_5_9_9_9_REV&&(Te=t.RGB9_E5),fe===t.UNSIGNED_INT_10F_11F_11F_REV&&(Te=t.R11F_G11F_B10F)),q===t.RGBA){const ot=Ie?Iy:Fn.getTransfer(Le);fe===t.FLOAT&&(Te=t.RGBA32F),fe===t.HALF_FLOAT&&(Te=t.RGBA16F),fe===t.UNSIGNED_BYTE&&(Te=ot===ni?t.SRGB8_ALPHA8:t.RGBA8),fe===t.UNSIGNED_SHORT_4_4_4_4&&(Te=t.RGBA4),fe===t.UNSIGNED_SHORT_5_5_5_1&&(Te=t.RGB5_A1)}return(Te===t.R16F||Te===t.R32F||Te===t.RG16F||Te===t.RG32F||Te===t.RGBA16F||Te===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function N(Y,q){let fe;return Y?q===null||q===fl||q===mg?fe=t.DEPTH24_STENCIL8:q===vo?fe=t.DEPTH32F_STENCIL8:q===pg&&(fe=t.DEPTH24_STENCIL8,Mt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===fl||q===mg?fe=t.DEPTH_COMPONENT24:q===vo?fe=t.DEPTH_COMPONENT32F:q===pg&&(fe=t.DEPTH_COMPONENT16),fe}function D(Y,q){return S(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==br&&Y.minFilter!==mi?Math.log2(Math.max(q.width,q.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?q.mipmaps.length:1}function U(Y){const q=Y.target;q.removeEventListener("dispose",U),z(q),q.isVideoTexture&&d.delete(q)}function k(Y){const q=Y.target;q.removeEventListener("dispose",k),F(q)}function z(Y){const q=i.get(Y);if(q.__webglInit===void 0)return;const fe=Y.source,Le=g.get(fe);if(Le){const Ie=Le[q.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&L(Y),Object.keys(Le).length===0&&g.delete(fe)}i.remove(Y)}function L(Y){const q=i.get(Y);t.deleteTexture(q.__webglTexture);const fe=Y.source,Le=g.get(fe);delete Le[q.__cacheKey],o.memory.textures--}function F(Y){const q=i.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),i.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(q.__webglFramebuffer[Le]))for(let Ie=0;Ie<q.__webglFramebuffer[Le].length;Ie++)t.deleteFramebuffer(q.__webglFramebuffer[Le][Ie]);else t.deleteFramebuffer(q.__webglFramebuffer[Le]);q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer[Le])}else{if(Array.isArray(q.__webglFramebuffer))for(let Le=0;Le<q.__webglFramebuffer.length;Le++)t.deleteFramebuffer(q.__webglFramebuffer[Le]);else t.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let Le=0;Le<q.__webglColorRenderbuffer.length;Le++)q.__webglColorRenderbuffer[Le]&&t.deleteRenderbuffer(q.__webglColorRenderbuffer[Le]);q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const fe=Y.textures;for(let Le=0,Ie=fe.length;Le<Ie;Le++){const Te=i.get(fe[Le]);Te.__webglTexture&&(t.deleteTexture(Te.__webglTexture),o.memory.textures--),i.remove(fe[Le])}i.remove(Y)}let j=0;function W(){j=0}function X(){const Y=j;return Y>=r.maxTextures&&Mt("WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+r.maxTextures),j+=1,Y}function Q(Y){const q=[];return q.push(Y.wrapS),q.push(Y.wrapT),q.push(Y.wrapR||0),q.push(Y.magFilter),q.push(Y.minFilter),q.push(Y.anisotropy),q.push(Y.internalFormat),q.push(Y.format),q.push(Y.type),q.push(Y.generateMipmaps),q.push(Y.premultiplyAlpha),q.push(Y.flipY),q.push(Y.unpackAlignment),q.push(Y.colorSpace),q.join()}function ae(Y,q){const fe=i.get(Y);if(Y.isVideoTexture&&je(Y),Y.isRenderTargetTexture===!1&&Y.isExternalTexture!==!0&&Y.version>0&&fe.__version!==Y.version){const Le=Y.image;if(Le===null)Mt("WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)Mt("WebGLRenderer: Texture marked for update but image is incomplete");else{re(fe,Y,q);return}}else Y.isExternalTexture&&(fe.__webglTexture=Y.sourceTexture?Y.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,fe.__webglTexture,t.TEXTURE0+q)}function $(Y,q){const fe=i.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&fe.__version!==Y.version){re(fe,Y,q);return}else Y.isExternalTexture&&(fe.__webglTexture=Y.sourceTexture?Y.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,fe.__webglTexture,t.TEXTURE0+q)}function ie(Y,q){const fe=i.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&fe.__version!==Y.version){re(fe,Y,q);return}n.bindTexture(t.TEXTURE_3D,fe.__webglTexture,t.TEXTURE0+q)}function me(Y,q){const fe=i.get(Y);if(Y.isCubeDepthTexture!==!0&&Y.version>0&&fe.__version!==Y.version){oe(fe,Y,q);return}n.bindTexture(t.TEXTURE_CUBE_MAP,fe.__webglTexture,t.TEXTURE0+q)}const pe={[My]:t.REPEAT,[Jo]:t.CLAMP_TO_EDGE,[wy]:t.MIRRORED_REPEAT},de={[br]:t.NEAREST,[IN]:t.NEAREST_MIPMAP_NEAREST,[Qm]:t.NEAREST_MIPMAP_LINEAR,[mi]:t.LINEAR,[Y0]:t.LINEAR_MIPMAP_NEAREST,[Bu]:t.LINEAR_MIPMAP_LINEAR},H={[dq]:t.NEVER,[vq]:t.ALWAYS,[hq]:t.LESS,[DT]:t.LEQUAL,[pq]:t.EQUAL,[OT]:t.GEQUAL,[mq]:t.GREATER,[gq]:t.NOTEQUAL};function ne(Y,q){if(q.type===vo&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===mi||q.magFilter===Y0||q.magFilter===Qm||q.magFilter===Bu||q.minFilter===mi||q.minFilter===Y0||q.minFilter===Qm||q.minFilter===Bu)&&Mt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Y,t.TEXTURE_WRAP_S,pe[q.wrapS]),t.texParameteri(Y,t.TEXTURE_WRAP_T,pe[q.wrapT]),(Y===t.TEXTURE_3D||Y===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Y,t.TEXTURE_WRAP_R,pe[q.wrapR]),t.texParameteri(Y,t.TEXTURE_MAG_FILTER,de[q.magFilter]),t.texParameteri(Y,t.TEXTURE_MIN_FILTER,de[q.minFilter]),q.compareFunction&&(t.texParameteri(Y,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Y,t.TEXTURE_COMPARE_FUNC,H[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===br||q.minFilter!==Qm&&q.minFilter!==Bu||q.type===vo&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||i.get(q).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Y,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,r.getMaxAnisotropy())),i.get(q).__currentAnisotropy=q.anisotropy}}}function le(Y,q){let fe=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,q.addEventListener("dispose",U));const Le=q.source;let Ie=g.get(Le);Ie===void 0&&(Ie={},g.set(Le,Ie));const Te=Q(q);if(Te!==Y.__cacheKey){Ie[Te]===void 0&&(Ie[Te]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Ie[Te].usedTimes++;const ot=Ie[Y.__cacheKey];ot!==void 0&&(Ie[Y.__cacheKey].usedTimes--,ot.usedTimes===0&&L(q)),Y.__cacheKey=Te,Y.__webglTexture=Ie[Te].texture}return fe}function ge(Y,q,fe){return Math.floor(Math.floor(Y/fe)/q)}function _e(Y,q,fe,Le){const Te=Y.updateRanges;if(Te.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,q.width,q.height,fe,Le,q.data);else{Te.sort((We,Ke)=>We.start-Ke.start);let ot=0;for(let We=1;We<Te.length;We++){const Ke=Te[ot],et=Te[We],ue=Ke.start+Ke.count,we=ge(et.start,q.width,4),ht=ge(Ke.start,q.width,4);et.start<=ue+1&&we===ht&&ge(et.start+et.count-1,q.width,4)===we?Ke.count=Math.max(Ke.count,et.start+et.count-Ke.start):(++ot,Te[ot]=et)}Te.length=ot+1;const rt=t.getParameter(t.UNPACK_ROW_LENGTH),mt=t.getParameter(t.UNPACK_SKIP_PIXELS),xt=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,q.width);for(let We=0,Ke=Te.length;We<Ke;We++){const et=Te[We],ue=Math.floor(et.start/4),we=Math.ceil(et.count/4),ht=ue%q.width,he=Math.floor(ue/q.width),Ye=we,tt=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,ht),t.pixelStorei(t.UNPACK_SKIP_ROWS,he),n.texSubImage2D(t.TEXTURE_2D,0,ht,he,Ye,tt,fe,Le,q.data)}Y.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,rt),t.pixelStorei(t.UNPACK_SKIP_PIXELS,mt),t.pixelStorei(t.UNPACK_SKIP_ROWS,xt)}}function re(Y,q,fe){let Le=t.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(Le=t.TEXTURE_2D_ARRAY),q.isData3DTexture&&(Le=t.TEXTURE_3D);const Ie=le(Y,q),Te=q.source;n.bindTexture(Le,Y.__webglTexture,t.TEXTURE0+fe);const ot=i.get(Te);if(Te.version!==ot.__version||Ie===!0){n.activeTexture(t.TEXTURE0+fe);const rt=Fn.getPrimaries(Fn.workingColorSpace),mt=q.colorSpace===zc?null:Fn.getPrimaries(q.colorSpace),xt=q.colorSpace===zc||rt===mt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let We=T(q.image,!1,r.maxTextureSize);We=Re(q,We);const Ke=a.convert(q.format,q.colorSpace),et=a.convert(q.type);let ue=I(q.internalFormat,Ke,et,q.colorSpace,q.isVideoTexture);ne(Le,q);let we;const ht=q.mipmaps,he=q.isVideoTexture!==!0,Ye=ot.__version===void 0||Ie===!0,tt=Te.dataReady,vt=D(q,We);if(q.isDepthTexture)ue=N(q.format===hd,q.type),Ye&&(he?n.texStorage2D(t.TEXTURE_2D,1,ue,We.width,We.height):n.texImage2D(t.TEXTURE_2D,0,ue,We.width,We.height,0,Ke,et,null));else if(q.isDataTexture)if(ht.length>0){he&&Ye&&n.texStorage2D(t.TEXTURE_2D,vt,ue,ht[0].width,ht[0].height);for(let nt=0,Be=ht.length;nt<Be;nt++)we=ht[nt],he?tt&&n.texSubImage2D(t.TEXTURE_2D,nt,0,0,we.width,we.height,Ke,et,we.data):n.texImage2D(t.TEXTURE_2D,nt,ue,we.width,we.height,0,Ke,et,we.data);q.generateMipmaps=!1}else he?(Ye&&n.texStorage2D(t.TEXTURE_2D,vt,ue,We.width,We.height),tt&&_e(q,We,Ke,et)):n.texImage2D(t.TEXTURE_2D,0,ue,We.width,We.height,0,Ke,et,We.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){he&&Ye&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,ue,ht[0].width,ht[0].height,We.depth);for(let nt=0,Be=ht.length;nt<Be;nt++)if(we=ht[nt],q.format!==ja)if(Ke!==null)if(he){if(tt)if(q.layerUpdates.size>0){const lt=uI(we.width,we.height,q.format,q.type);for(const Et of q.layerUpdates){const St=we.data.subarray(Et*lt/we.data.BYTES_PER_ELEMENT,(Et+1)*lt/we.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,nt,0,0,Et,we.width,we.height,1,Ke,St)}q.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,nt,0,0,0,we.width,we.height,We.depth,Ke,we.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,nt,ue,we.width,we.height,We.depth,0,we.data,0,0);else Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?tt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,nt,0,0,0,we.width,we.height,We.depth,Ke,et,we.data):n.texImage3D(t.TEXTURE_2D_ARRAY,nt,ue,we.width,we.height,We.depth,0,Ke,et,we.data)}else{he&&Ye&&n.texStorage2D(t.TEXTURE_2D,vt,ue,ht[0].width,ht[0].height);for(let nt=0,Be=ht.length;nt<Be;nt++)we=ht[nt],q.format!==ja?Ke!==null?he?tt&&n.compressedTexSubImage2D(t.TEXTURE_2D,nt,0,0,we.width,we.height,Ke,we.data):n.compressedTexImage2D(t.TEXTURE_2D,nt,ue,we.width,we.height,0,we.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?tt&&n.texSubImage2D(t.TEXTURE_2D,nt,0,0,we.width,we.height,Ke,et,we.data):n.texImage2D(t.TEXTURE_2D,nt,ue,we.width,we.height,0,Ke,et,we.data)}else if(q.isDataArrayTexture)if(he){if(Ye&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,ue,We.width,We.height,We.depth),tt)if(q.layerUpdates.size>0){const nt=uI(We.width,We.height,q.format,q.type);for(const Be of q.layerUpdates){const lt=We.data.subarray(Be*nt/We.data.BYTES_PER_ELEMENT,(Be+1)*nt/We.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Be,We.width,We.height,1,Ke,et,lt)}q.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,We.width,We.height,We.depth,Ke,et,We.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ue,We.width,We.height,We.depth,0,Ke,et,We.data);else if(q.isData3DTexture)he?(Ye&&n.texStorage3D(t.TEXTURE_3D,vt,ue,We.width,We.height,We.depth),tt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,We.width,We.height,We.depth,Ke,et,We.data)):n.texImage3D(t.TEXTURE_3D,0,ue,We.width,We.height,We.depth,0,Ke,et,We.data);else if(q.isFramebufferTexture){if(Ye)if(he)n.texStorage2D(t.TEXTURE_2D,vt,ue,We.width,We.height);else{let nt=We.width,Be=We.height;for(let lt=0;lt<vt;lt++)n.texImage2D(t.TEXTURE_2D,lt,ue,nt,Be,0,Ke,et,null),nt>>=1,Be>>=1}}else if(ht.length>0){if(he&&Ye){const nt=He(ht[0]);n.texStorage2D(t.TEXTURE_2D,vt,ue,nt.width,nt.height)}for(let nt=0,Be=ht.length;nt<Be;nt++)we=ht[nt],he?tt&&n.texSubImage2D(t.TEXTURE_2D,nt,0,0,Ke,et,we):n.texImage2D(t.TEXTURE_2D,nt,ue,Ke,et,we);q.generateMipmaps=!1}else if(he){if(Ye){const nt=He(We);n.texStorage2D(t.TEXTURE_2D,vt,ue,nt.width,nt.height)}tt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ke,et,We)}else n.texImage2D(t.TEXTURE_2D,0,ue,Ke,et,We);S(q)&&A(Le),ot.__version=Te.version,q.onUpdate&&q.onUpdate(q)}Y.__version=q.version}function oe(Y,q,fe){if(q.image.length!==6)return;const Le=le(Y,q),Ie=q.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Y.__webglTexture,t.TEXTURE0+fe);const Te=i.get(Ie);if(Ie.version!==Te.__version||Le===!0){n.activeTexture(t.TEXTURE0+fe);const ot=Fn.getPrimaries(Fn.workingColorSpace),rt=q.colorSpace===zc?null:Fn.getPrimaries(q.colorSpace),mt=q.colorSpace===zc||ot===rt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,mt);const xt=q.isCompressedTexture||q.image[0].isCompressedTexture,We=q.image[0]&&q.image[0].isDataTexture,Ke=[];for(let Be=0;Be<6;Be++)!xt&&!We?Ke[Be]=T(q.image[Be],!0,r.maxCubemapSize):Ke[Be]=We?q.image[Be].image:q.image[Be],Ke[Be]=Re(q,Ke[Be]);const et=Ke[0],ue=a.convert(q.format,q.colorSpace),we=a.convert(q.type),ht=I(q.internalFormat,ue,we,q.colorSpace),he=q.isVideoTexture!==!0,Ye=Te.__version===void 0||Le===!0,tt=Ie.dataReady;let vt=D(q,et);ne(t.TEXTURE_CUBE_MAP,q);let nt;if(xt){he&&Ye&&n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,ht,et.width,et.height);for(let Be=0;Be<6;Be++){nt=Ke[Be].mipmaps;for(let lt=0;lt<nt.length;lt++){const Et=nt[lt];q.format!==ja?ue!==null?he?tt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt,0,0,Et.width,Et.height,ue,Et.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt,ht,Et.width,Et.height,0,Et.data):Mt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?tt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt,0,0,Et.width,Et.height,ue,we,Et.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt,ht,Et.width,Et.height,0,ue,we,Et.data)}}}else{if(nt=q.mipmaps,he&&Ye){nt.length>0&&vt++;const Be=He(Ke[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,ht,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(We){he?tt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Ke[Be].width,Ke[Be].height,ue,we,Ke[Be].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ht,Ke[Be].width,Ke[Be].height,0,ue,we,Ke[Be].data);for(let lt=0;lt<nt.length;lt++){const St=nt[lt].image[Be].image;he?tt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt+1,0,0,St.width,St.height,ue,we,St.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt+1,ht,St.width,St.height,0,ue,we,St.data)}}else{he?tt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,ue,we,Ke[Be]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ht,ue,we,Ke[Be]);for(let lt=0;lt<nt.length;lt++){const Et=nt[lt];he?tt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt+1,0,0,ue,we,Et.image[Be]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Be,lt+1,ht,ue,we,Et.image[Be])}}}S(q)&&A(t.TEXTURE_CUBE_MAP),Te.__version=Ie.version,q.onUpdate&&q.onUpdate(q)}Y.__version=q.version}function Ee(Y,q,fe,Le,Ie,Te){const ot=a.convert(fe.format,fe.colorSpace),rt=a.convert(fe.type),mt=I(fe.internalFormat,ot,rt,fe.colorSpace),xt=i.get(q),We=i.get(fe);if(We.__renderTarget=q,!xt.__hasExternalTextures){const Ke=Math.max(1,q.width>>Te),et=Math.max(1,q.height>>Te);Ie===t.TEXTURE_3D||Ie===t.TEXTURE_2D_ARRAY?n.texImage3D(Ie,Te,mt,Ke,et,q.depth,0,ot,rt,null):n.texImage2D(Ie,Te,mt,Ke,et,0,ot,rt,null)}n.bindFramebuffer(t.FRAMEBUFFER,Y),it(q)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Le,Ie,We.__webglTexture,0,Z(q)):(Ie===t.TEXTURE_2D||Ie>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ie<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Le,Ie,We.__webglTexture,Te),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ce(Y,q,fe){if(t.bindRenderbuffer(t.RENDERBUFFER,Y),q.depthBuffer){const Le=q.depthTexture,Ie=Le&&Le.isDepthTexture?Le.type:null,Te=N(q.stencilBuffer,Ie),ot=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;it(q)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Z(q),Te,q.width,q.height):fe?t.renderbufferStorageMultisample(t.RENDERBUFFER,Z(q),Te,q.width,q.height):t.renderbufferStorage(t.RENDERBUFFER,Te,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,ot,t.RENDERBUFFER,Y)}else{const Le=q.textures;for(let Ie=0;Ie<Le.length;Ie++){const Te=Le[Ie],ot=a.convert(Te.format,Te.colorSpace),rt=a.convert(Te.type),mt=I(Te.internalFormat,ot,rt,Te.colorSpace);it(q)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Z(q),mt,q.width,q.height):fe?t.renderbufferStorageMultisample(t.RENDERBUFFER,Z(q),mt,q.width,q.height):t.renderbufferStorage(t.RENDERBUFFER,mt,q.width,q.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ce(Y,q,fe){const Le=q.isWebGLCubeRenderTarget===!0;if(n.bindFramebuffer(t.FRAMEBUFFER,Y),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ie=i.get(q.depthTexture);if(Ie.__renderTarget=q,(!Ie.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Le){if(Ie.__webglInit===void 0&&(Ie.__webglInit=!0,q.depthTexture.addEventListener("dispose",U)),Ie.__webglTexture===void 0){Ie.__webglTexture=t.createTexture(),n.bindTexture(t.TEXTURE_CUBE_MAP,Ie.__webglTexture),ne(t.TEXTURE_CUBE_MAP,q.depthTexture);const xt=a.convert(q.depthTexture.format),We=a.convert(q.depthTexture.type);let Ke;q.depthTexture.format===ju?Ke=t.DEPTH_COMPONENT24:q.depthTexture.format===hd&&(Ke=t.DEPTH24_STENCIL8);for(let et=0;et<6;et++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Ke,q.width,q.height,0,xt,We,null)}}else ae(q.depthTexture,0);const Te=Ie.__webglTexture,ot=Z(q),rt=Le?t.TEXTURE_CUBE_MAP_POSITIVE_X+fe:t.TEXTURE_2D,mt=q.depthTexture.format===hd?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(q.depthTexture.format===ju)it(q)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,mt,rt,Te,0,ot):t.framebufferTexture2D(t.FRAMEBUFFER,mt,rt,Te,0);else if(q.depthTexture.format===hd)it(q)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,mt,rt,Te,0,ot):t.framebufferTexture2D(t.FRAMEBUFFER,mt,rt,Te,0);else throw new Error("Unknown depthTexture format")}function Ue(Y){const q=i.get(Y),fe=Y.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==Y.depthTexture){const Le=Y.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),Le){const Ie=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,Le.removeEventListener("dispose",Ie)};Le.addEventListener("dispose",Ie),q.__depthDisposeCallback=Ie}q.__boundDepthTexture=Le}if(Y.depthTexture&&!q.__autoAllocateDepthBuffer)if(fe)for(let Le=0;Le<6;Le++)Ce(q.__webglFramebuffer[Le],Y,Le);else{const Le=Y.texture.mipmaps;Le&&Le.length>0?Ce(q.__webglFramebuffer[0],Y,0):Ce(q.__webglFramebuffer,Y,0)}else if(fe){q.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)if(n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer[Le]),q.__webglDepthbuffer[Le]===void 0)q.__webglDepthbuffer[Le]=t.createRenderbuffer(),ce(q.__webglDepthbuffer[Le],Y,!1);else{const Ie=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=q.__webglDepthbuffer[Le];t.bindRenderbuffer(t.RENDERBUFFER,Te),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ie,t.RENDERBUFFER,Te)}}else{const Le=Y.texture.mipmaps;if(Le&&Le.length>0?n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=t.createRenderbuffer(),ce(q.__webglDepthbuffer,Y,!1);else{const Ie=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=q.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Te),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ie,t.RENDERBUFFER,Te)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ve(Y,q,fe){const Le=i.get(Y);q!==void 0&&Ee(Le.__webglFramebuffer,Y,Y.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),fe!==void 0&&Ue(Y)}function ft(Y){const q=Y.texture,fe=i.get(Y),Le=i.get(q);Y.addEventListener("dispose",k);const Ie=Y.textures,Te=Y.isWebGLCubeRenderTarget===!0,ot=Ie.length>1;if(ot||(Le.__webglTexture===void 0&&(Le.__webglTexture=t.createTexture()),Le.__version=q.version,o.memory.textures++),Te){fe.__webglFramebuffer=[];for(let rt=0;rt<6;rt++)if(q.mipmaps&&q.mipmaps.length>0){fe.__webglFramebuffer[rt]=[];for(let mt=0;mt<q.mipmaps.length;mt++)fe.__webglFramebuffer[rt][mt]=t.createFramebuffer()}else fe.__webglFramebuffer[rt]=t.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){fe.__webglFramebuffer=[];for(let rt=0;rt<q.mipmaps.length;rt++)fe.__webglFramebuffer[rt]=t.createFramebuffer()}else fe.__webglFramebuffer=t.createFramebuffer();if(ot)for(let rt=0,mt=Ie.length;rt<mt;rt++){const xt=i.get(Ie[rt]);xt.__webglTexture===void 0&&(xt.__webglTexture=t.createTexture(),o.memory.textures++)}if(Y.samples>0&&it(Y)===!1){fe.__webglMultisampledFramebuffer=t.createFramebuffer(),fe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let rt=0;rt<Ie.length;rt++){const mt=Ie[rt];fe.__webglColorRenderbuffer[rt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,fe.__webglColorRenderbuffer[rt]);const xt=a.convert(mt.format,mt.colorSpace),We=a.convert(mt.type),Ke=I(mt.internalFormat,xt,We,mt.colorSpace,Y.isXRRenderTarget===!0),et=Z(Y);t.renderbufferStorageMultisample(t.RENDERBUFFER,et,Ke,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+rt,t.RENDERBUFFER,fe.__webglColorRenderbuffer[rt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Y.depthBuffer&&(fe.__webglDepthRenderbuffer=t.createRenderbuffer(),ce(fe.__webglDepthRenderbuffer,Y,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Te){n.bindTexture(t.TEXTURE_CUBE_MAP,Le.__webglTexture),ne(t.TEXTURE_CUBE_MAP,q);for(let rt=0;rt<6;rt++)if(q.mipmaps&&q.mipmaps.length>0)for(let mt=0;mt<q.mipmaps.length;mt++)Ee(fe.__webglFramebuffer[rt][mt],Y,q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+rt,mt);else Ee(fe.__webglFramebuffer[rt],Y,q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0);S(q)&&A(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ot){for(let rt=0,mt=Ie.length;rt<mt;rt++){const xt=Ie[rt],We=i.get(xt);let Ke=t.TEXTURE_2D;(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Ke=Y.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ke,We.__webglTexture),ne(Ke,xt),Ee(fe.__webglFramebuffer,Y,xt,t.COLOR_ATTACHMENT0+rt,Ke,0),S(xt)&&A(Ke)}n.unbindTexture()}else{let rt=t.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(rt=Y.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(rt,Le.__webglTexture),ne(rt,q),q.mipmaps&&q.mipmaps.length>0)for(let mt=0;mt<q.mipmaps.length;mt++)Ee(fe.__webglFramebuffer[mt],Y,q,t.COLOR_ATTACHMENT0,rt,mt);else Ee(fe.__webglFramebuffer,Y,q,t.COLOR_ATTACHMENT0,rt,0);S(q)&&A(rt),n.unbindTexture()}Y.depthBuffer&&Ue(Y)}function Se(Y){const q=Y.textures;for(let fe=0,Le=q.length;fe<Le;fe++){const Ie=q[fe];if(S(Ie)){const Te=R(Y),ot=i.get(Ie).__webglTexture;n.bindTexture(Te,ot),A(Te),n.unbindTexture()}}}const Oe=[],Me=[];function Je(Y){if(Y.samples>0){if(it(Y)===!1){const q=Y.textures,fe=Y.width,Le=Y.height;let Ie=t.COLOR_BUFFER_BIT;const Te=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ot=i.get(Y),rt=q.length>1;if(rt)for(let xt=0;xt<q.length;xt++)n.bindFramebuffer(t.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+xt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ot.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+xt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer);const mt=Y.texture.mipmaps;mt&&mt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ot.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let xt=0;xt<q.length;xt++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(Ie|=t.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(Ie|=t.STENCIL_BUFFER_BIT)),rt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ot.__webglColorRenderbuffer[xt]);const We=i.get(q[xt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,We,0)}t.blitFramebuffer(0,0,fe,Le,0,0,fe,Le,Ie,t.NEAREST),u===!0&&(Oe.length=0,Me.length=0,Oe.push(t.COLOR_ATTACHMENT0+xt),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(Oe.push(Te),Me.push(Te),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Me)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Oe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),rt)for(let xt=0;xt<q.length;xt++){n.bindFramebuffer(t.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+xt,t.RENDERBUFFER,ot.__webglColorRenderbuffer[xt]);const We=i.get(q[xt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ot.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+xt,t.TEXTURE_2D,We,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&u){const q=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[q])}}}function Z(Y){return Math.min(r.maxSamples,Y.samples)}function it(Y){const q=i.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function je(Y){const q=o.render.frame;d.get(Y)!==q&&(d.set(Y,q),Y.update())}function Re(Y,q){const fe=Y.colorSpace,Le=Y.format,Ie=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||fe!==Sd&&fe!==zc&&(Fn.getTransfer(fe)===ni?(Le!==ja||Ie!==po)&&Mt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ht("WebGLTextures: Unsupported texture color space:",fe)),q}function He(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(c.width=Y.naturalWidth||Y.width,c.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(c.width=Y.displayWidth,c.height=Y.displayHeight):(c.width=Y.width,c.height=Y.height),c}this.allocateTextureUnit=X,this.resetTextureUnits=W,this.setTexture2D=ae,this.setTexture2DArray=$,this.setTexture3D=ie,this.setTextureCube=me,this.rebindTextures=ve,this.setupRenderTarget=ft,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=it,this.isReversedDepthBuffer=function(){return n.buffers.depth.getReversed()}}function A7(t,e){function n(i,r=zc){let a;const o=Fn.getTransfer(r);if(i===po)return t.UNSIGNED_BYTE;if(i===wT)return t.UNSIGNED_SHORT_4_4_4_4;if(i===CT)return t.UNSIGNED_SHORT_5_5_5_1;if(i===DN)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===ON)return t.UNSIGNED_INT_10F_11F_11F_REV;if(i===PN)return t.BYTE;if(i===NN)return t.SHORT;if(i===pg)return t.UNSIGNED_SHORT;if(i===MT)return t.INT;if(i===fl)return t.UNSIGNED_INT;if(i===vo)return t.FLOAT;if(i===Wu)return t.HALF_FLOAT;if(i===LN)return t.ALPHA;if(i===UN)return t.RGB;if(i===ja)return t.RGBA;if(i===ju)return t.DEPTH_COMPONENT;if(i===hd)return t.DEPTH_STENCIL;if(i===RT)return t.RED;if(i===h_)return t.RED_INTEGER;if(i===op)return t.RG;if(i===IT)return t.RG_INTEGER;if(i===PT)return t.RGBA_INTEGER;if(i===$0||i===K0||i===J0||i===Z0)if(o===ni)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===$0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===K0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===J0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Z0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===$0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===K0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===J0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Z0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===k1||i===B1||i===z1||i===G1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===k1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===B1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===z1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===G1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===V1||i===H1||i===q1||i===W1||i===j1||i===X1||i===Y1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===V1||i===H1)return o===ni?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===q1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===W1)return a.COMPRESSED_R11_EAC;if(i===j1)return a.COMPRESSED_SIGNED_R11_EAC;if(i===X1)return a.COMPRESSED_RG11_EAC;if(i===Y1)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===$1||i===K1||i===J1||i===Z1||i===Q1||i===eE||i===tE||i===nE||i===iE||i===rE||i===aE||i===oE||i===sE||i===lE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===$1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===K1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===J1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Z1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Q1)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===eE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===tE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===nE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===iE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===rE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===aE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===oE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===sE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===lE)return o===ni?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===uE||i===cE||i===fE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===uE)return o===ni?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===cE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===fE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===dE||i===hE||i===pE||i===mE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===dE)return a.COMPRESSED_RED_RGTC1_EXT;if(i===hE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===pE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===mE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===mg?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const WAe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jAe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class XAe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new YN(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new Ts({vertexShader:WAe,fragmentShader:jAe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new er(new mf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class YAe extends $u{constructor(e,n){super();const i=this;let r=null,a=1,o=null,s="local-floor",u=1,c=null,d=null,p=null,g=null,y=null,b=null;const T=typeof XRWebGLBinding<"u",S=new XAe,A={},R=n.getContextAttributes();let I=null,N=null;const D=[],U=[],k=new st;let z=null;const L=new _r;L.viewport=new ri;const F=new _r;F.viewport=new ri;const j=[L,F],W=new p7;let X=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let oe=D[re];return oe===void 0&&(oe=new wS,D[re]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(re){let oe=D[re];return oe===void 0&&(oe=new wS,D[re]=oe),oe.getGripSpace()},this.getHand=function(re){let oe=D[re];return oe===void 0&&(oe=new wS,D[re]=oe),oe.getHandSpace()};function ae(re){const oe=U.indexOf(re.inputSource);if(oe===-1)return;const Ee=D[oe];Ee!==void 0&&(Ee.update(re.inputSource,re.frame,c||o),Ee.dispatchEvent({type:re.type,data:re.inputSource}))}function $(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",ie);for(let re=0;re<D.length;re++){const oe=U[re];oe!==null&&(U[re]=null,D[re].disconnect(oe))}X=null,Q=null,S.reset();for(const re in A)delete A[re];e.setRenderTarget(I),y=null,g=null,p=null,r=null,N=null,_e.stop(),i.isPresenting=!1,e.setPixelRatio(z),e.setSize(k.width,k.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){a=re,i.isPresenting===!0&&Mt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){s=re,i.isPresenting===!0&&Mt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(re){c=re},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return p===null&&T&&(p=new XRWebGLBinding(r,n)),p},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(re){if(r=re,r!==null){if(I=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",$),r.addEventListener("inputsourceschange",ie),R.xrCompatible!==!0&&await n.makeXRCompatible(),z=e.getPixelRatio(),e.getSize(k),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ee=null,ce=null,Ce=null;R.depth&&(Ce=R.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ee=R.stencil?hd:ju,ce=R.stencil?mg:fl);const Ue={colorFormat:n.RGBA8,depthFormat:Ce,scaleFactor:a};p=this.getBinding(),g=p.createProjectionLayer(Ue),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),N=new bs(g.textureWidth,g.textureHeight,{format:ja,type:po,depthTexture:new xg(g.textureWidth,g.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:R.stencil,colorSpace:e.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const Ee={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(r,n,Ee),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),N=new bs(y.framebufferWidth,y.framebufferHeight,{format:ja,type:po,colorSpace:e.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(u),c=null,o=await r.requestReferenceSpace(s),_e.setContext(r),_e.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function ie(re){for(let oe=0;oe<re.removed.length;oe++){const Ee=re.removed[oe],ce=U.indexOf(Ee);ce>=0&&(U[ce]=null,D[ce].disconnect(Ee))}for(let oe=0;oe<re.added.length;oe++){const Ee=re.added[oe];let ce=U.indexOf(Ee);if(ce===-1){for(let Ue=0;Ue<D.length;Ue++)if(Ue>=U.length){U.push(Ee),ce=Ue;break}else if(U[Ue]===null){U[Ue]=Ee,ce=Ue;break}if(ce===-1)break}const Ce=D[ce];Ce&&Ce.connect(Ee)}}const me=new se,pe=new se;function de(re,oe,Ee){me.setFromMatrixPosition(oe.matrixWorld),pe.setFromMatrixPosition(Ee.matrixWorld);const ce=me.distanceTo(pe),Ce=oe.projectionMatrix.elements,Ue=Ee.projectionMatrix.elements,ve=Ce[14]/(Ce[10]-1),ft=Ce[14]/(Ce[10]+1),Se=(Ce[9]+1)/Ce[5],Oe=(Ce[9]-1)/Ce[5],Me=(Ce[8]-1)/Ce[0],Je=(Ue[8]+1)/Ue[0],Z=ve*Me,it=ve*Je,je=ce/(-Me+Je),Re=je*-Me;if(oe.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(Re),re.translateZ(je),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),Ce[10]===-1)re.projectionMatrix.copy(oe.projectionMatrix),re.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const He=ve+je,Y=ft+je,q=Z-Re,fe=it+(ce-Re),Le=Se*ft/Y*He,Ie=Oe*ft/Y*He;re.projectionMatrix.makePerspective(q,fe,Le,Ie,He,Y),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function H(re,oe){oe===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(oe.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(r===null)return;let oe=re.near,Ee=re.far;S.texture!==null&&(S.depthNear>0&&(oe=S.depthNear),S.depthFar>0&&(Ee=S.depthFar)),W.near=F.near=L.near=oe,W.far=F.far=L.far=Ee,(X!==W.near||Q!==W.far)&&(r.updateRenderState({depthNear:W.near,depthFar:W.far}),X=W.near,Q=W.far),W.layers.mask=re.layers.mask|6,L.layers.mask=W.layers.mask&3,F.layers.mask=W.layers.mask&5;const ce=re.parent,Ce=W.cameras;H(W,ce);for(let Ue=0;Ue<Ce.length;Ue++)H(Ce[Ue],ce);Ce.length===2?de(W,L,F):W.projectionMatrix.copy(L.projectionMatrix),ne(re,W,ce)};function ne(re,oe,Ee){Ee===null?re.matrix.copy(oe.matrixWorld):(re.matrix.copy(Ee.matrixWorld),re.matrix.invert(),re.matrix.multiply(oe.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(oe.projectionMatrix),re.projectionMatrixInverse.copy(oe.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=yg*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return W},this.getFoveation=function(){if(!(g===null&&y===null))return u},this.setFoveation=function(re){u=re,g!==null&&(g.fixedFoveation=re),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=re)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(W)},this.getCameraTexture=function(re){return A[re]};let le=null;function ge(re,oe){if(d=oe.getViewerPose(c||o),b=oe,d!==null){const Ee=d.views;y!==null&&(e.setRenderTargetFramebuffer(N,y.framebuffer),e.setRenderTarget(N));let ce=!1;Ee.length!==W.cameras.length&&(W.cameras.length=0,ce=!0);for(let ft=0;ft<Ee.length;ft++){const Se=Ee[ft];let Oe=null;if(y!==null)Oe=y.getViewport(Se);else{const Je=p.getViewSubImage(g,Se);Oe=Je.viewport,ft===0&&(e.setRenderTargetTextures(N,Je.colorTexture,Je.depthStencilTexture),e.setRenderTarget(N))}let Me=j[ft];Me===void 0&&(Me=new _r,Me.layers.enable(ft),Me.viewport=new ri,j[ft]=Me),Me.matrix.fromArray(Se.transform.matrix),Me.matrix.decompose(Me.position,Me.quaternion,Me.scale),Me.projectionMatrix.fromArray(Se.projectionMatrix),Me.projectionMatrixInverse.copy(Me.projectionMatrix).invert(),Me.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),ft===0&&(W.matrix.copy(Me.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale)),ce===!0&&W.cameras.push(Me)}const Ce=r.enabledFeatures;if(Ce&&Ce.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&T){p=i.getBinding();const ft=p.getDepthInformation(Ee[0]);ft&&ft.isValid&&ft.texture&&S.init(ft,r.renderState)}if(Ce&&Ce.includes("camera-access")&&T){e.state.unbindTexture(),p=i.getBinding();for(let ft=0;ft<Ee.length;ft++){const Se=Ee[ft].camera;if(Se){let Oe=A[Se];Oe||(Oe=new YN,A[Se]=Oe);const Me=p.getCameraImage(Se);Oe.sourceTexture=Me}}}}for(let Ee=0;Ee<D.length;Ee++){const ce=U[Ee],Ce=D[Ee];ce!==null&&Ce!==void 0&&Ce.update(ce,oe,c||o)}le&&le(re,oe),oe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:oe}),b=null}const _e=new b7;_e.setAnimationLoop(ge),this.setAnimationLoop=function(re){le=re},this.dispose=function(){}}}const Rh=new Es,$Ae=new en;function KAe(t,e){function n(S,A){S.matrixAutoUpdate===!0&&S.updateMatrix(),A.value.copy(S.matrix)}function i(S,A){A.color.getRGB(S.fogColor.value,Tq(t)),A.isFog?(S.fogNear.value=A.near,S.fogFar.value=A.far):A.isFogExp2&&(S.fogDensity.value=A.density)}function r(S,A,R,I,N){A.isMeshBasicMaterial||A.isMeshLambertMaterial?a(S,A):A.isMeshToonMaterial?(a(S,A),p(S,A)):A.isMeshPhongMaterial?(a(S,A),d(S,A)):A.isMeshStandardMaterial?(a(S,A),g(S,A),A.isMeshPhysicalMaterial&&y(S,A,N)):A.isMeshMatcapMaterial?(a(S,A),b(S,A)):A.isMeshDepthMaterial?a(S,A):A.isMeshDistanceMaterial?(a(S,A),T(S,A)):A.isMeshNormalMaterial?a(S,A):A.isLineBasicMaterial?(o(S,A),A.isLineDashedMaterial&&s(S,A)):A.isPointsMaterial?u(S,A,R,I):A.isSpriteMaterial?c(S,A):A.isShadowMaterial?(S.color.value.copy(A.color),S.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function a(S,A){S.opacity.value=A.opacity,A.color&&S.diffuse.value.copy(A.color),A.emissive&&S.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(S.map.value=A.map,n(A.map,S.mapTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,n(A.alphaMap,S.alphaMapTransform)),A.bumpMap&&(S.bumpMap.value=A.bumpMap,n(A.bumpMap,S.bumpMapTransform),S.bumpScale.value=A.bumpScale,A.side===yo&&(S.bumpScale.value*=-1)),A.normalMap&&(S.normalMap.value=A.normalMap,n(A.normalMap,S.normalMapTransform),S.normalScale.value.copy(A.normalScale),A.side===yo&&S.normalScale.value.negate()),A.displacementMap&&(S.displacementMap.value=A.displacementMap,n(A.displacementMap,S.displacementMapTransform),S.displacementScale.value=A.displacementScale,S.displacementBias.value=A.displacementBias),A.emissiveMap&&(S.emissiveMap.value=A.emissiveMap,n(A.emissiveMap,S.emissiveMapTransform)),A.specularMap&&(S.specularMap.value=A.specularMap,n(A.specularMap,S.specularMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest);const R=e.get(A),I=R.envMap,N=R.envMapRotation;I&&(S.envMap.value=I,Rh.copy(N),Rh.x*=-1,Rh.y*=-1,Rh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Rh.y*=-1,Rh.z*=-1),S.envMapRotation.value.setFromMatrix4($Ae.makeRotationFromEuler(Rh)),S.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=A.reflectivity,S.ior.value=A.ior,S.refractionRatio.value=A.refractionRatio),A.lightMap&&(S.lightMap.value=A.lightMap,S.lightMapIntensity.value=A.lightMapIntensity,n(A.lightMap,S.lightMapTransform)),A.aoMap&&(S.aoMap.value=A.aoMap,S.aoMapIntensity.value=A.aoMapIntensity,n(A.aoMap,S.aoMapTransform))}function o(S,A){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,A.map&&(S.map.value=A.map,n(A.map,S.mapTransform))}function s(S,A){S.dashSize.value=A.dashSize,S.totalSize.value=A.dashSize+A.gapSize,S.scale.value=A.scale}function u(S,A,R,I){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,S.size.value=A.size*R,S.scale.value=I*.5,A.map&&(S.map.value=A.map,n(A.map,S.uvTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,n(A.alphaMap,S.alphaMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest)}function c(S,A){S.diffuse.value.copy(A.color),S.opacity.value=A.opacity,S.rotation.value=A.rotation,A.map&&(S.map.value=A.map,n(A.map,S.mapTransform)),A.alphaMap&&(S.alphaMap.value=A.alphaMap,n(A.alphaMap,S.alphaMapTransform)),A.alphaTest>0&&(S.alphaTest.value=A.alphaTest)}function d(S,A){S.specular.value.copy(A.specular),S.shininess.value=Math.max(A.shininess,1e-4)}function p(S,A){A.gradientMap&&(S.gradientMap.value=A.gradientMap)}function g(S,A){S.metalness.value=A.metalness,A.metalnessMap&&(S.metalnessMap.value=A.metalnessMap,n(A.metalnessMap,S.metalnessMapTransform)),S.roughness.value=A.roughness,A.roughnessMap&&(S.roughnessMap.value=A.roughnessMap,n(A.roughnessMap,S.roughnessMapTransform)),A.envMap&&(S.envMapIntensity.value=A.envMapIntensity)}function y(S,A,R){S.ior.value=A.ior,A.sheen>0&&(S.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),S.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(S.sheenColorMap.value=A.sheenColorMap,n(A.sheenColorMap,S.sheenColorMapTransform)),A.sheenRoughnessMap&&(S.sheenRoughnessMap.value=A.sheenRoughnessMap,n(A.sheenRoughnessMap,S.sheenRoughnessMapTransform))),A.clearcoat>0&&(S.clearcoat.value=A.clearcoat,S.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(S.clearcoatMap.value=A.clearcoatMap,n(A.clearcoatMap,S.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,n(A.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(S.clearcoatNormalMap.value=A.clearcoatNormalMap,n(A.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===yo&&S.clearcoatNormalScale.value.negate())),A.dispersion>0&&(S.dispersion.value=A.dispersion),A.iridescence>0&&(S.iridescence.value=A.iridescence,S.iridescenceIOR.value=A.iridescenceIOR,S.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(S.iridescenceMap.value=A.iridescenceMap,n(A.iridescenceMap,S.iridescenceMapTransform)),A.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=A.iridescenceThicknessMap,n(A.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),A.transmission>0&&(S.transmission.value=A.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),A.transmissionMap&&(S.transmissionMap.value=A.transmissionMap,n(A.transmissionMap,S.transmissionMapTransform)),S.thickness.value=A.thickness,A.thicknessMap&&(S.thicknessMap.value=A.thicknessMap,n(A.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=A.attenuationDistance,S.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(S.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(S.anisotropyMap.value=A.anisotropyMap,n(A.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=A.specularIntensity,S.specularColor.value.copy(A.specularColor),A.specularColorMap&&(S.specularColorMap.value=A.specularColorMap,n(A.specularColorMap,S.specularColorMapTransform)),A.specularIntensityMap&&(S.specularIntensityMap.value=A.specularIntensityMap,n(A.specularIntensityMap,S.specularIntensityMapTransform))}function b(S,A){A.matcap&&(S.matcap.value=A.matcap)}function T(S,A){const R=e.get(A).light;S.referencePosition.value.setFromMatrixPosition(R.matrixWorld),S.nearDistance.value=R.shadow.camera.near,S.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function JAe(t,e,n,i){let r={},a={},o=[];const s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function u(R,I){const N=I.program;i.uniformBlockBinding(R,N)}function c(R,I){let N=r[R.id];N===void 0&&(b(R),N=d(R),r[R.id]=N,R.addEventListener("dispose",S));const D=I.program;i.updateUBOMapping(R,D);const U=e.render.frame;a[R.id]!==U&&(g(R),a[R.id]=U)}function d(R){const I=p();R.__bindingPointIndex=I;const N=t.createBuffer(),D=R.__size,U=R.usage;return t.bindBuffer(t.UNIFORM_BUFFER,N),t.bufferData(t.UNIFORM_BUFFER,D,U),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,I,N),N}function p(){for(let R=0;R<s;R++)if(o.indexOf(R)===-1)return o.push(R),R;return Ht("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(R){const I=r[R.id],N=R.uniforms,D=R.__cache;t.bindBuffer(t.UNIFORM_BUFFER,I);for(let U=0,k=N.length;U<k;U++){const z=Array.isArray(N[U])?N[U]:[N[U]];for(let L=0,F=z.length;L<F;L++){const j=z[L];if(y(j,U,L,D)===!0){const W=j.__offset,X=Array.isArray(j.value)?j.value:[j.value];let Q=0;for(let ae=0;ae<X.length;ae++){const $=X[ae],ie=T($);typeof $=="number"||typeof $=="boolean"?(j.__data[0]=$,t.bufferSubData(t.UNIFORM_BUFFER,W+Q,j.__data)):$.isMatrix3?(j.__data[0]=$.elements[0],j.__data[1]=$.elements[1],j.__data[2]=$.elements[2],j.__data[3]=0,j.__data[4]=$.elements[3],j.__data[5]=$.elements[4],j.__data[6]=$.elements[5],j.__data[7]=0,j.__data[8]=$.elements[6],j.__data[9]=$.elements[7],j.__data[10]=$.elements[8],j.__data[11]=0):($.toArray(j.__data,Q),Q+=ie.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,W,j.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function y(R,I,N,D){const U=R.value,k=I+"_"+N;if(D[k]===void 0)return typeof U=="number"||typeof U=="boolean"?D[k]=U:D[k]=U.clone(),!0;{const z=D[k];if(typeof U=="number"||typeof U=="boolean"){if(z!==U)return D[k]=U,!0}else if(z.equals(U)===!1)return z.copy(U),!0}return!1}function b(R){const I=R.uniforms;let N=0;const D=16;for(let k=0,z=I.length;k<z;k++){const L=Array.isArray(I[k])?I[k]:[I[k]];for(let F=0,j=L.length;F<j;F++){const W=L[F],X=Array.isArray(W.value)?W.value:[W.value];for(let Q=0,ae=X.length;Q<ae;Q++){const $=X[Q],ie=T($),me=N%D,pe=me%ie.boundary,de=me+pe;N+=pe,de!==0&&D-de<ie.storage&&(N+=D-de),W.__data=new Float32Array(ie.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=N,N+=ie.storage}}}const U=N%D;return U>0&&(N+=D-U),R.__size=N,R.__cache={},this}function T(R){const I={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(I.boundary=4,I.storage=4):R.isVector2?(I.boundary=8,I.storage=8):R.isVector3||R.isColor?(I.boundary=16,I.storage=12):R.isVector4?(I.boundary=16,I.storage=16):R.isMatrix3?(I.boundary=48,I.storage=48):R.isMatrix4?(I.boundary=64,I.storage=64):R.isTexture?Mt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Mt("WebGLRenderer: Unsupported uniform value type.",R),I}function S(R){const I=R.target;I.removeEventListener("dispose",S);const N=o.indexOf(I.__bindingPointIndex);o.splice(N,1),t.deleteBuffer(r[I.id]),delete r[I.id],delete a[I.id]}function A(){for(const R in r)t.deleteBuffer(r[R]);o=[],r={},a={}}return{bind:u,update:c,dispose:A}}const ZAe=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Fu=null;function QAe(){return Fu===null&&(Fu=new Yl(ZAe,16,16,op,Wu),Fu.name="DFG_LUT",Fu.minFilter=mi,Fu.magFilter=mi,Fu.wrapS=Jo,Fu.wrapT=Jo,Fu.generateMipmaps=!1,Fu.needsUpdate=!0),Fu}class M7{constructor(e={}){const{canvas:n=bq(),context:i=null,depth:r=!0,stencil:a=!1,alpha:o=!1,antialias:s=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:g=!1,outputBufferType:y=po}=e;this.isWebGLRenderer=!0;let b;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=i.getContextAttributes().alpha}else b=o;const T=y,S=new Set([PT,IT,h_]),A=new Set([po,fl,pg,mg,wT,CT]),R=new Uint32Array(4),I=new Int32Array(4);let N=null,D=null;const U=[],k=[];let z=null;this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ol,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let F=!1;this._outputColorSpace=qa;let j=0,W=0,X=null,Q=-1,ae=null;const $=new ri,ie=new ri;let me=null;const pe=new Ct(0);let de=0,H=n.width,ne=n.height,le=1,ge=null,_e=null;const re=new ri(0,0,H,ne),oe=new ri(0,0,H,ne);let Ee=!1;const ce=new Vg;let Ce=!1,Ue=!1;const ve=new en,ft=new se,Se=new ri,Oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Me=!1;function Je(){return X===null?le:1}let Z=i;function it(J,Ae){return n.getContext(J,Ae)}try{const J={alpha:!0,depth:r,stencil:a,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${f_}`),n.addEventListener("webglcontextlost",Et,!1),n.addEventListener("webglcontextrestored",St,!1),n.addEventListener("webglcontextcreationerror",Lt,!1),Z===null){const Ae="webgl2";if(Z=it(Ae,J),Z===null)throw it(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw Ht("WebGLRenderer: "+J.message),J}let je,Re,He,Y,q,fe,Le,Ie,Te,ot,rt,mt,xt,We,Ke,et,ue,we,ht,he,Ye,tt,vt,nt;function Be(){je=new eTe(Z),je.init(),tt=new A7(Z,je),Re=new WEe(Z,je,e,tt),He=new HAe(Z,je),Re.reversedDepthBuffer&&g&&He.buffers.depth.setReversed(!0),Y=new iTe(Z),q=new CAe,fe=new qAe(Z,je,He,q,Re,tt,Y),Le=new XEe(L),Ie=new QEe(L),Te=new sSe(Z),vt=new HEe(Z,Te),ot=new tTe(Z,Te,Y,vt),rt=new aTe(Z,ot,Te,Y),ht=new rTe(Z,Re,fe),et=new jEe(q),mt=new wAe(L,Le,Ie,je,Re,vt,et),xt=new KAe(L,q),We=new IAe,Ke=new UAe(je),we=new VEe(L,Le,Ie,He,rt,b,u),ue=new GAe(L,rt,Re),nt=new JAe(Z,Y,Re,He),he=new qEe(Z,je,Y),Ye=new nTe(Z,je,Y),Y.programs=mt.programs,L.capabilities=Re,L.extensions=je,L.properties=q,L.renderLists=We,L.shadowMap=ue,L.state=He,L.info=Y}Be(),T!==po&&(z=new sTe(T,n.width,n.height,r,a));const lt=new YAe(L,Z);this.xr=lt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const J=je.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=je.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return le},this.setPixelRatio=function(J){J!==void 0&&(le=J,this.setSize(H,ne,!1))},this.getSize=function(J){return J.set(H,ne)},this.setSize=function(J,Ae,Ve=!0){if(lt.isPresenting){Mt("WebGLRenderer: Can't change size while VR device is presenting.");return}H=J,ne=Ae,n.width=Math.floor(J*le),n.height=Math.floor(Ae*le),Ve===!0&&(n.style.width=J+"px",n.style.height=Ae+"px"),z!==null&&z.setSize(n.width,n.height),this.setViewport(0,0,J,Ae)},this.getDrawingBufferSize=function(J){return J.set(H*le,ne*le).floor()},this.setDrawingBufferSize=function(J,Ae,Ve){H=J,ne=Ae,le=Ve,n.width=Math.floor(J*Ve),n.height=Math.floor(Ae*Ve),this.setViewport(0,0,J,Ae)},this.setEffects=function(J){if(T===po){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(J){for(let Ae=0;Ae<J.length;Ae++)if(J[Ae].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}z.setEffects(J||[])},this.getCurrentViewport=function(J){return J.copy($)},this.getViewport=function(J){return J.copy(re)},this.setViewport=function(J,Ae,Ve,Fe){J.isVector4?re.set(J.x,J.y,J.z,J.w):re.set(J,Ae,Ve,Fe),He.viewport($.copy(re).multiplyScalar(le).round())},this.getScissor=function(J){return J.copy(oe)},this.setScissor=function(J,Ae,Ve,Fe){J.isVector4?oe.set(J.x,J.y,J.z,J.w):oe.set(J,Ae,Ve,Fe),He.scissor(ie.copy(oe).multiplyScalar(le).round())},this.getScissorTest=function(){return Ee},this.setScissorTest=function(J){He.setScissorTest(Ee=J)},this.setOpaqueSort=function(J){ge=J},this.setTransparentSort=function(J){_e=J},this.getClearColor=function(J){return J.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor(...arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha(...arguments)},this.clear=function(J=!0,Ae=!0,Ve=!0){let Fe=0;if(J){let Pe=!1;if(X!==null){const yt=X.texture.format;Pe=S.has(yt)}if(Pe){const yt=X.texture.type,At=A.has(yt),pt=we.getClearColor(),Pt=we.getClearAlpha(),Nt=pt.r,Vt=pt.g,Dt=pt.b;At?(R[0]=Nt,R[1]=Vt,R[2]=Dt,R[3]=Pt,Z.clearBufferuiv(Z.COLOR,0,R)):(I[0]=Nt,I[1]=Vt,I[2]=Dt,I[3]=Pt,Z.clearBufferiv(Z.COLOR,0,I))}else Fe|=Z.COLOR_BUFFER_BIT}Ae&&(Fe|=Z.DEPTH_BUFFER_BIT),Ve&&(Fe|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Et,!1),n.removeEventListener("webglcontextrestored",St,!1),n.removeEventListener("webglcontextcreationerror",Lt,!1),we.dispose(),We.dispose(),Ke.dispose(),q.dispose(),Le.dispose(),Ie.dispose(),rt.dispose(),vt.dispose(),nt.dispose(),mt.dispose(),lt.dispose(),lt.removeEventListener("sessionstart",Sr),lt.removeEventListener("sessionend",pa),ai.stop()};function Et(J){J.preventDefault(),Dy("WebGLRenderer: Context Lost."),F=!0}function St(){Dy("WebGLRenderer: Context Restored."),F=!1;const J=Y.autoReset,Ae=ue.enabled,Ve=ue.autoUpdate,Fe=ue.needsUpdate,Pe=ue.type;Be(),Y.autoReset=J,ue.enabled=Ae,ue.autoUpdate=Ve,ue.needsUpdate=Fe,ue.type=Pe}function Lt(J){Ht("WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function vn(J){const Ae=J.target;Ae.removeEventListener("dispose",vn),wn(Ae)}function wn(J){Qn(J),q.remove(J)}function Qn(J){const Ae=q.get(J).programs;Ae!==void 0&&(Ae.forEach(function(Ve){mt.releaseProgram(Ve)}),J.isShaderMaterial&&mt.releaseShaderCache(J))}this.renderBufferDirect=function(J,Ae,Ve,Fe,Pe,yt){Ae===null&&(Ae=Oe);const At=Pe.isMesh&&Pe.matrixWorld.determinant()<0,pt=Ka(J,Ae,Ve,Fe,Pe);He.setMaterial(Fe,At);let Pt=Ve.index,Nt=1;if(Fe.wireframe===!0){if(Pt=ot.getWireframeAttribute(Ve),Pt===void 0)return;Nt=2}const Vt=Ve.drawRange,Dt=Ve.attributes.position;let qt=Vt.start*Nt,yn=(Vt.start+Vt.count)*Nt;yt!==null&&(qt=Math.max(qt,yt.start*Nt),yn=Math.min(yn,(yt.start+yt.count)*Nt)),Pt!==null?(qt=Math.max(qt,0),yn=Math.min(yn,Pt.count)):Dt!=null&&(qt=Math.max(qt,0),yn=Math.min(yn,Dt.count));const qn=yn-qt;if(qn<0||qn===1/0)return;vt.setup(Pe,Fe,pt,Ve,Pt);let Nn,Jt=he;if(Pt!==null&&(Nn=Te.get(Pt),Jt=Ye,Jt.setIndex(Nn)),Pe.isMesh)Fe.wireframe===!0?(He.setLineWidth(Fe.wireframeLinewidth*Je()),Jt.setMode(Z.LINES)):Jt.setMode(Z.TRIANGLES);else if(Pe.isLine){let Tt=Fe.linewidth;Tt===void 0&&(Tt=1),He.setLineWidth(Tt*Je()),Pe.isLineSegments?Jt.setMode(Z.LINES):Pe.isLineLoop?Jt.setMode(Z.LINE_LOOP):Jt.setMode(Z.LINE_STRIP)}else Pe.isPoints?Jt.setMode(Z.POINTS):Pe.isSprite&&Jt.setMode(Z.TRIANGLES);if(Pe.isBatchedMesh)if(Pe._multiDrawInstances!==null)vg("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Jt.renderMultiDrawInstances(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount,Pe._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))Jt.renderMultiDraw(Pe._multiDrawStarts,Pe._multiDrawCounts,Pe._multiDrawCount);else{const Tt=Pe._multiDrawStarts,xn=Pe._multiDrawCounts,Bt=Pe._multiDrawCount,Oi=Pt?Te.get(Pt).bytesPerElement:1,Qr=q.get(Fe).currentProgram.getUniforms();for(let Gn=0;Gn<Bt;Gn++)Qr.setValue(Z,"_gl_DrawID",Gn),Jt.render(Tt[Gn]/Oi,xn[Gn])}else if(Pe.isInstancedMesh)Jt.renderInstances(qt,qn,Pe.count);else if(Ve.isInstancedBufferGeometry){const Tt=Ve._maxInstanceCount!==void 0?Ve._maxInstanceCount:1/0,xn=Math.min(Ve.instanceCount,Tt);Jt.renderInstances(qt,qn,xn)}else Jt.render(qt,qn)};function nr(J,Ae,Ve){J.transparent===!0&&J.side===Vl&&J.forceSinglePass===!1?(J.side=yo,J.needsUpdate=!0,Zr(J,Ae,Ve),J.side=af,J.needsUpdate=!0,Zr(J,Ae,Ve),J.side=Vl):Zr(J,Ae,Ve)}this.compile=function(J,Ae,Ve=null){Ve===null&&(Ve=J),D=Ke.get(Ve),D.init(Ae),k.push(D),Ve.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(Ae.layers)&&(D.pushLight(Pe),Pe.castShadow&&D.pushShadow(Pe))}),J!==Ve&&J.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(Ae.layers)&&(D.pushLight(Pe),Pe.castShadow&&D.pushShadow(Pe))}),D.setupLights();const Fe=new Set;return J.traverse(function(Pe){if(!(Pe.isMesh||Pe.isPoints||Pe.isLine||Pe.isSprite))return;const yt=Pe.material;if(yt)if(Array.isArray(yt))for(let At=0;At<yt.length;At++){const pt=yt[At];nr(pt,Ve,Pe),Fe.add(pt)}else nr(yt,Ve,Pe),Fe.add(yt)}),D=k.pop(),Fe},this.compileAsync=function(J,Ae,Ve=null){const Fe=this.compile(J,Ae,Ve);return new Promise(Pe=>{function yt(){if(Fe.forEach(function(At){q.get(At).currentProgram.isReady()&&Fe.delete(At)}),Fe.size===0){Pe(J);return}setTimeout(yt,10)}je.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let Jr=null;function xr(J){Jr&&Jr(J)}function Sr(){ai.stop()}function pa(){ai.start()}const ai=new b7;ai.setAnimationLoop(xr),typeof self<"u"&&ai.setContext(self),this.setAnimationLoop=function(J){Jr=J,lt.setAnimationLoop(J),J===null?ai.stop():ai.start()},lt.addEventListener("sessionstart",Sr),lt.addEventListener("sessionend",pa),this.render=function(J,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){Ht("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;const Ve=lt.enabled===!0&&lt.isPresenting===!0,Fe=z!==null&&(X===null||Ve)&&z.begin(L,X);if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),lt.enabled===!0&&lt.isPresenting===!0&&(z===null||z.isCompositing()===!1)&&(lt.cameraAutoUpdate===!0&&lt.updateCamera(Ae),Ae=lt.getCamera()),J.isScene===!0&&J.onBeforeRender(L,J,Ae,X),D=Ke.get(J,k.length),D.init(Ae),k.push(D),ve.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),ce.setFromProjectionMatrix(ve,gs,Ae.reversedDepth),Ue=this.localClippingEnabled,Ce=et.init(this.clippingPlanes,Ue),N=We.get(J,U.length),N.init(),U.push(N),lt.enabled===!0&&lt.isPresenting===!0){const At=L.xr.getDepthSensingMesh();At!==null&&$n(At,Ae,-1/0,L.sortObjects)}$n(J,Ae,0,L.sortObjects),N.finish(),L.sortObjects===!0&&N.sort(ge,_e),Me=lt.enabled===!1||lt.isPresenting===!1||lt.hasDepthSensing()===!1,Me&&we.addToRenderList(N,J),this.info.render.frame++,Ce===!0&&et.beginShadows();const Pe=D.state.shadowsArray;if(ue.render(Pe,J,Ae),Ce===!0&&et.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Fe&&z.hasRenderPass())===!1){const At=N.opaque,pt=N.transmissive;if(D.setupLights(),Ae.isArrayCamera){const Pt=Ae.cameras;if(pt.length>0)for(let Nt=0,Vt=Pt.length;Nt<Vt;Nt++){const Dt=Pt[Nt];Di(At,pt,J,Dt)}Me&&we.render(J);for(let Nt=0,Vt=Pt.length;Nt<Vt;Nt++){const Dt=Pt[Nt];zn(N,J,Dt,Dt.viewport)}}else pt.length>0&&Di(At,pt,J,Ae),Me&&we.render(J),zn(N,J,Ae)}X!==null&&W===0&&(fe.updateMultisampleRenderTarget(X),fe.updateRenderTargetMipmap(X)),Fe&&z.end(L),J.isScene===!0&&J.onAfterRender(L,J,Ae),vt.resetDefaultState(),Q=-1,ae=null,k.pop(),k.length>0?(D=k[k.length-1],Ce===!0&&et.setGlobalState(L.clippingPlanes,D.state.camera)):D=null,U.pop(),U.length>0?N=U[U.length-1]:N=null};function $n(J,Ae,Ve,Fe){if(J.visible===!1)return;if(J.layers.test(Ae.layers)){if(J.isGroup)Ve=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(Ae);else if(J.isLight)D.pushLight(J),J.castShadow&&D.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||ce.intersectsSprite(J)){Fe&&Se.setFromMatrixPosition(J.matrixWorld).applyMatrix4(ve);const At=rt.update(J),pt=J.material;pt.visible&&N.push(J,At,pt,Ve,Se.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||ce.intersectsObject(J))){const At=rt.update(J),pt=J.material;if(Fe&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),Se.copy(J.boundingSphere.center)):(At.boundingSphere===null&&At.computeBoundingSphere(),Se.copy(At.boundingSphere.center)),Se.applyMatrix4(J.matrixWorld).applyMatrix4(ve)),Array.isArray(pt)){const Pt=At.groups;for(let Nt=0,Vt=Pt.length;Nt<Vt;Nt++){const Dt=Pt[Nt],qt=pt[Dt.materialIndex];qt&&qt.visible&&N.push(J,At,qt,Ve,Se.z,Dt)}}else pt.visible&&N.push(J,At,pt,Ve,Se.z,null)}}const yt=J.children;for(let At=0,pt=yt.length;At<pt;At++)$n(yt[At],Ae,Ve,Fe)}function zn(J,Ae,Ve,Fe){const{opaque:Pe,transmissive:yt,transparent:At}=J;D.setupLightsView(Ve),Ce===!0&&et.setGlobalState(L.clippingPlanes,Ve),Fe&&He.viewport($.copy(Fe)),Pe.length>0&&Fr(Pe,Ae,Ve),yt.length>0&&Fr(yt,Ae,Ve),At.length>0&&Fr(At,Ae,Ve),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function Di(J,Ae,Ve,Fe){if((Ve.isScene===!0?Ve.overrideMaterial:null)!==null)return;if(D.state.transmissionRenderTarget[Fe.id]===void 0){const qt=je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float");D.state.transmissionRenderTarget[Fe.id]=new bs(1,1,{generateMipmaps:!0,type:qt?Wu:po,minFilter:Bu,samples:Re.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace})}const yt=D.state.transmissionRenderTarget[Fe.id],At=Fe.viewport||$;yt.setSize(At.z*L.transmissionResolutionScale,At.w*L.transmissionResolutionScale);const pt=L.getRenderTarget(),Pt=L.getActiveCubeFace(),Nt=L.getActiveMipmapLevel();L.setRenderTarget(yt),L.getClearColor(pe),de=L.getClearAlpha(),de<1&&L.setClearColor(16777215,.5),L.clear(),Me&&we.render(Ve);const Vt=L.toneMapping;L.toneMapping=ol;const Dt=Fe.viewport;if(Fe.viewport!==void 0&&(Fe.viewport=void 0),D.setupLightsView(Fe),Ce===!0&&et.setGlobalState(L.clippingPlanes,Fe),Fr(J,Ve,Fe),fe.updateMultisampleRenderTarget(yt),fe.updateRenderTargetMipmap(yt),je.has("WEBGL_multisampled_render_to_texture")===!1){let qt=!1;for(let yn=0,qn=Ae.length;yn<qn;yn++){const Nn=Ae[yn],{object:Jt,geometry:Tt,material:xn,group:Bt}=Nn;if(xn.side===Vl&&Jt.layers.test(Fe.layers)){const Oi=xn.side;xn.side=yo,xn.needsUpdate=!0,ma(Jt,Ve,Fe,Tt,xn,Bt),xn.side=Oi,xn.needsUpdate=!0,qt=!0}}qt===!0&&(fe.updateMultisampleRenderTarget(yt),fe.updateRenderTargetMipmap(yt))}L.setRenderTarget(pt,Pt,Nt),L.setClearColor(pe,de),Dt!==void 0&&(Fe.viewport=Dt),L.toneMapping=Vt}function Fr(J,Ae,Ve){const Fe=Ae.isScene===!0?Ae.overrideMaterial:null;for(let Pe=0,yt=J.length;Pe<yt;Pe++){const At=J[Pe],{object:pt,geometry:Pt,group:Nt}=At;let Vt=At.material;Vt.allowOverride===!0&&Fe!==null&&(Vt=Fe),pt.layers.test(Ve.layers)&&ma(pt,Ae,Ve,Pt,Vt,Nt)}}function ma(J,Ae,Ve,Fe,Pe,yt){J.onBeforeRender(L,Ae,Ve,Fe,Pe,yt),J.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Pe.onBeforeRender(L,Ae,Ve,Fe,J,yt),Pe.transparent===!0&&Pe.side===Vl&&Pe.forceSinglePass===!1?(Pe.side=yo,Pe.needsUpdate=!0,L.renderBufferDirect(Ve,Ae,Fe,Pe,J,yt),Pe.side=af,Pe.needsUpdate=!0,L.renderBufferDirect(Ve,Ae,Fe,Pe,J,yt),Pe.side=Vl):L.renderBufferDirect(Ve,Ae,Fe,Pe,J,yt),J.onAfterRender(L,Ae,Ve,Fe,Pe,yt)}function Zr(J,Ae,Ve){Ae.isScene!==!0&&(Ae=Oe);const Fe=q.get(J),Pe=D.state.lights,yt=D.state.shadowsArray,At=Pe.state.version,pt=mt.getParameters(J,Pe.state,yt,Ae,Ve),Pt=mt.getProgramCacheKey(pt);let Nt=Fe.programs;Fe.environment=J.isMeshStandardMaterial?Ae.environment:null,Fe.fog=Ae.fog,Fe.envMap=(J.isMeshStandardMaterial?Ie:Le).get(J.envMap||Fe.environment),Fe.envMapRotation=Fe.environment!==null&&J.envMap===null?Ae.environmentRotation:J.envMapRotation,Nt===void 0&&(J.addEventListener("dispose",vn),Nt=new Map,Fe.programs=Nt);let Vt=Nt.get(Pt);if(Vt!==void 0){if(Fe.currentProgram===Vt&&Fe.lightsStateVersion===At)return es(J,pt),Vt}else pt.uniforms=mt.getUniforms(J),J.onBeforeCompile(pt,L),Vt=mt.acquireProgram(pt,Pt),Nt.set(Pt,Vt),Fe.uniforms=pt.uniforms;const Dt=Fe.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Dt.clippingPlanes=et.uniform),es(J,pt),Fe.needsLights=Ra(J),Fe.lightsStateVersion=At,Fe.needsLights&&(Dt.ambientLightColor.value=Pe.state.ambient,Dt.lightProbe.value=Pe.state.probe,Dt.directionalLights.value=Pe.state.directional,Dt.directionalLightShadows.value=Pe.state.directionalShadow,Dt.spotLights.value=Pe.state.spot,Dt.spotLightShadows.value=Pe.state.spotShadow,Dt.rectAreaLights.value=Pe.state.rectArea,Dt.ltc_1.value=Pe.state.rectAreaLTC1,Dt.ltc_2.value=Pe.state.rectAreaLTC2,Dt.pointLights.value=Pe.state.point,Dt.pointLightShadows.value=Pe.state.pointShadow,Dt.hemisphereLights.value=Pe.state.hemi,Dt.directionalShadowMap.value=Pe.state.directionalShadowMap,Dt.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Dt.spotShadowMap.value=Pe.state.spotShadowMap,Dt.spotLightMatrix.value=Pe.state.spotLightMatrix,Dt.spotLightMap.value=Pe.state.spotLightMap,Dt.pointShadowMap.value=Pe.state.pointShadowMap,Dt.pointShadowMatrix.value=Pe.state.pointShadowMatrix),Fe.currentProgram=Vt,Fe.uniformsList=null,Vt}function $a(J){if(J.uniformsList===null){const Ae=J.currentProgram.getUniforms();J.uniformsList=CS.seqWithValue(Ae.seq,J.uniforms)}return J.uniformsList}function es(J,Ae){const Ve=q.get(J);Ve.outputColorSpace=Ae.outputColorSpace,Ve.batching=Ae.batching,Ve.batchingColor=Ae.batchingColor,Ve.instancing=Ae.instancing,Ve.instancingColor=Ae.instancingColor,Ve.instancingMorph=Ae.instancingMorph,Ve.skinning=Ae.skinning,Ve.morphTargets=Ae.morphTargets,Ve.morphNormals=Ae.morphNormals,Ve.morphColors=Ae.morphColors,Ve.morphTargetsCount=Ae.morphTargetsCount,Ve.numClippingPlanes=Ae.numClippingPlanes,Ve.numIntersection=Ae.numClipIntersection,Ve.vertexAlphas=Ae.vertexAlphas,Ve.vertexTangents=Ae.vertexTangents,Ve.toneMapping=Ae.toneMapping}function Ka(J,Ae,Ve,Fe,Pe){Ae.isScene!==!0&&(Ae=Oe),fe.resetTextureUnits();const yt=Ae.fog,At=Fe.isMeshStandardMaterial?Ae.environment:null,pt=X===null?L.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:Sd,Pt=(Fe.isMeshStandardMaterial?Ie:Le).get(Fe.envMap||At),Nt=Fe.vertexColors===!0&&!!Ve.attributes.color&&Ve.attributes.color.itemSize===4,Vt=!!Ve.attributes.tangent&&(!!Fe.normalMap||Fe.anisotropy>0),Dt=!!Ve.morphAttributes.position,qt=!!Ve.morphAttributes.normal,yn=!!Ve.morphAttributes.color;let qn=ol;Fe.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(qn=L.toneMapping);const Nn=Ve.morphAttributes.position||Ve.morphAttributes.normal||Ve.morphAttributes.color,Jt=Nn!==void 0?Nn.length:0,Tt=q.get(Fe),xn=D.state.lights;if(Ce===!0&&(Ue===!0||J!==ae)){const Vi=J===ae&&Fe.id===Q;et.setState(Fe,J,Vi)}let Bt=!1;Fe.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==xn.state.version||Tt.outputColorSpace!==pt||Pe.isBatchedMesh&&Tt.batching===!1||!Pe.isBatchedMesh&&Tt.batching===!0||Pe.isBatchedMesh&&Tt.batchingColor===!0&&Pe.colorTexture===null||Pe.isBatchedMesh&&Tt.batchingColor===!1&&Pe.colorTexture!==null||Pe.isInstancedMesh&&Tt.instancing===!1||!Pe.isInstancedMesh&&Tt.instancing===!0||Pe.isSkinnedMesh&&Tt.skinning===!1||!Pe.isSkinnedMesh&&Tt.skinning===!0||Pe.isInstancedMesh&&Tt.instancingColor===!0&&Pe.instanceColor===null||Pe.isInstancedMesh&&Tt.instancingColor===!1&&Pe.instanceColor!==null||Pe.isInstancedMesh&&Tt.instancingMorph===!0&&Pe.morphTexture===null||Pe.isInstancedMesh&&Tt.instancingMorph===!1&&Pe.morphTexture!==null||Tt.envMap!==Pt||Fe.fog===!0&&Tt.fog!==yt||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==et.numPlanes||Tt.numIntersection!==et.numIntersection)||Tt.vertexAlphas!==Nt||Tt.vertexTangents!==Vt||Tt.morphTargets!==Dt||Tt.morphNormals!==qt||Tt.morphColors!==yn||Tt.toneMapping!==qn||Tt.morphTargetsCount!==Jt)&&(Bt=!0):(Bt=!0,Tt.__version=Fe.version);let Oi=Tt.currentProgram;Bt===!0&&(Oi=Zr(Fe,Ae,Pe));let Qr=!1,Gn=!1,Er=!1;const Cn=Oi.getUniforms(),gi=Tt.uniforms;if(He.useProgram(Oi.program)&&(Qr=!0,Gn=!0,Er=!0),Fe.id!==Q&&(Q=Fe.id,Gn=!0),Qr||ae!==J){He.buffers.depth.getReversed()&&J.reversedDepth!==!0&&(J._reversedDepth=!0,J.updateProjectionMatrix()),Cn.setValue(Z,"projectionMatrix",J.projectionMatrix),Cn.setValue(Z,"viewMatrix",J.matrixWorldInverse);const Hi=Cn.map.cameraPosition;Hi!==void 0&&Hi.setValue(Z,ft.setFromMatrixPosition(J.matrixWorld)),Re.logarithmicDepthBuffer&&Cn.setValue(Z,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial)&&Cn.setValue(Z,"isOrthographic",J.isOrthographicCamera===!0),ae!==J&&(ae=J,Gn=!0,Er=!0)}if(Tt.needsLights&&(xn.state.directionalShadowMap.length>0&&Cn.setValue(Z,"directionalShadowMap",xn.state.directionalShadowMap,fe),xn.state.spotShadowMap.length>0&&Cn.setValue(Z,"spotShadowMap",xn.state.spotShadowMap,fe),xn.state.pointShadowMap.length>0&&Cn.setValue(Z,"pointShadowMap",xn.state.pointShadowMap,fe)),Pe.isSkinnedMesh){Cn.setOptional(Z,Pe,"bindMatrix"),Cn.setOptional(Z,Pe,"bindMatrixInverse");const Vi=Pe.skeleton;Vi&&(Vi.boneTexture===null&&Vi.computeBoneTexture(),Cn.setValue(Z,"boneTexture",Vi.boneTexture,fe))}Pe.isBatchedMesh&&(Cn.setOptional(Z,Pe,"batchingTexture"),Cn.setValue(Z,"batchingTexture",Pe._matricesTexture,fe),Cn.setOptional(Z,Pe,"batchingIdTexture"),Cn.setValue(Z,"batchingIdTexture",Pe._indirectTexture,fe),Cn.setOptional(Z,Pe,"batchingColorTexture"),Pe._colorsTexture!==null&&Cn.setValue(Z,"batchingColorTexture",Pe._colorsTexture,fe));const vi=Ve.morphAttributes;if((vi.position!==void 0||vi.normal!==void 0||vi.color!==void 0)&&ht.update(Pe,Ve,Oi),(Gn||Tt.receiveShadow!==Pe.receiveShadow)&&(Tt.receiveShadow=Pe.receiveShadow,Cn.setValue(Z,"receiveShadow",Pe.receiveShadow)),Fe.isMeshGouraudMaterial&&Fe.envMap!==null&&(gi.envMap.value=Pt,gi.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1),Fe.isMeshStandardMaterial&&Fe.envMap===null&&Ae.environment!==null&&(gi.envMapIntensity.value=Ae.environmentIntensity),gi.dfgLUT!==void 0&&(gi.dfgLUT.value=QAe()),Gn&&(Cn.setValue(Z,"toneMappingExposure",L.toneMappingExposure),Tt.needsLights&&So(gi,Er),yt&&Fe.fog===!0&&xt.refreshFogUniforms(gi,yt),xt.refreshMaterialUniforms(gi,Fe,le,ne,D.state.transmissionRenderTarget[J.id]),CS.upload(Z,$a(Tt),gi,fe)),Fe.isShaderMaterial&&Fe.uniformsNeedUpdate===!0&&(CS.upload(Z,$a(Tt),gi,fe),Fe.uniformsNeedUpdate=!1),Fe.isSpriteMaterial&&Cn.setValue(Z,"center",Pe.center),Cn.setValue(Z,"modelViewMatrix",Pe.modelViewMatrix),Cn.setValue(Z,"normalMatrix",Pe.normalMatrix),Cn.setValue(Z,"modelMatrix",Pe.matrixWorld),Fe.isShaderMaterial||Fe.isRawShaderMaterial){const Vi=Fe.uniformsGroups;for(let Hi=0,ts=Vi.length;Hi<ts;Hi++){const Tr=Vi[Hi];nt.update(Tr,Oi),nt.bind(Tr,Oi)}}return Oi}function So(J,Ae){J.ambientLightColor.needsUpdate=Ae,J.lightProbe.needsUpdate=Ae,J.directionalLights.needsUpdate=Ae,J.directionalLightShadows.needsUpdate=Ae,J.pointLights.needsUpdate=Ae,J.pointLightShadows.needsUpdate=Ae,J.spotLights.needsUpdate=Ae,J.spotLightShadows.needsUpdate=Ae,J.rectAreaLights.needsUpdate=Ae,J.hemisphereLights.needsUpdate=Ae}function Ra(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(J,Ae,Ve){const Fe=q.get(J);Fe.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,Fe.__autoAllocateDepthBuffer===!1&&(Fe.__useRenderToTexture=!1),q.get(J.texture).__webglTexture=Ae,q.get(J.depthTexture).__webglTexture=Fe.__autoAllocateDepthBuffer?void 0:Ve,Fe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,Ae){const Ve=q.get(J);Ve.__webglFramebuffer=Ae,Ve.__useDefaultFramebuffer=Ae===void 0};const Ja=Z.createFramebuffer();this.setRenderTarget=function(J,Ae=0,Ve=0){X=J,j=Ae,W=Ve;let Fe=null,Pe=!1,yt=!1;if(J){const pt=q.get(J);if(pt.__useDefaultFramebuffer!==void 0){He.bindFramebuffer(Z.FRAMEBUFFER,pt.__webglFramebuffer),$.copy(J.viewport),ie.copy(J.scissor),me=J.scissorTest,He.viewport($),He.scissor(ie),He.setScissorTest(me),Q=-1;return}else if(pt.__webglFramebuffer===void 0)fe.setupRenderTarget(J);else if(pt.__hasExternalTextures)fe.rebindTextures(J,q.get(J.texture).__webglTexture,q.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Vt=J.depthTexture;if(pt.__boundDepthTexture!==Vt){if(Vt!==null&&q.has(Vt)&&(J.width!==Vt.image.width||J.height!==Vt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(J)}}const Pt=J.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(yt=!0);const Nt=q.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(Nt[Ae])?Fe=Nt[Ae][Ve]:Fe=Nt[Ae],Pe=!0):J.samples>0&&fe.useMultisampledRTT(J)===!1?Fe=q.get(J).__webglMultisampledFramebuffer:Array.isArray(Nt)?Fe=Nt[Ve]:Fe=Nt,$.copy(J.viewport),ie.copy(J.scissor),me=J.scissorTest}else $.copy(re).multiplyScalar(le).floor(),ie.copy(oe).multiplyScalar(le).floor(),me=Ee;if(Ve!==0&&(Fe=Ja),He.bindFramebuffer(Z.FRAMEBUFFER,Fe)&&He.drawBuffers(J,Fe),He.viewport($),He.scissor(ie),He.setScissorTest(me),Pe){const pt=q.get(J.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,pt.__webglTexture,Ve)}else if(yt){const pt=Ae;for(let Pt=0;Pt<J.textures.length;Pt++){const Nt=q.get(J.textures[Pt]);Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0+Pt,Nt.__webglTexture,Ve,pt)}}else if(J!==null&&Ve!==0){const pt=q.get(J.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,pt.__webglTexture,Ve)}Q=-1},this.readRenderTargetPixels=function(J,Ae,Ve,Fe,Pe,yt,At,pt=0){if(!(J&&J.isWebGLRenderTarget)){Ht("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pt=q.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&At!==void 0&&(Pt=Pt[At]),Pt){He.bindFramebuffer(Z.FRAMEBUFFER,Pt);try{const Nt=J.textures[pt],Vt=Nt.format,Dt=Nt.type;if(!Re.textureFormatReadable(Vt)){Ht("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Re.textureTypeReadable(Dt)){Ht("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=J.width-Fe&&Ve>=0&&Ve<=J.height-Pe&&(J.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+pt),Z.readPixels(Ae,Ve,Fe,Pe,tt.convert(Vt),tt.convert(Dt),yt))}finally{const Nt=X!==null?q.get(X).__webglFramebuffer:null;He.bindFramebuffer(Z.FRAMEBUFFER,Nt)}}},this.readRenderTargetPixelsAsync=async function(J,Ae,Ve,Fe,Pe,yt,At,pt=0){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pt=q.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&At!==void 0&&(Pt=Pt[At]),Pt)if(Ae>=0&&Ae<=J.width-Fe&&Ve>=0&&Ve<=J.height-Pe){He.bindFramebuffer(Z.FRAMEBUFFER,Pt);const Nt=J.textures[pt],Vt=Nt.format,Dt=Nt.type;if(!Re.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const qt=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,qt),Z.bufferData(Z.PIXEL_PACK_BUFFER,yt.byteLength,Z.STREAM_READ),J.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+pt),Z.readPixels(Ae,Ve,Fe,Pe,tt.convert(Vt),tt.convert(Dt),0);const yn=X!==null?q.get(X).__webglFramebuffer:null;He.bindFramebuffer(Z.FRAMEBUFFER,yn);const qn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await u_e(Z,qn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,qt),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,yt),Z.deleteBuffer(qt),Z.deleteSync(qn),yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,Ae=null,Ve=0){const Fe=Math.pow(2,-Ve),Pe=Math.floor(J.image.width*Fe),yt=Math.floor(J.image.height*Fe),At=Ae!==null?Ae.x:0,pt=Ae!==null?Ae.y:0;fe.setTexture2D(J,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ve,0,0,At,pt,Pe,yt),He.unbindTexture()};const Eo=Z.createFramebuffer(),Ot=Z.createFramebuffer();this.copyTextureToTexture=function(J,Ae,Ve=null,Fe=null,Pe=0,yt=null){yt===null&&(Pe!==0?(vg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),yt=Pe,Pe=0):yt=0);let At,pt,Pt,Nt,Vt,Dt,qt,yn,qn;const Nn=J.isCompressedTexture?J.mipmaps[yt]:J.image;if(Ve!==null)At=Ve.max.x-Ve.min.x,pt=Ve.max.y-Ve.min.y,Pt=Ve.isBox3?Ve.max.z-Ve.min.z:1,Nt=Ve.min.x,Vt=Ve.min.y,Dt=Ve.isBox3?Ve.min.z:0;else{const vi=Math.pow(2,-Pe);At=Math.floor(Nn.width*vi),pt=Math.floor(Nn.height*vi),J.isDataArrayTexture?Pt=Nn.depth:J.isData3DTexture?Pt=Math.floor(Nn.depth*vi):Pt=1,Nt=0,Vt=0,Dt=0}Fe!==null?(qt=Fe.x,yn=Fe.y,qn=Fe.z):(qt=0,yn=0,qn=0);const Jt=tt.convert(Ae.format),Tt=tt.convert(Ae.type);let xn;Ae.isData3DTexture?(fe.setTexture3D(Ae,0),xn=Z.TEXTURE_3D):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?(fe.setTexture2DArray(Ae,0),xn=Z.TEXTURE_2D_ARRAY):(fe.setTexture2D(Ae,0),xn=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,Ae.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,Ae.unpackAlignment);const Bt=Z.getParameter(Z.UNPACK_ROW_LENGTH),Oi=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Qr=Z.getParameter(Z.UNPACK_SKIP_PIXELS),Gn=Z.getParameter(Z.UNPACK_SKIP_ROWS),Er=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Nn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Nn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Nt),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Vt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Dt);const Cn=J.isDataArrayTexture||J.isData3DTexture,gi=Ae.isDataArrayTexture||Ae.isData3DTexture;if(J.isDepthTexture){const vi=q.get(J),Vi=q.get(Ae),Hi=q.get(vi.__renderTarget),ts=q.get(Vi.__renderTarget);He.bindFramebuffer(Z.READ_FRAMEBUFFER,Hi.__webglFramebuffer),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ts.__webglFramebuffer);for(let Tr=0;Tr<Pt;Tr++)Cn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,q.get(J).__webglTexture,Pe,Dt+Tr),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,q.get(Ae).__webglTexture,yt,qn+Tr)),Z.blitFramebuffer(Nt,Vt,At,pt,qt,yn,At,pt,Z.DEPTH_BUFFER_BIT,Z.NEAREST);He.bindFramebuffer(Z.READ_FRAMEBUFFER,null),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(Pe!==0||J.isRenderTargetTexture||q.has(J)){const vi=q.get(J),Vi=q.get(Ae);He.bindFramebuffer(Z.READ_FRAMEBUFFER,Eo),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Ot);for(let Hi=0;Hi<Pt;Hi++)Cn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,vi.__webglTexture,Pe,Dt+Hi):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,vi.__webglTexture,Pe),gi?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Vi.__webglTexture,yt,qn+Hi):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Vi.__webglTexture,yt),Pe!==0?Z.blitFramebuffer(Nt,Vt,At,pt,qt,yn,At,pt,Z.COLOR_BUFFER_BIT,Z.NEAREST):gi?Z.copyTexSubImage3D(xn,yt,qt,yn,qn+Hi,Nt,Vt,At,pt):Z.copyTexSubImage2D(xn,yt,qt,yn,Nt,Vt,At,pt);He.bindFramebuffer(Z.READ_FRAMEBUFFER,null),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else gi?J.isDataTexture||J.isData3DTexture?Z.texSubImage3D(xn,yt,qt,yn,qn,At,pt,Pt,Jt,Tt,Nn.data):Ae.isCompressedArrayTexture?Z.compressedTexSubImage3D(xn,yt,qt,yn,qn,At,pt,Pt,Jt,Nn.data):Z.texSubImage3D(xn,yt,qt,yn,qn,At,pt,Pt,Jt,Tt,Nn):J.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,yt,qt,yn,At,pt,Jt,Tt,Nn.data):J.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,yt,qt,yn,Nn.width,Nn.height,Jt,Nn.data):Z.texSubImage2D(Z.TEXTURE_2D,yt,qt,yn,At,pt,Jt,Tt,Nn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Bt),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Oi),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Qr),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Gn),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Er),yt===0&&Ae.generateMipmaps&&Z.generateMipmap(xn),He.unbindTexture()},this.initRenderTarget=function(J){q.get(J).__webglFramebuffer===void 0&&fe.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?fe.setTextureCube(J,0):J.isData3DTexture?fe.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?fe.setTexture2DArray(J,0):fe.setTexture2D(J,0),He.unbindTexture()},this.resetState=function(){j=0,W=0,X=null,He.reset(),vt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return gs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(e),n.unpackColorSpace=Fn._getUnpackColorSpace()}}const eMe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:TT,AddEquation:cd,AddOperation:rq,AdditiveAnimationBlendMode:FN,AdditiveBlending:C1,AgXToneMapping:CN,AlphaFormat:LN,AlwaysCompare:vq,AlwaysDepth:N1,AlwaysStencilFunc:tI,AmbientLight:c7,AnimationAction:v7,AnimationClip:By,AnimationLoader:Zbe,AnimationMixer:wxe,AnimationObjectGroup:Axe,AnimationUtils:Ybe,ArcCurve:Fq,ArrayCamera:p7,ArrowHelper:Zxe,AttachedBindMode:eI,Audio:m7,AudioAnalyser:mxe,AudioContext:cD,AudioListener:dxe,AudioLoader:uxe,AxesHelper:Qxe,BackSide:yo,BasicDepthPacking:uq,BasicShadowMap:k9,BatchedMesh:Pq,Bone:jN,BooleanKeyframeTrack:vp,Box2:Uxe,Box3:ua,Box3Helper:Kxe,BoxGeometry:gp,BoxHelper:$xe,BufferAttribute:di,BufferGeometry:cn,BufferGeometryLoader:h7,ByteType:PN,Cache:zu,Camera:FT,CameraHelper:Yxe,CanvasTexture:vbe,CapsuleGeometry:qT,CatmullRomCurve3:kq,CineonToneMapping:MN,CircleGeometry:WT,ClampToEdgeWrapping:Jo,Clock:fD,Color:Ct,ColorKeyframeTrack:aD,ColorManagement:Fn,CompressedArrayTexture:mbe,CompressedCubeTexture:gbe,CompressedTexture:HT,CompressedTextureLoader:Qbe,ConeGeometry:g_,ConstantAlphaFactor:tq,ConstantColorFactor:Q9,Controls:tSe,CubeCamera:Aq,CubeDepthTexture:Lq,CubeReflectionMapping:qu,CubeRefractionMapping:xd,CubeTexture:p_,CubeTextureLoader:exe,CubeUVReflectionMapping:Gg,CubicBezierCurve:KN,CubicBezierCurve3:Bq,CubicInterpolant:n7,CullFaceBack:JR,CullFaceFront:F9,CullFaceFrontBack:bye,CullFaceNone:U9,Curve:Ql,CurvePath:Gq,CustomBlending:B9,CustomToneMapping:wN,CylinderGeometry:m_,Cylindrical:Lxe,Data3DTexture:UT,DataArrayTexture:LT,DataTexture:Yl,DataTextureLoader:txe,DataUtils:z_e,DecrementStencilOp:Fye,DecrementWrapStencilOp:Bye,DefaultLoadingManager:a7,DepthFormat:ju,DepthStencilFormat:hd,DepthTexture:xg,DetachedBindMode:aq,DirectionalLight:u7,DirectionalLightHelper:Xxe,DiscreteInterpolant:i7,DodecahedronGeometry:jT,DoubleSide:Vl,DstAlphaFactor:Y9,DstColorFactor:K9,DynamicCopyUsage:e_e,DynamicDrawUsage:Yye,DynamicReadUsage:Jye,EdgesGeometry:Uq,EllipseCurve:XT,EqualCompare:pq,EqualDepth:O1,EqualStencilFunc:Hye,EquirectangularReflectionMapping:Ty,EquirectangularRefractionMapping:Ay,Euler:Es,EventDispatcher:$u,ExternalTexture:YN,ExtrudeGeometry:YT,FileLoader:of,Float16BufferAttribute:X_e,Float32BufferAttribute:Ft,FloatType:vo,Fog:BT,FogExp2:kT,FramebufferTexture:pbe,FrontSide:af,Frustum:Vg,FrustumArray:VT,GLBufferAttribute:Nxe,GLSL1:n_e,GLSL3:nI,GreaterCompare:mq,GreaterDepth:U1,GreaterEqualCompare:OT,GreaterEqualDepth:L1,GreaterEqualStencilFunc:Xye,GreaterStencilFunc:Wye,GridHelper:Wxe,Group:tg,HalfFloatType:Wu,HemisphereLight:o7,HemisphereLightHelper:qxe,IcosahedronGeometry:$T,ImageBitmapLoader:lxe,ImageLoader:zy,ImageUtils:Sq,IncrementStencilOp:Uye,IncrementWrapStencilOp:kye,InstancedBufferAttribute:lp,InstancedBufferGeometry:uD,InstancedInterleavedBuffer:Pxe,InstancedMesh:Iq,Int16BufferAttribute:W_e,Int32BufferAttribute:j_e,Int8BufferAttribute:V_e,IntType:MT,InterleavedBuffer:zT,InterleavedBufferAttribute:sp,Interpolant:__,InterpolateDiscrete:Cy,InterpolateLinear:gE,InterpolateSmooth:MS,InterpolationSamplingMode:a_e,InterpolationSamplingType:r_e,InvertStencilOp:zye,KeepStencilOp:Fh,KeyframeTrack:ml,LOD:Cq,LatheGeometry:KT,Layers:_g,LessCompare:hq,LessDepth:D1,LessEqualCompare:DT,LessEqualDepth:ap,LessEqualStencilFunc:qye,LessStencilFunc:Vye,Light:Od,LightProbe:d7,Line:Td,Line3:Bxe,LineBasicMaterial:xo,LineCurve:JN,LineCurve3:zq,LineDashedMaterial:e7,LineLoop:Nq,LineSegments:Ku,LinearFilter:mi,LinearInterpolant:rD,LinearMipMapLinearFilter:Tye,LinearMipMapNearestFilter:Eye,LinearMipmapLinearFilter:Bu,LinearMipmapNearestFilter:Y0,LinearSRGBColorSpace:Sd,LinearToneMapping:TN,LinearTransfer:Iy,Loader:Qo,LoaderUtils:sI,LoadingManager:oD,LoopOnce:oq,LoopPingPong:lq,LoopRepeat:sq,MOUSE:Lh,Material:Ya,MaterialLoader:aA,MathUtils:xq,Matrix2:mD,Matrix3:un,Matrix4:en,MaxEquation:H9,Mesh:er,MeshBasicMaterial:pf,MeshDepthMaterial:iA,MeshDistanceMaterial:rA,MeshLambertMaterial:Zq,MeshMatcapMaterial:Qq,MeshNormalMaterial:Jq,MeshPhongMaterial:$q,MeshPhysicalMaterial:Yq,MeshStandardMaterial:nD,MeshToonMaterial:Kq,MinEquation:V9,MirroredRepeatWrapping:wy,MixOperation:iq,MultiplyBlending:QR,MultiplyOperation:d_,NearestFilter:br,NearestMipMapLinearFilter:Sye,NearestMipMapNearestFilter:xye,NearestMipmapLinearFilter:Qm,NearestMipmapNearestFilter:IN,NeutralToneMapping:RN,NeverCompare:dq,NeverDepth:P1,NeverStencilFunc:Gye,NoBlending:Vu,NoColorSpace:zc,NoNormalPacking:Pye,NoToneMapping:ol,NormalAnimationBlendMode:NT,NormalBlending:$h,NormalGAPacking:Dye,NormalRGPacking:Nye,NotEqualCompare:gq,NotEqualDepth:F1,NotEqualStencilFunc:jye,NumberKeyframeTrack:Fy,Object3D:Hn,ObjectLoader:oxe,ObjectSpaceNormalMap:fq,OctahedronGeometry:v_,OneFactor:W9,OneMinusConstantAlphaFactor:nq,OneMinusConstantColorFactor:eq,OneMinusDstAlphaFactor:$9,OneMinusDstColorFactor:J9,OneMinusSrcAlphaFactor:I1,OneMinusSrcColorFactor:X9,OrthographicCamera:Xc,PCFShadowMap:og,PCFSoftShadowMap:X0,PMREMGenerator:cI,Path:bE,PerspectiveCamera:_r,Plane:kc,PlaneGeometry:mf,PlaneHelper:Jxe,PointLight:l7,PointLightHelper:Vxe,Points:Dq,PointsMaterial:XN,PolarGridHelper:jxe,PolyhedronGeometry:Dd,PositionalAudio:pxe,PropertyBinding:Vn,PropertyMixer:g7,QuadraticBezierCurve:ZN,QuadraticBezierCurve3:QN,Quaternion:Xa,QuaternionKeyframeTrack:b_,QuaternionLinearInterpolant:r7,R11_EAC_Format:W1,RED_GREEN_RGTC2_Format:pE,RED_RGTC1_Format:dE,REVISION:f_,RG11_EAC_Format:X1,RGBADepthPacking:cq,RGBAFormat:ja,RGBAIntegerFormat:PT,RGBA_ASTC_10x10_Format:oE,RGBA_ASTC_10x5_Format:iE,RGBA_ASTC_10x6_Format:rE,RGBA_ASTC_10x8_Format:aE,RGBA_ASTC_12x10_Format:sE,RGBA_ASTC_12x12_Format:lE,RGBA_ASTC_4x4_Format:$1,RGBA_ASTC_5x4_Format:K1,RGBA_ASTC_5x5_Format:J1,RGBA_ASTC_6x5_Format:Z1,RGBA_ASTC_6x6_Format:Q1,RGBA_ASTC_8x5_Format:eE,RGBA_ASTC_8x6_Format:tE,RGBA_ASTC_8x8_Format:nE,RGBA_BPTC_Format:uE,RGBA_ETC2_EAC_Format:q1,RGBA_PVRTC_2BPPV1_Format:G1,RGBA_PVRTC_4BPPV1_Format:z1,RGBA_S3TC_DXT1_Format:K0,RGBA_S3TC_DXT3_Format:J0,RGBA_S3TC_DXT5_Format:Z0,RGBDepthPacking:Rye,RGBFormat:UN,RGBIntegerFormat:Aye,RGB_BPTC_SIGNED_Format:cE,RGB_BPTC_UNSIGNED_Format:fE,RGB_ETC1_Format:V1,RGB_ETC2_Format:H1,RGB_PVRTC_2BPPV1_Format:B1,RGB_PVRTC_4BPPV1_Format:k1,RGB_S3TC_DXT1_Format:$0,RGDepthPacking:Iye,RGFormat:op,RGIntegerFormat:IT,RawShaderMaterial:tD,Ray:mp,Raycaster:y7,RectAreaLight:f7,RedFormat:RT,RedIntegerFormat:h_,ReinhardToneMapping:AN,RenderTarget:BN,RenderTarget3D:Cxe,RepeatWrapping:My,ReplaceStencilOp:Lye,ReverseSubtractEquation:G9,RingGeometry:JT,SIGNED_R11_EAC_Format:j1,SIGNED_RED_GREEN_RGTC2_Format:mE,SIGNED_RED_RGTC1_Format:hE,SIGNED_RG11_EAC_Format:Y1,SRGBColorSpace:qa,SRGBTransfer:ni,Scene:qN,ShaderChunk:mn,ShaderLib:Fl,ShaderMaterial:Ts,ShadowMaterial:Xq,Shape:Jh,ShapeGeometry:ZT,ShapePath:eSe,ShapeUtils:ql,ShortType:NN,Skeleton:GT,SkeletonHelper:Gxe,SkinnedMesh:Rq,Source:pd,Sphere:ca,SphereGeometry:y_,Spherical:xE,SphericalHarmonics3:lD,SplineCurve:eD,SpotLight:s7,SpotLightHelper:zxe,Sprite:wq,SpriteMaterial:WN,SrcAlphaFactor:R1,SrcAlphaSaturateFactor:Z9,SrcColorFactor:j9,StaticCopyUsage:Qye,StaticDrawUsage:Py,StaticReadUsage:Kye,StereoCamera:cxe,StreamCopyUsage:t_e,StreamDrawUsage:$ye,StreamReadUsage:Zye,StringKeyframeTrack:yp,SubtractEquation:z9,SubtractiveBlending:ZR,TOUCH:Uh,TangentSpaceNormalMap:Nd,TetrahedronGeometry:QT,Texture:Qi,TextureLoader:nxe,TextureUtils:oSe,Timer:Dxe,TimestampQuery:i_e,TorusGeometry:eA,TorusKnotGeometry:tA,Triangle:Yo,TriangleFanDrawMode:Cye,TriangleStripDrawMode:wye,TrianglesDrawMode:Mye,TubeGeometry:nA,UVMapping:AT,Uint16BufferAttribute:zN,Uint32BufferAttribute:GN,Uint8BufferAttribute:H_e,Uint8ClampedBufferAttribute:q_e,Uniform:pD,UniformsGroup:Ixe,UniformsLib:wt,UniformsUtils:VN,UnsignedByteType:po,UnsignedInt101111Type:ON,UnsignedInt248Type:mg,UnsignedInt5999Type:DN,UnsignedIntType:fl,UnsignedShort4444Type:wT,UnsignedShort5551Type:CT,UnsignedShortType:pg,VSMShadowMap:Vh,Vector2:st,Vector3:se,Vector4:ri,VectorKeyframeTrack:ky,VideoFrameTexture:hbe,VideoTexture:Oq,WebGL3DRenderTarget:I_e,WebGLArrayRenderTarget:R_e,WebGLCoordinateSystem:gs,WebGLCubeRenderTarget:HN,WebGLRenderTarget:bs,WebGLRenderer:M7,WebGLUtils:A7,WebGPUCoordinateSystem:gg,WebXRController:wS,WireframeGeometry:jq,WrapAroundEnding:Ry,ZeroCurvatureEnding:Hh,ZeroFactor:q9,ZeroSlopeEnding:qh,ZeroStencilOp:Oye,createCanvasElement:bq,error:Ht,getConsoleFunction:l_e,log:Dy,setConsoleFunction:s_e,warn:Mt,warnOnce:vg},Symbol.toStringTag,{value:"Module"})),cB=t=>{let e;const n=new Set,i=(c,d)=>{const p=typeof c=="function"?c(e):c;if(!Object.is(p,e)){const g=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,g))}},r=()=>e,s={setState:i,getState:r,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=e=t(i,r,s);return s},tMe=(t=>t?cB(t):cB),{useSyncExternalStoreWithSelector:nMe}=iae,iMe=t=>t;function rMe(t,e=iMe,n){const i=nMe(t.subscribe,t.getState,t.getInitialState,e,n);return ds.useDebugValue(i),i}const fB=(t,e)=>{const n=tMe(t),i=(r,a=e)=>rMe(n,r,a);return Object.assign(i,n),i},aMe=((t,e)=>t?fB(t,e):fB),oMe=t=>typeof t=="object"&&typeof t.then=="function",cS=[];function sMe(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function lMe(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const a of cS)if(sMe(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=cS.indexOf(r);a!==-1&&cS.splice(a,1)},promise:(oMe(t)?t:t(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(cS.push(r),!n)throw r.promise}const uMe=(t,e,n)=>lMe(t,e,!1,n);var hI=zB();const cMe=dl(hI);function gD(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=gD(i,e,n);if(r)return r;i=e?null:i.sibling}}function w7(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const vD=w7(G.createContext(null));class C7 extends G.Component{render(){return G.createElement(vD.Provider,{value:this._reactInternals},this.props.children)}}function R7(){const t=G.useContext(vD);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const n of[t,t==null?void 0:t.alternate]){if(!n)continue;const i=gD(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}const fMe=Symbol.for("react.context"),dMe=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===fMe;function hMe(){const t=R7(),[e]=G.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;dMe(i)&&i!==vD&&!e.has(i)&&e.set(i,G.use(w7(i))),n=n.return}return e}function pMe(){const t=hMe();return G.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>G.createElement(e,null,G.createElement(n.Provider,{...i,value:t.get(n)})),e=>G.createElement(C7,{...e})),[t])}function I7(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const P7=t=>t&&t.isOrthographicCamera,mMe=t=>t&&t.hasOwnProperty("current"),gMe=t=>t!=null&&(typeof t=="string"||typeof t=="number"||t.isColor),x_=((t,e)=>typeof window<"u"&&(((t=window.document)==null?void 0:t.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?G.useLayoutEffect:G.useEffect;function N7(t){const e=G.useRef(t);return x_(()=>void(e.current=t),[t]),e}function vMe(){const t=R7(),e=pMe();return G.useMemo(()=>({children:n})=>{const r=!!gD(t,!0,a=>a.type===G.StrictMode)?G.StrictMode:G.Fragment;return ee.jsx(r,{children:ee.jsx(e,{children:n})})},[t,e])}function yMe({set:t}){return x_(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const _Me=(t=>(t=class extends G.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},t.getDerivedStateFromError=()=>({error:!0}),t))();function D7(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}function Hm(t){var e;return(e=t.__r3f)==null?void 0:e.root.getState()}const Ki={obj:t=>t===Object(t)&&!Ki.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,nul:t=>t===null,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Ki.str(t)||Ki.num(t)||Ki.boo(t))return t===e;const a=Ki.obj(t);if(a&&i==="reference")return t===e;const o=Ki.arr(t);if(o&&n==="reference")return t===e;if((o||a)&&t===e)return!0;let s;for(s in t)if(!(s in e))return!1;if(a&&n==="shallow"&&i==="shallow"){for(s in r?e:t)if(!Ki.equ(t[s],e[s],{strict:r,objects:"reference"}))return!1}else for(s in r?e:t)if(t[s]!==e[s])return!1;if(Ki.und(s)){if(o&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function bMe(t){t.type!=="Scene"&&(t.dispose==null||t.dispose());for(const e in t){const n=t[e];(n==null?void 0:n.type)!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const O7=["children","key","ref"];function xMe(t){const e={};for(const n in t)O7.includes(n)||(e[n]=t[n]);return e}function SE(t,e,n,i){const r=t;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:xMe(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Gy(t,e){if(!e.includes("-"))return{root:t,key:e,target:t[e]};if(e in t)return{root:t,key:e,target:t[e]};let n=t;const i=e.split("-");for(const r of i){if(typeof n!="object"||n===null){if(n!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:n,key:a,target:void 0}}return{root:t,key:e,target:void 0}}e=r,t=n,n=n[e]}return{root:t,key:e,target:n}}const dB=/-\d+$/;function EE(t,e){if(Ki.str(e.props.attach)){if(dB.test(e.props.attach)){const r=e.props.attach.replace(dB,""),{root:a,key:o}=Gy(t.object,r);Array.isArray(a[o])||(a[o]=[])}const{root:n,key:i}=Gy(t.object,e.props.attach);e.previousAttach=n[i],n[i]=e.object}else Ki.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function TE(t,e){if(Ki.str(e.props.attach)){const{root:n,key:i}=Gy(t.object,e.props.attach),r=e.previousAttach;r===void 0?delete n[i]:n[i]=r}else e.previousAttach==null||e.previousAttach(t.object,e.object);delete e.previousAttach}const pI=[...O7,"args","dispose","attach","object","onUpdate","dispose"],hB=new Map;function SMe(t){let e=hB.get(t.constructor);try{e||(e=new t.constructor,hB.set(t.constructor,e))}catch{}return e}function EMe(t,e){const n={};for(const i in e)if(!pI.includes(i)&&!Ki.equ(e[i],t.props[i])){n[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(n[r]=e[r])}for(const i in t.props){if(pI.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=Gy(t.object,i);if(r.constructor&&r.constructor.length===0){const o=SMe(r);Ki.und(o)||(n[a]=o[a])}else n[a]=0}return n}const TMe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],AMe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function fd(t,e){var n;const i=t.__r3f,r=i&&I7(i).getState(),a=i==null?void 0:i.eventCount;for(const s in e){let u=e[s];if(pI.includes(s))continue;if(i&&AMe.test(s)){typeof u=="function"?i.handlers[s]=u:delete i.handlers[s],i.eventCount=Object.keys(i.handlers).length;continue}if(u===void 0)continue;let{root:c,key:d,target:p}=Gy(t,s);if(p===void 0&&(typeof c!="object"||c===null))throw Error(`R3F: Cannot set "${s}". Ensure it is an object before setting "${d}".`);if(p instanceof _g&&u instanceof _g)p.mask=u.mask;else if(p instanceof Ct&&gMe(u))p.set(u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&u!=null&&u.constructor&&p.constructor===u.constructor)p.copy(u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(u))typeof p.fromArray=="function"?p.fromArray(u):p.set(...u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof u=="number")typeof p.setScalar=="function"?p.setScalar(u):p.set(u);else{var o;c[d]=u,r&&!r.linear&&TMe.includes(d)&&(o=c[d])!=null&&o.isTexture&&c[d].format===ja&&c[d].type===po&&(c[d].colorSpace=qa)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(n=i.object)!=null&&n.isObject3D&&a!==i.eventCount){const s=i.object,u=r.internal.interaction.indexOf(s);u>-1&&r.internal.interaction.splice(u,1),i.eventCount&&s.raycast!==null&&r.internal.interaction.push(s)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&qg(i),t}function qg(t){var e;if(!t.parent)return;t.props.onUpdate==null||t.props.onUpdate(t.object);const n=(e=t.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function MMe(t,e){t.manual||(P7(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix())}const Xo=t=>t==null?void 0:t.isObject3D;function fS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function L7(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function wMe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{L7(n.capturedMap,e,i,r)})}function CMe(t){function e(u){const{internal:c}=t.getState(),d=u.offsetX-c.initialClick[0],p=u.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+p*p))}function n(u){return u.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+d]}))}function i(u,c){const d=t.getState(),p=new Set,g=[],y=c?c(d.internal.interaction):d.internal.interaction;for(let A=0;A<y.length;A++){const R=Hm(y[A]);R&&(R.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(u,d);function b(A){const R=Hm(A);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var I;R.events.compute==null||R.events.compute(u,R,(I=R.previousRoot)==null?void 0:I.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(A,!0):[]}let T=y.flatMap(b).sort((A,R)=>{const I=Hm(A.object),N=Hm(R.object);return!I||!N?A.distance-R.distance:N.events.priority-I.events.priority||A.distance-R.distance}).filter(A=>{const R=fS(A);return p.has(R)?!1:(p.add(R),!0)});d.events.filter&&(T=d.events.filter(T,d));for(const A of T){let R=A.object;for(;R;){var S;(S=R.__r3f)!=null&&S.eventCount&&g.push({...A,eventObject:R}),R=R.parent}}if("pointerId"in u&&d.internal.capturedMap.has(u.pointerId))for(let A of d.internal.capturedMap.get(u.pointerId).values())p.has(fS(A.intersection))||g.push(A.intersection);return g}function r(u,c,d,p){if(u.length){const g={stopped:!1};for(const y of u){let b=Hm(y.object);if(b||y.object.traverseAncestors(T=>{const S=Hm(T);if(S)return b=S,!1}),b){const{raycaster:T,pointer:S,camera:A,internal:R}=b,I=new se(S.x,S.y,0).unproject(A),N=L=>{var F,j;return(F=(j=R.capturedMap.get(L))==null?void 0:j.has(y.eventObject))!=null?F:!1},D=L=>{const F={intersection:y,target:c.target};R.capturedMap.has(L)?R.capturedMap.get(L).set(y.eventObject,F):R.capturedMap.set(L,new Map([[y.eventObject,F]])),c.target.setPointerCapture(L)},U=L=>{const F=R.capturedMap.get(L);F&&L7(R.capturedMap,y.eventObject,F,L)};let k={};for(let L in c){let F=c[L];typeof F!="function"&&(k[L]=F)}let z={...y,...k,pointer:S,intersections:u,stopped:g.stopped,delta:d,unprojectedPoint:I,ray:T.ray,camera:A,stopPropagation(){const L="pointerId"in c&&R.capturedMap.get(c.pointerId);if((!L||L.has(y.eventObject))&&(z.stopped=g.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(F=>F.eventObject===y.eventObject))){const F=u.slice(0,u.indexOf(y));a([...F,y])}},target:{hasPointerCapture:N,setPointerCapture:D,releasePointerCapture:U},currentTarget:{hasPointerCapture:N,setPointerCapture:D,releasePointerCapture:U},nativeEvent:c};if(p(z),g.stopped===!0)break}}}return u}function a(u){const{internal:c}=t.getState();for(const d of c.hovered.values())if(!u.length||!u.find(p=>p.object===d.object&&p.index===d.index&&p.instanceId===d.instanceId)){const g=d.eventObject.__r3f;if(c.hovered.delete(fS(d)),g!=null&&g.eventCount){const y=g.handlers,b={...d,intersections:u};y.onPointerOut==null||y.onPointerOut(b),y.onPointerLeave==null||y.onPointerLeave(b)}}}function o(u,c){for(let d=0;d<c.length;d++){const p=c[d].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(u)}}function s(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return c=>{const{internal:d}=t.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),a([]))})}}return function(d){const{onPointerMissed:p,internal:g}=t.getState();g.lastEvent.current=d;const y=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",S=i(d,y?n:void 0),A=b?e(d):0;u==="onPointerDown"&&(g.initialClick=[d.offsetX,d.offsetY],g.initialHits=S.map(I=>I.eventObject)),b&&!S.length&&A<=2&&(o(d,g.interaction),p&&p(d)),y&&a(S);function R(I){const N=I.eventObject,D=N.__r3f;if(!(D!=null&&D.eventCount))return;const U=D.handlers;if(y){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const k=fS(I),z=g.hovered.get(k);z?z.stopped&&I.stopPropagation():(g.hovered.set(k,I),U.onPointerOver==null||U.onPointerOver(I),U.onPointerEnter==null||U.onPointerEnter(I))}U.onPointerMove==null||U.onPointerMove(I)}else{const k=U[u];k?(!b||g.initialHits.includes(N))&&(o(d,g.interaction.filter(z=>!g.initialHits.includes(z))),k(I)):b&&g.initialHits.includes(N)&&o(d,g.interaction.filter(z=>!g.initialHits.includes(z)))}}r(S,d,A,R)}}return{handlePointer:s}}const pB=t=>!!(t!=null&&t.render),U7=G.createContext(null),RMe=(t,e)=>{const n=aMe((s,u)=>{const c=new se,d=new se,p=new se;function g(A=u().camera,R=d,I=u().size){const{width:N,height:D,top:U,left:k}=I,z=N/D;R.isVector3?p.copy(R):p.set(...R);const L=A.getWorldPosition(c).distanceTo(p);if(P7(A))return{width:N/A.zoom,height:D/A.zoom,top:U,left:k,factor:1,distance:L,aspect:z};{const F=A.fov*Math.PI/180,j=2*Math.tan(F/2)*L,W=j*(N/D);return{width:W,height:j,top:U,left:k,factor:N/W,distance:L,aspect:z}}}let y;const b=A=>s(R=>({performance:{...R.performance,current:A}})),T=new st;return{set:s,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(A=1)=>t(u(),A),advance:(A,R)=>e(A,R,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fD,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=u();y&&clearTimeout(y),A.performance.current!==A.performance.min&&b(A.performance.min),y=setTimeout(()=>b(u().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:A=>s(R=>({...R,events:{...R.events,...A}})),setSize:(A,R,I=0,N=0)=>{const D=u().camera,U={width:A,height:R,top:I,left:N};s(k=>({size:U,viewport:{...k.viewport,...g(D,d,U)}}))},setDpr:A=>s(R=>{const I=D7(A);return{viewport:{...R.viewport,dpr:I,initialDpr:R.viewport.initialDpr||I}}}),setFrameloop:(A="always")=>{const R=u().clock;R.stop(),R.elapsedTime=0,A!=="never"&&(R.start(),R.elapsedTime=0),s(()=>({frameloop:A}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:G.createRef(),active:!1,frames:0,priority:0,subscribe:(A,R,I)=>{const N=u().internal;return N.priority=N.priority+(R>0?1:0),N.subscribers.push({ref:A,priority:R,store:I}),N.subscribers=N.subscribers.sort((D,U)=>D.priority-U.priority),()=>{const D=u().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(R>0?1:0),D.subscribers=D.subscribers.filter(U=>U.ref!==A))}}}}}),i=n.getState();let r=i.size,a=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:s,size:u,viewport:c,gl:d,set:p}=n.getState();if(u.width!==r.width||u.height!==r.height||c.dpr!==a){r=u,a=c.dpr,MMe(s,u),c.dpr>0&&d.setPixelRatio(c.dpr);const g=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(u.width,u.height,g)}s!==o&&(o=s,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(s)}})))}),n.subscribe(s=>t(s)),n};function F7(){const t=G.useContext(U7);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Uc(t=n=>n,e){return F7()(t,e)}function lA(t,e=0){const n=F7(),i=n.getState().internal.subscribe,r=N7(t);return x_(()=>i(r,e,n),[e,i,n]),null}/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const IMe=1,PMe=8,NMe=32,DMe=2;var OMe={version:"9.5.0"};function LMe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mB={exports:{}},gB={exports:{}},vB;function UMe(){return vB||(vB=1,(function(t){t.exports=function(e){function n(h,m,x,w){return new cv(h,m,x,w)}function i(){}function r(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){var m=h,x=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(x=m.return),h=m.return;while(h)}return m.tag===3?x:null}function o(h){if(a(h)!==h)throw Error(r(188))}function s(h){var m=h.alternate;if(!m){if(m=a(h),m===null)throw Error(r(188));return m!==h?null:h}for(var x=h,w=m;;){var O=x.return;if(O===null)break;var B=O.alternate;if(B===null){if(w=O.return,w!==null){x=w;continue}break}if(O.child===B.child){for(B=O.child;B;){if(B===x)return o(O),h;if(B===w)return o(O),m;B=B.sibling}throw Error(r(188))}if(x.return!==w.return)x=O,w=B;else{for(var K=!1,be=O.child;be;){if(be===x){K=!0,x=O,w=B;break}if(be===w){K=!0,w=O,x=B;break}be=be.sibling}if(!K){for(be=B.child;be;){if(be===x){K=!0,x=B,w=O;break}if(be===w){K=!0,w=B,x=O;break}be=be.sibling}if(!K)throw Error(r(189))}}if(x.alternate!==w)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?h:m}function u(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=u(h),m!==null)return m;h=h.sibling}return null}function c(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(m=c(h),m!==null))return m;h=h.sibling}return null}function d(h){return h===null||typeof h!="object"?null:(h=Tl&&h[Tl]||h["@@iterator"],typeof h=="function"?h:null)}function p(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===yu?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case dc:return"Fragment";case pc:return"Profiler";case hc:return"StrictMode";case Gp:return"Suspense";case El:return"SuspenseList";case Jd:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case fc:return"Portal";case Do:return h.displayName||"Context";case Kd:return(h._context.displayName||"Context")+".Consumer";case Nf:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Vp:return m=h.displayName||null,m!==null?m:p(h.type)||"Memo";case _a:m=h._payload,h=h._init;try{return p(h(m))}catch{}}return null}function g(h){return{current:h}}function y(h){0>_c||(h.current=tm[_c],tm[_c]=null,_c--)}function b(h,m){_c++,tm[_c]=h.current,h.current=m}function T(h){return h>>>=0,h===0?32:31-(nm(h)/Pb|0)|0}function S(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function A(h,m,x){var w=h.pendingLanes;if(w===0)return 0;var O=0,B=h.suspendedLanes,K=h.pingedLanes;h=h.warmLanes;var be=w&134217727;return be!==0?(w=be&~B,w!==0?O=S(w):(K&=be,K!==0?O=S(K):x||(x=be&~h,x!==0&&(O=S(x))))):(be=w&~B,be!==0?O=S(be):K!==0?O=S(K):x||(x=w&~h,x!==0&&(O=S(x)))),O===0?0:m!==0&&m!==O&&(m&B)===0&&(B=O&-O,x=m&-m,B>=x||B===32&&(x&4194048)!==0)?m:O}function R(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function I(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N(){var h=Bf;return Bf<<=1,(Bf&62914560)===0&&(Bf=4194304),h}function D(h){for(var m=[],x=0;31>x;x++)m.push(h);return m}function U(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function k(h,m,x,w,O,B){var K=h.pendingLanes;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=x,h.entangledLanes&=x,h.errorRecoveryDisabledLanes&=x,h.shellSuspendCounter=0;var be=h.entanglements,Ze=h.expirationTimes,dt=h.hiddenUpdates;for(x=K&~x;0<x;){var bt=31-La(x),gt=1<<bt;be[bt]=0,Ze[bt]=-1;var Rt=dt[bt];if(Rt!==null)for(dt[bt]=null,bt=0;bt<Rt.length;bt++){var rn=Rt[bt];rn!==null&&(rn.lane&=-536870913)}x&=~gt}w!==0&&z(h,w,0),B!==0&&O===0&&h.tag!==0&&(h.suspendedLanes|=B&~(K&~m))}function z(h,m,x){h.pendingLanes|=m,h.suspendedLanes&=~m;var w=31-La(m);h.entangledLanes|=m,h.entanglements[w]=h.entanglements[w]|1073741824|x&261930}function L(h,m){var x=h.entangledLanes|=m;for(h=h.entanglements;x;){var w=31-La(x),O=1<<w;O&m|h[w]&m&&(h[w]|=m),x&=~O}}function F(h,m){var x=m&-m;return x=(x&42)!==0?1:j(x),(x&(h.suspendedLanes|m))!==0?0:x}function j(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function W(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function X(h){if(typeof $v=="function"&&Ob(h),Ua&&typeof Ua.setStrictMode=="function")try{Ua.setStrictMode(xc,h)}catch{}}function Q(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}function ae(h){if(lm===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);lm=m&&m[1]||"",qs=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lm+h+qs}function $(h,m){if(!h||oh)return"";oh=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(m){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(rn){var Rt=rn}Reflect.construct(h,[],gt)}else{try{gt.call()}catch(rn){Rt=rn}h.call(gt.prototype)}}else{try{throw Error()}catch(rn){Rt=rn}(gt=h())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(rn){if(rn&&Rt&&typeof rn.stack=="string")return[rn.stack,Rt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=w.DetermineComponentFrameRoot(),K=B[0],be=B[1];if(K&&be){var Ze=K.split(`
`),dt=be.split(`
`);for(O=w=0;w<Ze.length&&!Ze[w].includes("DetermineComponentFrameRoot");)w++;for(;O<dt.length&&!dt[O].includes("DetermineComponentFrameRoot");)O++;if(w===Ze.length||O===dt.length)for(w=Ze.length-1,O=dt.length-1;1<=w&&0<=O&&Ze[w]!==dt[O];)O--;for(;1<=w&&0<=O;w--,O--)if(Ze[w]!==dt[O]){if(w!==1||O!==1)do if(w--,O--,0>O||Ze[w]!==dt[O]){var bt=`
`+Ze[w].replace(" at new "," at ");return h.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",h.displayName)),bt}while(1<=w&&0<=O);break}}}finally{oh=!1,Error.prepareStackTrace=x}return(x=h?h.displayName||h.name:"")?ae(x):""}function ie(h,m){switch(h.tag){case 26:case 27:case 5:return ae(h.type);case 16:return ae("Lazy");case 13:return h.child!==m&&m!==null?ae("Suspense Fallback"):ae("Suspense");case 19:return ae("SuspenseList");case 0:case 15:return $(h.type,!1);case 11:return $(h.type.render,!1);case 1:return $(h.type,!0);case 31:return ae("Activity");default:return""}}function me(h){try{var m="",x=null;do m+=ie(h,x),x=h,h=h.return;while(h);return m}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function pe(h,m){if(typeof h=="object"&&h!==null){var x=Kv.get(h);return x!==void 0?x:(m={value:h,source:m,stack:me(m)},Kv.set(h,m),m)}return{value:h,source:m,stack:me(m)}}function de(h,m){wl[Ws++]=sh,wl[Ws++]=ti,ti=h,sh=m}function H(h,m,x){Uo[ao++]=zr,Uo[ao++]=os,Uo[ao++]=Fo,Fo=h;var w=zr;h=os;var O=32-La(w)-1;w&=~(1<<O),x+=1;var B=32-La(m)+O;if(30<B){var K=O-O%5;B=(w&(1<<K)-1).toString(32),w>>=K,O-=K,zr=1<<32-La(m)+O|x<<O|w,os=B+h}else zr=1<<B|x<<O|w,os=h}function ne(h){h.return!==null&&(de(h,1),H(h,1,0))}function le(h){for(;h===ti;)ti=wl[--Ws],wl[Ws]=null,sh=wl[--Ws],wl[Ws]=null;for(;h===Fo;)Fo=Uo[--ao],Uo[ao]=null,os=Uo[--ao],Uo[ao]=null,zr=Uo[--ao],Uo[ao]=null}function ge(h,m){Uo[ao++]=zr,Uo[ao++]=os,Uo[ao++]=Fo,zr=m.id,os=m.overflow,Fo=h}function _e(h,m){b(Gr,m),b(Cl,h),b(Cr,null),h=X_(m),y(Cr),b(Cr,h)}function re(){y(Cr),y(Cl),y(Gr)}function oe(h){h.memoizedState!==null&&b(lh,h);var m=Cr.current,x=Lf(m,h.type);m!==x&&(b(Cl,h),b(Cr,x))}function Ee(h){Cl.current===h&&(y(Cr),y(Cl)),lh.current===h&&(y(lh),qi?vc._currentValue=gc:vc._currentValue2=gc)}function ce(h){var m=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oe(pe(m,h)),um}function Ce(h,m){if(!bi)throw Error(r(175));_b(h.stateNode,h.type,h.memoizedProps,m,h)||ce(h,!0)}function Ue(h){for(mr=h.return;mr;)switch(mr.tag){case 5:case 31:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:mr=mr.return}}function ve(h){if(!bi||h!==mr)return!1;if(!An)return Ue(h),An=!0,!1;var m=h.tag;if(pr?m!==3&&m!==27&&(m!==5||kf(h.type)&&!ba(h.type,h.memoizedProps))&&xi&&ce(h):m!==3&&(m!==5||kf(h.type)&&!ba(h.type,h.memoizedProps))&&xi&&ce(h),Ue(h),m===13){if(!bi)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));xi=kv(h)}else if(m===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));xi=xb(h)}else xi=pr&&m===27?fb(h.type,xi):mr?cb(h.stateNode):null;return!0}function ft(){bi&&(xi=mr=null,An=!1)}function Se(){var h=js;return h!==null&&(Ba===null?Ba=h:Ba.push.apply(Ba,h),js=null),h}function Oe(h){js===null?js=[h]:js.push(h)}function Me(h,m,x){qi?(b(ko,m._currentValue),m._currentValue=x):(b(ko,m._currentValue2),m._currentValue2=x)}function Je(h){var m=ko.current;qi?h._currentValue=m:h._currentValue2=m,y(ko)}function Z(h,m,x){for(;h!==null;){var w=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,w!==null&&(w.childLanes|=m)):w!==null&&(w.childLanes&m)!==m&&(w.childLanes|=m),h===x)break;h=h.return}}function it(h,m,x,w){var O=h.child;for(O!==null&&(O.return=h);O!==null;){var B=O.dependencies;if(B!==null){var K=O.child;B=B.firstContext;e:for(;B!==null;){var be=B;B=O;for(var Ze=0;Ze<m.length;Ze++)if(be.context===m[Ze]){B.lanes|=x,be=B.alternate,be!==null&&(be.lanes|=x),Z(B.return,x,h),w||(K=null);break e}B=be.next}}else if(O.tag===18){if(K=O.return,K===null)throw Error(r(341));K.lanes|=x,B=K.alternate,B!==null&&(B.lanes|=x),Z(K,x,h),K=null}else K=O.child;if(K!==null)K.return=O;else for(K=O;K!==null;){if(K===h){K=null;break}if(O=K.sibling,O!==null){O.return=K.return,K=O;break}K=K.return}O=K}}function je(h,m,x,w){h=null;for(var O=m,B=!1;O!==null;){if(!B){if((O.flags&524288)!==0)B=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var K=O.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var be=O.type;ji(O.pendingProps.value,K.value)||(h!==null?h.push(be):h=[be])}}else if(O===lh.current){if(K=O.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(h!==null?h.push(vc):h=[vc])}O=O.return}h!==null&&it(m,h,x,w),m.flags|=262144}function Re(h){for(h=h.firstContext;h!==null;){var m=h.context;if(!ji(qi?m._currentValue:m._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function He(h){li=h,ss=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Y(h){return fe(li,h)}function q(h,m){return li===null&&He(h),fe(h,m)}function fe(h,m){var x=qi?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:x,next:null},ss===null){if(h===null)throw Error(r(308));ss=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else ss=ss.next=m;return x}function Le(){return{controller:new Lb,data:new Map,refCount:0}}function Ie(h){h.refCount--,h.refCount===0&&Rr(bA,function(){h.controller.abort()})}function Te(){}function ot(h){h!==Kn&&h.next===null&&(Kn===null?uh=Kn=h:Kn=Kn.next=h),Bo=!0,aa||(aa=!0,ue())}function rt(h,m){if(!cm&&Bo){cm=!0;do for(var x=!1,w=uh;w!==null;){if(h!==0){var O=w.pendingLanes;if(O===0)var B=0;else{var K=w.suspendedLanes,be=w.pingedLanes;B=(1<<31-La(42|h)+1)-1,B&=O&~(K&~be),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(x=!0,et(w,B))}else B=Mn,B=A(w,w===pn?B:0,w.cancelPendingCommit!==null||w.timeoutHandle!==Oa),(B&3)===0||R(w,B)||(x=!0,et(w,B));w=w.next}while(x);cm=!1}}function mt(){xt()}function xt(){Bo=aa=!1;var h=0;Eu!==0&&mc()&&(h=Eu);for(var m=ra(),x=null,w=uh;w!==null;){var O=w.next,B=We(w,m);B===0?(w.next=null,x===null?uh=O:x.next=O,O===null&&(Kn=x)):(x=w,(h!==0||(B&3)!==0)&&(Bo=!0)),w=O}sr!==0&&sr!==5||rt(h),Eu!==0&&(Eu=0)}function We(h,m){for(var x=h.suspendedLanes,w=h.pingedLanes,O=h.expirationTimes,B=h.pendingLanes&-62914561;0<B;){var K=31-La(B),be=1<<K,Ze=O[K];Ze===-1?((be&x)===0||(be&w)!==0)&&(O[K]=I(be,m)):Ze<=m&&(h.expiredLanes|=be),B&=~be}if(m=pn,x=Mn,x=A(h,h===m?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==Oa),w=h.callbackNode,x===0||h===m&&(Zn===2||Zn===9)||h.cancelPendingCommit!==null)return w!==null&&w!==null&&rm(w),h.callbackNode=null,h.callbackPriority=0;if((x&3)===0||R(h,x)){if(m=x&-x,m===h.callbackPriority)return m;switch(w!==null&&rm(w),W(x)){case 2:case 8:x=Db;break;case 32:x=ah;break;case 268435456:x=om;break;default:x=ah}return w=Ke.bind(null,h),x=rh(x,w),h.callbackPriority=m,h.callbackNode=x,m}return w!==null&&w!==null&&rm(w),h.callbackPriority=2,h.callbackNode=null,2}function Ke(h,m){if(sr!==0&&sr!==5)return h.callbackNode=null,h.callbackPriority=0,null;var x=h.callbackNode;if(Gs()&&h.callbackNode!==x)return null;var w=Mn;return w=A(h,h===pn?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==Oa),w===0?null:(as(h,w,m),We(h,ra()),h.callbackNode!=null&&h.callbackNode===x?Ke.bind(null,h):null)}function et(h,m){if(Gs())return null;as(h,m,!0)}function ue(){Sv?Ev(function(){(Sn&6)!==0?rh(am,mt):xt()}):rh(am,mt)}function we(){if(Eu===0){var h=Rl;h===0&&(h=im,im<<=1,(im&261888)===0&&(im=256)),Eu=h}return Eu}function ht(h,m){if(zf===null){var x=zf=[];Jv=0,Rl=we(),gr={status:"pending",value:void 0,then:function(w){x.push(w)}}}return Jv++,m.then(he,he),m}function he(){if(--Jv===0&&zf!==null){gr!==null&&(gr.status="fulfilled");var h=zf;zf=null,Rl=0,gr=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Ye(h,m){var x=[],w={status:"pending",value:null,reason:null,then:function(O){x.push(O)}};return h.then(function(){w.status="fulfilled",w.value=m;for(var O=0;O<x.length;O++)(0,x[O])(m)},function(O){for(w.status="rejected",w.reason=O,O=0;O<x.length;O++)(0,x[O])(void 0)}),w}function tt(){var h=Tu.current;return h!==null?h:pn.pooledCache}function vt(h,m){m===null?b(Tu,Tu.current):b(Tu,m.pool)}function nt(){var h=tt();return h===null?null:{parent:qi?Si._currentValue:Si._currentValue2,pool:h}}function Be(h,m){if(ji(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var x=Object.keys(h),w=Object.keys(m);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var O=x[w];if(!_A.call(m,O)||!ji(h[O],m[O]))return!1}return!0}function lt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Et(h,m,x){switch(x=h[x],x===void 0?h.push(m):x!==m&&(m.then(Te,Te),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,vn(h),h;default:if(typeof m.status=="string")m.then(Te,Te);else{if(h=pn,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=m,h.status="pending",h.then(function(w){if(m.status==="pending"){var O=m;O.status="fulfilled",O.value=w}},function(w){if(m.status==="pending"){var O=m;O.status="rejected",O.reason=w}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,vn(h),h}throw Sa=m,vr}}function St(h){try{var m=h._init;return m(h._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Sa=x,vr):x}}function Lt(){if(Sa===null)throw Error(r(459));var h=Sa;return Sa=null,h}function vn(h){if(h===vr||h===Go)throw Error(r(483))}function wn(h){var m=Sc;return Sc+=1,Au===null&&(Au=[]),Et(Au,h,m)}function Qn(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function nr(h,m){throw m.$$typeof===cc?Error(r(525)):(h=Object.prototype.toString.call(m),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function Jr(h){function m(Ge,De){if(h){var $e=Ge.deletions;$e===null?(Ge.deletions=[De],Ge.flags|=16):$e.push(De)}}function x(Ge,De){if(!h)return null;for(;De!==null;)m(Ge,De),De=De.sibling;return null}function w(Ge){for(var De=new Map;Ge!==null;)Ge.key!==null?De.set(Ge.key,Ge):De.set(Ge.index,Ge),Ge=Ge.sibling;return De}function O(Ge,De){return Ge=io(Ge,De),Ge.index=0,Ge.sibling=null,Ge}function B(Ge,De,$e){return Ge.index=$e,h?($e=Ge.alternate,$e!==null?($e=$e.index,$e<De?(Ge.flags|=67108866,De):$e):(Ge.flags|=67108866,De)):(Ge.flags|=1048576,De)}function K(Ge){return h&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function be(Ge,De,$e,_t){return De===null||De.tag!==6?(De=fv($e,Ge.mode,_t),De.return=Ge,De):(De=O(De,$e),De.return=Ge,De)}function Ze(Ge,De,$e,_t){var Xt=$e.type;return Xt===dc?bt(Ge,De,$e.props.children,_t,$e.key):De!==null&&(De.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_a&&St(Xt)===De.type)?(De=O(De,$e.props),Qn(De,$e),De.return=Ge,De):(De=Sl($e.type,$e.key,$e.props,null,Ge.mode,_t),Qn(De,$e),De.return=Ge,De)}function dt(Ge,De,$e,_t){return De===null||De.tag!==4||De.stateNode.containerInfo!==$e.containerInfo||De.stateNode.implementation!==$e.implementation?(De=hv($e,Ge.mode,_t),De.return=Ge,De):(De=O(De,$e.children||[]),De.return=Ge,De)}function bt(Ge,De,$e,_t,Xt){return De===null||De.tag!==7?(De=No($e,Ge.mode,_t,Xt),De.return=Ge,De):(De=O(De,$e),De.return=Ge,De)}function gt(Ge,De,$e){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return De=fv(""+De,Ge.mode,$e),De.return=Ge,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Vs:return $e=Sl(De.type,De.key,De.props,null,Ge.mode,$e),Qn($e,De),$e.return=Ge,$e;case fc:return De=hv(De,Ge.mode,$e),De.return=Ge,De;case _a:return De=St(De),gt(Ge,De,$e)}if(_u(De)||d(De))return De=No(De,Ge.mode,$e,null),De.return=Ge,De;if(typeof De.then=="function")return gt(Ge,wn(De),$e);if(De.$$typeof===Do)return gt(Ge,q(Ge,De),$e);nr(Ge,De)}return null}function Rt(Ge,De,$e,_t){var Xt=De!==null?De.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Xt!==null?null:be(Ge,De,""+$e,_t);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Vs:return $e.key===Xt?Ze(Ge,De,$e,_t):null;case fc:return $e.key===Xt?dt(Ge,De,$e,_t):null;case _a:return $e=St($e),Rt(Ge,De,$e,_t)}if(_u($e)||d($e))return Xt!==null?null:bt(Ge,De,$e,_t,null);if(typeof $e.then=="function")return Rt(Ge,De,wn($e),_t);if($e.$$typeof===Do)return Rt(Ge,De,q(Ge,$e),_t);nr(Ge,$e)}return null}function rn(Ge,De,$e,_t,Xt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ge=Ge.get($e)||null,be(De,Ge,""+_t,Xt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case Vs:return Ge=Ge.get(_t.key===null?$e:_t.key)||null,Ze(De,Ge,_t,Xt);case fc:return Ge=Ge.get(_t.key===null?$e:_t.key)||null,dt(De,Ge,_t,Xt);case _a:return _t=St(_t),rn(Ge,De,$e,_t,Xt)}if(_u(_t)||d(_t))return Ge=Ge.get($e)||null,bt(De,Ge,_t,Xt,null);if(typeof _t.then=="function")return rn(Ge,De,$e,wn(_t),Xt);if(_t.$$typeof===Do)return rn(Ge,De,$e,q(De,_t),Xt);nr(De,_t)}return null}function $i(Ge,De,$e,_t){for(var Xt=null,Pi=null,Yt=De,Ln=De=0,Ir=null;Yt!==null&&Ln<$e.length;Ln++){Yt.index>Ln?(Ir=Yt,Yt=null):Ir=Yt.sibling;var Bn=Rt(Ge,Yt,$e[Ln],_t);if(Bn===null){Yt===null&&(Yt=Ir);break}h&&Yt&&Bn.alternate===null&&m(Ge,Yt),De=B(Bn,De,Ln),Pi===null?Xt=Bn:Pi.sibling=Bn,Pi=Bn,Yt=Ir}if(Ln===$e.length)return x(Ge,Yt),An&&de(Ge,Ln),Xt;if(Yt===null){for(;Ln<$e.length;Ln++)Yt=gt(Ge,$e[Ln],_t),Yt!==null&&(De=B(Yt,De,Ln),Pi===null?Xt=Yt:Pi.sibling=Yt,Pi=Yt);return An&&de(Ge,Ln),Xt}for(Yt=w(Yt);Ln<$e.length;Ln++)Ir=rn(Yt,Ge,Ln,$e[Ln],_t),Ir!==null&&(h&&Ir.alternate!==null&&Yt.delete(Ir.key===null?Ln:Ir.key),De=B(Ir,De,Ln),Pi===null?Xt=Ir:Pi.sibling=Ir,Pi=Ir);return h&&Yt.forEach(function(qo){return m(Ge,qo)}),An&&de(Ge,Ln),Xt}function Yf(Ge,De,$e,_t){if($e==null)throw Error(r(151));for(var Xt=null,Pi=null,Yt=De,Ln=De=0,Ir=null,Bn=$e.next();Yt!==null&&!Bn.done;Ln++,Bn=$e.next()){Yt.index>Ln?(Ir=Yt,Yt=null):Ir=Yt.sibling;var qo=Rt(Ge,Yt,Bn.value,_t);if(qo===null){Yt===null&&(Yt=Ir);break}h&&Yt&&qo.alternate===null&&m(Ge,Yt),De=B(qo,De,Ln),Pi===null?Xt=qo:Pi.sibling=qo,Pi=qo,Yt=Ir}if(Bn.done)return x(Ge,Yt),An&&de(Ge,Ln),Xt;if(Yt===null){for(;!Bn.done;Ln++,Bn=$e.next())Bn=gt(Ge,Bn.value,_t),Bn!==null&&(De=B(Bn,De,Ln),Pi===null?Xt=Bn:Pi.sibling=Bn,Pi=Bn);return An&&de(Ge,Ln),Xt}for(Yt=w(Yt);!Bn.done;Ln++,Bn=$e.next())Bn=rn(Yt,Ge,Ln,Bn.value,_t),Bn!==null&&(h&&Bn.alternate!==null&&Yt.delete(Bn.key===null?Ln:Bn.key),De=B(Bn,De,Ln),Pi===null?Xt=Bn:Pi.sibling=Bn,Pi=Bn);return h&&Yt.forEach(function(xA){return m(Ge,xA)}),An&&de(Ge,Ln),Xt}function Du(Ge,De,$e,_t){if(typeof $e=="object"&&$e!==null&&$e.type===dc&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case Vs:e:{for(var Xt=$e.key;De!==null;){if(De.key===Xt){if(Xt=$e.type,Xt===dc){if(De.tag===7){x(Ge,De.sibling),_t=O(De,$e.props.children),_t.return=Ge,Ge=_t;break e}}else if(De.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===_a&&St(Xt)===De.type){x(Ge,De.sibling),_t=O(De,$e.props),Qn(_t,$e),_t.return=Ge,Ge=_t;break e}x(Ge,De);break}else m(Ge,De);De=De.sibling}$e.type===dc?(_t=No($e.props.children,Ge.mode,_t,$e.key),_t.return=Ge,Ge=_t):(_t=Sl($e.type,$e.key,$e.props,null,Ge.mode,_t),Qn(_t,$e),_t.return=Ge,Ge=_t)}return K(Ge);case fc:e:{for(Xt=$e.key;De!==null;){if(De.key===Xt)if(De.tag===4&&De.stateNode.containerInfo===$e.containerInfo&&De.stateNode.implementation===$e.implementation){x(Ge,De.sibling),_t=O(De,$e.children||[]),_t.return=Ge,Ge=_t;break e}else{x(Ge,De);break}else m(Ge,De);De=De.sibling}_t=hv($e,Ge.mode,_t),_t.return=Ge,Ge=_t}return K(Ge);case _a:return $e=St($e),Du(Ge,De,$e,_t)}if(_u($e))return $i(Ge,De,$e,_t);if(d($e)){if(Xt=d($e),typeof Xt!="function")throw Error(r(150));return $e=Xt.call($e),Yf(Ge,De,$e,_t)}if(typeof $e.then=="function")return Du(Ge,De,wn($e),_t);if($e.$$typeof===Do)return Du(Ge,De,q(Ge,$e),_t);nr(Ge,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,De!==null&&De.tag===6?(x(Ge,De.sibling),_t=O(De,$e),_t.return=Ge,Ge=_t):(x(Ge,De),_t=fv($e,Ge.mode,_t),_t.return=Ge,Ge=_t),K(Ge)):x(Ge,De)}return function(Ge,De,$e,_t){try{Sc=0;var Xt=Du(Ge,De,$e,_t);return Au=null,Xt}catch(Yt){if(Yt===vr||Yt===Go)throw Yt;var Pi=n(29,Yt,null,Ge.mode);return Pi.lanes=_t,Pi.return=Ge,Pi}finally{}}}function xr(){for(var h=Ys,m=Ec=Ys=0;m<h;){var x=Hr[m];Hr[m++]=null;var w=Hr[m];Hr[m++]=null;var O=Hr[m];Hr[m++]=null;var B=Hr[m];if(Hr[m++]=null,w!==null&&O!==null){var K=w.pending;K===null?O.next=O:(O.next=K.next,K.next=O),w.pending=O}B!==0&&$n(x,O,B)}}function Sr(h,m,x,w){Hr[Ys++]=h,Hr[Ys++]=m,Hr[Ys++]=x,Hr[Ys++]=w,Ec|=w,h.lanes|=w,h=h.alternate,h!==null&&(h.lanes|=w)}function pa(h,m,x,w){return Sr(h,m,x,w),zn(h)}function ai(h,m){return Sr(h,null,null,m),zn(h)}function $n(h,m,x){h.lanes|=x;var w=h.alternate;w!==null&&(w.lanes|=x);for(var O=!1,B=h.return;B!==null;)B.childLanes|=x,w=B.alternate,w!==null&&(w.childLanes|=x),B.tag===22&&(h=B.stateNode,h===null||h._visibility&1||(O=!0)),h=B,B=B.return;return h.tag===3?(B=h.stateNode,O&&m!==null&&(O=31-La(x),h=B.hiddenUpdates,w=h[O],w===null?h[O]=[m]:w.push(m),m.lane=x|536870912),B):null}function zn(h){if(50<kn)throw kn=0,mh=null,Error(r(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}function Di(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fr(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function ma(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Zr(h,m,x){var w=h.updateQueue;if(w===null)return null;if(w=w.shared,(Sn&2)!==0){var O=w.pending;return O===null?m.next=m:(m.next=O.next,O.next=m),w.pending=m,m=zn(h),$n(h,null,x),m}return Sr(h,w,m,x),zn(h)}function $a(h,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var w=m.lanes;w&=h.pendingLanes,x|=w,m.lanes=x,L(h,x)}}function es(h,m){var x=h.updateQueue,w=h.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var O=null,B=null;if(x=x.firstBaseUpdate,x!==null){do{var K={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};B===null?O=B=K:B=B.next=K,x=x.next}while(x!==null);B===null?O=B=m:B=B.next=m}else O=B=m;x={baseState:w.baseState,firstBaseUpdate:O,lastBaseUpdate:B,shared:w.shared,callbacks:w.callbacks},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=m:h.next=m,x.lastBaseUpdate=m}function Ka(){if(dm){var h=gr;if(h!==null)throw h}}function So(h,m,x,w){dm=!1;var O=h.updateQueue;oo=!1;var B=O.firstBaseUpdate,K=O.lastBaseUpdate,be=O.shared.pending;if(be!==null){O.shared.pending=null;var Ze=be,dt=Ze.next;Ze.next=null,K===null?B=dt:K.next=dt,K=Ze;var bt=h.alternate;bt!==null&&(bt=bt.updateQueue,be=bt.lastBaseUpdate,be!==K&&(be===null?bt.firstBaseUpdate=dt:be.next=dt,bt.lastBaseUpdate=Ze))}if(B!==null){var gt=O.baseState;K=0,bt=dt=Ze=null,be=B;do{var Rt=be.lane&-536870913,rn=Rt!==be.lane;if(rn?(Mn&Rt)===Rt:(w&Rt)===Rt){Rt!==0&&Rt===Rl&&(dm=!0),bt!==null&&(bt=bt.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var $i=h,Yf=be;Rt=m;var Du=x;switch(Yf.tag){case 1:if($i=Yf.payload,typeof $i=="function"){gt=$i.call(Du,gt,Rt);break e}gt=$i;break e;case 3:$i.flags=$i.flags&-65537|128;case 0:if($i=Yf.payload,Rt=typeof $i=="function"?$i.call(Du,gt,Rt):$i,Rt==null)break e;gt=zp({},gt,Rt);break e;case 2:oo=!0}}Rt=be.callback,Rt!==null&&(h.flags|=64,rn&&(h.flags|=8192),rn=O.callbacks,rn===null?O.callbacks=[Rt]:rn.push(Rt))}else rn={lane:Rt,tag:be.tag,payload:be.payload,callback:be.callback,next:null},bt===null?(dt=bt=rn,Ze=gt):bt=bt.next=rn,K|=Rt;if(be=be.next,be===null){if(be=O.shared.pending,be===null)break;rn=be,be=rn.next,rn.next=null,O.lastBaseUpdate=rn,O.shared.pending=null}}while(!0);bt===null&&(Ze=gt),O.baseState=Ze,O.firstBaseUpdate=dt,O.lastBaseUpdate=bt,B===null&&(O.shared.lanes=0),Pl|=K,h.lanes=K,h.memoizedState=gt}}function Ra(h,m){if(typeof h!="function")throw Error(r(191,h));h.call(m)}function Ja(h,m){var x=h.callbacks;if(x!==null)for(h.callbacks=null,h=0;h<x.length;h++)Ra(x[h],m)}function Eo(h,m){h=Ks,b(Mu,h),b(Tc,m),Ks=h|m.baseLanes}function Ot(){b(Mu,Ks),b(Tc,Tc.current)}function J(){Ks=Mu.current,y(Tc),y(Mu)}function Ae(h){var m=h.alternate;b(Ui,Ui.current&1),b(Fa,h),ka===null&&(m===null||Tc.current!==null||m.memoizedState!==null)&&(ka=h)}function Ve(h){b(Ui,Ui.current),b(Fa,h),ka===null&&(ka=h)}function Fe(h){h.tag===22?(b(Ui,Ui.current),b(Fa,h),ka===null&&(ka=h)):Pe()}function Pe(){b(Ui,Ui.current),b(Fa,Fa.current)}function yt(h){y(Fa),ka===h&&(ka=null),y(Ui)}function At(h){for(var m=h;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||xu(x)||Yp(x)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function pt(){throw Error(r(321))}function Pt(h,m){if(m===null)return!1;for(var x=0;x<m.length&&x<h.length;x++)if(!ji(h[x],m[x]))return!1;return!0}function Nt(h,m,x,w,O,B){return Il=B,sn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Wt.H=h===null||h.memoizedState===null?Ci:$s,Dn=!1,B=x(w,O),Dn=!1,fn&&(B=Dt(m,x,w,O)),Vt(h),B}function Vt(h){Wt.H=so;var m=Gt!==null&&Gt.next!==null;if(Il=0,tn=Gt=sn=null,hn=!1,Vo=0,ls=null,m)throw Error(r(300));h===null||hi||(h=h.dependencies,h!==null&&Re(h)&&(hi=!0))}function Dt(h,m,x,w){sn=h;var O=0;do{if(fn&&(ls=null),Vo=0,fn=!1,25<=O)throw Error(r(301));if(O+=1,tn=Gt=null,h.updateQueue!=null){var B=h.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}Wt.H=wu,B=m(x,w)}while(fn);return B}function qt(){var h=Wt.H,m=h.useState()[0];return m=typeof m.then=="function"?Bt(m):m,h=h.useState()[0],(Gt!==null?Gt.memoizedState:null)!==h&&(sn.flags|=1024),m}function yn(){var h=oa!==0;return oa=0,h}function qn(h,m,x){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~x}function Nn(h){if(hn){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}hn=!1}Il=0,tn=Gt=sn=null,fn=!1,Vo=oa=0,ls=null}function Jt(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?sn.memoizedState=tn=h:tn=tn.next=h,tn}function Tt(){if(Gt===null){var h=sn.alternate;h=h!==null?h.memoizedState:null}else h=Gt.next;var m=tn===null?sn.memoizedState:tn.next;if(m!==null)tn=m,Gt=h;else{if(h===null)throw sn.alternate===null?Error(r(467)):Error(r(310));Gt=h,h={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},tn===null?sn.memoizedState=tn=h:tn=tn.next=h}return tn}function xn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bt(h){var m=Vo;return Vo+=1,ls===null&&(ls=[]),h=Et(ls,h,m),m=sn,(tn===null?m.memoizedState:tn.next)===null&&(m=m.alternate,Wt.H=m===null||m.memoizedState===null?Ci:$s),h}function Oi(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Bt(h);if(h.$$typeof===Do)return Y(h)}throw Error(r(438,String(h)))}function Qr(h){var m=null,x=sn.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var w=sn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(m={data:w.data.map(function(O){return O.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=xn(),sn.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(h),w=0;w<h;w++)x[w]=mv;return m.index++,x}function Gn(h,m){return typeof m=="function"?m(h):m}function Er(h){var m=Tt();return Cn(m,Gt,h)}function Cn(h,m,x){var w=h.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=x;var O=h.baseQueue,B=w.pending;if(B!==null){if(O!==null){var K=O.next;O.next=B.next,B.next=K}m.baseQueue=O=B,w.pending=null}if(B=h.baseState,O===null)h.memoizedState=B;else{m=O.next;var be=K=null,Ze=null,dt=m,bt=!1;do{var gt=dt.lane&-536870913;if(gt!==dt.lane?(Mn&gt)===gt:(Il&gt)===gt){var Rt=dt.revertLane;if(Rt===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),gt===Rl&&(bt=!0);else if((Il&Rt)===Rt){dt=dt.next,Rt===Rl&&(bt=!0);continue}else gt={lane:0,revertLane:dt.revertLane,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ze===null?(be=Ze=gt,K=B):Ze=Ze.next=gt,sn.lanes|=Rt,Pl|=Rt;gt=dt.action,Dn&&x(B,gt),B=dt.hasEagerState?dt.eagerState:x(B,gt)}else Rt={lane:gt,revertLane:dt.revertLane,gesture:dt.gesture,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ze===null?(be=Ze=Rt,K=B):Ze=Ze.next=Rt,sn.lanes|=gt,Pl|=gt;dt=dt.next}while(dt!==null&&dt!==m);if(Ze===null?K=B:Ze.next=be,!ji(B,h.memoizedState)&&(hi=!0,bt&&(x=gr,x!==null)))throw x;h.memoizedState=B,h.baseState=K,h.baseQueue=Ze,w.lastRenderedState=B}return O===null&&(w.lanes=0),[h.memoizedState,w.dispatch]}function gi(h){var m=Tt(),x=m.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=h;var w=x.dispatch,O=x.pending,B=m.memoizedState;if(O!==null){x.pending=null;var K=O=O.next;do B=h(B,K.action),K=K.next;while(K!==O);ji(B,m.memoizedState)||(hi=!0),m.memoizedState=B,m.baseQueue===null&&(m.baseState=B),x.lastRenderedState=B}return[B,w]}function vi(h,m,x){var w=sn,O=Tt(),B=An;if(B){if(x===void 0)throw Error(r(407));x=x()}else x=m();var K=!ji((Gt||O).memoizedState,x);if(K&&(O.memoizedState=x,hi=!0),O=O.queue,Mo(ts.bind(null,w,O,h),[h]),O.getSnapshot!==m||K||tn!==null&&tn.memoizedState.tag&1){if(w.flags|=2048,ta(9,{destroy:void 0},Hi.bind(null,w,O,x,m),null),pn===null)throw Error(r(349));B||(Il&127)!==0||Vi(w,m,x)}return x}function Vi(h,m,x){h.flags|=16384,h={getSnapshot:m,value:x},m=sn.updateQueue,m===null?(m=xn(),sn.updateQueue=m,m.stores=[h]):(x=m.stores,x===null?m.stores=[h]:x.push(h))}function Hi(h,m,x,w){m.value=x,m.getSnapshot=w,Tr(m)&&Ld(h)}function ts(h,m,x){return x(function(){Tr(m)&&Ld(h)})}function Tr(h){var m=h.getSnapshot;h=h.value;try{var x=m();return!ji(h,x)}catch{return!0}}function Ld(h){var m=ai(h,2);m!==null&&Mi(m,h,2)}function eu(h){var m=Jt();if(typeof h=="function"){var x=h;if(h=x(),Dn){X(!0);try{x()}finally{X(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:h},m}function To(h,m,x,w){return h.baseState=x,Cn(h,Gt,typeof w=="function"?w:Gn)}function ea(h,m,x,w,O){if(bp(h))throw Error(r(485));if(h=m.action,h!==null){var B={payload:O,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){B.listeners.push(K)}};Wt.T!==null?x(!0):B.isTransition=!1,w(B),x=m.pending,x===null?(B.next=m.pending=B,As(m,B)):(B.next=x.next,m.pending=x.next=B)}}function As(h,m){var x=m.action,w=m.payload,O=h.state;if(m.isTransition){var B=Wt.T,K={};Wt.T=K;try{var be=x(O,w),Ze=Wt.S;Ze!==null&&Ze(K,be),Ju(h,m,be)}catch(dt){Ao(h,m,dt)}finally{B!==null&&K.types!==null&&(B.types=K.types),Wt.T=B}}else try{B=x(O,w),Ju(h,m,B)}catch(dt){Ao(h,m,dt)}}function Ju(h,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(w){Za(h,m,w)},function(w){return Ao(h,m,w)}):Za(h,m,x)}function Za(h,m,x){m.status="fulfilled",m.value=x,Zu(m),h.state=x,m=h.pending,m!==null&&(x=m.next,x===m?h.pending=null:(x=x.next,m.next=x,As(h,x)))}function Ao(h,m,x){var w=h.pending;if(h.pending=null,w!==null){w=w.next;do m.status="rejected",m.reason=x,Zu(m),m=m.next;while(m!==w)}h.action=null}function Zu(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function Qu(h,m){return m}function tu(h,m){if(An){var x=pn.formState;if(x!==null){e:{var w=sn;if(An){if(xi){var O=ub(xi,xa);if(O){xi=cb(O),w=Ov(O);break e}}ce(w)}w=!1}w&&(m=x[0])}}x=Jt(),x.memoizedState=x.baseState=m,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:m},x.queue=w,x=rs.bind(null,sn,w),w.dispatch=x,w=eu(!1);var B=_p.bind(null,sn,!1,w.queue);return w=Jt(),O={state:m,dispatch:null,action:h,pending:null},w.queue=O,x=ea.bind(null,sn,O,B,x),O.dispatch=x,w.memoizedState=h,[m,x,!1]}function Ms(h){var m=Tt();return Qa(m,Gt,h)}function Qa(h,m,x){if(m=Cn(h,m,Qu)[0],h=Er(Gn)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var w=Bt(m)}catch(K){throw K===vr?Go:K}else w=m;m=Tt();var O=m.queue,B=O.dispatch;return x!==m.memoizedState&&(sn.flags|=2048,ta(9,{destroy:void 0},ga.bind(null,O,x),null)),[w,B,h]}function ga(h,m){h.action=m}function ws(h){var m=Tt(),x=Gt;if(x!==null)return Qa(m,x,h);Tt(),m=m.memoizedState,x=Tt();var w=x.queue.dispatch;return x.memoizedState=h,[m,w,!1]}function ta(h,m,x,w){return h={tag:h,create:x,deps:w,inst:m,next:null},m=sn.updateQueue,m===null&&(m=xn(),sn.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=h.next=h:(w=x.next,x.next=h,h.next=w,m.lastEffect=h),h}function ec(){return Tt().memoizedState}function ns(h,m,x,w){var O=Jt();sn.flags|=h,O.memoizedState=ta(1|m,{destroy:void 0},x,w===void 0?null:w)}function nu(h,m,x,w){var O=Tt();w=w===void 0?null:w;var B=O.memoizedState.inst;Gt!==null&&w!==null&&Pt(w,Gt.memoizedState.deps)?O.memoizedState=ta(m,B,x,w):(sn.flags|=h,O.memoizedState=ta(1|m,B,x,w))}function iu(h,m){ns(8390656,8,h,m)}function Mo(h,m){nu(2048,8,h,m)}function ru(h){sn.flags|=4;var m=sn.updateQueue;if(m===null)m=xn(),sn.updateQueue=m,m.events=[h];else{var x=m.events;x===null?m.events=[h]:x.push(h)}}function yi(h){var m=Tt().memoizedState;return ru({ref:m,nextImpl:h}),function(){if((Sn&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}function is(h,m){return nu(4,2,h,m)}function gl(h,m){return nu(4,4,h,m)}function Cs(h,m){if(typeof m=="function"){h=h();var x=m(h);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function au(h,m,x){x=x!=null?x.concat([h]):null,nu(4,4,Cs.bind(null,m,h),x)}function ou(){}function Rs(h,m){var x=Tt();m=m===void 0?null:m;var w=x.memoizedState;return m!==null&&Pt(m,w[1])?w[0]:(x.memoizedState=[h,m],h)}function Is(h,m){var x=Tt();m=m===void 0?null:m;var w=x.memoizedState;if(m!==null&&Pt(m,w[1]))return w[0];if(w=h(),Dn){X(!0);try{h()}finally{X(!1)}}return x.memoizedState=[w,m],w}function ir(h,m,x){return x===void 0||(Il&1073741824)!==0&&(Mn&261930)===0?h.memoizedState=m:(h.memoizedState=x,h=_l(),sn.lanes|=h,Pl|=h,x)}function Ud(h,m,x,w){return ji(x,m)?x:Tc.current!==null?(h=ir(h,x,w),ji(h,m)||(hi=!0),h):(Il&42)===0||(Il&1073741824)!==0&&(Mn&261930)===0?(hi=!0,h.memoizedState=x):(h=_l(),sn.lanes|=h,Pl|=h,m)}function tc(h,m,x,w,O){var B=Oo();Tn(B!==0&&8>B?B:8);var K=Wt.T,be={};Wt.T=be,_p(h,!1,m,x);try{var Ze=O(),dt=Wt.S;if(dt!==null&&dt(be,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var bt=Ye(Ze,w);su(h,m,bt,_i(h))}else su(h,m,w,_i(h))}catch(gt){su(h,m,{then:function(){},status:"rejected",reason:gt},_i())}finally{Tn(B),K!==null&&be.types!==null&&(K.types=be.types),Wt.T=K}}function nc(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:gc,baseState:gc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:gc},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:x},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function gf(){return Y(vc)}function vf(){return Tt().memoizedState}function kr(){return Tt().memoizedState}function eo(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var x=_i();h=ma(x);var w=Zr(m,h,x);w!==null&&(Mi(w,m,x),$a(w,m,x)),m={cache:Le()},h.payload=m;return}m=m.return}}function na(h,m,x){var w=_i();x={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},bp(h)?S_(m,x):(x=pa(h,m,x,w),x!==null&&(Mi(x,h,w),E_(x,m,w)))}function rs(h,m,x){var w=_i();su(h,m,x,w)}function su(h,m,x,w){var O={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(bp(h))S_(m,O);else{var B=h.alternate;if(h.lanes===0&&(B===null||B.lanes===0)&&(B=m.lastRenderedReducer,B!==null))try{var K=m.lastRenderedState,be=B(K,x);if(O.hasEagerState=!0,O.eagerState=be,ji(be,K))return Sr(h,m,O,0),pn===null&&xr(),!1}catch{}finally{}if(x=pa(h,m,O,w),x!==null)return Mi(x,h,w),E_(x,m,w),!0}return!1}function _p(h,m,x,w){if(w={lane:2,revertLane:we(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},bp(h)){if(m)throw Error(r(479))}else m=pa(h,x,w,2),m!==null&&Mi(m,h,2)}function bp(h){var m=h.alternate;return h===sn||m!==null&&m===sn}function S_(h,m){fn=hn=!0;var x=h.pending;x===null?m.next=m:(m.next=x.next,x.next=m),h.pending=m}function E_(h,m,x){if((x&4194048)!==0){var w=m.lanes;w&=h.pendingLanes,x|=w,m.lanes=x,L(h,x)}}function jg(h,m,x,w){m=h.memoizedState,x=x(w,m),x=x==null?m:zp({},m,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}function xp(h,m,x,w,O,B,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(w,B,K):m.prototype&&m.prototype.isPureReactComponent?!Be(x,w)||!Be(O,B):!0}function T_(h,m,x,w){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,w),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,w),m.state!==h&&ch.enqueueReplaceState(m,m.state,null)}function ic(h,m){var x=m;if("ref"in m){x={};for(var w in m)w!=="ref"&&(x[w]=m[w])}if(h=h.defaultProps){x===m&&(x=zp({},x));for(var O in h)x[O]===void 0&&(x[O]=h[O])}return x}function Sp(h,m){try{var x=h.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(w){setTimeout(function(){throw w})}}function Xg(h,m,x){try{var w=h.onCaughtError;w(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function Yg(h,m,x){return x=ma(x),x.tag=3,x.payload={element:null},x.callback=function(){Sp(h,m)},x}function A_(h){return h=ma(h),h.tag=3,h}function M_(h,m,x,w){var O=x.type.getDerivedStateFromError;if(typeof O=="function"){var B=w.value;h.payload=function(){return O(B)},h.callback=function(){Xg(m,x,w)}}var K=x.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){Xg(m,x,w),typeof O!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var be=w.stack;this.componentDidCatch(w.value,{componentStack:be!==null?be:""})})}function fA(h,m,x,w,O){if(x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(m=x.alternate,m!==null&&je(m,x,O,!0),x=Fa.current,x!==null){switch(x.tag){case 31:case 13:return ka===null?Cf():x.alternate===null&&Ii===0&&(Ii=3),x.flags&=-257,x.flags|=65536,x.lanes=O,w===Xs?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([w]):m.add(w),Pf(h,w,O)),!1;case 22:return x.flags|=65536,w===Xs?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([w])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([w]):x.add(w)),Pf(h,w,O)),!1}throw Error(r(435,x.tag))}return Pf(h,w,O),Cf(),!1}if(An)return m=Fa.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=O,w!==um&&(h=Error(r(422),{cause:w}),Oe(pe(h,x)))):(w!==um&&(m=Error(r(423),{cause:w}),Oe(pe(m,x))),h=h.current.alternate,h.flags|=65536,O&=-O,h.lanes|=O,w=pe(w,x),O=Yg(h.stateNode,w,O),es(h,O),Ii!==4&&(Ii=2)),!1;var B=Error(r(520),{cause:w});if(B=pe(B,x),dh===null?dh=[B]:dh.push(B),Ii!==4&&(Ii=2),m===null)return!0;w=pe(w,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,h=O&-O,x.lanes|=h,h=Yg(x.stateNode,w,h),es(x,h),!1;case 1:if(m=x.type,B=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Nl===null||!Nl.has(B))))return x.flags|=65536,O&=-O,x.lanes|=O,O=A_(O),M_(O,h,x,w),es(x,O),!1}x=x.return}while(x!==null);return!1}function Br(h,m,x,w){m.child=h===null?Zv(m,null,x,w):Vr(m,h.child,x,w)}function w_(h,m,x,w,O){x=x.render;var B=m.ref;if("ref"in w){var K={};for(var be in w)be!=="ref"&&(K[be]=w[be])}else K=w;return He(m),w=Nt(h,m,x,K,B,O),be=yn(),h!==null&&!hi?(qn(h,m,O),Ps(h,m,O)):(An&&be&&ne(m),m.flags|=1,Br(h,m,w,O),m.child)}function C_(h,m,x,w,O){if(h===null){var B=x.type;return typeof B=="function"&&!lc(B)&&B.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=B,R_(h,m,B,w,O)):(h=Sl(x.type,null,w,m,m.mode,O),h.ref=m.ref,h.return=m,m.child=h)}if(B=h.child,!kd(h,O)){var K=B.memoizedProps;if(x=x.compare,x=x!==null?x:Be,x(K,w)&&h.ref===m.ref)return Ps(h,m,O)}return m.flags|=1,h=io(B,w),h.ref=m.ref,h.return=m,m.child=h}function R_(h,m,x,w,O){if(h!==null){var B=h.memoizedProps;if(Be(B,w)&&h.ref===m.ref)if(hi=!1,m.pendingProps=w=B,kd(h,O))(h.flags&131072)!==0&&(hi=!0);else return m.lanes=h.lanes,Ps(h,m,O)}return Tp(h,m,x,w,O)}function I_(h,m,x,w){var O=w.children,B=h!==null?h.memoizedState:null;if(h===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((m.flags&128)!==0){if(B=B!==null?B.baseLanes|x:x,h!==null){for(w=m.child=h.child,O=0;w!==null;)O=O|w.lanes|w.childLanes,w=w.sibling;w=O&~B}else w=0,m.child=null;return yf(h,m,B,x,w)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&vt(m,B!==null?B.cachePool:null),B!==null?Eo(m,B):Ot(),Fe(m);else return w=m.lanes=536870912,yf(h,m,B!==null?B.baseLanes|x:x,x,w)}else B!==null?(vt(m,B.cachePool),Eo(m,B),Pe(),m.memoizedState=null):(h!==null&&vt(m,null),Ot(),Pe());return Br(h,m,O,x),m.child}function rc(h,m){return h!==null&&h.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function yf(h,m,x,w,O){var B=tt();return B=B===null?null:{parent:qi?Si._currentValue:Si._currentValue2,pool:B},m.memoizedState={baseLanes:x,cachePool:B},h!==null&&vt(m,null),Ot(),Fe(m),h!==null&&je(h,m,w,!0),m.childLanes=O,null}function Ep(h,m){return m=lu({mode:m.mode,children:m.children},h.mode),m.ref=h.ref,h.child=m,m.return=h,m}function $g(h,m,x){return Vr(m,h.child,null,x),h=Ep(m,m.pendingProps),h.flags|=2,yt(m),m.memoizedState=null,h}function P_(h,m,x){var w=m.pendingProps,O=(m.flags&128)!==0;if(m.flags&=-129,h===null){if(An){if(w.mode==="hidden")return h=Ep(m,w),m.lanes=536870912,rc(null,h);if(Ve(m),(h=xi)?(h=Uv(h,xa),h!==null&&(m.memoizedState={dehydrated:h,treeContext:Fo!==null?{id:zr,overflow:os}:null,retryLane:536870912,hydrationErrors:null},x=dv(h),x.return=m,m.child=x,mr=m,xi=null)):h=null,h===null)throw ce(m);return m.lanes=536870912,null}return Ep(m,w)}var B=h.memoizedState;if(B!==null){var K=B.dehydrated;if(Ve(m),O)if(m.flags&256)m.flags&=-257,m=$g(h,m,x);else if(m.memoizedState!==null)m.child=h.child,m.flags|=128,m=null;else throw Error(r(558));else if(hi||je(h,m,x,!1),O=(x&h.childLanes)!==0,hi||O){if(w=pn,w!==null&&(K=F(w,x),K!==0&&K!==B.retryLane))throw B.retryLane=K,ai(h,K),Mi(w,h,K),Ea;Cf(),m=$g(h,m,x)}else h=B.treeContext,bi&&(xi=pb(K),mr=m,An=!0,js=null,xa=!1,h!==null&&ge(m,h)),m=Ep(m,w),m.flags|=4096;return m}return h=io(h.child,{mode:w.mode,children:w.children}),h.ref=m.ref,m.child=h,h.return=m,h}function Fd(h,m){var x=m.ref;if(x===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(h===null||h.ref!==x)&&(m.flags|=4194816)}}function Tp(h,m,x,w,O){return He(m),x=Nt(h,m,x,w,void 0,O),w=yn(),h!==null&&!hi?(qn(h,m,O),Ps(h,m,O)):(An&&w&&ne(m),m.flags|=1,Br(h,m,x,O),m.child)}function Kg(h,m,x,w,O,B){return He(m),m.updateQueue=null,x=Dt(m,w,x,O),Vt(h),w=yn(),h!==null&&!hi?(qn(h,m,B),Ps(h,m,B)):(An&&w&&ne(m),m.flags|=1,Br(h,m,x,B),m.child)}function ac(h,m,x,w,O){if(He(m),m.stateNode===null){var B=Hs,K=x.contextType;typeof K=="object"&&K!==null&&(B=Y(K)),B=new x(w,B),m.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=ch,m.stateNode=B,B._reactInternals=m,B=m.stateNode,B.props=w,B.state=m.memoizedState,B.refs={},Di(m),K=x.contextType,B.context=typeof K=="object"&&K!==null?Y(K):Hs,B.state=m.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(jg(m,x,K,w),B.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(K=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),K!==B.state&&ch.enqueueReplaceState(B,B.state,null),So(m,w,B,O),Ka(),B.state=m.memoizedState),typeof B.componentDidMount=="function"&&(m.flags|=4194308),w=!0}else if(h===null){B=m.stateNode;var be=m.memoizedProps,Ze=ic(x,be);B.props=Ze;var dt=B.context,bt=x.contextType;K=Hs,typeof bt=="object"&&bt!==null&&(K=Y(bt));var gt=x.getDerivedStateFromProps;bt=typeof gt=="function"||typeof B.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,bt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(be||dt!==K)&&T_(m,B,w,K),oo=!1;var Rt=m.memoizedState;B.state=Rt,So(m,w,B,O),Ka(),dt=m.memoizedState,be||Rt!==dt||oo?(typeof gt=="function"&&(jg(m,x,gt,w),dt=m.memoizedState),(Ze=oo||xp(m,x,Ze,w,Rt,dt,K))?(bt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(m.flags|=4194308)):(typeof B.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=w,m.memoizedState=dt),B.props=w,B.state=dt,B.context=K,w=Ze):(typeof B.componentDidMount=="function"&&(m.flags|=4194308),w=!1)}else{B=m.stateNode,Fr(h,m),K=m.memoizedProps,bt=ic(x,K),B.props=bt,gt=m.pendingProps,Rt=B.context,dt=x.contextType,Ze=Hs,typeof dt=="object"&&dt!==null&&(Ze=Y(dt)),be=x.getDerivedStateFromProps,(dt=typeof be=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(K!==gt||Rt!==Ze)&&T_(m,B,w,Ze),oo=!1,Rt=m.memoizedState,B.state=Rt,So(m,w,B,O),Ka();var rn=m.memoizedState;K!==gt||Rt!==rn||oo||h!==null&&h.dependencies!==null&&Re(h.dependencies)?(typeof be=="function"&&(jg(m,x,be,w),rn=m.memoizedState),(bt=oo||xp(m,x,bt,w,Rt,rn,Ze)||h!==null&&h.dependencies!==null&&Re(h.dependencies))?(dt||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(w,rn,Ze),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(w,rn,Ze)),typeof B.componentDidUpdate=="function"&&(m.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof B.componentDidUpdate!="function"||K===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=1024),m.memoizedProps=w,m.memoizedState=rn),B.props=w,B.state=rn,B.context=Ze,w=bt):(typeof B.componentDidUpdate!="function"||K===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||K===h.memoizedProps&&Rt===h.memoizedState||(m.flags|=1024),w=!1)}return B=w,Fd(h,m),w=(m.flags&128)!==0,B||w?(B=m.stateNode,x=w&&typeof x.getDerivedStateFromError!="function"?null:B.render(),m.flags|=1,h!==null&&w?(m.child=Vr(m,h.child,null,O),m.child=Vr(m,null,x,O)):Br(h,m,x,O),m.memoizedState=B.state,h=m.child):h=Ps(h,m,O),h}function N_(h,m,x,w){return ft(),m.flags|=256,Br(h,m,x,w),m.child}function Jg(h){return{baseLanes:h,cachePool:nt()}}function Zg(h,m,x){return h=h!==null?h.childLanes&~x:0,m&&(h|=Ta),h}function Qg(h,m,x){var w=m.pendingProps,O=!1,B=(m.flags&128)!==0,K;if((K=B)||(K=h!==null&&h.memoizedState===null?!1:(Ui.current&2)!==0),K&&(O=!0,m.flags&=-129),K=(m.flags&32)!==0,m.flags&=-33,h===null){if(An){if(O?Ae(m):Pe(),(h=xi)?(h=yb(h,xa),h!==null&&(m.memoizedState={dehydrated:h,treeContext:Fo!==null?{id:zr,overflow:os}:null,retryLane:536870912,hydrationErrors:null},x=dv(h),x.return=m,m.child=x,mr=m,xi=null)):h=null,h===null)throw ce(m);return Yp(h)?m.lanes=32:m.lanes=536870912,null}var be=w.children;return w=w.fallback,O?(Pe(),O=m.mode,be=lu({mode:"hidden",children:be},O),w=No(w,O,x,null),be.return=m,w.return=m,be.sibling=w,m.child=be,w=m.child,w.memoizedState=Jg(x),w.childLanes=Zg(h,K,x),m.memoizedState=Ac,rc(null,w)):(Ae(m),Ap(m,be))}var Ze=h.memoizedState;if(Ze!==null&&(be=Ze.dehydrated,be!==null)){if(B)m.flags&256?(Ae(m),m.flags&=-257,m=oc(h,m,x)):m.memoizedState!==null?(Pe(),m.child=h.child,m.flags|=128,m=null):(Pe(),be=w.fallback,O=m.mode,w=lu({mode:"visible",children:w.children},O),be=No(be,O,x,null),be.flags|=2,w.return=m,be.return=m,w.sibling=be,m.child=w,Vr(m,h.child,null,x),w=m.child,w.memoizedState=Jg(x),w.childLanes=Zg(h,K,x),m.memoizedState=Ac,m=rc(null,w));else if(Ae(m),Yp(be))K=$p(be).digest,w=Error(r(419)),w.stack="",w.digest=K,Oe({value:w,source:null,stack:null}),m=oc(h,m,x);else if(hi||je(h,m,x,!1),K=(x&h.childLanes)!==0,hi||K){if(K=pn,K!==null&&(w=F(K,x),w!==0&&w!==Ze.retryLane))throw Ze.retryLane=w,ai(h,w),Mi(K,h,w),Ea;xu(be)||Cf(),m=oc(h,m,x)}else xu(be)?(m.flags|=192,m.child=h.child,m=null):(h=Ze.treeContext,bi&&(xi=mb(be),mr=m,An=!0,js=null,xa=!1,h!==null&&ge(m,h)),m=Ap(m,w.children),m.flags|=4096);return m}return O?(Pe(),be=w.fallback,O=m.mode,Ze=h.child,B=Ze.sibling,w=io(Ze,{mode:"hidden",children:w.children}),w.subtreeFlags=Ze.subtreeFlags&65011712,B!==null?be=io(B,be):(be=No(be,O,x,null),be.flags|=2),be.return=m,w.return=m,w.sibling=be,m.child=w,rc(null,w),w=m.child,be=h.child.memoizedState,be===null?be=Jg(x):(O=be.cachePool,O!==null?(Ze=qi?Si._currentValue:Si._currentValue2,O=O.parent!==Ze?{parent:Ze,pool:Ze}:O):O=nt(),be={baseLanes:be.baseLanes|x,cachePool:O}),w.memoizedState=be,w.childLanes=Zg(h,K,x),m.memoizedState=Ac,rc(h.child,w)):(Ae(m),x=h.child,h=x.sibling,x=io(x,{mode:"visible",children:w.children}),x.return=m,x.sibling=null,h!==null&&(K=m.deletions,K===null?(m.deletions=[h],m.flags|=16):K.push(h)),m.child=x,m.memoizedState=null,x)}function Ap(h,m){return m=lu({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function lu(h,m){return h=n(22,h,null,m),h.lanes=0,h}function oc(h,m,x){return Vr(m,h.child,null,x),h=Ap(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function D_(h,m,x){h.lanes|=m;var w=h.alternate;w!==null&&(w.lanes|=m),Z(h.return,m,x)}function _f(h,m,x,w,O,B){var K=h.memoizedState;K===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:O,treeForkCount:B}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=w,K.tail=x,K.tailMode=O,K.treeForkCount=B)}function ev(h,m,x){var w=m.pendingProps,O=w.revealOrder,B=w.tail;w=w.children;var K=Ui.current,be=(K&2)!==0;if(be?(K=K&1|2,m.flags|=128):K&=1,b(Ui,K),Br(h,m,w,x),w=An?sh:0,!be&&h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&D_(h,x,m);else if(h.tag===19)D_(h,x,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(O){case"forwards":for(x=m.child,O=null;x!==null;)h=x.alternate,h!==null&&At(h)===null&&(O=x),x=x.sibling;x=O,x===null?(O=m.child,m.child=null):(O=x.sibling,x.sibling=null),_f(m,!1,O,x,B,w);break;case"backwards":case"unstable_legacy-backwards":for(x=null,O=m.child,m.child=null;O!==null;){if(h=O.alternate,h!==null&&At(h)===null){m.child=O;break}h=O.sibling,O.sibling=x,x=O,O=h}_f(m,!0,x,null,B,w);break;case"together":_f(m,!1,null,null,void 0,w);break;default:m.memoizedState=null}return m.child}function Ps(h,m,x){if(h!==null&&(m.dependencies=h.dependencies),Pl|=m.lanes,(x&m.childLanes)===0)if(h!==null){if(je(h,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(r(153));if(m.child!==null){for(h=m.child,x=io(h,h.pendingProps),m.child=x,x.return=m;h.sibling!==null;)h=h.sibling,x=x.sibling=io(h,h.pendingProps),x.return=m;x.sibling=null}return m.child}function kd(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&Re(h)))}function tv(h,m,x){switch(m.tag){case 3:_e(m,m.stateNode.containerInfo),Me(m,Si,h.memoizedState.cache),ft();break;case 27:case 5:oe(m);break;case 4:_e(m,m.stateNode.containerInfo);break;case 10:Me(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Ve(m),null;break;case 13:var w=m.memoizedState;if(w!==null)return w.dehydrated!==null?(Ae(m),m.flags|=128,null):(x&m.child.childLanes)!==0?Qg(h,m,x):(Ae(m),h=Ps(h,m,x),h!==null?h.sibling:null);Ae(m);break;case 19:var O=(h.flags&128)!==0;if(w=(x&m.childLanes)!==0,w||(je(h,m,x,!1),w=(x&m.childLanes)!==0),O){if(w)return ev(h,m,x);m.flags|=128}if(O=m.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),b(Ui,Ui.current),w)break;return null;case 22:return m.lanes=0,I_(h,m,x,m.pendingProps);case 24:Me(m,Si,h.memoizedState.cache)}return Ps(h,m,x)}function nv(h,m,x){if(h!==null)if(h.memoizedProps!==m.pendingProps)hi=!0;else{if(!kd(h,x)&&(m.flags&128)===0)return hi=!1,tv(h,m,x);hi=(h.flags&131072)!==0}else hi=!1,An&&(m.flags&1048576)!==0&&H(m,sh,m.index);switch(m.lanes=0,m.tag){case 16:e:{var w=m.pendingProps;if(h=St(m.elementType),m.type=h,typeof h=="function")lc(h)?(w=ic(h,w),m.tag=1,m=ac(null,m,h,w,x)):(m.tag=0,m=Tp(null,m,h,w,x));else{if(h!=null){var O=h.$$typeof;if(O===Nf){m.tag=11,m=w_(null,m,h,w,x);break e}else if(O===Vp){m.tag=14,m=C_(null,m,h,w,x);break e}}throw m=p(h)||h,Error(r(306,m,""))}}return m;case 0:return Tp(h,m,m.type,m.pendingProps,x);case 1:return w=m.type,O=ic(w,m.pendingProps),ac(h,m,w,O,x);case 3:e:{if(_e(m,m.stateNode.containerInfo),h===null)throw Error(r(387));var B=m.pendingProps;O=m.memoizedState,w=O.element,Fr(h,m),So(m,B,null,x);var K=m.memoizedState;if(B=K.cache,Me(m,Si,B),B!==O.cache&&it(m,[Si],x,!0),Ka(),B=K.element,bi&&O.isDehydrated)if(O={element:B,isDehydrated:!1,cache:K.cache},m.updateQueue.baseState=O,m.memoizedState=O,m.flags&256){m=N_(h,m,B,x);break e}else if(B!==w){w=pe(Error(r(424)),m),Oe(w),m=N_(h,m,B,x);break e}else for(bi&&(xi=hb(m.stateNode.containerInfo),mr=m,An=!0,js=null,xa=!0),x=Zv(m,null,B,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ft(),B===w){m=Ps(h,m,x);break e}Br(h,m,B,x)}m=m.child}return m;case 26:if(Lo)return Fd(h,m),h===null?(x=Gv(m.type,null,m.pendingProps,null))?m.memoizedState=x:An||(m.stateNode=Qp(m.type,m.pendingProps,Gr.current,m)):m.memoizedState=Gv(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:if(pr)return oe(m),h===null&&pr&&An&&(w=m.stateNode=em(m.type,m.pendingProps,Gr.current,Cr.current,!1),mr=m,xa=!0,xi=Lv(m.type,w,xi)),Br(h,m,m.pendingProps.children,x),Fd(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&An&&(wb(m.type,m.pendingProps,Cr.current),(O=w=xi)&&(w=gb(w,m.type,m.pendingProps,xa),w!==null?(m.stateNode=w,mr=m,xi=db(w),xa=!1,O=!0):O=!1),O||ce(m)),oe(m),O=m.type,B=m.pendingProps,K=h!==null?h.memoizedProps:null,w=B.children,ba(O,B)?w=null:K!==null&&ba(O,K)&&(m.flags|=32),m.memoizedState!==null&&(O=Nt(h,m,qt,null,null,x),qi?vc._currentValue=O:vc._currentValue2=O),Fd(h,m),Br(h,m,w,x),m.child;case 6:return h===null&&An&&(zv(m.pendingProps,Cr.current),(h=x=xi)&&(x=vb(x,m.pendingProps,xa),x!==null?(m.stateNode=x,mr=m,xi=null,h=!0):h=!1),h||ce(m)),null;case 13:return Qg(h,m,x);case 4:return _e(m,m.stateNode.containerInfo),w=m.pendingProps,h===null?m.child=Vr(m,null,w,x):Br(h,m,w,x),m.child;case 11:return w_(h,m,m.type,m.pendingProps,x);case 7:return Br(h,m,m.pendingProps,x),m.child;case 8:return Br(h,m,m.pendingProps.children,x),m.child;case 12:return Br(h,m,m.pendingProps.children,x),m.child;case 10:return w=m.pendingProps,Me(m,m.type,w.value),Br(h,m,w.children,x),m.child;case 9:return O=m.type._context,w=m.pendingProps.children,He(m),O=Y(O),w=w(O),m.flags|=1,Br(h,m,w,x),m.child;case 14:return C_(h,m,m.type,m.pendingProps,x);case 15:return R_(h,m,m.type,m.pendingProps,x);case 19:return ev(h,m,x);case 31:return P_(h,m,x);case 22:return I_(h,m,x,m.pendingProps);case 24:return He(m),w=Y(Si),h===null?(O=tt(),O===null&&(O=pn,B=Le(),O.pooledCache=B,B.refCount++,B!==null&&(O.pooledCacheLanes|=x),O=B),m.memoizedState={parent:w,cache:O},Di(m),Me(m,Si,O)):((h.lanes&x)!==0&&(Fr(h,m),So(m,null,null,x),Ka()),O=h.memoizedState,B=m.memoizedState,O.parent!==w?(O={parent:w,cache:w},m.memoizedState=O,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=O),Me(m,Si,w)):(w=B.cache,Me(m,Si,w),w!==O.cache&&it(m,[Si],x,!0))),Br(h,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function wo(h){h.flags|=4}function Bd(h){ro&&(h.flags|=8)}function O_(h,m){if(h!==null&&h.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(h=m.child;h!==null;){if((h.flags&8218)!==0||(h.subtreeFlags&8218)!==0)return!0;h=h.sibling}return!1}function iv(h,m,x,w){if(In)for(x=m.child;x!==null;){if(x.tag===5||x.tag===6)Qd(h,x.stateNode);else if(!(x.tag===4||pr&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(ro)for(var O=m.child;O!==null;){if(O.tag===5){var B=O.stateNode;x&&w&&(B=lb(B,O.type,O.memoizedProps)),Qd(h,B)}else if(O.tag===6)B=O.stateNode,x&&w&&(B=Dv(B,O.memoizedProps)),Qd(h,B);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)B=O.child,B!==null&&(B.return=O),iv(h,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===m)break;for(;O.sibling===null;){if(O.return===null||O.return===m)return;O=O.return}O.sibling.return=O.return,O=O.sibling}}function L_(h,m,x,w){var O=!1;if(ro)for(var B=m.child;B!==null;){if(B.tag===5){var K=B.stateNode;x&&w&&(K=lb(K,B.type,B.memoizedProps)),Pv(h,K)}else if(B.tag===6)K=B.stateNode,x&&w&&(K=Dv(K,B.memoizedProps)),Pv(h,K);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)O=B.child,O!==null&&(O.return=B),L_(h,B,!0,!0),O=!0;else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===m)break;for(;B.sibling===null;){if(B.return===null||B.return===m)return O;B=B.return}B.sibling.return=B.return,B=B.sibling}return O}function U_(h,m){if(ro&&O_(h,m)){h=m.stateNode;var x=h.containerInfo,w=Iv();L_(w,m,!1,!1),h.pendingChildren=w,wo(m),sb(x,w)}}function rv(h,m,x,w){if(In)h.memoizedProps!==w&&wo(m);else if(ro){var O=h.stateNode,B=h.memoizedProps;if((h=O_(h,m))||B!==w){var K=Cr.current;B=ob(O,x,B,w,!h,null),B===O?m.stateNode=O:(Bd(m),Da(B,x,w,K)&&wo(m),m.stateNode=B,h&&iv(B,m,!1,!1))}else m.stateNode=O}}function va(h,m,x,w,O){if((h.mode&32)!==0&&(x===null?eh(m,w):Ff(m,x,w))){if(h.flags|=16777216,(O&335544128)===O||_v(m,w))if(wi(h.stateNode,m,w))h.flags|=8192;else if(Rn())h.flags|=8192;else throw Sa=Xs,fm}else h.flags&=-16777217}function bf(h,m){if(Wv(m)){if(h.flags|=16777216,!jv(m))if(Rn())h.flags|=8192;else throw Sa=Xs,fm}else h.flags&=-16777217}function zd(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?N():536870912,h.lanes|=m,jf|=m)}function xf(h,m){if(!An)switch(h.tailMode){case"hidden":m=h.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:w.sibling=null}}function oi(h){var m=h.alternate!==null&&h.alternate.child===h.child,x=0,w=0;if(m)for(var O=h.child;O!==null;)x|=O.lanes|O.childLanes,w|=O.subtreeFlags&65011712,w|=O.flags&65011712,O.return=h,O=O.sibling;else for(O=h.child;O!==null;)x|=O.lanes|O.childLanes,w|=O.subtreeFlags,w|=O.flags,O.return=h,O=O.sibling;return h.subtreeFlags|=w,h.childLanes=x,m}function F_(h,m,x){var w=m.pendingProps;switch(le(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(m),null;case 1:return oi(m),null;case 3:return x=m.stateNode,w=null,h!==null&&(w=h.memoizedState.cache),m.memoizedState.cache!==w&&(m.flags|=2048),Je(Si),re(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(h===null||h.child===null)&&(ve(m)?wo(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Se())),U_(h,m),oi(m),null;case 26:if(Lo){var O=m.type,B=m.memoizedState;return h===null?(wo(m),B!==null?(oi(m),bf(m,B)):(oi(m),va(m,O,null,w,x))):B?B!==h.memoizedState?(wo(m),oi(m),bf(m,B)):(oi(m),m.flags&=-16777217):(B=h.memoizedProps,In?B!==w&&wo(m):rv(h,m,O,w),oi(m),va(m,O,B,w,x)),null}case 27:if(pr){if(Ee(m),x=Gr.current,O=m.type,h!==null&&m.stateNode!=null)In?h.memoizedProps!==w&&wo(m):rv(h,m,O,w);else{if(!w){if(m.stateNode===null)throw Error(r(166));return oi(m),null}h=Cr.current,ve(m)?Ce(m,h):(h=em(O,w,x,h,!0),m.stateNode=h,wo(m))}return oi(m),null}case 5:if(Ee(m),O=m.type,h!==null&&m.stateNode!=null)rv(h,m,O,w);else{if(!w){if(m.stateNode===null)throw Error(r(166));return oi(m),null}if(B=Cr.current,ve(m))Ce(m,B),Tb(m.stateNode,O,w,B)&&(m.flags|=64);else{var K=vv(O,w,Gr.current,B,m);Bd(m),iv(K,m,!1,!1),m.stateNode=K,Da(K,O,w,B)&&wo(m)}}return oi(m),va(m,m.type,h===null?null:h.memoizedProps,m.pendingProps,x),null;case 6:if(h&&m.stateNode!=null)x=h.memoizedProps,In?x!==w&&wo(m):ro&&(x!==w?(h=Gr.current,x=Cr.current,Bd(m),m.stateNode=Al(w,h,x,m)):m.stateNode=h.stateNode);else{if(typeof w!="string"&&m.stateNode===null)throw Error(r(166));if(h=Gr.current,x=Cr.current,ve(m)){if(!bi)throw Error(r(176));if(h=m.stateNode,x=m.memoizedProps,w=null,O=mr,O!==null)switch(O.tag){case 27:case 5:w=O.memoizedProps}gA(h,x,m,w)||ce(m,!0)}else Bd(m),m.stateNode=Al(w,h,x,m)}return oi(m),null;case 31:if(x=m.memoizedState,h===null||h.memoizedState!==null){if(w=ve(m),x!==null){if(h===null){if(!w)throw Error(r(318));if(!bi)throw Error(r(556));if(h=m.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(557));Fv(h,m)}else ft(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;oi(m),h=!1}else x=Se(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=x),h=!0;if(!h)return m.flags&256?(yt(m),m):(yt(m),null);if((m.flags&128)!==0)throw Error(r(558))}return oi(m),null;case 13:if(w=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(O=ve(m),w!==null&&w.dehydrated!==null){if(h===null){if(!O)throw Error(r(318));if(!bi)throw Error(r(344));if(O=m.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));bb(O,m)}else ft(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;oi(m),O=!1}else O=Se(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=O),O=!0;if(!O)return m.flags&256?(yt(m),m):(yt(m),null)}return yt(m),(m.flags&128)!==0?(m.lanes=x,m):(x=w!==null,h=h!==null&&h.memoizedState!==null,x&&(w=m.child,O=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(O=w.alternate.memoizedState.cachePool.pool),B=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(B=w.memoizedState.cachePool.pool),B!==O&&(w.flags|=2048)),x!==h&&x&&(m.child.flags|=8192),zd(m,m.updateQueue),oi(m),null);case 4:return re(),U_(h,m),h===null&&ei(m.stateNode.containerInfo),oi(m),null;case 10:return Je(m.type),oi(m),null;case 19:if(y(Ui),w=m.memoizedState,w===null)return oi(m),null;if(O=(m.flags&128)!==0,B=w.rendering,B===null)if(O)xf(w,!1);else{if(Ii!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(B=At(h),B!==null){for(m.flags|=128,xf(w,!1),h=B.updateQueue,m.updateQueue=h,zd(m,h),m.subtreeFlags=0,h=x,x=m.child;x!==null;)Fp(x,h),x=x.sibling;return b(Ui,Ui.current&1|2),An&&de(m,w.treeForkCount),m.child}h=h.sibling}w.tail!==null&&ra()>Nu&&(m.flags|=128,O=!0,xf(w,!1),m.lanes=4194304)}else{if(!O)if(h=At(B),h!==null){if(m.flags|=128,O=!0,h=h.updateQueue,m.updateQueue=h,zd(m,h),xf(w,!0),w.tail===null&&w.tailMode==="hidden"&&!B.alternate&&!An)return oi(m),null}else 2*ra()-w.renderingStartTime>Nu&&x!==536870912&&(m.flags|=128,O=!0,xf(w,!1),m.lanes=4194304);w.isBackwards?(B.sibling=m.child,m.child=B):(h=w.last,h!==null?h.sibling=B:m.child=B,w.last=B)}return w.tail!==null?(h=w.tail,w.rendering=h,w.tail=h.sibling,w.renderingStartTime=ra(),h.sibling=null,x=Ui.current,b(Ui,O?x&1|2:x&1),An&&de(m,w.treeForkCount),h):(oi(m),null);case 22:case 23:return yt(m),J(),w=m.memoizedState!==null,h!==null?h.memoizedState!==null!==w&&(m.flags|=8192):w&&(m.flags|=8192),w?(x&536870912)!==0&&(m.flags&128)===0&&(oi(m),m.subtreeFlags&6&&(m.flags|=8192)):oi(m),x=m.updateQueue,x!==null&&zd(m,x.retryQueue),x=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==x&&(m.flags|=2048),h!==null&&y(Tu),null;case 24:return x=null,h!==null&&(x=h.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),Je(Si),oi(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function av(h,m){switch(le(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Je(Si),re(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Ee(m),null;case 31:if(m.memoizedState!==null){if(yt(m),m.alternate===null)throw Error(r(340));ft()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 13:if(yt(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(r(340));ft()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return y(Ui),null;case 4:return re(),null;case 10:return Je(m.type),null;case 22:case 23:return yt(m),J(),h!==null&&y(Tu),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return Je(Si),null;case 25:return null;default:return null}}function k_(h,m){switch(le(m),m.tag){case 3:Je(Si),re();break;case 26:case 27:case 5:Ee(m);break;case 4:re();break;case 31:m.memoizedState!==null&&yt(m);break;case 13:yt(m);break;case 19:y(Ui);break;case 10:Je(m.type);break;case 22:case 23:yt(m),J(),h!==null&&y(Tu);break;case 24:Je(Si)}}function Ns(h,m){try{var x=m.updateQueue,w=x!==null?x.lastEffect:null;if(w!==null){var O=w.next;x=O;do{if((x.tag&h)===h){w=void 0;var B=x.create,K=x.inst;w=B(),K.destroy=w}x=x.next}while(x!==O)}}catch(be){Zt(m,m.return,be)}}function Ds(h,m,x){try{var w=m.updateQueue,O=w!==null?w.lastEffect:null;if(O!==null){var B=O.next;w=B;do{if((w.tag&h)===h){var K=w.inst,be=K.destroy;if(be!==void 0){K.destroy=void 0,O=m;var Ze=x,dt=be;try{dt()}catch(bt){Zt(O,Ze,bt)}}}w=w.next}while(w!==B)}}catch(bt){Zt(m,m.return,bt)}}function Sf(h){var m=h.updateQueue;if(m!==null){var x=h.stateNode;try{Ja(m,x)}catch(w){Zt(h,h.return,w)}}}function Mp(h,m,x){x.props=ic(h.type,h.memoizedProps),x.state=h.memoizedState;try{x.componentWillUnmount()}catch(w){Zt(h,m,w)}}function Ef(h,m){try{var x=h.ref;if(x!==null){switch(h.tag){case 26:case 27:case 5:var w=Of(h.stateNode);break;case 30:w=h.stateNode;break;default:w=h.stateNode}typeof x=="function"?h.refCleanup=x(w):x.current=w}}catch(O){Zt(h,m,O)}}function ia(h,m){var x=h.ref,w=h.refCleanup;if(x!==null)if(typeof w=="function")try{w()}catch(O){Zt(h,m,O)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(O){Zt(h,m,O)}else x.current=null}function sc(h){var m=h.type,x=h.memoizedProps,w=h.stateNode;try{Z_(w,m,x,h)}catch(O){Zt(h,h.return,O)}}function Gd(h,m,x){try{Q_(h.stateNode,h.type,x,m,h)}catch(w){Zt(h,h.return,w)}}function ov(h){return h.tag===5||h.tag===3||(Lo?h.tag===26:!1)||(pr?h.tag===27&&yc(h.type):!1)||h.tag===4}function vl(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ov(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(pr&&h.tag===27&&yc(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function wp(h,m,x){var w=h.tag;if(w===5||w===6)h=h.stateNode,m?tb(x,h,m):Mv(x,h);else if(w!==4&&(pr&&w===27&&yc(h.type)&&(x=h.stateNode,m=null),h=h.child,h!==null))for(wp(h,m,x),h=h.sibling;h!==null;)wp(h,m,x),h=h.sibling}function Vd(h,m,x){var w=h.tag;if(w===5||w===6)h=h.stateNode,m?eb(x,h,m):Av(x,h);else if(w!==4&&(pr&&w===27&&yc(h.type)&&(x=h.stateNode),h=h.child,h!==null))for(Vd(h,m,x),h=h.sibling;h!==null;)Vd(h,m,x),h=h.sibling}function sv(h,m,x){h=h.containerInfo;try{Nv(h,x)}catch(w){Zt(m,m.return,w)}}function B_(h){var m=h.stateNode,x=h.memoizedProps;try{ar(h.type,x,m,h)}catch(w){Zt(h,h.return,w)}}function dA(h,m){for(Hp(h.containerInfo),Xi=m;Xi!==null;)if(h=Xi,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,Xi=m;else for(;Xi!==null;){h=Xi;var x=h.alternate;switch(m=h.flags,h.tag){case 0:if((m&4)!==0&&(m=h.updateQueue,m=m!==null?m.events:null,m!==null))for(var w=0;w<m.length;w++){var O=m[w];O.ref.impl=O.nextImpl}break;case 11:case 15:break;case 1:if((m&1024)!==0&&x!==null){m=void 0,w=h,O=x.memoizedProps,x=x.memoizedState;var B=w.stateNode;try{var K=ic(w.type,O);m=B.getSnapshotBeforeUpdate(K,x),B.__reactInternalSnapshotBeforeUpdate=m}catch(be){Zt(w,w.return,be)}}break;case 3:(m&1024)!==0&&In&&Rv(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=h.sibling,m!==null){m.return=h.return,Xi=m;break}Xi=h.return}}function z_(h,m,x){var w=x.flags;switch(x.tag){case 0:case 11:case 15:ya(h,x),w&4&&Ns(5,x);break;case 1:if(ya(h,x),w&4)if(h=x.stateNode,m===null)try{h.componentDidMount()}catch(K){Zt(x,x.return,K)}else{var O=ic(x.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(O,m,h.__reactInternalSnapshotBeforeUpdate)}catch(K){Zt(x,x.return,K)}}w&64&&Sf(x),w&512&&Ef(x,x.return);break;case 3:if(ya(h,x),w&64&&(w=x.updateQueue,w!==null)){if(h=null,x.child!==null)switch(x.child.tag){case 27:case 5:h=Of(x.child.stateNode);break;case 1:h=x.child.stateNode}try{Ja(w,h)}catch(K){Zt(x,x.return,K)}}break;case 27:pr&&m===null&&w&4&&B_(x);case 26:case 5:if(ya(h,x),m===null){if(w&4)sc(x);else if(w&64){h=x.type,m=x.memoizedProps,O=x.stateNode;try{Sb(O,h,m,x)}catch(K){Zt(x,x.return,K)}}}w&512&&Ef(x,x.return);break;case 12:ya(h,x);break;case 31:ya(h,x),w&4&&Ro(h,x);break;case 13:ya(h,x),w&4&&qd(h,x),w&64&&(w=x.memoizedState,w!==null&&(w=w.dehydrated,w!==null&&(x=hA.bind(null,x),Kp(w,x))));break;case 22:if(w=x.memoizedState!==null||Fi,!w){m=m!==null&&m.memoizedState!==null||ki,O=Fi;var B=ki;Fi=w,(ki=m)&&!B?Po(h,x,(x.subtreeFlags&8772)!==0):ya(h,x),Fi=O,ki=B}break;case 30:break;default:ya(h,x)}}function lv(h){var m=h.alternate;m!==null&&(h.alternate=null,lv(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&qp(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Co(h,m,x){for(x=x.child;x!==null;)Hd(h,m,x),x=x.sibling}function Hd(h,m,x){if(Ua&&typeof Ua.onCommitFiberUnmount=="function")try{Ua.onCommitFiberUnmount(xc,x)}catch{}switch(x.tag){case 26:if(Lo){ki||ia(x,m),Co(h,m,x),x.memoizedState?Su(x.memoizedState):x.stateNode&&qv(x.stateNode);break}case 27:if(pr){ki||ia(x,m);var w=Ri,O=Yi;yc(x.type)&&(Ri=x.stateNode,Yi=!1),Co(h,m,x),wr(x.stateNode),Ri=w,Yi=O;break}case 5:ki||ia(x,m);case 6:if(In){if(w=Ri,O=Yi,Ri=null,Co(h,m,x),Ri=w,Yi=O,Ri!==null)if(Yi)try{wv(Ri,x.stateNode)}catch(B){Zt(x,m,B)}else try{nb(Ri,x.stateNode)}catch(B){Zt(x,m,B)}}else Co(h,m,x);break;case 18:In&&Ri!==null&&(Yi?Jp(Ri,x.stateNode):Bv(Ri,x.stateNode));break;case 4:In?(w=Ri,O=Yi,Ri=x.stateNode.containerInfo,Yi=!0,Co(h,m,x),Ri=w,Yi=O):(ro&&sv(x.stateNode,x,Iv()),Co(h,m,x));break;case 0:case 11:case 14:case 15:Ds(2,x,m),ki||Ds(4,x,m),Co(h,m,x);break;case 1:ki||(ia(x,m),w=x.stateNode,typeof w.componentWillUnmount=="function"&&Mp(x,m,w)),Co(h,m,x);break;case 21:Co(h,m,x);break;case 22:ki=(w=ki)||x.memoizedState!==null,Co(h,m,x),ki=w;break;default:Co(h,m,x)}}function Ro(h,m){if(bi&&m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{vA(h)}catch(x){Zt(m,m.return,x)}}}function qd(h,m){if(bi&&m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{yA(h)}catch(x){Zt(m,m.return,x)}}function Io(h){switch(h.tag){case 31:case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new e0),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new e0),m;default:throw Error(r(435,h.tag))}}function yl(h,m){var x=Io(h);m.forEach(function(w){if(!x.has(w)){x.add(w);var O=pA.bind(null,h,w);w.then(O,O)}})}function Ar(h,m){var x=m.deletions;if(x!==null)for(var w=0;w<x.length;w++){var O=x[w],B=h,K=m;if(In){var be=K;e:for(;be!==null;){switch(be.tag){case 27:if(pr){if(yc(be.type)){Ri=be.stateNode,Yi=!1;break e}break}case 5:Ri=be.stateNode,Yi=!1;break e;case 3:case 4:Ri=be.stateNode.containerInfo,Yi=!0;break e}be=be.return}if(Ri===null)throw Error(r(160));Hd(B,K,O),Ri=null,Yi=!1}else Hd(B,K,O);B=O.alternate,B!==null&&(B.return=null),O.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)Wd(m,h),m=m.sibling}function Wd(h,m){var x=h.alternate,w=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Ar(m,h),Mr(h),w&4&&(Ds(3,h,h.return),Ns(3,h),Ds(5,h,h.return));break;case 1:Ar(m,h),Mr(h),w&512&&(ki||x===null||ia(x,x.return)),w&64&&Fi&&(h=h.updateQueue,h!==null&&(w=h.callbacks,w!==null&&(x=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=x===null?w:x.concat(w))));break;case 26:if(Lo){var O=Jn;if(Ar(m,h),Mr(h),w&512&&(ki||x===null||ia(x,x.return)),w&4){w=x!==null?x.memoizedState:null;var B=h.memoizedState;x===null?B===null?h.stateNode===null?h.stateNode=Cb(O,h.type,h.memoizedProps,h):Hv(O,h.type,h.stateNode):h.stateNode=Vv(O,B,h.memoizedProps):w!==B?(w===null?x.stateNode!==null&&qv(x.stateNode):Su(w),B===null?Hv(O,h.type,h.stateNode):Vv(O,B,h.memoizedProps)):B===null&&h.stateNode!==null&&Gd(h,h.memoizedProps,x.memoizedProps)}break}case 27:if(pr){Ar(m,h),Mr(h),w&512&&(ki||x===null||ia(x,x.return)),x!==null&&w&4&&Gd(h,h.memoizedProps,x.memoizedProps);break}case 5:if(Ar(m,h),Mr(h),w&512&&(ki||x===null||ia(x,x.return)),In){if(h.flags&32){O=h.stateNode;try{Cv(O)}catch(gt){Zt(h,h.return,gt)}}w&4&&h.stateNode!=null&&(O=h.memoizedProps,Gd(h,O,x!==null?x.memoizedProps:O)),w&1024&&(Gf=!0)}else ro&&h.alternate!==null&&(h.alternate.stateNode=h.stateNode);break;case 6:if(Ar(m,h),Mr(h),w&4&&In){if(h.stateNode===null)throw Error(r(162));w=h.memoizedProps,x=x!==null?x.memoizedProps:w,O=h.stateNode;try{J_(O,x,w)}catch(gt){Zt(h,h.return,gt)}}break;case 3:if(Lo?(Rb(),O=Jn,Jn=ih(m.containerInfo),Ar(m,h),Jn=O):Ar(m,h),Mr(h),w&4){if(In&&bi&&x!==null&&x.memoizedState.isDehydrated)try{Eb(m.containerInfo)}catch(gt){Zt(h,h.return,gt)}if(ro){w=m.containerInfo,x=m.pendingChildren;try{Nv(w,x)}catch(gt){Zt(h,h.return,gt)}}}Gf&&(Gf=!1,Cp(h));break;case 4:Lo?(x=Jn,Jn=ih(h.stateNode.containerInfo),Ar(m,h),Mr(h),Jn=x):(Ar(m,h),Mr(h)),w&4&&ro&&sv(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:Ar(m,h),Mr(h);break;case 31:Ar(m,h),Mr(h),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,yl(h,w)));break;case 13:Ar(m,h),Mr(h),h.child.flags&8192&&h.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(hh=ra()),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,yl(h,w)));break;case 22:O=h.memoizedState!==null;var K=x!==null&&x.memoizedState!==null,be=Fi,Ze=ki;if(Fi=be||O,ki=Ze||K,Ar(m,h),ki=Ze,Fi=be,Mr(h),w&8192&&(m=h.stateNode,m._visibility=O?m._visibility&-2:m._visibility|1,O&&(x===null||K||Fi||ki||uu(h)),In)){e:if(x=null,In)for(m=h;;){if(m.tag===5||Lo&&m.tag===26){if(x===null){K=x=m;try{B=K.stateNode,O?mA(B):rb(K.stateNode,K.memoizedProps)}catch(gt){Zt(K,K.return,gt)}}}else if(m.tag===6){if(x===null){K=m;try{var dt=K.stateNode;O?ib(dt):ab(dt,K.memoizedProps)}catch(gt){Zt(K,K.return,gt)}}}else if(m.tag===18){if(x===null){K=m;try{var bt=K.stateNode;O?Ab(bt):Mb(K.stateNode)}catch(gt){Zt(K,K.return,gt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}}w&4&&(w=h.updateQueue,w!==null&&(x=w.retryQueue,x!==null&&(w.retryQueue=null,yl(h,x))));break;case 19:Ar(m,h),Mr(h),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,yl(h,w)));break;case 30:break;case 21:break;default:Ar(m,h),Mr(h)}}function Mr(h){var m=h.flags;if(m&2){try{for(var x,w=h.return;w!==null;){if(ov(w)){x=w;break}w=w.return}if(In){if(x==null)throw Error(r(160));switch(x.tag){case 27:if(pr){var O=x.stateNode,B=vl(h);Vd(h,B,O);break}case 5:var K=x.stateNode;x.flags&32&&(Cv(K),x.flags&=-33);var be=vl(h);Vd(h,be,K);break;case 3:case 4:var Ze=x.stateNode.containerInfo,dt=vl(h);wp(h,dt,Ze);break;default:throw Error(r(161))}}}catch(bt){Zt(h,h.return,bt)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Cp(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;Cp(m),m.tag===5&&m.flags&1024&&xv(m.stateNode),h=h.sibling}}function ya(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)z_(h,m.alternate,m),m=m.sibling}function uu(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Ds(4,m,m.return),uu(m);break;case 1:ia(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&Mp(m,m.return,x),uu(m);break;case 27:pr&&wr(m.stateNode);case 26:case 5:ia(m,m.return),uu(m);break;case 22:m.memoizedState===null&&uu(m);break;case 30:uu(m);break;default:uu(m)}h=h.sibling}}function Po(h,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var w=m.alternate,O=h,B=m,K=B.flags;switch(B.tag){case 0:case 11:case 15:Po(O,B,x),Ns(4,B);break;case 1:if(Po(O,B,x),w=B,O=w.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(dt){Zt(w,w.return,dt)}if(w=B,O=w.updateQueue,O!==null){var be=w.stateNode;try{var Ze=O.shared.hiddenCallbacks;if(Ze!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Ze.length;O++)Ra(Ze[O],be)}catch(dt){Zt(w,w.return,dt)}}x&&K&64&&Sf(B),Ef(B,B.return);break;case 27:pr&&B_(B);case 26:case 5:Po(O,B,x),x&&w===null&&K&4&&sc(B),Ef(B,B.return);break;case 12:Po(O,B,x);break;case 31:Po(O,B,x),x&&K&4&&Ro(O,B);break;case 13:Po(O,B,x),x&&K&4&&qd(O,B);break;case 22:B.memoizedState===null&&Po(O,B,x),Ef(B,B.return);break;case 30:break;default:Po(O,B,x)}m=m.sibling}}function cu(h,m){var x=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==x&&(h!=null&&h.refCount++,x!=null&&Ie(x))}function uv(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Ie(h))}function Ai(h,m,x,w){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Rp(h,m,x,w),m=m.sibling}function Rp(h,m,x,w){var O=m.flags;switch(m.tag){case 0:case 11:case 15:Ai(h,m,x,w),O&2048&&Ns(9,m);break;case 1:Ai(h,m,x,w);break;case 3:Ai(h,m,x,w),O&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Ie(h)));break;case 12:if(O&2048){Ai(h,m,x,w),h=m.stateNode;try{var B=m.memoizedProps,K=B.id,be=B.onPostCommit;typeof be=="function"&&be(K,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ze){Zt(m,m.return,Ze)}}else Ai(h,m,x,w);break;case 31:Ai(h,m,x,w);break;case 13:Ai(h,m,x,w);break;case 23:break;case 22:B=m.stateNode,K=m.alternate,m.memoizedState!==null?B._visibility&2?Ai(h,m,x,w):Tf(h,m):B._visibility&2?Ai(h,m,x,w):(B._visibility|=2,Ia(h,m,x,w,(m.subtreeFlags&10256)!==0||!1)),O&2048&&cu(K,m);break;case 24:Ai(h,m,x,w),O&2048&&uv(m.alternate,m);break;default:Ai(h,m,x,w)}}function Ia(h,m,x,w,O){for(O=O&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var B=h,K=m,be=x,Ze=w,dt=K.flags;switch(K.tag){case 0:case 11:case 15:Ia(B,K,be,Ze,O),Ns(8,K);break;case 23:break;case 22:var bt=K.stateNode;K.memoizedState!==null?bt._visibility&2?Ia(B,K,be,Ze,O):Tf(B,K):(bt._visibility|=2,Ia(B,K,be,Ze,O)),O&&dt&2048&&cu(K.alternate,K);break;case 24:Ia(B,K,be,Ze,O),O&&dt&2048&&uv(K.alternate,K);break;default:Ia(B,K,be,Ze,O)}m=m.sibling}}function Tf(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=h,w=m,O=w.flags;switch(w.tag){case 22:Tf(x,w),O&2048&&cu(w.alternate,w);break;case 24:Tf(x,w),O&2048&&uv(w.alternate,w);break;default:Tf(x,w)}m=m.sibling}}function Os(h,m,x){if(h.subtreeFlags&lo)for(h=h.child;h!==null;)fu(h,m,x),h=h.sibling}function fu(h,m,x){switch(h.tag){case 26:if(Os(h,m,x),h.flags&lo)if(h.memoizedState!==null)Ib(x,Jn,h.memoizedState,h.memoizedProps);else{var w=h.stateNode,O=h.type;h=h.memoizedProps,((m&335544128)===m||_v(O,h))&&Wp(x,w,O,h)}break;case 5:Os(h,m,x),h.flags&lo&&(w=h.stateNode,O=h.type,h=h.memoizedProps,((m&335544128)===m||_v(O,h))&&Wp(x,w,O,h));break;case 3:case 4:Lo?(w=Jn,Jn=ih(h.stateNode.containerInfo),Os(h,m,x),Jn=w):Os(h,m,x);break;case 22:h.memoizedState===null&&(w=h.alternate,w!==null&&w.memoizedState!==null?(w=lo,lo=16777216,Os(h,m,x),lo=w):Os(h,m,x));break;default:Os(h,m,x)}}function Ip(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Af(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var w=m[x];Xi=w,to(w,h)}Ip(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Pp(h),h=h.sibling}function Pp(h){switch(h.tag){case 0:case 11:case 15:Af(h),h.flags&2048&&Ds(9,h,h.return);break;case 3:Af(h);break;case 12:Af(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,jd(h)):Af(h);break;default:Af(h)}}function jd(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var w=m[x];Xi=w,to(w,h)}Ip(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Ds(8,m,m.return),jd(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,jd(m));break;default:jd(m)}h=h.sibling}}function to(h,m){for(;Xi!==null;){var x=Xi;switch(x.tag){case 0:case 11:case 15:Ds(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var w=x.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Ie(x.memoizedState.cache)}if(w=x.child,w!==null)w.return=x,Xi=w;else e:for(x=h;Xi!==null;){w=Xi;var O=w.sibling,B=w.return;if(lv(w),w===x){Xi=null;break e}if(O!==null){O.return=B,Xi=O;break e}Xi=B}}}function du(h){var m=on(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(r(364));return m}if(h=Wi(h),h===null)throw Error(r(362));return h.stateNode.current}function hu(h,m){var x=h.tag;switch(m.$$typeof){case Ho:if(h.type===m.value)return!0;break;case Hf:e:{for(m=m.value,h=[h,0],x=0;x<h.length;){var w=h[x++],O=w.tag,B=h[x++],K=m[B];if(O!==5&&O!==26&&O!==27||!bu(w)){for(;K!=null&&hu(w,K);)B++,K=m[B];if(B===m.length){m=!0;break e}else for(w=w.child;w!==null;)h.push(w,B),w=w.sibling}}m=!1}return m;case qf:if((x===5||x===26||x===27)&&Tv(h.stateNode,m.value))return!0;break;case Cu:if((x===5||x===6||x===26||x===27)&&(h=th(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case fh:if((x===5||x===26||x===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Mf(h){switch(h.$$typeof){case Ho:return"<"+(p(h.value)||"Unknown")+">";case Hf:return":has("+(Mf(h)||"")+")";case qf:return'[role="'+h.value+'"]';case Cu:return'"'+h.value+'"';case fh:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function wf(h,m){var x=[];h=[h,0];for(var w=0;w<h.length;){var O=h[w++],B=O.tag,K=h[w++],be=m[K];if(B!==5&&B!==26&&B!==27||!bu(O)){for(;be!=null&&hu(O,be);)K++,be=m[K];if(K===m.length)x.push(O);else for(O=O.child;O!==null;)h.push(O,K),O=O.sibling}}return x}function Pa(h,m){if(!hr)throw Error(r(363));h=du(h),h=wf(h,m),m=[],h=Array.from(h);for(var x=0;x<h.length;){var w=h[x++],O=w.tag;if(O===5||O===26||O===27)bu(w)||m.push(w.stateNode);else for(w=w.child;w!==null;)h.push(w),w=w.sibling}return m}function _i(){return(Sn&2)!==0&&Mn!==0?Mn&-Mn:Wt.T!==null?we():Uf()}function _l(){if(Ta===0)if((Mn&536870912)===0||An){var h=bc;bc<<=1,(bc&3932160)===0&&(bc=262144),Ta=h}else Ta=536870912;return h=Fa.current,h!==null&&(h.flags|=32),Ta}function Mi(h,m,x){(h===pn&&(Zn===2||Zn===9)||h.cancelPendingCommit!==null)&&(Li(h,0),Us(h,Mn,Ta,!1)),U(h,x),((Sn&2)===0||h!==pn)&&(h===pn&&((Sn&2)===0&&(Pu|=x),Ii===4&&Us(h,Mn,Ta,!1)),ot(h))}function as(h,m,x){if((Sn&6)!==0)throw Error(r(327));var w=!x&&(m&127)===0&&(m&h.expiredLanes)===0||R(h,m),O=w?H_(h,m):Fs(h,m,!0),B=w;do{if(O===0){Ru&&!w&&Us(h,m,0,!1);break}else{if(x=h.current.alternate,B&&!G_(x)){O=Fs(h,m,!1),B=!1;continue}if(O===2){if(B=m,h.errorRecoveryDisabledLanes&B)var K=0;else K=h.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){m=K;e:{var be=h;O=dh;var Ze=bi&&be.current.memoizedState.isDehydrated;if(Ze&&(Li(be,K).flags|=256),K=Fs(be,K,!1),K!==2){if(Iu&&!Ze){be.errorRecoveryDisabledLanes|=B,Pu|=B,O=4;break e}B=Ba,Ba=O,B!==null&&(Ba===null?Ba=B:Ba.push.apply(Ba,B))}O=K}if(B=!1,O!==2)continue}}if(O===1){Li(h,0),Us(h,m,0,!0);break}e:{switch(w=h,B=O,B){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:Us(w,m,Ta,!us);break e;case 2:Ba=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(O=hh+300-ra(),10<O)){if(Us(w,m,Ta,!us),A(w,0,!0)!==0)break e;Js=m,w.timeoutHandle=yv(Ls.bind(null,w,x,Ba,ph,hm,m,Ta,Pu,jf,us,B,"Throttled",-0,0),O);break e}Ls(w,x,Ba,ph,hm,m,Ta,Pu,jf,us,B,null,-0,0)}}break}while(!0);ot(h)}function Ls(h,m,x,w,O,B,K,be,Ze,dt,bt,gt,Rt,rn){if(h.timeoutHandle=Oa,gt=m.subtreeFlags,gt&8192||(gt&16785408)===16785408){gt=bv(),fu(m,B,gt);var $i=(B&62914560)===B?hh-ra():(B&4194048)===B?wc-ra():0;if($i=K_(gt,$i),$i!==null){Js=B,h.cancelPendingCommit=$i(Bs.bind(null,h,m,B,x,w,O,K,be,Ze,bt,gt,null,Rt,rn)),Us(h,B,K,!dt);return}}Bs(h,m,B,x,w,O,K,be,Ze)}function G_(h){for(var m=h;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var w=0;w<x.length;w++){var O=x[w],B=O.getSnapshot;O=O.value;try{if(!ji(B(),O))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Us(h,m,x,w){m&=~Wf,m&=~Pu,h.suspendedLanes|=m,h.pingedLanes&=~m,w&&(h.warmLanes|=m),w=h.expirationTimes;for(var O=m;0<O;){var B=31-La(O),K=1<<B;w[B]=-1,O&=~K}x!==0&&z(h,x,m)}function Np(){return(Sn&6)===0?(rt(0),!1):!0}function Dp(){if(En!==null){if(Zn===0)var h=En.return;else h=En,ss=li=null,Nn(h),Au=null,Sc=0,h=En;for(;h!==null;)k_(h.alternate,h),h=h.return;En=null}}function Li(h,m){var x=h.timeoutHandle;x!==Oa&&(h.timeoutHandle=Oa,$_(x)),x=h.cancelPendingCommit,x!==null&&(h.cancelPendingCommit=null,x()),Js=0,Dp(),pn=h,En=x=io(h.current,null),Mn=m,Zn=0,or=null,us=!1,Ru=R(h,m),Iu=!1,jf=Ta=Wf=Pu=Pl=Ii=0,Ba=dh=null,hm=!1,(m&8)!==0&&(m|=m&32);var w=h.entangledLanes;if(w!==0)for(h=h.entanglements,w&=m;0<w;){var O=31-La(w),B=1<<O;m|=h[O],w&=~B}return Ks=m,xr(),x}function si(h,m){sn=null,Wt.H=so,m===vr||m===Go?(m=Lt(),Zn=3):m===fm?(m=Lt(),Zn=4):Zn=m===Ea?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,or=m,En===null&&(Ii=1,Sp(h,pe(m,h.current)))}function Rn(){var h=Fa.current;return h===null?!0:(Mn&4194048)===Mn?ka===null:(Mn&62914560)===Mn||(Mn&536870912)!==0?h===ka:!1}function bl(){var h=Wt.H;return Wt.H=so,h===null?so:h}function no(){var h=Wt.A;return Wt.A=Vf,h}function Cf(){Ii=4,us||(Mn&4194048)!==Mn&&Fa.current!==null||(Ru=!0),(Pl&134217727)===0&&(Pu&134217727)===0||pn===null||Us(pn,Mn,Ta,!1)}function Fs(h,m,x){var w=Sn;Sn|=2;var O=bl(),B=no();(pn!==h||Mn!==m)&&(ph=null,Li(h,m)),m=!1;var K=Ii;e:do try{if(Zn!==0&&En!==null){var be=En,Ze=or;switch(Zn){case 8:Dp(),K=6;break e;case 3:case 2:case 9:case 6:Fa.current===null&&(m=!0);var dt=Zn;if(Zn=0,or=null,ks(h,be,Ze,dt),x&&Ru){K=0;break e}break;default:dt=Zn,Zn=0,or=null,ks(h,be,Ze,dt)}}V_(),K=Ii;break}catch(bt){si(h,bt)}while(!0);return m&&h.shellSuspendCounter++,ss=li=null,Sn=w,Wt.H=O,Wt.A=B,En===null&&(pn=null,Mn=0,xr()),K}function V_(){for(;En!==null;)pu(En)}function H_(h,m){var x=Sn;Sn|=2;var w=bl(),O=no();pn!==h||Mn!==m?(ph=null,Nu=ra()+500,Li(h,m)):Ru=R(h,m);e:do try{if(Zn!==0&&En!==null){m=En;var B=or;t:switch(Zn){case 1:Zn=0,or=null,ks(h,m,B,1);break;case 2:case 9:if(lt(B)){Zn=0,or=null,Op(m);break}m=function(){Zn!==2&&Zn!==9||pn!==h||(Zn=7),ot(h)},B.then(m,m);break e;case 3:Zn=7;break e;case 4:Zn=5;break e;case 7:lt(B)?(Zn=0,or=null,Op(m)):(Zn=0,or=null,ks(h,m,B,7));break;case 5:var K=null;switch(En.tag){case 26:K=En.memoizedState;case 5:case 27:var be=En,Ze=be.type,dt=be.pendingProps;if(K?jv(K):wi(be.stateNode,Ze,dt)){Zn=0,or=null;var bt=be.sibling;if(bt!==null)En=bt;else{var gt=be.return;gt!==null?(En=gt,If(gt)):En=null}break t}}Zn=0,or=null,ks(h,m,B,5);break;case 6:Zn=0,or=null,ks(h,m,B,6);break;case 8:Dp(),Ii=6;break e;default:throw Error(r(462))}}Rf();break}catch(Rt){si(h,Rt)}while(!0);return ss=li=null,Wt.H=w,Wt.A=O,Sn=x,En!==null?0:(pn=null,Mn=0,xr(),Ii)}function Rf(){for(;En!==null&&!Nb();)pu(En)}function pu(h){var m=nv(h.alternate,h,Ks);h.memoizedProps=h.pendingProps,m===null?If(h):En=m}function Op(h){var m=h,x=m.alternate;switch(m.tag){case 15:case 0:m=Kg(x,m,m.pendingProps,m.type,void 0,Mn);break;case 11:m=Kg(x,m,m.pendingProps,m.type.render,m.ref,Mn);break;case 5:Nn(m);default:k_(x,m),m=En=Fp(m,Ks),m=nv(x,m,Ks)}h.memoizedProps=h.pendingProps,m===null?If(h):En=m}function ks(h,m,x,w){ss=li=null,Nn(m),Au=null,Sc=0;var O=m.return;try{if(fA(h,O,m,x,Mn)){Ii=1,Sp(h,pe(x,h.current)),En=null;return}}catch(B){if(O!==null)throw En=O,B;Ii=1,Sp(h,pe(x,h.current)),En=null;return}m.flags&32768?(An||w===1?h=!0:Ru||(Mn&536870912)!==0?h=!1:(us=h=!0,(w===2||w===9||w===3||w===6)&&(w=Fa.current,w!==null&&w.tag===13&&(w.flags|=16384))),mu(m,h)):If(m)}function If(h){var m=h;do{if((m.flags&32768)!==0){mu(m,us);return}h=m.return;var x=F_(m.alternate,m,Ks);if(x!==null){En=x;return}if(m=m.sibling,m!==null){En=m;return}En=m=h}while(m!==null);Ii===0&&(Ii=5)}function mu(h,m){do{var x=av(h.alternate,h);if(x!==null){x.flags&=32767,En=x;return}if(x=h.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(h=h.sibling,h!==null)){En=h;return}En=h=x}while(h!==null);Ii=6,En=null}function Bs(h,m,x,w,O,B,K,be,Ze){h.cancelPendingCommit=null;do Gs();while(sr!==0);if((Sn&6)!==0)throw Error(r(327));if(m!==null){if(m===h.current)throw Error(r(177));if(B=m.lanes|m.childLanes,B|=Ec,k(h,x,B,K,be,Ze),h===pn&&(En=pn=null,Mn=0),Cc=m,Dl=h,Js=x,Xf=B,pm=O,t0=w,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,rr(ah,function(){return Xd(),null})):(h.callbackNode=null,h.callbackPriority=0),w=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||w){w=Wt.T,Wt.T=null,O=Oo(),Tn(2),K=Sn,Sn|=4;try{dA(h,m,x)}finally{Sn=K,Tn(O),Wt.T=w}}sr=1,xl(),zs(),Lp()}}function xl(){if(sr===1){sr=0;var h=Dl,m=Cc,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=Wt.T,Wt.T=null;var w=Oo();Tn(2);var O=Sn;Sn|=4;try{Wd(m,h),Y_(h.containerInfo)}finally{Sn=O,Tn(w),Wt.T=x}}h.current=m,sr=2}}function zs(){if(sr===2){sr=0;var h=Dl,m=Cc,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=Wt.T,Wt.T=null;var w=Oo();Tn(2);var O=Sn;Sn|=4;try{z_(h,m.alternate,m)}finally{Sn=O,Tn(w),Wt.T=x}}sr=3}}function Lp(){if(sr===4||sr===3){sr=0,Yv();var h=Dl,m=Cc,x=Js,w=t0;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?sr=5:(sr=0,Cc=Dl=null,Up(h,h.pendingLanes));var O=h.pendingLanes;if(O===0&&(Nl=null),W(x),m=m.stateNode,Ua&&typeof Ua.onCommitFiberRoot=="function")try{Ua.onCommitFiberRoot(xc,m,void 0,(m.current.flags&128)===128)}catch{}if(w!==null){m=Wt.T,O=Oo(),Tn(2),Wt.T=null;try{for(var B=h.onRecoverableError,K=0;K<w.length;K++){var be=w[K];B(be.value,{componentStack:be.stack})}}finally{Wt.T=m,Tn(O)}}(Js&3)!==0&&Gs(),ot(h),O=h.pendingLanes,(x&261930)!==0&&(O&42)!==0?h===mh?kn++:(kn=0,mh=h):kn=0,bi&&nh(),rt(0)}}function Up(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Ie(m)))}function Gs(){return xl(),zs(),Lp(),Xd()}function Xd(){if(sr!==5)return!1;var h=Dl,m=Xf;Xf=0;var x=W(Js),w=32>x?32:x;x=Wt.T;var O=Oo();try{Tn(w),Wt.T=null,w=pm,pm=null;var B=Dl,K=Js;if(sr=0,Cc=Dl=null,Js=0,(Sn&6)!==0)throw Error(r(331));var be=Sn;if(Sn|=4,Pp(B.current),Rp(B,B.current,K,w),Sn=be,rt(0,!1),Ua&&typeof Ua.onPostCommitFiberRoot=="function")try{Ua.onPostCommitFiberRoot(xc,B)}catch{}return!0}finally{Tn(O),Wt.T=x,Up(h,m)}}function gu(h,m,x){m=pe(x,m),m=Yg(h.stateNode,m,2),h=Zr(h,m,2),h!==null&&(U(h,2),ot(h))}function Zt(h,m,x){if(h.tag===3)gu(h,h,x);else for(;m!==null;){if(m.tag===3){gu(m,h,x);break}else if(m.tag===1){var w=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Nl===null||!Nl.has(w))){h=pe(x,h),x=A_(2),w=Zr(m,x,2),w!==null&&(M_(x,w,m,h),U(w,2),ot(w));break}}m=m.return}}function Pf(h,m,x){var w=h.pingCache;if(w===null){w=h.pingCache=new uo;var O=new Set;w.set(m,O)}else O=w.get(m),O===void 0&&(O=new Set,w.set(m,O));O.has(x)||(Iu=!0,O.add(x),h=q_.bind(null,h,m,x),m.then(h,h))}function q_(h,m,x){var w=h.pingCache;w!==null&&w.delete(m),h.pingedLanes|=h.suspendedLanes&x,h.warmLanes&=~x,pn===h&&(Mn&x)===x&&(Ii===4||Ii===3&&(Mn&62914560)===Mn&&300>ra()-hh?(Sn&2)===0&&Li(h,0):Wf|=x,jf===Mn&&(jf=0)),ot(h)}function W_(h,m){m===0&&(m=N()),h=ai(h,m),h!==null&&(U(h,m),ot(h))}function hA(h){var m=h.memoizedState,x=0;m!==null&&(x=m.retryLane),W_(h,x)}function pA(h,m){var x=0;switch(h.tag){case 31:case 13:var w=h.stateNode,O=h.memoizedState;O!==null&&(x=O.retryLane);break;case 19:w=h.stateNode;break;case 22:w=h.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(m),W_(h,x)}function rr(h,m){return rh(h,m)}function cv(h,m,x,w){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lc(h){return h=h.prototype,!(!h||!h.isReactComponent)}function io(h,m){var x=h.alternate;return x===null?(x=n(h.tag,m,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=m,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&65011712,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,m=h.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x.refCleanup=h.refCleanup,x}function Fp(h,m){h.flags&=65011714;var x=h.alternate;return x===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=x.childLanes,h.lanes=x.lanes,h.child=x.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=x.memoizedProps,h.memoizedState=x.memoizedState,h.updateQueue=x.updateQueue,h.type=x.type,m=x.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function Sl(h,m,x,w,O,B){var K=0;if(w=h,typeof h=="function")lc(h)&&(K=1);else if(typeof h=="string")K=Lo&&pr?Zp(h,x,Cr.current)?26:Xv(h)?27:5:Lo?Zp(h,x,Cr.current)?26:5:pr&&Xv(h)?27:5;else e:switch(h){case Jd:return h=n(31,x,m,O),h.elementType=Jd,h.lanes=B,h;case dc:return No(x.children,O,B,m);case hc:K=8,O|=24;break;case pc:return h=n(12,x,m,O|2),h.elementType=pc,h.lanes=B,h;case Gp:return h=n(13,x,m,O),h.elementType=Gp,h.lanes=B,h;case El:return h=n(19,x,m,O),h.elementType=El,h.lanes=B,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Do:K=10;break e;case Kd:K=9;break e;case Nf:K=11;break e;case Vp:K=14;break e;case _a:K=16,w=null;break e}K=29,x=Error(r(130,h===null?"null":typeof h,"")),w=null}return m=n(K,x,m,O),m.elementType=h,m.type=w,m.lanes=B,m}function No(h,m,x,w){return h=n(7,h,w,m),h.lanes=x,h}function fv(h,m,x){return h=n(6,h,null,m),h.lanes=x,h}function dv(h){var m=n(18,null,null,0);return m.stateNode=h,m}function hv(h,m,x){return m=n(4,h.children!==null?h.children:[],h.key,m),m.lanes=x,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function j_(h,m,x,w,O,B,K,be,Ze){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Oa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=D(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D(0),this.hiddenUpdates=D(null),this.identifierPrefix=w,this.onUncaughtError=O,this.onCaughtError=B,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ze,this.incompleteTransitions=new Map}function vu(h,m,x,w,O,B,K,be,Ze,dt,bt,gt){return h=new j_(h,m,x,K,Ze,dt,bt,gt,be),m=1,B===!0&&(m|=24),B=n(3,null,null,m),h.current=B,B.stateNode=h,m=Le(),m.refCount++,h.pooledCache=m,m.refCount++,B.memoizedState={element:w,isDehydrated:x,cache:m},Di(B),h}function kp(h){return h?(h=Hs,h):Hs}function Yd(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=s(m),h=h!==null?u(h):null,h===null?null:Of(h.stateNode)}function pv(h,m,x,w,O,B){O=kp(O),w.context===null?w.context=O:w.pendingContext=O,w=ma(m),w.payload={element:x},B=B===void 0?null:B,B!==null&&(w.callback=B),x=Zr(h,w,m),x!==null&&(Mi(x,h,m),$a(x,h,m))}function uc(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<m?x:m}}function $d(h,m){uc(h,m),(h=h.alternate)&&uc(h,m)}var dn={},Bp=ds,Na=cMe,zp=Object.assign,cc=Symbol.for("react.element"),Vs=Symbol.for("react.transitional.element"),fc=Symbol.for("react.portal"),dc=Symbol.for("react.fragment"),hc=Symbol.for("react.strict_mode"),pc=Symbol.for("react.profiler"),Kd=Symbol.for("react.consumer"),Do=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),Gp=Symbol.for("react.suspense"),El=Symbol.for("react.suspense_list"),Vp=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),Jd=Symbol.for("react.activity"),mv=Symbol.for("react.memo_cache_sentinel"),Tl=Symbol.iterator,yu=Symbol.for("react.client.reference"),_u=Array.isArray,Wt=Bp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gv=e.rendererVersion,Zd=e.rendererPackageName,Df=e.extraDevToolsConfig,Of=e.getPublicInstance,X_=e.getRootHostContext,Lf=e.getChildHostContext,Hp=e.prepareForCommit,Y_=e.resetAfterCommit,vv=e.createInstance;e.cloneMutableInstance;var Qd=e.appendInitialChild,Da=e.finalizeInitialChildren,ba=e.shouldSetTextContent,Al=e.createTextInstance;e.cloneMutableTextInstance;var yv=e.scheduleTimeout,$_=e.cancelTimeout,Oa=e.noTimeout,qi=e.isPrimaryRenderer;e.warnsIfNotActing;var In=e.supportsMutation,ro=e.supportsPersistence,bi=e.supportsHydration,on=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ei=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Tn=e.setCurrentUpdatePriority,Oo=e.getCurrentUpdatePriority,Uf=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var mc=e.shouldAttemptEagerTransition,qp=e.detachDeletedInstance;e.requestPostPaintCallback;var eh=e.maySuspendCommit,Ff=e.maySuspendCommitOnUpdate,_v=e.maySuspendCommitInSyncRender,wi=e.preloadInstance,bv=e.startSuspendingCommit,Wp=e.suspendInstance;e.suspendOnActiveViewTransition;var K_=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var gc=e.NotPendingTransition,vc=e.HostTransitionContext,xv=e.resetFormInstance;e.bindToConsole;var Sv=e.supportsMicrotasks,Ev=e.scheduleMicrotask,hr=e.supportsTestSelectors,Wi=e.findFiberRoot,jp=e.getBoundingRect,th=e.getTextContent,bu=e.isHiddenSubtree,Tv=e.matchAccessibilityRole,Ml=e.setFocusIfFocusable,Xp=e.setupIntersectionObserver,Av=e.appendChild,Mv=e.appendChildToContainer,J_=e.commitTextUpdate,Z_=e.commitMount,Q_=e.commitUpdate,eb=e.insertBefore,tb=e.insertInContainerBefore,nb=e.removeChild,wv=e.removeChildFromContainer,Cv=e.resetTextContent,mA=e.hideInstance,ib=e.hideTextInstance,rb=e.unhideInstance,ab=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Rv=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var ob=e.cloneInstance,Iv=e.createContainerChildSet,Pv=e.appendChildToContainerChildSet,sb=e.finalizeContainerChildren,Nv=e.replaceContainerChildren,lb=e.cloneHiddenInstance,Dv=e.cloneHiddenTextInstance,xu=e.isSuspenseInstancePending,Yp=e.isSuspenseInstanceFallback,$p=e.getSuspenseInstanceFallbackErrorDetails,Kp=e.registerSuspenseInstanceRetry,ub=e.canHydrateFormStateMarker,Ov=e.isFormStateMarkerMatching,cb=e.getNextHydratableSibling,fb=e.getNextHydratableSiblingAfterSingleton,db=e.getFirstHydratableChild,hb=e.getFirstHydratableChildWithinContainer,pb=e.getFirstHydratableChildWithinActivityInstance,mb=e.getFirstHydratableChildWithinSuspenseInstance,Lv=e.getFirstHydratableChildWithinSingleton,gb=e.canHydrateInstance,vb=e.canHydrateTextInstance,Uv=e.canHydrateActivityInstance,yb=e.canHydrateSuspenseInstance,_b=e.hydrateInstance,gA=e.hydrateTextInstance,Fv=e.hydrateActivityInstance,bb=e.hydrateSuspenseInstance,xb=e.getNextHydratableInstanceAfterActivityInstance,kv=e.getNextHydratableInstanceAfterSuspenseInstance,Sb=e.commitHydratedInstance,Eb=e.commitHydratedContainer,vA=e.commitHydratedActivityInstance,yA=e.commitHydratedSuspenseInstance,Tb=e.finalizeHydratedChildren,nh=e.flushHydrationEvents;e.clearActivityBoundary;var Bv=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Jp=e.clearSuspenseBoundaryFromContainer,Ab=e.hideDehydratedBoundary,Mb=e.unhideDehydratedBoundary,kf=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var wb=e.validateHydratableInstance,zv=e.validateHydratableTextInstance,Lo=e.supportsResources,Zp=e.isHostHoistableType,ih=e.getHoistableRoot,Gv=e.getResource,Vv=e.acquireResource,Su=e.releaseResource,Cb=e.hydrateHoistable,Hv=e.mountHoistable,qv=e.unmountHoistable,Qp=e.createHoistableInstance,Rb=e.prepareToCommitHoistables,Wv=e.mayResourceSuspendCommit,jv=e.preloadResource,Ib=e.suspendResource,pr=e.supportsSingletons,em=e.resolveSingletonInstance,ar=e.acquireSingletonInstance,wr=e.releaseSingletonInstance,Xv=e.isHostSingletonType,yc=e.isSingletonScope,tm=[],_c=-1,Hs={},La=Math.clz32?Math.clz32:T,nm=Math.log,Pb=Math.LN2,im=256,bc=262144,Bf=4194304,rh=Na.unstable_scheduleCallback,rm=Na.unstable_cancelCallback,Nb=Na.unstable_shouldYield,Yv=Na.unstable_requestPaint,ra=Na.unstable_now,am=Na.unstable_ImmediatePriority,Db=Na.unstable_UserBlockingPriority,ah=Na.unstable_NormalPriority,om=Na.unstable_IdlePriority,$v=Na.log,Ob=Na.unstable_setDisableYieldValue,xc=null,Ua=null,ji=typeof Object.is=="function"?Object.is:Q,sm=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},_A=Object.prototype.hasOwnProperty,lm,qs,oh=!1,Kv=new WeakMap,wl=[],Ws=0,ti=null,sh=0,Uo=[],ao=0,Fo=null,zr=1,os="",Cr=g(null),Cl=g(null),Gr=g(null),lh=g(null),mr=null,xi=null,An=!1,js=null,xa=!1,um=Error(r(519)),ko=g(null),li=null,ss=null,Lb=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(x,w){h.push(w)}};this.abort=function(){m.aborted=!0,h.forEach(function(x){return x()})}},Rr=Na.unstable_scheduleCallback,bA=Na.unstable_NormalPriority,Si={$$typeof:Do,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},uh=null,Kn=null,aa=!1,Bo=!1,cm=!1,Eu=0,zf=null,Jv=0,Rl=0,gr=null,zo=Wt.S;Wt.S=function(h,m){wc=ra(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&ht(h,m),zo!==null&&zo(h,m)};var Tu=g(null),vr=Error(r(460)),fm=Error(r(474)),Go=Error(r(542)),Xs={then:function(){}},Sa=null,Au=null,Sc=0,Vr=Jr(!0),Zv=Jr(!1),Hr=[],Ys=0,Ec=0,oo=!1,dm=!1,Tc=g(null),Mu=g(0),Fa=g(null),ka=null,Ui=g(0),Il=0,sn=null,Gt=null,tn=null,hn=!1,fn=!1,Dn=!1,oa=0,Vo=0,ls=null,Qv=0,so={readContext:Y,use:Oi,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};so.useEffectEvent=pt;var Ci={readContext:Y,use:Oi,useCallback:function(h,m){return Jt().memoizedState=[h,m===void 0?null:m],h},useContext:Y,useEffect:iu,useImperativeHandle:function(h,m,x){x=x!=null?x.concat([h]):null,ns(4194308,4,Cs.bind(null,m,h),x)},useLayoutEffect:function(h,m){return ns(4194308,4,h,m)},useInsertionEffect:function(h,m){ns(4,2,h,m)},useMemo:function(h,m){var x=Jt();m=m===void 0?null:m;var w=h();if(Dn){X(!0);try{h()}finally{X(!1)}}return x.memoizedState=[w,m],w},useReducer:function(h,m,x){var w=Jt();if(x!==void 0){var O=x(m);if(Dn){X(!0);try{x(m)}finally{X(!1)}}}else O=m;return w.memoizedState=w.baseState=O,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:O},w.queue=h,h=h.dispatch=na.bind(null,sn,h),[w.memoizedState,h]},useRef:function(h){var m=Jt();return h={current:h},m.memoizedState=h},useState:function(h){h=eu(h);var m=h.queue,x=rs.bind(null,sn,m);return m.dispatch=x,[h.memoizedState,x]},useDebugValue:ou,useDeferredValue:function(h,m){var x=Jt();return ir(x,h,m)},useTransition:function(){var h=eu(!1);return h=tc.bind(null,sn,h.queue,!0,!1),Jt().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,x){var w=sn,O=Jt();if(An){if(x===void 0)throw Error(r(407));x=x()}else{if(x=m(),pn===null)throw Error(r(349));(Mn&127)!==0||Vi(w,m,x)}O.memoizedState=x;var B={value:x,getSnapshot:m};return O.queue=B,iu(ts.bind(null,w,B,h),[h]),w.flags|=2048,ta(9,{destroy:void 0},Hi.bind(null,w,B,x,m),null),x},useId:function(){var h=Jt(),m=pn.identifierPrefix;if(An){var x=os,w=zr;x=(w&~(1<<32-La(w)-1)).toString(32)+x,m="_"+m+"R_"+x,x=oa++,0<x&&(m+="H"+x.toString(32)),m+="_"}else x=Qv++,m="_"+m+"r_"+x.toString(32)+"_";return h.memoizedState=m},useHostTransitionStatus:gf,useFormState:tu,useActionState:tu,useOptimistic:function(h){var m=Jt();m.memoizedState=m.baseState=h;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=_p.bind(null,sn,!0,x),x.dispatch=m,[h,m]},useMemoCache:Qr,useCacheRefresh:function(){return Jt().memoizedState=eo.bind(null,sn)},useEffectEvent:function(h){var m=Jt(),x={impl:h};return m.memoizedState=x,function(){if((Sn&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}},$s={readContext:Y,use:Oi,useCallback:Rs,useContext:Y,useEffect:Mo,useImperativeHandle:au,useInsertionEffect:is,useLayoutEffect:gl,useMemo:Is,useReducer:Er,useRef:ec,useState:function(){return Er(Gn)},useDebugValue:ou,useDeferredValue:function(h,m){var x=Tt();return Ud(x,Gt.memoizedState,h,m)},useTransition:function(){var h=Er(Gn)[0],m=Tt().memoizedState;return[typeof h=="boolean"?h:Bt(h),m]},useSyncExternalStore:vi,useId:vf,useHostTransitionStatus:gf,useFormState:Ms,useActionState:Ms,useOptimistic:function(h,m){var x=Tt();return To(x,Gt,h,m)},useMemoCache:Qr,useCacheRefresh:kr};$s.useEffectEvent=yi;var wu={readContext:Y,use:Oi,useCallback:Rs,useContext:Y,useEffect:Mo,useImperativeHandle:au,useInsertionEffect:is,useLayoutEffect:gl,useMemo:Is,useReducer:gi,useRef:ec,useState:function(){return gi(Gn)},useDebugValue:ou,useDeferredValue:function(h,m){var x=Tt();return Gt===null?ir(x,h,m):Ud(x,Gt.memoizedState,h,m)},useTransition:function(){var h=gi(Gn)[0],m=Tt().memoizedState;return[typeof h=="boolean"?h:Bt(h),m]},useSyncExternalStore:vi,useId:vf,useHostTransitionStatus:gf,useFormState:ws,useActionState:ws,useOptimistic:function(h,m){var x=Tt();return Gt!==null?To(x,Gt,h,m):(x.baseState=h,[h,x.queue.dispatch])},useMemoCache:Qr,useCacheRefresh:kr};wu.useEffectEvent=yi;var ch={enqueueSetState:function(h,m,x){h=h._reactInternals;var w=_i(),O=ma(w);O.payload=m,x!=null&&(O.callback=x),m=Zr(h,O,w),m!==null&&(Mi(m,h,w),$a(m,h,w))},enqueueReplaceState:function(h,m,x){h=h._reactInternals;var w=_i(),O=ma(w);O.tag=1,O.payload=m,x!=null&&(O.callback=x),m=Zr(h,O,w),m!==null&&(Mi(m,h,w),$a(m,h,w))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var x=_i(),w=ma(x);w.tag=2,m!=null&&(w.callback=m),m=Zr(h,w,x),m!==null&&(Mi(m,h,x),$a(m,h,x))}},Ea=Error(r(461)),hi=!1,Ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Fi=!1,ki=!1,Gf=!1,e0=typeof WeakSet=="function"?WeakSet:Set,Xi=null,Ri=null,Yi=!1,Jn=null,lo=8192,Vf={getCacheForType:function(h){var m=Y(Si),x=m.data.get(h);return x===void 0&&(x=h(),m.data.set(h,x)),x},cacheSignal:function(){return Y(Si).controller.signal}},Ho=0,Hf=1,qf=2,fh=3,Cu=4;if(typeof Symbol=="function"&&Symbol.for){var Mc=Symbol.for;Ho=Mc("selector.component"),Hf=Mc("selector.has_pseudo_class"),qf=Mc("selector.role"),fh=Mc("selector.test_id"),Cu=Mc("selector.text")}var uo=typeof WeakMap=="function"?WeakMap:Map,Sn=0,pn=null,En=null,Mn=0,Zn=0,or=null,us=!1,Ru=!1,Iu=!1,Ks=0,Ii=0,Pl=0,Pu=0,Wf=0,Ta=0,jf=0,dh=null,Ba=null,hm=!1,hh=0,wc=0,Nu=1/0,ph=null,Nl=null,sr=0,Dl=null,Cc=null,Js=0,Xf=0,pm=null,t0=null,kn=0,mh=null;return dn.attemptContinuousHydration=function(h){if(h.tag===13||h.tag===31){var m=ai(h,67108864);m!==null&&Mi(m,h,67108864),$d(h,67108864)}},dn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13||h.tag===31){var m=_i();m=j(m);var x=ai(h,m);x!==null&&Mi(x,h,m),$d(h,m)}},dn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var m=S(h.pendingLanes);if(m!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;m;){var x=1<<31-La(m);h.entanglements[1]|=x,m&=~x}ot(h),(Sn&6)===0&&(Nu=ra()+500,rt(0))}}break;case 31:case 13:m=ai(h,2),m!==null&&Mi(m,h,2),Np(),$d(h,2)}},dn.batchedUpdates=function(h,m){return h(m)},dn.createComponentSelector=function(h){return{$$typeof:Ho,value:h}},dn.createContainer=function(h,m,x,w,O,B,K,be,Ze,dt){return vu(h,m,!1,null,x,w,B,null,K,be,Ze,dt)},dn.createHasPseudoClassSelector=function(h){return{$$typeof:Hf,value:h}},dn.createHydrationContainer=function(h,m,x,w,O,B,K,be,Ze,dt,bt,gt,Rt,rn){var $i;return h=vu(x,w,!0,h,O,B,be,rn,Ze,dt,bt,gt),h.context=kp(null),x=h.current,w=_i(),w=j(w),O=ma(w),O.callback=($i=m)!=null?$i:null,Zr(x,O,w),m=w,h.current.lanes=m,U(h,m),ot(h),h},dn.createPortal=function(h,m,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fc,key:w==null?null:""+w,children:h,containerInfo:m,implementation:x}},dn.createRoleSelector=function(h){return{$$typeof:qf,value:h}},dn.createTestNameSelector=function(h){return{$$typeof:fh,value:h}},dn.createTextSelector=function(h){return{$$typeof:Cu,value:h}},dn.defaultOnCaughtError=function(h){console.error(h)},dn.defaultOnRecoverableError=function(h){sm(h)},dn.defaultOnUncaughtError=function(h){sm(h)},dn.deferredUpdates=function(h){var m=Wt.T,x=Oo();try{return Tn(32),Wt.T=null,h()}finally{Tn(x),Wt.T=m}},dn.discreteUpdates=function(h,m,x,w,O){var B=Wt.T,K=Oo();try{return Tn(2),Wt.T=null,h(m,x,w,O)}finally{Tn(K),Wt.T=B,Sn===0&&(Nu=ra()+500)}},dn.findAllNodes=Pa,dn.findBoundingRects=function(h,m){if(!hr)throw Error(r(363));m=Pa(h,m),h=[];for(var x=0;x<m.length;x++)h.push(jp(m[x]));for(m=h.length-1;0<m;m--){x=h[m];for(var w=x.x,O=w+x.width,B=x.y,K=B+x.height,be=m-1;0<=be;be--)if(m!==be){var Ze=h[be],dt=Ze.x,bt=dt+Ze.width,gt=Ze.y,Rt=gt+Ze.height;if(w>=dt&&B>=gt&&O<=bt&&K<=Rt){h.splice(m,1);break}else if(w!==dt||x.width!==Ze.width||Rt<B||gt>K){if(!(B!==gt||x.height!==Ze.height||bt<w||dt>O)){dt>w&&(Ze.width+=dt-w,Ze.x=w),bt<O&&(Ze.width=O-dt),h.splice(m,1);break}}else{gt>B&&(Ze.height+=gt-B,Ze.y=B),Rt<K&&(Ze.height=K-gt),h.splice(m,1);break}}}return h},dn.findHostInstance=Yd,dn.findHostInstanceWithNoPortals=function(h){return h=s(h),h=h!==null?c(h):null,h===null?null:Of(h.stateNode)},dn.findHostInstanceWithWarning=function(h){return Yd(h)},dn.flushPassiveEffects=Gs,dn.flushSyncFromReconciler=function(h){var m=Sn;Sn|=1;var x=Wt.T,w=Oo();try{if(Tn(2),Wt.T=null,h)return h()}finally{Tn(w),Wt.T=x,Sn=m,(Sn&6)===0&&rt(0)}},dn.flushSyncWork=Np,dn.focusWithin=function(h,m){if(!hr)throw Error(r(363));for(h=du(h),m=wf(h,m),m=Array.from(m),h=0;h<m.length;){var x=m[h++],w=x.tag;if(!bu(x)){if((w===5||w===26||w===27)&&Ml(x.stateNode))return!0;for(x=x.child;x!==null;)m.push(x),x=x.sibling}}return!1},dn.getFindAllNodesFailureDescription=function(h,m){if(!hr)throw Error(r(363));var x=0,w=[];h=[du(h),0];for(var O=0;O<h.length;){var B=h[O++],K=B.tag,be=h[O++],Ze=m[be];if((K!==5&&K!==26&&K!==27||!bu(B))&&(hu(B,Ze)&&(w.push(Mf(Ze)),be++,be>x&&(x=be)),be<m.length))for(B=B.child;B!==null;)h.push(B,be),B=B.sibling}if(x<m.length){for(h=[];x<m.length;x++)h.push(Mf(m[x]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},dn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Of(h.child.stateNode);default:return h.child.stateNode}},dn.injectIntoDevTools=function(){var h={bundleType:0,version:gv,rendererPackageName:Zd,currentDispatcherRef:Wt,reconcilerVersion:"19.2.0"};if(Df!==null&&(h.rendererConfig=Df),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{xc=m.inject(h),Ua=m}catch{}h=!!m.checkDCE}}return h},dn.isAlreadyRendering=function(){return(Sn&6)!==0},dn.observeVisibleRects=function(h,m,x,w){if(!hr)throw Error(r(363));h=Pa(h,m);var O=Xp(h,x,w).disconnect;return{disconnect:function(){O()}}},dn.shouldError=function(){return null},dn.shouldSuspend=function(){return!1},dn.startHostTransition=function(h,m,x,w){if(h.tag!==5)throw Error(r(476));var O=nc(h).queue;tc(h,O,m,gc,x===null?i:function(){var B=nc(h);return B.next===null&&(B=h.alternate.memoizedState),su(h,B.next.queue,{},_i()),x(w)})},dn.updateContainer=function(h,m,x,w){var O=m.current,B=_i();return pv(O,B,h,m,x,w),B},dn.updateContainerSync=function(h,m,x,w){return pv(m.current,2,h,m,x,w),2},dn},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(gB)),gB.exports}var yB;function FMe(){return yB||(yB=1,mB.exports=UMe()),mB.exports}var kMe=FMe();const BMe=LMe(kMe);function zMe(t){const e=BMe(t);return e.injectIntoDevTools(),e}const k7=0,Eg={},GMe=/^three(?=[A-Z])/,uA=t=>`${t[0].toUpperCase()}${t.slice(1)}`;let VMe=0;const HMe=t=>typeof t=="function";function qMe(t){if(HMe(t)){const e=`${VMe++}`;return Eg[e]=t,e}else Object.assign(Eg,t)}function B7(t,e){const n=uA(t),i=Eg[n];if(t!=="primitive"&&!i)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(t==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function WMe(t,e,n){var i;return t=uA(t)in Eg?t:t.replace(GMe,""),B7(t,e),t==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,SE(e.object,n,t,e)}function jMe(t){if(!t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?TE(t.parent,t):Xo(t.object)&&(t.object.visible=!1),t.isHidden=!0,qg(t)}}function z7(t){if(t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?EE(t.parent,t):Xo(t.object)&&t.props.visible!==!1&&(t.object.visible=!0),t.isHidden=!1,qg(t)}}function yD(t,e,n){const i=e.root.getState();if(!(!t.parent&&t.object!==i.scene)){if(!e.object){var r,a;const o=Eg[uA(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(fd(e.object,e.props),e.props.attach)EE(t,e);else if(Xo(e.object)&&Xo(t.object)){const o=t.object.children.indexOf(n==null?void 0:n.object);if(n&&o!==-1){const s=t.object.children.indexOf(e.object);if(s!==-1){t.object.children.splice(s,1);const u=s<o?o-1:o;t.object.children.splice(u,0,e.object)}else e.object.parent=t.object,t.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object})}else t.object.add(e.object)}for(const o of e.children)yD(e,o);qg(e)}}function MC(t,e){e&&(e.parent=t,t.children.push(e),yD(t,e))}function _B(t,e,n){if(!e||!n)return;e.parent=t;const i=t.children.indexOf(n);i!==-1?t.children.splice(i,0,e):t.children.push(e),yD(t,e,n)}function G7(t){if(typeof t.dispose=="function"){const e=()=>{try{t.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():hI.unstable_scheduleCallback(hI.unstable_IdlePriority,e)}}function mI(t,e,n){if(!e)return;e.parent=null;const i=t.children.indexOf(e);i!==-1&&t.children.splice(i,1),e.props.attach?TE(t,e):Xo(e.object)&&Xo(t.object)&&(t.object.remove(e.object),wMe(I7(e),e.object));const r=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const o=e.children[a];mI(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&G7(e.object),n===void 0&&qg(e)}function XMe(t,e){for(const n of[t,t.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const i=n.ref(e);typeof i=="function"&&(n.refCleanup=i)}else n.ref&&(n.ref.current=e)}const RS=[];function YMe(){for(const[n]of RS){const i=n.parent;if(i){n.props.attach?TE(i,n):Xo(n.object)&&Xo(i.object)&&i.object.remove(n.object);for(const r of n.children)r.props.attach?TE(n,r):Xo(r.object)&&Xo(n.object)&&n.object.remove(r.object)}n.isHidden&&z7(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&G7(n.object)}for(const[n,i,r]of RS){n.props=i;const a=n.parent;if(a){var t,e;const o=Eg[uA(n.type)];n.object=(t=n.props.object)!=null?t:new o(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,XMe(r,n.object),fd(n.object,n.props),n.props.attach?EE(a,n):Xo(n.object)&&Xo(a.object)&&a.object.add(n.object);for(const s of n.children)s.props.attach?EE(n,s):Xo(s.object)&&Xo(n.object)&&n.object.add(s.object);qg(n)}}RS.length=0}const wC=()=>{},bB={};let dS=k7;const $Me=0,KMe=4,gI=zMe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:WMe,removeChild:mI,appendChild:MC,appendInitialChild:MC,insertBefore:_B,appendChildToContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||MC(n,e)},removeChildFromContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||mI(n,e)},insertInContainerBefore(t,e,n){const i=t.getState().scene.__r3f;!e||!n||!i||_B(i,e,n)},getRootHostContext:()=>bB,getChildHostContext:()=>bB,commitUpdate(t,e,n,i,r){var a,o,s;B7(e,i);let u=!1;if((t.type==="primitive"&&n.object!==i.object||((a=i.args)==null?void 0:a.length)!==((o=n.args)==null?void 0:o.length)||(s=i.args)!=null&&s.some((d,p)=>{var g;return d!==((g=n.args)==null?void 0:g[p])}))&&(u=!0),u)RS.push([t,{...i},r]);else{const d=EMe(t,i);Object.keys(d).length&&(Object.assign(t.props,d),fd(t.object,d))}(r.sibling===null||(r.flags&KMe)===$Me)&&YMe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>t==null?void 0:t.object,prepareForCommit:()=>null,preparePortalMount:t=>SE(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:jMe,unhideInstance:z7,createTextInstance:wC,hideTextInstance:wC,unhideTextInstance:wC,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:G.createContext(null),setCurrentUpdatePriority(t){dS=t},getCurrentUpdatePriority(){return dS},resolveUpdatePriority(){var t;if(dS!==k7)return dS;switch(typeof window<"u"&&((t=window.event)==null?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return DMe;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return PMe;default:return NMe}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:OMe.version,applyViewTransitionName(t,e,n){},restoreViewTransitionName(t,e){},cancelViewTransitionName(t,e,n){},cancelRootViewTransitionName(t){},restoreRootViewTransitionName(t){},InstanceMeasurement:null,measureInstance:t=>null,wasInstanceInViewport:t=>!0,hasInstanceChanged:(t,e)=>!1,hasInstanceAffectedParent:(t,e)=>!1,suspendOnActiveViewTransition(t,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(t){},createViewTransitionInstance:t=>null,getCurrentGestureOffset(t){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(t,e){return t},cloneMutableTextInstance(t){return t},cloneRootViewTransitionContainer(t){throw new Error("Not implemented.")},removeRootViewTransitionClone(t,e){throw new Error("Not implemented.")},createFragmentInstance:t=>null,updateFragmentInstanceFiber(t,e){},commitNewChildToFragmentInstance(t,e){},deleteChildFromFragmentInstance(t,e){},measureClonedInstance:t=>null,maySuspendCommitOnUpdate:(t,e,n)=>!1,maySuspendCommitInSyncRender:(t,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(t,e)=>null}),cp=new Map,qm={objects:"shallow",strict:!1};function JMe(t,e){if(!e&&typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:a}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function ZMe(t){const e=cp.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||RMe(_I,SB),o=n||gI.createContainer(a,IMe,null,!1,null,"",r,r,r,null);e||cp.set(t,{fiber:o,store:a});let s,u,c=!1,d=null;return{async configure(p={}){let g;d=new Promise(H=>g=H);let{gl:y,size:b,scene:T,events:S,onCreated:A,shadows:R=!1,linear:I=!1,flat:N=!1,legacy:D=!1,orthographic:U=!1,frameloop:k="always",dpr:z=[1,2],performance:L,raycaster:F,camera:j,onPointerMissed:W}=p,X=a.getState(),Q=X.gl;if(!X.gl){const H={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},ne=typeof y=="function"?await y(H):y;pB(ne)?Q=ne:Q=new M7({...H,...y}),X.set({gl:Q})}let ae=X.raycaster;ae||X.set({raycaster:ae=new y7});const{params:$,...ie}=F||{};if(Ki.equ(ie,ae,qm)||fd(ae,{...ie}),Ki.equ($,ae.params,qm)||fd(ae,{params:{...ae.params,...$}}),!X.camera||X.camera===u&&!Ki.equ(u,j,qm)){u=j;const H=j==null?void 0:j.isCamera,ne=H?j:U?new Xc(0,0,0,0,.1,1e3):new _r(75,0,.1,1e3);H||(ne.position.z=5,j&&(fd(ne,j),ne.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(ne.manual=!0,ne.updateProjectionMatrix())),!X.camera&&!(j!=null&&j.rotation)&&ne.lookAt(0,0,0)),X.set({camera:ne}),ae.camera=ne}if(!X.scene){let H;T!=null&&T.isScene?(H=T,SE(H,a,"",{})):(H=new qN,SE(H,a,"",{}),T&&fd(H,T)),X.set({scene:H})}S&&!X.events.handlers&&X.set({events:S(a)});const me=JMe(t,b);if(Ki.equ(me,X.size,qm)||X.setSize(me.width,me.height,me.top,me.left),z&&X.viewport.dpr!==D7(z)&&X.setDpr(z),X.frameloop!==k&&X.setFrameloop(k),X.onPointerMissed||X.set({onPointerMissed:W}),L&&!Ki.equ(L,X.performance,qm)&&X.set(H=>({performance:{...H.performance,...L}})),!X.xr){var pe;const H=(ge,_e)=>{const re=a.getState();re.frameloop!=="never"&&SB(ge,!0,re,_e)},ne=()=>{const ge=a.getState();ge.gl.xr.enabled=ge.gl.xr.isPresenting,ge.gl.xr.setAnimationLoop(ge.gl.xr.isPresenting?H:null),ge.gl.xr.isPresenting||_I(ge)},le={connect(){const ge=a.getState().gl;ge.xr.addEventListener("sessionstart",ne),ge.xr.addEventListener("sessionend",ne)},disconnect(){const ge=a.getState().gl;ge.xr.removeEventListener("sessionstart",ne),ge.xr.removeEventListener("sessionend",ne)}};typeof((pe=Q.xr)==null?void 0:pe.addEventListener)=="function"&&le.connect(),X.set({xr:le})}if(Q.shadowMap){const H=Q.shadowMap.enabled,ne=Q.shadowMap.type;if(Q.shadowMap.enabled=!!R,Ki.boo(R))Q.shadowMap.type=X0;else if(Ki.str(R)){var de;const le={basic:k9,percentage:og,soft:X0,variance:Vh};Q.shadowMap.type=(de=le[R])!=null?de:X0}else Ki.obj(R)&&Object.assign(Q.shadowMap,R);(H!==Q.shadowMap.enabled||ne!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}return Fn.enabled=!D,c||(Q.outputColorSpace=I?Sd:qa,Q.toneMapping=N?ol:TT),X.legacy!==D&&X.set(()=>({legacy:D})),X.linear!==I&&X.set(()=>({linear:I})),X.flat!==N&&X.set(()=>({flat:N})),y&&!Ki.fun(y)&&!pB(y)&&!Ki.equ(y,Q,qm)&&fd(Q,y),s=A,c=!0,g(),this},render(p){return!c&&!d&&this.configure(),d.then(()=>{gI.updateContainer(ee.jsx(QMe,{store:a,children:p,onCreated:s,rootElement:t}),o,null,()=>{})}),a},unmount(){V7(t)}}}function QMe({store:t,children:e,onCreated:n,rootElement:i}){return x_(()=>{const r=t.getState();r.set(a=>({internal:{...a.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ee.jsx(U7.Provider,{value:t,children:e})}function V7(t,e){const n=cp.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),gI.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,o,s,u;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(o=a.renderLists)==null||o.dispose==null||o.dispose(),(s=r.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),bMe(r.scene),cp.delete(t)}catch{}},500)})}}const ewe=new Set,twe=new Set,nwe=new Set;function CC(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function ny(t,e){switch(t){case"before":return CC(ewe,e);case"after":return CC(twe,e);case"tail":return CC(nwe,e)}}let RC,IC;function vI(t,e,n){let i=e.clock.getDelta();e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),RC=e.internal.subscribers;for(let r=0;r<RC.length;r++)IC=RC[r],IC.ref.current(IC.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let AE=!1,yI=!1,PC,xB,Wm;function H7(t){xB=requestAnimationFrame(H7),AE=!0,PC=0,ny("before",t),yI=!0;for(const n of cp.values()){var e;Wm=n.store.getState(),Wm.internal.active&&(Wm.frameloop==="always"||Wm.internal.frames>0)&&!((e=Wm.gl.xr)!=null&&e.isPresenting)&&(PC+=vI(t,Wm))}if(yI=!1,ny("after",t),PC===0)return ny("tail",t),AE=!1,cancelAnimationFrame(xB)}function _I(t,e=1){var n;if(!t)return cp.forEach(i=>_I(i.store.getState(),e));(n=t.gl.xr)!=null&&n.isPresenting||!t.internal.active||t.frameloop==="never"||(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):yI?t.internal.frames=2:t.internal.frames=1,AE||(AE=!0,requestAnimationFrame(H7)))}function SB(t,e=!0,n,i){if(e&&ny("before",t),n)vI(t,n,i);else for(const r of cp.values())vI(t,r.store.getState());e&&ny("after",t)}const NC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iwe(t){const{handlePointer:e}=CMe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(NC).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{const{set:i,events:r}=t.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:n}})),r.handlers)for(const a in r.handlers){const o=r.handlers[a],[s,u]=NC[a];n.addEventListener(s,o,{passive:u})}},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[o]=NC[r];i.connected.removeEventListener(o,a)}n(r=>({events:{...r.events,connected:void 0}}))}}}}function EB(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function rwe({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),s=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,d=G.useRef(!1);G.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,g,y]=G.useMemo(()=>{const A=()=>{if(!s.current.element)return;const{left:R,top:I,width:N,height:D,bottom:U,right:k,x:z,y:L}=s.current.element.getBoundingClientRect(),F={left:R,top:I,width:N,height:D,bottom:U,right:k,x:z,y:L};s.current.element instanceof HTMLElement&&i&&(F.height=s.current.element.offsetHeight,F.width=s.current.element.offsetWidth),Object.freeze(F),d.current&&!lwe(s.current.lastBounds,F)&&o(s.current.lastBounds=F)};return[A,c?EB(A,c):A,u?EB(A,u):A]},[o,i,u,c]);function b(){s.current.scrollContainers&&(s.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",y,!0)),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null),s.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",s.current.orientationHandler))}function T(){s.current.element&&(s.current.resizeObserver=new r(y),s.current.resizeObserver.observe(s.current.element),e&&s.current.scrollContainers&&s.current.scrollContainers.forEach(A=>A.addEventListener("scroll",y,{capture:!0,passive:!0})),s.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",s.current.orientationHandler))}const S=A=>{!A||A===s.current.element||(b(),s.current.element=A,s.current.scrollContainers=q7(A),T())};return owe(y,!!e),awe(g),G.useEffect(()=>{b(),T()},[e,y,g]),G.useEffect(()=>b,[]),[S,a,p]}function awe(t){G.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function owe(t,e){G.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function q7(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...q7(t.parentElement)]}const swe=["x","y","top","bottom","left","right","width","height"],lwe=(t,e)=>swe.every(n=>t[n]===e[n]);function uwe({ref:t,children:e,fallback:n,resize:i,style:r,gl:a,events:o=iwe,eventSource:s,eventPrefix:u,shadows:c,linear:d,flat:p,legacy:g,orthographic:y,frameloop:b,dpr:T,performance:S,raycaster:A,camera:R,scene:I,onPointerMissed:N,onCreated:D,...U}){G.useMemo(()=>qMe(eMe),[]);const k=vMe(),[z,L]=rwe({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=G.useRef(null),j=G.useRef(null);G.useImperativeHandle(t,()=>F.current);const W=N7(N),[X,Q]=G.useState(!1),[ae,$]=G.useState(!1);if(X)throw X;if(ae)throw ae;const ie=G.useRef(null);x_(()=>{const pe=F.current;if(L.width>0&&L.height>0&&pe){ie.current||(ie.current=ZMe(pe));async function de(){await ie.current.configure({gl:a,scene:I,events:o,shadows:c,linear:d,flat:p,legacy:g,orthographic:y,frameloop:b,dpr:T,performance:S,raycaster:A,camera:R,size:L,onPointerMissed:(...H)=>W.current==null?void 0:W.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(s?mMe(s)?s.current:s:j.current),u&&H.setEvents({compute:(ne,le)=>{const ge=ne[u+"X"],_e=ne[u+"Y"];le.pointer.set(ge/le.size.width*2-1,-(_e/le.size.height)*2+1),le.raycaster.setFromCamera(le.pointer,le.camera)}}),D==null||D(H)}}),ie.current.render(ee.jsx(k,{children:ee.jsx(_Me,{set:$,children:ee.jsx(G.Suspense,{fallback:ee.jsx(yMe,{set:Q}),children:e??null})})}))}de()}}),G.useEffect(()=>{const pe=F.current;if(pe)return()=>V7(pe)},[]);const me=s?"none":"auto";return ee.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:me,...r},...U,children:ee.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:ee.jsx("canvas",{ref:F,style:{display:"block"},children:n})})})}function cwe(t){return ee.jsx(C7,{children:ee.jsx(uwe,{...t})})}function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ME.apply(null,arguments)}var fwe=Object.defineProperty,dwe=(t,e,n)=>e in t?fwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hwe=(t,e,n)=>(dwe(t,e+"",n),n);class pwe{constructor(){hwe(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e);e.target=null}}}var mwe=Object.defineProperty,gwe=(t,e,n)=>e in t?mwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e,n)=>(gwe(t,typeof e!="symbol"?e+"":e,n),n);const hS=new mp,TB=new kc,vwe=Math.cos(70*(Math.PI/180)),AB=(t,e)=>(t%e+e)%e;let ywe=class extends pwe{constructor(e,n){super(),$t(this,"object"),$t(this,"domElement"),$t(this,"enabled",!0),$t(this,"target",new se),$t(this,"minDistance",0),$t(this,"maxDistance",1/0),$t(this,"minZoom",0),$t(this,"maxZoom",1/0),$t(this,"minPolarAngle",0),$t(this,"maxPolarAngle",Math.PI),$t(this,"minAzimuthAngle",-1/0),$t(this,"maxAzimuthAngle",1/0),$t(this,"enableDamping",!1),$t(this,"dampingFactor",.05),$t(this,"enableZoom",!0),$t(this,"zoomSpeed",1),$t(this,"enableRotate",!0),$t(this,"rotateSpeed",1),$t(this,"enablePan",!0),$t(this,"panSpeed",1),$t(this,"screenSpacePanning",!0),$t(this,"keyPanSpeed",7),$t(this,"zoomToCursor",!1),$t(this,"autoRotate",!1),$t(this,"autoRotateSpeed",2),$t(this,"reverseOrbit",!1),$t(this,"reverseHorizontalOrbit",!1),$t(this,"reverseVerticalOrbit",!1),$t(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),$t(this,"mouseButtons",{LEFT:Lh.ROTATE,MIDDLE:Lh.DOLLY,RIGHT:Lh.PAN}),$t(this,"touches",{ONE:Uh.ROTATE,TWO:Uh.DOLLY_PAN}),$t(this,"target0"),$t(this,"position0"),$t(this,"zoom0"),$t(this,"_domElementKeyEvents",null),$t(this,"getPolarAngle"),$t(this,"getAzimuthalAngle"),$t(this,"setPolarAngle"),$t(this,"setAzimuthalAngle"),$t(this,"getDistance"),$t(this,"getZoomScale"),$t(this,"listenToKeyEvents"),$t(this,"stopListenToKeyEvents"),$t(this,"saveState"),$t(this,"reset"),$t(this,"update"),$t(this,"connect"),$t(this,"dispose"),$t(this,"dollyIn"),$t(this,"dollyOut"),$t(this,"getScale"),$t(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ue=>{let we=AB(ue,2*Math.PI),ht=d.phi;ht<0&&(ht+=2*Math.PI),we<0&&(we+=2*Math.PI);let he=Math.abs(we-ht);2*Math.PI-he<he&&(we<ht?we+=2*Math.PI:ht+=2*Math.PI),p.phi=we-ht,i.update()},this.setAzimuthalAngle=ue=>{let we=AB(ue,2*Math.PI),ht=d.theta;ht<0&&(ht+=2*Math.PI),we<0&&(we+=2*Math.PI);let he=Math.abs(we-ht);2*Math.PI-he<he&&(we<ht?we+=2*Math.PI:ht+=2*Math.PI),p.theta=we-ht,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",Te),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Te),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=s.NONE},this.update=(()=>{const ue=new se,we=new se(0,1,0),ht=new Xa().setFromUnitVectors(e.up,we),he=ht.clone().invert(),Ye=new se,tt=new Xa,vt=2*Math.PI;return function(){const Be=i.object.position;ht.setFromUnitVectors(e.up,we),he.copy(ht).invert(),ue.copy(Be).sub(i.target),ue.applyQuaternion(ht),d.setFromVector3(ue),i.autoRotate&&u===s.NONE&&Q(W()),i.enableDamping?(d.theta+=p.theta*i.dampingFactor,d.phi+=p.phi*i.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let lt=i.minAzimuthAngle,Et=i.maxAzimuthAngle;isFinite(lt)&&isFinite(Et)&&(lt<-Math.PI?lt+=vt:lt>Math.PI&&(lt-=vt),Et<-Math.PI?Et+=vt:Et>Math.PI&&(Et-=vt),lt<=Et?d.theta=Math.max(lt,Math.min(Et,d.theta)):d.theta=d.theta>(lt+Et)/2?Math.max(lt,d.theta):Math.min(Et,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),i.zoomToCursor&&L||i.object.isOrthographicCamera?d.radius=le(d.radius):d.radius=le(d.radius*g),ue.setFromSpherical(d),ue.applyQuaternion(he),Be.copy(i.target).add(ue),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),y.set(0,0,0));let St=!1;if(i.zoomToCursor&&L){let Lt=null;if(i.object instanceof _r&&i.object.isPerspectiveCamera){const vn=ue.length();Lt=le(vn*g);const wn=vn-Lt;i.object.position.addScaledVector(k,wn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const vn=new se(z.x,z.y,0);vn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix(),St=!0;const wn=new se(z.x,z.y,0);wn.unproject(i.object),i.object.position.sub(wn).add(vn),i.object.updateMatrixWorld(),Lt=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Lt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Lt).add(i.object.position):(hS.origin.copy(i.object.position),hS.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(hS.direction))<vwe?e.lookAt(i.target):(TB.setFromNormalAndCoplanarPoint(i.object.up,i.target),hS.intersectPlane(TB,i.target))))}else i.object instanceof Xc&&i.object.isOrthographicCamera&&(St=g!==1,St&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix()));return g=1,L=!1,St||Ye.distanceToSquared(i.object.position)>c||8*(1-tt.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Ye.copy(i.object.position),tt.copy(i.object.quaternion),St=!1,!0):!1}})(),this.connect=ue=>{i.domElement=ue,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",mt),i.domElement.addEventListener("pointerdown",He),i.domElement.addEventListener("pointercancel",q),i.domElement.addEventListener("wheel",Ie)},this.dispose=()=>{var ue,we,ht,he,Ye,tt;i.domElement&&(i.domElement.style.touchAction="auto"),(ue=i.domElement)==null||ue.removeEventListener("contextmenu",mt),(we=i.domElement)==null||we.removeEventListener("pointerdown",He),(ht=i.domElement)==null||ht.removeEventListener("pointercancel",q),(he=i.domElement)==null||he.removeEventListener("wheel",Ie),(Ye=i.domElement)==null||Ye.ownerDocument.removeEventListener("pointermove",Y),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointerup",q),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Te)};const i=this,r={type:"change"},a={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=s.NONE;const c=1e-6,d=new xE,p=new xE;let g=1;const y=new se,b=new st,T=new st,S=new st,A=new st,R=new st,I=new st,N=new st,D=new st,U=new st,k=new se,z=new st;let L=!1;const F=[],j={};function W(){return 2*Math.PI/60/60*i.autoRotateSpeed}function X(){return Math.pow(.95,i.zoomSpeed)}function Q(ue){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=ue:p.theta-=ue}function ae(ue){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=ue:p.phi-=ue}const $=(()=>{const ue=new se;return function(ht,he){ue.setFromMatrixColumn(he,0),ue.multiplyScalar(-ht),y.add(ue)}})(),ie=(()=>{const ue=new se;return function(ht,he){i.screenSpacePanning===!0?ue.setFromMatrixColumn(he,1):(ue.setFromMatrixColumn(he,0),ue.crossVectors(i.object.up,ue)),ue.multiplyScalar(ht),y.add(ue)}})(),me=(()=>{const ue=new se;return function(ht,he){const Ye=i.domElement;if(Ye&&i.object instanceof _r&&i.object.isPerspectiveCamera){const tt=i.object.position;ue.copy(tt).sub(i.target);let vt=ue.length();vt*=Math.tan(i.object.fov/2*Math.PI/180),$(2*ht*vt/Ye.clientHeight,i.object.matrix),ie(2*he*vt/Ye.clientHeight,i.object.matrix)}else Ye&&i.object instanceof Xc&&i.object.isOrthographicCamera?($(ht*(i.object.right-i.object.left)/i.object.zoom/Ye.clientWidth,i.object.matrix),ie(he*(i.object.top-i.object.bottom)/i.object.zoom/Ye.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function pe(ue){i.object instanceof _r&&i.object.isPerspectiveCamera||i.object instanceof Xc&&i.object.isOrthographicCamera?g=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function de(ue){pe(g/ue)}function H(ue){pe(g*ue)}function ne(ue){if(!i.zoomToCursor||!i.domElement)return;L=!0;const we=i.domElement.getBoundingClientRect(),ht=ue.clientX-we.left,he=ue.clientY-we.top,Ye=we.width,tt=we.height;z.x=ht/Ye*2-1,z.y=-(he/tt)*2+1,k.set(z.x,z.y,1).unproject(i.object).sub(i.object.position).normalize()}function le(ue){return Math.max(i.minDistance,Math.min(i.maxDistance,ue))}function ge(ue){b.set(ue.clientX,ue.clientY)}function _e(ue){ne(ue),N.set(ue.clientX,ue.clientY)}function re(ue){A.set(ue.clientX,ue.clientY)}function oe(ue){T.set(ue.clientX,ue.clientY),S.subVectors(T,b).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(Q(2*Math.PI*S.x/we.clientHeight),ae(2*Math.PI*S.y/we.clientHeight)),b.copy(T),i.update()}function Ee(ue){D.set(ue.clientX,ue.clientY),U.subVectors(D,N),U.y>0?de(X()):U.y<0&&H(X()),N.copy(D),i.update()}function ce(ue){R.set(ue.clientX,ue.clientY),I.subVectors(R,A).multiplyScalar(i.panSpeed),me(I.x,I.y),A.copy(R),i.update()}function Ce(ue){ne(ue),ue.deltaY<0?H(X()):ue.deltaY>0&&de(X()),i.update()}function Ue(ue){let we=!1;switch(ue.code){case i.keys.UP:me(0,i.keyPanSpeed),we=!0;break;case i.keys.BOTTOM:me(0,-i.keyPanSpeed),we=!0;break;case i.keys.LEFT:me(i.keyPanSpeed,0),we=!0;break;case i.keys.RIGHT:me(-i.keyPanSpeed,0),we=!0;break}we&&(ue.preventDefault(),i.update())}function ve(){if(F.length==1)b.set(F[0].pageX,F[0].pageY);else{const ue=.5*(F[0].pageX+F[1].pageX),we=.5*(F[0].pageY+F[1].pageY);b.set(ue,we)}}function ft(){if(F.length==1)A.set(F[0].pageX,F[0].pageY);else{const ue=.5*(F[0].pageX+F[1].pageX),we=.5*(F[0].pageY+F[1].pageY);A.set(ue,we)}}function Se(){const ue=F[0].pageX-F[1].pageX,we=F[0].pageY-F[1].pageY,ht=Math.sqrt(ue*ue+we*we);N.set(0,ht)}function Oe(){i.enableZoom&&Se(),i.enablePan&&ft()}function Me(){i.enableZoom&&Se(),i.enableRotate&&ve()}function Je(ue){if(F.length==1)T.set(ue.pageX,ue.pageY);else{const ht=et(ue),he=.5*(ue.pageX+ht.x),Ye=.5*(ue.pageY+ht.y);T.set(he,Ye)}S.subVectors(T,b).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(Q(2*Math.PI*S.x/we.clientHeight),ae(2*Math.PI*S.y/we.clientHeight)),b.copy(T)}function Z(ue){if(F.length==1)R.set(ue.pageX,ue.pageY);else{const we=et(ue),ht=.5*(ue.pageX+we.x),he=.5*(ue.pageY+we.y);R.set(ht,he)}I.subVectors(R,A).multiplyScalar(i.panSpeed),me(I.x,I.y),A.copy(R)}function it(ue){const we=et(ue),ht=ue.pageX-we.x,he=ue.pageY-we.y,Ye=Math.sqrt(ht*ht+he*he);D.set(0,Ye),U.set(0,Math.pow(D.y/N.y,i.zoomSpeed)),de(U.y),N.copy(D)}function je(ue){i.enableZoom&&it(ue),i.enablePan&&Z(ue)}function Re(ue){i.enableZoom&&it(ue),i.enableRotate&&Je(ue)}function He(ue){var we,ht;i.enabled!==!1&&(F.length===0&&((we=i.domElement)==null||we.ownerDocument.addEventListener("pointermove",Y),(ht=i.domElement)==null||ht.ownerDocument.addEventListener("pointerup",q)),xt(ue),ue.pointerType==="touch"?ot(ue):fe(ue))}function Y(ue){i.enabled!==!1&&(ue.pointerType==="touch"?rt(ue):Le(ue))}function q(ue){var we,ht,he;We(ue),F.length===0&&((we=i.domElement)==null||we.releasePointerCapture(ue.pointerId),(ht=i.domElement)==null||ht.ownerDocument.removeEventListener("pointermove",Y),(he=i.domElement)==null||he.ownerDocument.removeEventListener("pointerup",q)),i.dispatchEvent(o),u=s.NONE}function fe(ue){let we;switch(ue.button){case 0:we=i.mouseButtons.LEFT;break;case 1:we=i.mouseButtons.MIDDLE;break;case 2:we=i.mouseButtons.RIGHT;break;default:we=-1}switch(we){case Lh.DOLLY:if(i.enableZoom===!1)return;_e(ue),u=s.DOLLY;break;case Lh.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enablePan===!1)return;re(ue),u=s.PAN}else{if(i.enableRotate===!1)return;ge(ue),u=s.ROTATE}break;case Lh.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enableRotate===!1)return;ge(ue),u=s.ROTATE}else{if(i.enablePan===!1)return;re(ue),u=s.PAN}break;default:u=s.NONE}u!==s.NONE&&i.dispatchEvent(a)}function Le(ue){if(i.enabled!==!1)switch(u){case s.ROTATE:if(i.enableRotate===!1)return;oe(ue);break;case s.DOLLY:if(i.enableZoom===!1)return;Ee(ue);break;case s.PAN:if(i.enablePan===!1)return;ce(ue);break}}function Ie(ue){i.enabled===!1||i.enableZoom===!1||u!==s.NONE&&u!==s.ROTATE||(ue.preventDefault(),i.dispatchEvent(a),Ce(ue),i.dispatchEvent(o))}function Te(ue){i.enabled===!1||i.enablePan===!1||Ue(ue)}function ot(ue){switch(Ke(ue),F.length){case 1:switch(i.touches.ONE){case Uh.ROTATE:if(i.enableRotate===!1)return;ve(),u=s.TOUCH_ROTATE;break;case Uh.PAN:if(i.enablePan===!1)return;ft(),u=s.TOUCH_PAN;break;default:u=s.NONE}break;case 2:switch(i.touches.TWO){case Uh.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Oe(),u=s.TOUCH_DOLLY_PAN;break;case Uh.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Me(),u=s.TOUCH_DOLLY_ROTATE;break;default:u=s.NONE}break;default:u=s.NONE}u!==s.NONE&&i.dispatchEvent(a)}function rt(ue){switch(Ke(ue),u){case s.TOUCH_ROTATE:if(i.enableRotate===!1)return;Je(ue),i.update();break;case s.TOUCH_PAN:if(i.enablePan===!1)return;Z(ue),i.update();break;case s.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;je(ue),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Re(ue),i.update();break;default:u=s.NONE}}function mt(ue){i.enabled!==!1&&ue.preventDefault()}function xt(ue){F.push(ue)}function We(ue){delete j[ue.pointerId];for(let we=0;we<F.length;we++)if(F[we].pointerId==ue.pointerId){F.splice(we,1);return}}function Ke(ue){let we=j[ue.pointerId];we===void 0&&(we=new st,j[ue.pointerId]=we),we.set(ue.pageX,ue.pageY)}function et(ue){const we=ue.pointerId===F[0].pointerId?F[1]:F[0];return j[we.pointerId]}this.dollyIn=(ue=X())=>{H(ue),i.update()},this.dollyOut=(ue=X())=>{de(ue),i.update()},this.getScale=()=>g,this.setScale=ue=>{pe(ue),i.update()},this.getZoomScale=()=>X(),n!==void 0&&this.connect(n),this.update()}};function _we(){var t=Object.create(null);function e(r,a){var o=r.id,s=r.name,u=r.dependencies;u===void 0&&(u=[]);var c=r.init;c===void 0&&(c=function(){});var d=r.getTransferables;if(d===void 0&&(d=null),!t[o])try{u=u.map(function(g){return g&&g.isWorkerModule&&(e(g,function(y){if(y instanceof Error)throw y}),g=t[g.id].value),g}),c=i("<"+s+">.init",c),d&&(d=i("<"+s+">.getTransferables",d));var p=null;typeof c=="function"?p=c.apply(void 0,u):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:p,getTransferables:d},a(p)}catch(g){g&&g.noLog||console.error(g),a(g)}}function n(r,a){var o,s=r.id,u=r.args;(!t[s]||typeof t[s].value!="function")&&a(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var c=(o=t[s]).value.apply(o,u);c&&typeof c.then=="function"?c.then(d,function(p){return a(p instanceof Error?p:new Error(""+p))}):d(c)}catch(p){a(p)}function d(p){try{var g=t[s].getTransferables&&t[s].getTransferables(p);(!g||!Array.isArray(g)||!g.length)&&(g=void 0),a(p,g)}catch(y){console.error(y),a(y)}}}function i(r,a){var o=void 0;self.troikaDefine=function(u){return o=u};var s=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(s)}catch(u){console.error(u)}return URL.revokeObjectURL(s),delete self.troikaDefine,o}self.addEventListener("message",function(r){var a=r.data,o=a.messageId,s=a.action,u=a.data;try{s==="registerModule"&&e(u,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),s==="callModule"&&n(u,function(c,d){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},d||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function bwe(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(a){return a&&(a=a.onMainThread||a,a._getInitResult&&(a=a._getInitResult())),a}):[];var r=Promise.all(n).then(function(a){return i.apply(null,a)});return e._getInitResult=function(){return r},r},e}var W7=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return W7=function(){return t},t},xwe=0,Swe=0,DC=!1,iy=Object.create(null),ry=Object.create(null),bI=Object.create(null);function Wg(t){if((!t||typeof t.init!="function")&&!DC)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId,a=bwe(t);r==null&&(r="#default");var o="workerModule"+ ++xwe,s=t.name||o,u=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(DC=!0,d=Wg({workerId:r,name:"<"+s+"> function dependency: "+d.name,init:`function(){return (
`+IS(d)+`
)}`}),DC=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function c(){for(var d=[],p=arguments.length;p--;)d[p]=arguments[p];if(!W7())return a.apply(void 0,d);if(!u){u=MB(r,"registerModule",c.workerModuleData);var g=function(){u=null,ry[r].delete(g)};(ry[r]||(ry[r]=new Set)).add(g)}return u.then(function(y){var b=y.isCallable;if(b)return MB(r,"callModule",{id:o,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:e,init:IS(n),getTransferables:i&&IS(i)},c.onMainThread=a,c}function Ewe(t){ry[t]&&ry[t].forEach(function(e){e()}),iy[t]&&(iy[t].terminate(),delete iy[t])}function IS(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Twe(t){var e=iy[t];if(!e){var n=IS(_we);e=iy[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,a=r.messageId,o=bI[a];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete bI[a],o(r)}}return e}function MB(t,e,n){return new Promise(function(i,r){var a=++Swe;bI[a]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},Twe(t).postMessage({messageId:a,action:e,data:n})})}function j7(){var t=(function(e){function n(pe,de,H,ne,le,ge,_e,re){var oe=1-_e;re.x=oe*oe*pe+2*oe*_e*H+_e*_e*le,re.y=oe*oe*de+2*oe*_e*ne+_e*_e*ge}function i(pe,de,H,ne,le,ge,_e,re,oe,Ee){var ce=1-oe;Ee.x=ce*ce*ce*pe+3*ce*ce*oe*H+3*ce*oe*oe*le+oe*oe*oe*_e,Ee.y=ce*ce*ce*de+3*ce*ce*oe*ne+3*ce*oe*oe*ge+oe*oe*oe*re}function r(pe,de){for(var H=/([MLQCZ])([^MLQCZ]*)/g,ne,le,ge,_e,re;ne=H.exec(pe);){var oe=ne[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Ee){return parseFloat(Ee)});switch(ne[1]){case"M":_e=le=oe[0],re=ge=oe[1];break;case"L":(oe[0]!==_e||oe[1]!==re)&&de("L",_e,re,_e=oe[0],re=oe[1]);break;case"Q":{de("Q",_e,re,_e=oe[2],re=oe[3],oe[0],oe[1]);break}case"C":{de("C",_e,re,_e=oe[4],re=oe[5],oe[0],oe[1],oe[2],oe[3]);break}case"Z":(_e!==le||re!==ge)&&de("L",_e,re,le,ge);break}}}function a(pe,de,H){H===void 0&&(H=16);var ne={x:0,y:0};r(pe,function(le,ge,_e,re,oe,Ee,ce,Ce,Ue){switch(le){case"L":de(ge,_e,re,oe);break;case"Q":{for(var ve=ge,ft=_e,Se=1;Se<H;Se++)n(ge,_e,Ee,ce,re,oe,Se/(H-1),ne),de(ve,ft,ne.x,ne.y),ve=ne.x,ft=ne.y;break}case"C":{for(var Oe=ge,Me=_e,Je=1;Je<H;Je++)i(ge,_e,Ee,ce,Ce,Ue,re,oe,Je/(H-1),ne),de(Oe,Me,ne.x,ne.y),Oe=ne.x,Me=ne.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(pe,de){var H=pe.getContext?pe.getContext("webgl",c):pe,ne=u.get(H);if(!ne){let Oe=function(Re){var He=ge[Re];if(!He&&(He=ge[Re]=H.getExtension(Re),!He))throw new Error(Re+" not supported");return He},Me=function(Re,He){var Y=H.createShader(He);return H.shaderSource(Y,Re),H.compileShader(Y),Y},Je=function(Re,He,Y,q){if(!_e[Re]){var fe={},Le={},Ie=H.createProgram();H.attachShader(Ie,Me(He,H.VERTEX_SHADER)),H.attachShader(Ie,Me(Y,H.FRAGMENT_SHADER)),H.linkProgram(Ie),_e[Re]={program:Ie,transaction:function(ot){H.useProgram(Ie),ot({setUniform:function(mt,xt){for(var We=[],Ke=arguments.length-2;Ke-- >0;)We[Ke]=arguments[Ke+2];var et=Le[xt]||(Le[xt]=H.getUniformLocation(Ie,xt));H["uniform"+mt].apply(H,[et].concat(We))},setAttribute:function(mt,xt,We,Ke,et){var ue=fe[mt];ue||(ue=fe[mt]={buf:H.createBuffer(),loc:H.getAttribLocation(Ie,mt),data:null}),H.bindBuffer(H.ARRAY_BUFFER,ue.buf),H.vertexAttribPointer(ue.loc,xt,H.FLOAT,!1,0,0),H.enableVertexAttribArray(ue.loc),le?H.vertexAttribDivisor(ue.loc,Ke):Oe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ue.loc,Ke),et!==ue.data&&(H.bufferData(H.ARRAY_BUFFER,et,We),ue.data=et)}})}}}_e[Re].transaction(q)},Z=function(Re,He){oe++;try{H.activeTexture(H.TEXTURE0+oe);var Y=re[Re];Y||(Y=re[Re]=H.createTexture(),H.bindTexture(H.TEXTURE_2D,Y),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST)),H.bindTexture(H.TEXTURE_2D,Y),He(Y,oe)}finally{oe--}},it=function(Re,He,Y){var q=H.createFramebuffer();Ee.push(q),H.bindFramebuffer(H.FRAMEBUFFER,q),H.activeTexture(H.TEXTURE0+He),H.bindTexture(H.TEXTURE_2D,Re),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Re,0);try{Y(q)}finally{H.deleteFramebuffer(q),H.bindFramebuffer(H.FRAMEBUFFER,Ee[--Ee.length-1]||null)}},je=function(){ge={},_e={},re={},oe=-1,Ee.length=0};var ce=Oe,Ce=Me,Ue=Je,ve=Z,ft=it,Se=je,le=typeof WebGL2RenderingContext<"u"&&H instanceof WebGL2RenderingContext,ge={},_e={},re={},oe=-1,Ee=[];H.canvas.addEventListener("webglcontextlost",function(Re){je(),Re.preventDefault()},!1),u.set(H,ne={gl:H,isWebGL2:le,getExtension:Oe,withProgram:Je,withTexture:Z,withTextureFramebuffer:it,handleContextLoss:je})}de(ne)}function p(pe,de,H,ne,le,ge,_e,re){_e===void 0&&(_e=15),re===void 0&&(re=null),d(pe,function(oe){var Ee=oe.gl,ce=oe.withProgram,Ce=oe.withTexture;Ce("copy",function(Ue,ve){Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,le,ge,0,Ee.RGBA,Ee.UNSIGNED_BYTE,de),ce("copy",o,s,function(ft){var Se=ft.setUniform,Oe=ft.setAttribute;Oe("aUV",2,Ee.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Se("1i","image",ve),Ee.bindFramebuffer(Ee.FRAMEBUFFER,re||null),Ee.disable(Ee.BLEND),Ee.colorMask(_e&8,_e&4,_e&2,_e&1),Ee.viewport(H,ne,le,ge),Ee.scissor(H,ne,le,ge),Ee.drawArrays(Ee.TRIANGLES,0,3)})})})}function g(pe,de,H){var ne=pe.width,le=pe.height;d(pe,function(ge){var _e=ge.gl,re=new Uint8Array(ne*le*4);_e.readPixels(0,0,ne,le,_e.RGBA,_e.UNSIGNED_BYTE,re),pe.width=de,pe.height=H,p(_e,re,0,0,ne,le)})}var y=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:p,resizeWebGLCanvasWithoutClearing:g});function b(pe,de,H,ne,le,ge){ge===void 0&&(ge=1);var _e=new Uint8Array(pe*de),re=ne[2]-ne[0],oe=ne[3]-ne[1],Ee=[];a(H,function(Oe,Me,Je,Z){Ee.push({x1:Oe,y1:Me,x2:Je,y2:Z,minX:Math.min(Oe,Je),minY:Math.min(Me,Z),maxX:Math.max(Oe,Je),maxY:Math.max(Me,Z)})}),Ee.sort(function(Oe,Me){return Oe.maxX-Me.maxX});for(var ce=0;ce<pe;ce++)for(var Ce=0;Ce<de;Ce++){var Ue=ft(ne[0]+re*(ce+.5)/pe,ne[1]+oe*(Ce+.5)/de),ve=Math.pow(1-Math.abs(Ue)/le,ge)/2;Ue<0&&(ve=1-ve),ve=Math.max(0,Math.min(255,Math.round(ve*255))),_e[Ce*pe+ce]=ve}return _e;function ft(Oe,Me){for(var Je=1/0,Z=1/0,it=Ee.length;it--;){var je=Ee[it];if(je.maxX+Z<=Oe)break;if(Oe+Z>je.minX&&Me-Z<je.maxY&&Me+Z>je.minY){var Re=A(Oe,Me,je.x1,je.y1,je.x2,je.y2);Re<Je&&(Je=Re,Z=Math.sqrt(Je))}}return Se(Oe,Me)&&(Z=-Z),Z}function Se(Oe,Me){for(var Je=0,Z=Ee.length;Z--;){var it=Ee[Z];if(it.maxX<=Oe)break;var je=it.y1>Me!=it.y2>Me&&Oe<(it.x2-it.x1)*(Me-it.y1)/(it.y2-it.y1)+it.x1;je&&(Je+=it.y1<it.y2?1:-1)}return Je!==0}}function T(pe,de,H,ne,le,ge,_e,re,oe,Ee){ge===void 0&&(ge=1),re===void 0&&(re=0),oe===void 0&&(oe=0),Ee===void 0&&(Ee=0),S(pe,de,H,ne,le,ge,_e,null,re,oe,Ee)}function S(pe,de,H,ne,le,ge,_e,re,oe,Ee,ce){ge===void 0&&(ge=1),oe===void 0&&(oe=0),Ee===void 0&&(Ee=0),ce===void 0&&(ce=0);for(var Ce=b(pe,de,H,ne,le,ge),Ue=new Uint8Array(Ce.length*4),ve=0;ve<Ce.length;ve++)Ue[ve*4+ce]=Ce[ve];p(_e,Ue,oe,Ee,pe,de,1<<3-ce,re)}function A(pe,de,H,ne,le,ge){var _e=le-H,re=ge-ne,oe=_e*_e+re*re,Ee=oe?Math.max(0,Math.min(1,((pe-H)*_e+(de-ne)*re)/oe)):0,ce=pe-(H+Ee*_e),Ce=de-(ne+Ee*re);return ce*ce+Ce*Ce}var R=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:T,generateIntoFramebuffer:S}),I="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",D="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",U=new Float32Array([0,0,2,0,0,2]),k=null,z=!1,L={},F=new WeakMap;function j(pe){if(!z&&!ae(pe))throw new Error("WebGL generation not supported")}function W(pe,de,H,ne,le,ge,_e){if(ge===void 0&&(ge=1),_e===void 0&&(_e=null),!_e&&(_e=k,!_e)){var re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!re)throw new Error("OffscreenCanvas or DOM canvas not supported");_e=k=re.getContext("webgl",{depth:!1})}j(_e);var oe=new Uint8Array(pe*de*4);d(_e,function(Ue){var ve=Ue.gl,ft=Ue.withTexture,Se=Ue.withTextureFramebuffer;ft("readable",function(Oe,Me){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,pe,de,0,ve.RGBA,ve.UNSIGNED_BYTE,null),Se(Oe,Me,function(Je){Q(pe,de,H,ne,le,ge,ve,Je,0,0,0),ve.readPixels(0,0,pe,de,ve.RGBA,ve.UNSIGNED_BYTE,oe)})})});for(var Ee=new Uint8Array(pe*de),ce=0,Ce=0;ce<oe.length;ce+=4)Ee[Ce++]=oe[ce];return Ee}function X(pe,de,H,ne,le,ge,_e,re,oe,Ee){ge===void 0&&(ge=1),re===void 0&&(re=0),oe===void 0&&(oe=0),Ee===void 0&&(Ee=0),Q(pe,de,H,ne,le,ge,_e,null,re,oe,Ee)}function Q(pe,de,H,ne,le,ge,_e,re,oe,Ee,ce){ge===void 0&&(ge=1),oe===void 0&&(oe=0),Ee===void 0&&(Ee=0),ce===void 0&&(ce=0),j(_e);var Ce=[];a(H,function(Ue,ve,ft,Se){Ce.push(Ue,ve,ft,Se)}),Ce=new Float32Array(Ce),d(_e,function(Ue){var ve=Ue.gl,ft=Ue.isWebGL2,Se=Ue.getExtension,Oe=Ue.withProgram,Me=Ue.withTexture,Je=Ue.withTextureFramebuffer,Z=Ue.handleContextLoss;if(Me("rawDistances",function(it,je){(pe!==it._lastWidth||de!==it._lastHeight)&&ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,it._lastWidth=pe,it._lastHeight=de,0,ve.RGBA,ve.UNSIGNED_BYTE,null),Oe("main",I,N,function(Re){var He=Re.setAttribute,Y=Re.setUniform,q=!ft&&Se("ANGLE_instanced_arrays"),fe=!ft&&Se("EXT_blend_minmax");He("aUV",2,ve.STATIC_DRAW,0,U),He("aLineSegment",4,ve.DYNAMIC_DRAW,1,Ce),Y.apply(void 0,["4f","uGlyphBounds"].concat(ne)),Y("1f","uMaxDistance",le),Y("1f","uExponent",ge),Je(it,je,function(Le){ve.enable(ve.BLEND),ve.colorMask(!0,!0,!0,!0),ve.viewport(0,0,pe,de),ve.scissor(0,0,pe,de),ve.blendFunc(ve.ONE,ve.ONE),ve.blendEquationSeparate(ve.FUNC_ADD,ft?ve.MAX:fe.MAX_EXT),ve.clear(ve.COLOR_BUFFER_BIT),ft?ve.drawArraysInstanced(ve.TRIANGLES,0,3,Ce.length/4):q.drawArraysInstancedANGLE(ve.TRIANGLES,0,3,Ce.length/4)})}),Oe("post",o,D,function(Re){Re.setAttribute("aUV",2,ve.STATIC_DRAW,0,U),Re.setUniform("1i","tex",je),ve.bindFramebuffer(ve.FRAMEBUFFER,re),ve.disable(ve.BLEND),ve.colorMask(ce===0,ce===1,ce===2,ce===3),ve.viewport(oe,Ee,pe,de),ve.scissor(oe,Ee,pe,de),ve.drawArrays(ve.TRIANGLES,0,3)})}),ve.isContextLost())throw Z(),new Error("webgl context lost")})}function ae(pe){var de=!pe||pe===k?L:pe.canvas||pe,H=F.get(de);if(H===void 0){z=!0;var ne=null;try{var le=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ge=W(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,pe);H=ge&&le.length===ge.length&&ge.every(function(_e,re){return _e===le[re]}),H||(ne="bad trial run results",console.info(le,ge))}catch(_e){H=!1,ne=_e.message}ne&&console.warn("WebGL SDF generation not supported:",ne),z=!1,F.set(de,H)}return H}var $=Object.freeze({__proto__:null,generate:W,generateIntoCanvas:X,generateIntoFramebuffer:Q,isSupported:ae});function ie(pe,de,H,ne,le,ge){le===void 0&&(le=Math.max(ne[2]-ne[0],ne[3]-ne[1])/2),ge===void 0&&(ge=1);try{return W.apply($,arguments)}catch(_e){return console.info("WebGL SDF generation failed, falling back to JS",_e),b.apply(R,arguments)}}function me(pe,de,H,ne,le,ge,_e,re,oe,Ee){le===void 0&&(le=Math.max(ne[2]-ne[0],ne[3]-ne[1])/2),ge===void 0&&(ge=1),re===void 0&&(re=0),oe===void 0&&(oe=0),Ee===void 0&&(Ee=0);try{return X.apply($,arguments)}catch(ce){return console.info("WebGL SDF generation failed, falling back to JS",ce),T.apply(R,arguments)}}return e.forEachPathCommand=r,e.generate=ie,e.generateIntoCanvas=me,e.javascript=R,e.pathToLineSegments=a,e.webgl=$,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}function Awe(){var t=(function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(Z,it){i[Z]=1<<it+1,r[i[Z]]=Z}),Object.freeze(i);var a=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,s=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,u=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|a|i.PDI|u,d=null;function p(){if(!d){d=new Map;var Z=function(je){if(n.hasOwnProperty(je)){var Re=0;n[je].split(",").forEach(function(He){var Y=He.split("+"),q=Y[0],fe=Y[1];q=parseInt(q,36),fe=fe?parseInt(fe,36):0,d.set(Re+=q,i[je]);for(var Le=0;Le<fe;Le++)d.set(++Re,i[je])})}};for(var it in n)Z(it)}}function g(Z){return p(),d.get(Z.codePointAt(0))||i.L}function y(Z){return r[g(Z)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function T(Z,it){var je=36,Re=0,He=new Map,Y=it&&new Map,q;return Z.split(",").forEach(function fe(Le){if(Le.indexOf("+")!==-1)for(var Ie=+Le;Ie--;)fe(q);else{q=Le;var Te=Le.split(">"),ot=Te[0],rt=Te[1];ot=String.fromCodePoint(Re+=parseInt(ot,je)),rt=String.fromCodePoint(Re+=parseInt(rt,je)),He.set(ot,rt),it&&Y.set(rt,ot)}}),{map:He,reverseMap:Y}}var S,A,R;function I(){if(!S){var Z=T(b.pairs,!0),it=Z.map,je=Z.reverseMap;S=it,A=je,R=T(b.canonical,!1).map}}function N(Z){return I(),S.get(Z)||null}function D(Z){return I(),A.get(Z)||null}function U(Z){return I(),R.get(Z)||null}var k=i.L,z=i.R,L=i.EN,F=i.ES,j=i.ET,W=i.AN,X=i.CS,Q=i.B,ae=i.S,$=i.ON,ie=i.BN,me=i.NSM,pe=i.AL,de=i.LRO,H=i.RLO,ne=i.LRE,le=i.RLE,ge=i.PDF,_e=i.LRI,re=i.RLI,oe=i.FSI,Ee=i.PDI;function ce(Z,it){for(var je=125,Re=new Uint32Array(Z.length),He=0;He<Z.length;He++)Re[He]=g(Z[He]);var Y=new Map;function q(kr,eo){var na=Re[kr];Re[kr]=eo,Y.set(na,Y.get(na)-1),na&s&&Y.set(s,Y.get(s)-1),Y.set(eo,(Y.get(eo)||0)+1),eo&s&&Y.set(s,(Y.get(s)||0)+1)}for(var fe=new Uint8Array(Z.length),Le=new Map,Ie=[],Te=null,ot=0;ot<Z.length;ot++)Te||Ie.push(Te={start:ot,end:Z.length-1,level:it==="rtl"?1:it==="ltr"?0:gf(ot,!1)}),Re[ot]&Q&&(Te.end=ot,Te=null);for(var rt=le|ne|H|de|a|Ee|ge|Q,mt=function(kr){return kr+(kr&1?1:2)},xt=function(kr){return kr+(kr&1?2:1)},We=0;We<Ie.length;We++){Te=Ie[We];var Ke=[{_level:Te.level,_override:0,_isolate:0}],et=void 0,ue=0,we=0,ht=0;Y.clear();for(var he=Te.start;he<=Te.end;he++){var Ye=Re[he];if(et=Ke[Ke.length-1],Y.set(Ye,(Y.get(Ye)||0)+1),Ye&s&&Y.set(s,(Y.get(s)||0)+1),Ye&rt)if(Ye&(le|ne)){fe[he]=et._level;var tt=(Ye===le?xt:mt)(et._level);tt<=je&&!ue&&!we?Ke.push({_level:tt,_override:0,_isolate:0}):ue||we++}else if(Ye&(H|de)){fe[he]=et._level;var vt=(Ye===H?xt:mt)(et._level);vt<=je&&!ue&&!we?Ke.push({_level:vt,_override:Ye&H?z:k,_isolate:0}):ue||we++}else if(Ye&a){Ye&oe&&(Ye=gf(he+1,!0)===1?re:_e),fe[he]=et._level,et._override&&q(he,et._override);var nt=(Ye===re?xt:mt)(et._level);nt<=je&&ue===0&&we===0?(ht++,Ke.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:he})):ue++}else if(Ye&Ee){if(ue>0)ue--;else if(ht>0){for(we=0;!Ke[Ke.length-1]._isolate;)Ke.pop();var Be=Ke[Ke.length-1]._isolInitIndex;Be!=null&&(Le.set(Be,he),Le.set(he,Be)),Ke.pop(),ht--}et=Ke[Ke.length-1],fe[he]=et._level,et._override&&q(he,et._override)}else Ye&ge?(ue===0&&(we>0?we--:!et._isolate&&Ke.length>1&&(Ke.pop(),et=Ke[Ke.length-1])),fe[he]=et._level):Ye&Q&&(fe[he]=Te.level);else fe[he]=et._level,et._override&&Ye!==ie&&q(he,et._override)}for(var lt=[],Et=null,St=Te.start;St<=Te.end;St++){var Lt=Re[St];if(!(Lt&u)){var vn=fe[St],wn=Lt&a,Qn=Lt===Ee;Et&&vn===Et._level?(Et._end=St,Et._endsWithIsolInit=wn):lt.push(Et={_start:St,_end:St,_level:vn,_startsWithPDI:Qn,_endsWithIsolInit:wn})}}for(var nr=[],Jr=0;Jr<lt.length;Jr++){var xr=lt[Jr];if(!xr._startsWithPDI||xr._startsWithPDI&&!Le.has(xr._start)){for(var Sr=[Et=xr],pa=void 0;Et&&Et._endsWithIsolInit&&(pa=Le.get(Et._end))!=null;)for(var ai=Jr+1;ai<lt.length;ai++)if(lt[ai]._start===pa){Sr.push(Et=lt[ai]);break}for(var $n=[],zn=0;zn<Sr.length;zn++)for(var Di=Sr[zn],Fr=Di._start;Fr<=Di._end;Fr++)$n.push(Fr);for(var ma=fe[$n[0]],Zr=Te.level,$a=$n[0]-1;$a>=0;$a--)if(!(Re[$a]&u)){Zr=fe[$a];break}var es=$n[$n.length-1],Ka=fe[es],So=Te.level;if(!(Re[es]&a)){for(var Ra=es+1;Ra<=Te.end;Ra++)if(!(Re[Ra]&u)){So=fe[Ra];break}}nr.push({_seqIndices:$n,_sosType:Math.max(Zr,ma)%2?z:k,_eosType:Math.max(So,Ka)%2?z:k})}}for(var Ja=0;Ja<nr.length;Ja++){var Eo=nr[Ja],Ot=Eo._seqIndices,J=Eo._sosType,Ae=Eo._eosType,Ve=fe[Ot[0]]&1?z:k;if(Y.get(me))for(var Fe=0;Fe<Ot.length;Fe++){var Pe=Ot[Fe];if(Re[Pe]&me){for(var yt=J,At=Fe-1;At>=0;At--)if(!(Re[Ot[At]]&u)){yt=Re[Ot[At]];break}q(Pe,yt&(a|Ee)?$:yt)}}if(Y.get(L))for(var pt=0;pt<Ot.length;pt++){var Pt=Ot[pt];if(Re[Pt]&L)for(var Nt=pt-1;Nt>=-1;Nt--){var Vt=Nt===-1?J:Re[Ot[Nt]];if(Vt&o){Vt===pe&&q(Pt,W);break}}}if(Y.get(pe))for(var Dt=0;Dt<Ot.length;Dt++){var qt=Ot[Dt];Re[qt]&pe&&q(qt,z)}if(Y.get(F)||Y.get(X))for(var yn=1;yn<Ot.length-1;yn++){var qn=Ot[yn];if(Re[qn]&(F|X)){for(var Nn=0,Jt=0,Tt=yn-1;Tt>=0&&(Nn=Re[Ot[Tt]],!!(Nn&u));Tt--);for(var xn=yn+1;xn<Ot.length&&(Jt=Re[Ot[xn]],!!(Jt&u));xn++);Nn===Jt&&(Re[qn]===F?Nn===L:Nn&(L|W))&&q(qn,Nn)}}if(Y.get(L))for(var Bt=0;Bt<Ot.length;Bt++){var Oi=Ot[Bt];if(Re[Oi]&L){for(var Qr=Bt-1;Qr>=0&&Re[Ot[Qr]]&(j|u);Qr--)q(Ot[Qr],L);for(Bt++;Bt<Ot.length&&Re[Ot[Bt]]&(j|u|L);Bt++)Re[Ot[Bt]]!==L&&q(Ot[Bt],L)}}if(Y.get(j)||Y.get(F)||Y.get(X))for(var Gn=0;Gn<Ot.length;Gn++){var Er=Ot[Gn];if(Re[Er]&(j|F|X)){q(Er,$);for(var Cn=Gn-1;Cn>=0&&Re[Ot[Cn]]&u;Cn--)q(Ot[Cn],$);for(var gi=Gn+1;gi<Ot.length&&Re[Ot[gi]]&u;gi++)q(Ot[gi],$)}}if(Y.get(L))for(var vi=0,Vi=J;vi<Ot.length;vi++){var Hi=Ot[vi],ts=Re[Hi];ts&L?Vi===k&&q(Hi,k):ts&o&&(Vi=ts)}if(Y.get(s)){var Tr=z|L|W,Ld=Tr|k,eu=[];{for(var To=[],ea=0;ea<Ot.length;ea++)if(Re[Ot[ea]]&s){var As=Z[Ot[ea]],Ju=void 0;if(N(As)!==null)if(To.length<63)To.push({char:As,seqIndex:ea});else break;else if((Ju=D(As))!==null)for(var Za=To.length-1;Za>=0;Za--){var Ao=To[Za].char;if(Ao===Ju||Ao===D(U(As))||N(U(Ao))===As){eu.push([To[Za].seqIndex,ea]),To.length=Za;break}}}eu.sort(function(kr,eo){return kr[0]-eo[0]})}for(var Zu=0;Zu<eu.length;Zu++){for(var Qu=eu[Zu],tu=Qu[0],Ms=Qu[1],Qa=!1,ga=0,ws=tu+1;ws<Ms;ws++){var ta=Ot[ws];if(Re[ta]&Ld){Qa=!0;var ec=Re[ta]&Tr?z:k;if(ec===Ve){ga=ec;break}}}if(Qa&&!ga){ga=J;for(var ns=tu-1;ns>=0;ns--){var nu=Ot[ns];if(Re[nu]&Ld){var iu=Re[nu]&Tr?z:k;iu!==Ve?ga=iu:ga=Ve;break}}}if(ga){if(Re[Ot[tu]]=Re[Ot[Ms]]=ga,ga!==Ve){for(var Mo=tu+1;Mo<Ot.length;Mo++)if(!(Re[Ot[Mo]]&u)){g(Z[Ot[Mo]])&me&&(Re[Ot[Mo]]=ga);break}}if(ga!==Ve){for(var ru=Ms+1;ru<Ot.length;ru++)if(!(Re[Ot[ru]]&u)){g(Z[Ot[ru]])&me&&(Re[Ot[ru]]=ga);break}}}}for(var yi=0;yi<Ot.length;yi++)if(Re[Ot[yi]]&s){for(var is=yi,gl=yi,Cs=J,au=yi-1;au>=0;au--)if(Re[Ot[au]]&u)is=au;else{Cs=Re[Ot[au]]&Tr?z:k;break}for(var ou=Ae,Rs=yi+1;Rs<Ot.length;Rs++)if(Re[Ot[Rs]]&(s|u))gl=Rs;else{ou=Re[Ot[Rs]]&Tr?z:k;break}for(var Is=is;Is<=gl;Is++)Re[Ot[Is]]=Cs===ou?Cs:Ve;yi=gl}}}for(var ir=Te.start;ir<=Te.end;ir++){var Ud=fe[ir],tc=Re[ir];if(Ud&1?tc&(k|L|W)&&fe[ir]++:tc&z?fe[ir]++:tc&(W|L)&&(fe[ir]+=2),tc&u&&(fe[ir]=ir===0?Te.level:fe[ir-1]),ir===Te.end||g(Z[ir])&(ae|Q))for(var nc=ir;nc>=0&&g(Z[nc])&c;nc--)fe[nc]=Te.level}}return{levels:fe,paragraphs:Ie};function gf(kr,eo){for(var na=kr;na<Z.length;na++){var rs=Re[na];if(rs&(z|pe))return 1;if(rs&(Q|k)||eo&&rs===Ee)return 0;if(rs&a){var su=vf(na);na=su===-1?Z.length:su}}return 0}function vf(kr){for(var eo=1,na=kr+1;na<Z.length;na++){var rs=Re[na];if(rs&Q)break;if(rs&Ee){if(--eo===0)return na}else rs&a&&eo++}return-1}}var Ce="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ue;function ve(){if(!Ue){var Z=T(Ce,!0),it=Z.map,je=Z.reverseMap;je.forEach(function(Re,He){it.set(He,Re)}),Ue=it}}function ft(Z){return ve(),Ue.get(Z)||null}function Se(Z,it,je,Re){var He=Z.length;je=Math.max(0,je==null?0:+je),Re=Math.min(He-1,Re==null?He-1:+Re);for(var Y=new Map,q=je;q<=Re;q++)if(it[q]&1){var fe=ft(Z[q]);fe!==null&&Y.set(q,fe)}return Y}function Oe(Z,it,je,Re){var He=Z.length;je=Math.max(0,je==null?0:+je),Re=Math.min(He-1,Re==null?He-1:+Re);var Y=[];return it.paragraphs.forEach(function(q){var fe=Math.max(je,q.start),Le=Math.min(Re,q.end);if(fe<Le){for(var Ie=it.levels.slice(fe,Le+1),Te=Le;Te>=fe&&g(Z[Te])&c;Te--)Ie[Te]=q.level;for(var ot=q.level,rt=1/0,mt=0;mt<Ie.length;mt++){var xt=Ie[mt];xt>ot&&(ot=xt),xt<rt&&(rt=xt|1)}for(var We=ot;We>=rt;We--)for(var Ke=0;Ke<Ie.length;Ke++)if(Ie[Ke]>=We){for(var et=Ke;Ke+1<Ie.length&&Ie[Ke+1]>=We;)Ke++;Ke>et&&Y.push([et+fe,Ke+fe])}}}),Y}function Me(Z,it,je,Re){var He=Je(Z,it,je,Re),Y=[].concat(Z);return He.forEach(function(q,fe){Y[fe]=(it.levels[q]&1?ft(Z[q]):null)||Z[q]}),Y.join("")}function Je(Z,it,je,Re){for(var He=Oe(Z,it,je,Re),Y=[],q=0;q<Z.length;q++)Y[q]=q;return He.forEach(function(fe){for(var Le=fe[0],Ie=fe[1],Te=Y.slice(Le,Ie+1),ot=Te.length;ot--;)Y[Ie-ot]=Te[ot]}),Y}return e.closingToOpeningBracket=D,e.getBidiCharType=g,e.getBidiCharTypeName=y,e.getCanonicalBracket=U,e.getEmbeddingLevels=ce,e.getMirroredCharacter=ft,e.getMirroredCharactersMap=Se,e.getReorderSegments=Oe,e.getReorderedIndices=Je,e.getReorderedString=Me,e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}const X7=/\bvoid\s+main\s*\(\s*\)\s*{/g;function xI(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let a=mn[r];return a?xI(a):i}return t.replace(e,n)}const Ma=[];for(let t=0;t<256;t++)Ma[t]=(t<16?"0":"")+t.toString(16);function Mwe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ma[t&255]+Ma[t>>8&255]+Ma[t>>16&255]+Ma[t>>24&255]+"-"+Ma[e&255]+Ma[e>>8&255]+"-"+Ma[e>>16&15|64]+Ma[e>>24&255]+"-"+Ma[n&63|128]+Ma[n>>8&255]+"-"+Ma[n>>16&255]+Ma[n>>24&255]+Ma[i&255]+Ma[i>>8&255]+Ma[i>>16&255]+Ma[i>>24&255]).toUpperCase()}const Ih=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},wwe=Date.now(),wB=new WeakMap,CB=new Map;let Cwe=1e10;function SI(t,e){const n=Nwe(e);let i=wB.get(t);if(i||wB.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,a=function(c,d){t.onBeforeCompile.call(this,c,d);const p=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let g=CB[p];if(!g){const y=Rwe(this,c,e,n);g=CB[p]=y}c.vertexShader=g.vertexShader,c.fragmentShader=g.fragmentShader,Ih(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-wwe}}),this[r]&&this[r](c)},o=function(){return s(e.chained?t:t.clone())},s=function(c){const d=Object.create(c,u);return Object.defineProperty(d,"baseMaterial",{value:t}),Object.defineProperty(d,"id",{value:Cwe++}),d.uuid=Mwe(),d.uniforms=Ih({},c.uniforms,e.uniforms),d.defines=Ih({},c.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",d.extensions=Ih({},c.extensions,e.extensions),d._listeners=void 0,d},u={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:c=>{t.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const d=this.baseMaterial;return c===d||d.isDerivedMaterial&&d.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return a},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Ih(this.extensions,c.extensions),Ih(this.defines,c.defines),Ih(this.uniforms,VN.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return s(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=SI(t.isDerivedMaterial?t.getDepthMaterial():new iA({depthPacking:cq}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=SI(t.isDerivedMaterial?t.getDistanceMaterial():new rA,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:d}=this;c&&c.dispose(),d&&d.dispose(),t.dispose.call(this)}}};return i[n]=o,new o}function Rwe(t,{vertexShader:e,fragmentShader:n},i,r){let{vertexDefs:a,vertexMainIntro:o,vertexMainOutro:s,vertexTransform:u,fragmentDefs:c,fragmentMainIntro:d,fragmentMainOutro:p,fragmentColorTransform:g,customRewriter:y,timeUniform:b}=i;if(a=a||"",o=o||"",s=s||"",c=c||"",d=d||"",p=p||"",(u||y)&&(e=xI(e)),(g||y)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=xI(n)),y){let T=y({vertexShader:e,fragmentShader:n});e=T.vertexShader,n=T.fragmentShader}if(g){let T=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(T.push(S),"")),p=`${g}
${T.join(`
`)}
${p}`}if(b){const T=`
uniform float ${b};
`;a=T+a,c=T+c}return u&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,a=`${a}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(T,S,A,R)=>/\battribute\s+vec[23]\s+$/.test(R.substr(0,A))?S:`troika_${S}_${r}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=RB(e,r,a,o,s),n=RB(n,r,c,d,p),{vertexShader:e,fragmentShader:n}}function RB(t,e,n,i,r){return(i||r||n)&&(t=t.replace(X7,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function Iwe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Pwe=0;const IB=new Map;function Nwe(t){const e=JSON.stringify(t,Iwe);let n=IB.get(e);return n==null&&IB.set(e,n=++Pwe),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Dwe(){return typeof window>"u"&&(self.window=self),(function(t){var e={parse:function(r){var a=e._bin,o=new Uint8Array(r);if(a.readASCII(o,0,4)=="ttcf"){var s=4;a.readUshort(o,s),s+=2,a.readUshort(o,s),s+=2;var u=a.readUint(o,s);s+=4;for(var c=[],d=0;d<u;d++){var p=a.readUint(o,s);s+=4,c.push(e._readFont(o,p))}return c}return[e._readFont(o,0)]},_readFont:function(r,a){var o=e._bin,s=a;o.readFixed(r,a),a+=4;var u=o.readUshort(r,a);a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:r,_offset:s},p={},g=0;g<u;g++){var y=o.readASCII(r,a,4);a+=4,o.readUint(r,a),a+=4;var b=o.readUint(r,a);a+=4;var T=o.readUint(r,a);a+=4,p[y]={offset:b,length:T}}for(g=0;g<c.length;g++){var S=c[g];p[S]&&(d[S.trim()]=e[S.trim()].parse(r,p[S].offset,p[S].length,d))}return d},_tabOffset:function(r,a,o){for(var s=e._bin,u=s.readUshort(r,o+4),c=o+12,d=0;d<u;d++){var p=s.readASCII(r,c,4);c+=4,s.readUint(r,c),c+=4;var g=s.readUint(r,c);if(c+=4,s.readUint(r,c),c+=4,p==a)return g}return 0}};e._bin={readFixed:function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<8|r[a+3])/65540},readF2dot14:function(r,a){return e._bin.readShort(r,a)/16384},readInt:function(r,a){return e._bin._view(r).getInt32(a)},readInt8:function(r,a){return e._bin._view(r).getInt8(a)},readShort:function(r,a){return e._bin._view(r).getInt16(a)},readUshort:function(r,a){return e._bin._view(r).getUint16(a)},readUshorts:function(r,a,o){for(var s=[],u=0;u<o;u++)s.push(e._bin.readUshort(r,a+2*u));return s},readUint:function(r,a){return e._bin._view(r).getUint32(a)},readUint64:function(r,a){return 4294967296*e._bin.readUint(r,a)+e._bin.readUint(r,a+4)},readASCII:function(r,a,o){for(var s="",u=0;u<o;u++)s+=String.fromCharCode(r[a+u]);return s},readUnicode:function(r,a,o){for(var s="",u=0;u<o;u++){var c=r[a++]<<8|r[a++];s+=String.fromCharCode(c)}return s},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,a,o){var s=e._bin._tdec;return s&&a==0&&o==r.length?s.decode(r):e._bin.readASCII(r,a,o)},readBytes:function(r,a,o){for(var s=[],u=0;u<o;u++)s.push(r[a+u]);return s},readASCIIArray:function(r,a,o){for(var s=[],u=0;u<o;u++)s.push(String.fromCharCode(r[a+u]));return s},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,a,o,s,u){var c=e._bin,d={},p=a;c.readFixed(r,a),a+=4;var g=c.readUshort(r,a);a+=2;var y=c.readUshort(r,a);a+=2;var b=c.readUshort(r,a);return a+=2,d.scriptList=e._lctf.readScriptList(r,p+g),d.featureList=e._lctf.readFeatureList(r,p+y),d.lookupList=e._lctf.readLookupList(r,p+b,u),d},e._lctf.readLookupList=function(r,a,o){var s=e._bin,u=a,c=[],d=s.readUshort(r,a);a+=2;for(var p=0;p<d;p++){var g=s.readUshort(r,a);a+=2;var y=e._lctf.readLookupTable(r,u+g,o);c.push(y)}return c},e._lctf.readLookupTable=function(r,a,o){var s=e._bin,u=a,c={tabs:[]};c.ltype=s.readUshort(r,a),a+=2,c.flag=s.readUshort(r,a),a+=2;var d=s.readUshort(r,a);a+=2;for(var p=c.ltype,g=0;g<d;g++){var y=s.readUshort(r,a);a+=2;var b=o(r,p,u+y,c);c.tabs.push(b)}return c},e._lctf.numOfOnes=function(r){for(var a=0,o=0;o<32;o++)(r>>>o&1)!=0&&a++;return a},e._lctf.readClassDef=function(r,a){var o=e._bin,s=[],u=o.readUshort(r,a);if(a+=2,u==1){var c=o.readUshort(r,a);a+=2;var d=o.readUshort(r,a);a+=2;for(var p=0;p<d;p++)s.push(c+p),s.push(c+p),s.push(o.readUshort(r,a)),a+=2}if(u==2){var g=o.readUshort(r,a);for(a+=2,p=0;p<g;p++)s.push(o.readUshort(r,a)),a+=2,s.push(o.readUshort(r,a)),a+=2,s.push(o.readUshort(r,a)),a+=2}return s},e._lctf.getInterval=function(r,a){for(var o=0;o<r.length;o+=3){var s=r[o],u=r[o+1];if(r[o+2],s<=a&&a<=u)return o}return-1},e._lctf.readCoverage=function(r,a){var o=e._bin,s={};s.fmt=o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);return a+=2,s.fmt==1&&(s.tab=o.readUshorts(r,a,u)),s.fmt==2&&(s.tab=o.readUshorts(r,a,3*u)),s},e._lctf.coverageIndex=function(r,a){var o=r.tab;if(r.fmt==1)return o.indexOf(a);if(r.fmt==2){var s=e._lctf.getInterval(o,a);if(s!=-1)return o[s+2]+(a-o[s])}return-1},e._lctf.readFeatureList=function(r,a){var o=e._bin,s=a,u=[],c=o.readUshort(r,a);a+=2;for(var d=0;d<c;d++){var p=o.readASCII(r,a,4);a+=4;var g=o.readUshort(r,a);a+=2;var y=e._lctf.readFeatureTable(r,s+g);y.tag=p.trim(),u.push(y)}return u},e._lctf.readFeatureTable=function(r,a){var o=e._bin,s=a,u={},c=o.readUshort(r,a);a+=2,c>0&&(u.featureParams=s+c);var d=o.readUshort(r,a);a+=2,u.tab=[];for(var p=0;p<d;p++)u.tab.push(o.readUshort(r,a+2*p));return u},e._lctf.readScriptList=function(r,a){var o=e._bin,s=a,u={},c=o.readUshort(r,a);a+=2;for(var d=0;d<c;d++){var p=o.readASCII(r,a,4);a+=4;var g=o.readUshort(r,a);a+=2,u[p.trim()]=e._lctf.readScriptTable(r,s+g)}return u},e._lctf.readScriptTable=function(r,a){var o=e._bin,s=a,u={},c=o.readUshort(r,a);a+=2,c>0&&(u.default=e._lctf.readLangSysTable(r,s+c));var d=o.readUshort(r,a);a+=2;for(var p=0;p<d;p++){var g=o.readASCII(r,a,4);a+=4;var y=o.readUshort(r,a);a+=2,u[g.trim()]=e._lctf.readLangSysTable(r,s+y)}return u},e._lctf.readLangSysTable=function(r,a){var o=e._bin,s={};o.readUshort(r,a),a+=2,s.reqFeature=o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);return a+=2,s.features=o.readUshorts(r,a,u),s},e.CFF={},e.CFF.parse=function(r,a,o){var s=e._bin;(r=new Uint8Array(r.buffer,a,o))[a=0],r[++a],r[++a],r[++a],a++;var u=[];a=e.CFF.readIndex(r,a,u);for(var c=[],d=0;d<u.length-1;d++)c.push(s.readASCII(r,a+u[d],u[d+1]-u[d]));a+=u[u.length-1];var p=[];a=e.CFF.readIndex(r,a,p);var g=[];for(d=0;d<p.length-1;d++)g.push(e.CFF.readDict(r,a+p[d],a+p[d+1]));a+=p[p.length-1];var y=g[0],b=[];a=e.CFF.readIndex(r,a,b);var T=[];for(d=0;d<b.length-1;d++)T.push(s.readASCII(r,a+b[d],b[d+1]-b[d]));if(a+=b[b.length-1],e.CFF.readSubrs(r,a,y),y.CharStrings){a=y.CharStrings,b=[],a=e.CFF.readIndex(r,a,b);var S=[];for(d=0;d<b.length-1;d++)S.push(s.readBytes(r,a+b[d],b[d+1]-b[d]));y.CharStrings=S}if(y.ROS){a=y.FDArray;var A=[];for(a=e.CFF.readIndex(r,a,A),y.FDArray=[],d=0;d<A.length-1;d++){var R=e.CFF.readDict(r,a+A[d],a+A[d+1]);e.CFF._readFDict(r,R,T),y.FDArray.push(R)}a+=A[A.length-1],a=y.FDSelect,y.FDSelect=[];var I=r[a];if(a++,I!=3)throw I;var N=s.readUshort(r,a);for(a+=2,d=0;d<N+1;d++)y.FDSelect.push(s.readUshort(r,a),r[a+2]),a+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(r,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(r,y.charset,y.CharStrings.length)),e.CFF._readFDict(r,y,T),y},e.CFF._readFDict=function(r,a,o){var s;for(var u in a.Private&&(s=a.Private[1],a.Private=e.CFF.readDict(r,s,s+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(r,s+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(a[u]=o[a[u]-426+35])},e.CFF.readSubrs=function(r,a,o){var s=e._bin,u=[];a=e.CFF.readIndex(r,a,u);var c,d=u.length;c=d<1240?107:d<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var p=0;p<u.length-1;p++)o.Subrs.push(s.readBytes(r,a+u[p],u[p+1]-u[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,a){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==a)return o;return-1},e.CFF.glyphBySE=function(r,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[a])},e.CFF.readEncoding=function(r,a,o){e._bin;var s=[".notdef"],u=r[a];if(a++,u!=0)throw"error: unknown encoding format: "+u;var c=r[a];a++;for(var d=0;d<c;d++)s.push(r[a+d]);return s},e.CFF.readCharset=function(r,a,o){var s=e._bin,u=[".notdef"],c=r[a];if(a++,c==0)for(var d=0;d<o;d++){var p=s.readUshort(r,a);a+=2,u.push(p)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;u.length<o;){p=s.readUshort(r,a),a+=2;var g=0;for(c==1?(g=r[a],a++):(g=s.readUshort(r,a),a+=2),d=0;d<=g;d++)u.push(p),p++}}return u},e.CFF.readIndex=function(r,a,o){var s=e._bin,u=s.readUshort(r,a)+1,c=r[a+=2];if(a++,c==1)for(var d=0;d<u;d++)o.push(r[a+d]);else if(c==2)for(d=0;d<u;d++)o.push(s.readUshort(r,a+2*d));else if(c==3)for(d=0;d<u;d++)o.push(16777215&s.readUint(r,a+3*d-1));else if(u!=1)throw"unsupported offset size: "+c+", count: "+u;return(a+=u*c)-1},e.CFF.getCharString=function(r,a,o){var s=e._bin,u=r[a],c=r[a+1];r[a+2],r[a+3],r[a+4];var d=1,p=null,g=null;u<=20&&(p=u,d=1),u==12&&(p=100*u+c,d=2),21<=u&&u<=27&&(p=u,d=1),u==28&&(g=s.readShort(r,a+1),d=3),29<=u&&u<=31&&(p=u,d=1),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+c+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-c-108,d=2),u==255&&(g=s.readInt(r,a+1)/65535,d=5),o.val=g??"o"+p,o.size=d},e.CFF.readCharString=function(r,a,o){for(var s=a+o,u=e._bin,c=[];a<s;){var d=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,y=null,b=null;d<=20&&(y=d,g=1),d==12&&(y=100*d+p,g=2),d!=19&&d!=20||(y=d,g=2),21<=d&&d<=27&&(y=d,g=1),d==28&&(b=u.readShort(r,a+1),g=3),29<=d&&d<=31&&(y=d,g=1),32<=d&&d<=246&&(b=d-139,g=1),247<=d&&d<=250&&(b=256*(d-247)+p+108,g=2),251<=d&&d<=254&&(b=256*-(d-251)-p-108,g=2),d==255&&(b=u.readInt(r,a+1)/65535,g=5),c.push(b??"o"+y),a+=g}return c},e.CFF.readDict=function(r,a,o){for(var s=e._bin,u={},c=[];a<o;){var d=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,y=null,b=null;if(d==28&&(b=s.readShort(r,a+1),g=3),d==29&&(b=s.readInt(r,a+1),g=5),32<=d&&d<=246&&(b=d-139,g=1),247<=d&&d<=250&&(b=256*(d-247)+p+108,g=2),251<=d&&d<=254&&(b=256*-(d-251)-p-108,g=2),d==255)throw b=s.readInt(r,a+1)/65535,g=5,"unknown number";if(d==30){var T=[];for(g=1;;){var S=r[a+g];g++;var A=S>>4,R=15&S;if(A!=15&&T.push(A),R!=15&&T.push(R),R==15)break}for(var I="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],D=0;D<T.length;D++)I+=N[T[D]];b=parseFloat(I)}d<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],g=1,d==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],g=2)),y!=null?(u[y]=c.length==1?c[0]:c,c=[]):c.push(b),a+=g}return u},e.cmap={},e.cmap.parse=function(r,a,o){r=new Uint8Array(r.buffer,a,o),a=0;var s=e._bin,u={};s.readUshort(r,a),a+=2;var c=s.readUshort(r,a);a+=2;var d=[];u.tables=[];for(var p=0;p<c;p++){var g=s.readUshort(r,a);a+=2;var y=s.readUshort(r,a);a+=2;var b=s.readUint(r,a);a+=4;var T="p"+g+"e"+y,S=d.indexOf(b);if(S==-1){var A;S=u.tables.length,d.push(b);var R=s.readUshort(r,b);R==0?A=e.cmap.parse0(r,b):R==4?A=e.cmap.parse4(r,b):R==6?A=e.cmap.parse6(r,b):R==12?A=e.cmap.parse12(r,b):console.debug("unknown format: "+R,g,y,b),u.tables.push(A)}if(u[T]!=null)throw"multiple tables for one platform+encoding";u[T]=S}return u},e.cmap.parse0=function(r,a){var o=e._bin,s={};s.format=o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2,o.readUshort(r,a),a+=2,s.map=[];for(var c=0;c<u-6;c++)s.map.push(r[a+c]);return s},e.cmap.parse4=function(r,a){var o=e._bin,s=a,u={};u.format=o.readUshort(r,a),a+=2;var c=o.readUshort(r,a);a+=2,o.readUshort(r,a),a+=2;var d=o.readUshort(r,a);a+=2;var p=d/2;u.searchRange=o.readUshort(r,a),a+=2,u.entrySelector=o.readUshort(r,a),a+=2,u.rangeShift=o.readUshort(r,a),a+=2,u.endCount=o.readUshorts(r,a,p),a+=2*p,a+=2,u.startCount=o.readUshorts(r,a,p),a+=2*p,u.idDelta=[];for(var g=0;g<p;g++)u.idDelta.push(o.readShort(r,a)),a+=2;for(u.idRangeOffset=o.readUshorts(r,a,p),a+=2*p,u.glyphIdArray=[];a<s+c;)u.glyphIdArray.push(o.readUshort(r,a)),a+=2;return u},e.cmap.parse6=function(r,a){var o=e._bin,s={};s.format=o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2,s.firstCode=o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2,s.glyphIdArray=[];for(var c=0;c<u;c++)s.glyphIdArray.push(o.readUshort(r,a)),a+=2;return s},e.cmap.parse12=function(r,a){var o=e._bin,s={};s.format=o.readUshort(r,a),a+=2,a+=2,o.readUint(r,a),a+=4,o.readUint(r,a),a+=4;var u=o.readUint(r,a);a+=4,s.groups=[];for(var c=0;c<u;c++){var d=a+12*c,p=o.readUint(r,d+0),g=o.readUint(r,d+4),y=o.readUint(r,d+8);s.groups.push([p,g,y])}return s},e.glyf={},e.glyf.parse=function(r,a,o,s){for(var u=[],c=0;c<s.maxp.numGlyphs;c++)u.push(null);return u},e.glyf._parseGlyf=function(r,a){var o=e._bin,s=r._data,u=e._tabOffset(s,"glyf",r._offset)+r.loca[a];if(r.loca[a]==r.loca[a+1])return null;var c={};if(c.noc=o.readShort(s,u),u+=2,c.xMin=o.readShort(s,u),u+=2,c.yMin=o.readShort(s,u),u+=2,c.xMax=o.readShort(s,u),u+=2,c.yMax=o.readShort(s,u),u+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var d=0;d<c.noc;d++)c.endPts.push(o.readUshort(s,u)),u+=2;var p=o.readUshort(s,u);if(u+=2,s.length-u<p)return null;c.instructions=o.readBytes(s,u,p),u+=p;var g=c.endPts[c.noc-1]+1;for(c.flags=[],d=0;d<g;d++){var y=s[u];if(u++,c.flags.push(y),(8&y)!=0){var b=s[u];u++;for(var T=0;T<b;T++)c.flags.push(y),d++}}for(c.xs=[],d=0;d<g;d++){var S=(2&c.flags[d])!=0,A=(16&c.flags[d])!=0;S?(c.xs.push(A?s[u]:-s[u]),u++):A?c.xs.push(0):(c.xs.push(o.readShort(s,u)),u+=2)}for(c.ys=[],d=0;d<g;d++)S=(4&c.flags[d])!=0,A=(32&c.flags[d])!=0,S?(c.ys.push(A?s[u]:-s[u]),u++):A?c.ys.push(0):(c.ys.push(o.readShort(s,u)),u+=2);var R=0,I=0;for(d=0;d<g;d++)R+=c.xs[d],I+=c.ys[d],c.xs[d]=R,c.ys[d]=I}else{var N;c.parts=[];do{N=o.readUshort(s,u),u+=2;var D={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(D),D.glyphIndex=o.readUshort(s,u),u+=2,1&N){var U=o.readShort(s,u);u+=2;var k=o.readShort(s,u);u+=2}else U=o.readInt8(s,u),u++,k=o.readInt8(s,u),u++;2&N?(D.m.tx=U,D.m.ty=k):(D.p1=U,D.p2=k),8&N?(D.m.a=D.m.d=o.readF2dot14(s,u),u+=2):64&N?(D.m.a=o.readF2dot14(s,u),u+=2,D.m.d=o.readF2dot14(s,u),u+=2):128&N&&(D.m.a=o.readF2dot14(s,u),u+=2,D.m.b=o.readF2dot14(s,u),u+=2,D.m.c=o.readF2dot14(s,u),u+=2,D.m.d=o.readF2dot14(s,u),u+=2)}while(32&N);if(256&N){var z=o.readUshort(s,u);for(u+=2,c.instr=[],d=0;d<z;d++)c.instr.push(s[u]),u++}}return c},e.GDEF={},e.GDEF.parse=function(r,a,o,s){var u=a;a+=4;var c=e._bin.readUshort(r,a);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,u+c)}},e.GPOS={},e.GPOS.parse=function(r,a,o,s){return e._lctf.parse(r,a,o,s,e.GPOS.subt)},e.GPOS.subt=function(r,a,o,s){var u=e._bin,c=o,d={};if(d.fmt=u.readUshort(r,o),o+=2,a==1||a==2||a==3||a==7||a==8&&d.fmt<=2){var p=u.readUshort(r,o);o+=2,d.coverage=e._lctf.readCoverage(r,p+c)}if(a==1&&d.fmt==1){var g=u.readUshort(r,o);o+=2,g!=0&&(d.pos=e.GPOS.readValueRecord(r,o,g))}else if(a==2&&d.fmt>=1&&d.fmt<=2){g=u.readUshort(r,o),o+=2;var y=u.readUshort(r,o);o+=2;var b=e._lctf.numOfOnes(g),T=e._lctf.numOfOnes(y);if(d.fmt==1){d.pairsets=[];var S=u.readUshort(r,o);o+=2;for(var A=0;A<S;A++){var R=c+u.readUshort(r,o);o+=2;var I=u.readUshort(r,R);R+=2;for(var N=[],D=0;D<I;D++){var U=u.readUshort(r,R);R+=2,g!=0&&(W=e.GPOS.readValueRecord(r,R,g),R+=2*b),y!=0&&(X=e.GPOS.readValueRecord(r,R,y),R+=2*T),N.push({gid2:U,val1:W,val2:X})}d.pairsets.push(N)}}if(d.fmt==2){var k=u.readUshort(r,o);o+=2;var z=u.readUshort(r,o);o+=2;var L=u.readUshort(r,o);o+=2;var F=u.readUshort(r,o);for(o+=2,d.classDef1=e._lctf.readClassDef(r,c+k),d.classDef2=e._lctf.readClassDef(r,c+z),d.matrix=[],A=0;A<L;A++){var j=[];for(D=0;D<F;D++){var W=null,X=null;g!=0&&(W=e.GPOS.readValueRecord(r,o,g),o+=2*b),y!=0&&(X=e.GPOS.readValueRecord(r,o,y),o+=2*T),j.push({val1:W,val2:X})}d.matrix.push(j)}}}else if(a==4&&d.fmt==1)d.markCoverage=e._lctf.readCoverage(r,u.readUshort(r,o)+c),d.baseCoverage=e._lctf.readCoverage(r,u.readUshort(r,o+2)+c),d.markClassCount=u.readUshort(r,o+4),d.markArray=e.GPOS.readMarkArray(r,u.readUshort(r,o+6)+c),d.baseArray=e.GPOS.readBaseArray(r,u.readUshort(r,o+8)+c,d.markClassCount);else if(a==6&&d.fmt==1)d.mark1Coverage=e._lctf.readCoverage(r,u.readUshort(r,o)+c),d.mark2Coverage=e._lctf.readCoverage(r,u.readUshort(r,o+2)+c),d.markClassCount=u.readUshort(r,o+4),d.mark1Array=e.GPOS.readMarkArray(r,u.readUshort(r,o+6)+c),d.mark2Array=e.GPOS.readBaseArray(r,u.readUshort(r,o+8)+c,d.markClassCount);else{if(a==9&&d.fmt==1){var Q=u.readUshort(r,o);o+=2;var ae=u.readUint(r,o);if(o+=4,s.ltype==9)s.ltype=Q;else if(s.ltype!=Q)throw"invalid extension substitution";return e.GPOS.subt(r,s.ltype,c+ae)}console.debug("unsupported GPOS table LookupType",a,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(r,a,o){var s=e._bin,u=[];return u.push(1&o?s.readShort(r,a):0),a+=1&o?2:0,u.push(2&o?s.readShort(r,a):0),a+=2&o?2:0,u.push(4&o?s.readShort(r,a):0),a+=4&o?2:0,u.push(8&o?s.readShort(r,a):0),a+=8&o?2:0,u},e.GPOS.readBaseArray=function(r,a,o){var s=e._bin,u=[],c=a,d=s.readUshort(r,a);a+=2;for(var p=0;p<d;p++){for(var g=[],y=0;y<o;y++)g.push(e.GPOS.readAnchorRecord(r,c+s.readUshort(r,a))),a+=2;u.push(g)}return u},e.GPOS.readMarkArray=function(r,a){var o=e._bin,s=[],u=a,c=o.readUshort(r,a);a+=2;for(var d=0;d<c;d++){var p=e.GPOS.readAnchorRecord(r,o.readUshort(r,a+2)+u);p.markClass=o.readUshort(r,a),s.push(p),a+=4}return s},e.GPOS.readAnchorRecord=function(r,a){var o=e._bin,s={};return s.fmt=o.readUshort(r,a),s.x=o.readShort(r,a+2),s.y=o.readShort(r,a+4),s},e.GSUB={},e.GSUB.parse=function(r,a,o,s){return e._lctf.parse(r,a,o,s,e.GSUB.subt)},e.GSUB.subt=function(r,a,o,s){var u=e._bin,c=o,d={};if(d.fmt=u.readUshort(r,o),o+=2,a!=1&&a!=2&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==2||a==4||a==5&&d.fmt<=2||a==6&&d.fmt<=2){var p=u.readUshort(r,o);o+=2,d.coverage=e._lctf.readCoverage(r,c+p)}if(a==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=u.readShort(r,o),o+=2;else if(d.fmt==2){var g=u.readUshort(r,o);o+=2,d.newg=u.readUshorts(r,o,g),o+=2*d.newg.length}}else if(a==2&&d.fmt==1){g=u.readUshort(r,o),o+=2,d.seqs=[];for(var y=0;y<g;y++){var b=u.readUshort(r,o)+c;o+=2;var T=u.readUshort(r,b);d.seqs.push(u.readUshorts(r,b+2,T))}}else if(a==4)for(d.vals=[],g=u.readUshort(r,o),o+=2,y=0;y<g;y++){var S=u.readUshort(r,o);o+=2,d.vals.push(e.GSUB.readLigatureSet(r,c+S))}else if(a==5&&d.fmt==2){if(d.fmt==2){var A=u.readUshort(r,o);o+=2,d.cDef=e._lctf.readClassDef(r,c+A),d.scset=[];var R=u.readUshort(r,o);for(o+=2,y=0;y<R;y++){var I=u.readUshort(r,o);o+=2,d.scset.push(I==0?null:e.GSUB.readSubClassSet(r,c+I))}}}else if(a==6&&d.fmt==3){if(d.fmt==3){for(y=0;y<3;y++){g=u.readUshort(r,o),o+=2;for(var N=[],D=0;D<g;D++)N.push(e._lctf.readCoverage(r,c+u.readUshort(r,o+2*D)));o+=2*g,y==0&&(d.backCvg=N),y==1&&(d.inptCvg=N),y==2&&(d.ahedCvg=N)}g=u.readUshort(r,o),o+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(r,o,g)}}else{if(a==7&&d.fmt==1){var U=u.readUshort(r,o);o+=2;var k=u.readUint(r,o);if(o+=4,s.ltype==9)s.ltype=U;else if(s.ltype!=U)throw"invalid extension substitution";return e.GSUB.subt(r,s.ltype,c+k)}console.debug("unsupported GSUB table LookupType",a,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(r,a){var o=e._bin.readUshort,s=a,u=[],c=o(r,a);a+=2;for(var d=0;d<c;d++){var p=o(r,a);a+=2,u.push(e.GSUB.readSubClassRule(r,s+p))}return u},e.GSUB.readSubClassRule=function(r,a){var o=e._bin.readUshort,s={},u=o(r,a),c=o(r,a+=2);a+=2,s.input=[];for(var d=0;d<u-1;d++)s.input.push(o(r,a)),a+=2;return s.substLookupRecords=e.GSUB.readSubstLookupRecords(r,a,c),s},e.GSUB.readSubstLookupRecords=function(r,a,o){for(var s=e._bin.readUshort,u=[],c=0;c<o;c++)u.push(s(r,a),s(r,a+2)),a+=4;return u},e.GSUB.readChainSubClassSet=function(r,a){var o=e._bin,s=a,u=[],c=o.readUshort(r,a);a+=2;for(var d=0;d<c;d++){var p=o.readUshort(r,a);a+=2,u.push(e.GSUB.readChainSubClassRule(r,s+p))}return u},e.GSUB.readChainSubClassRule=function(r,a){for(var o=e._bin,s={},u=["backtrack","input","lookahead"],c=0;c<u.length;c++){var d=o.readUshort(r,a);a+=2,c==1&&d--,s[u[c]]=o.readUshorts(r,a,d),a+=2*s[u[c]].length}return d=o.readUshort(r,a),a+=2,s.subst=o.readUshorts(r,a,2*d),a+=2*s.subst.length,s},e.GSUB.readLigatureSet=function(r,a){var o=e._bin,s=a,u=[],c=o.readUshort(r,a);a+=2;for(var d=0;d<c;d++){var p=o.readUshort(r,a);a+=2,u.push(e.GSUB.readLigature(r,s+p))}return u},e.GSUB.readLigature=function(r,a){var o=e._bin,s={chain:[]};s.nglyph=o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2;for(var c=0;c<u-1;c++)s.chain.push(o.readUshort(r,a)),a+=2;return s},e.head={},e.head.parse=function(r,a,o){var s=e._bin,u={};return s.readFixed(r,a),a+=4,u.fontRevision=s.readFixed(r,a),a+=4,s.readUint(r,a),a+=4,s.readUint(r,a),a+=4,u.flags=s.readUshort(r,a),a+=2,u.unitsPerEm=s.readUshort(r,a),a+=2,u.created=s.readUint64(r,a),a+=8,u.modified=s.readUint64(r,a),a+=8,u.xMin=s.readShort(r,a),a+=2,u.yMin=s.readShort(r,a),a+=2,u.xMax=s.readShort(r,a),a+=2,u.yMax=s.readShort(r,a),a+=2,u.macStyle=s.readUshort(r,a),a+=2,u.lowestRecPPEM=s.readUshort(r,a),a+=2,u.fontDirectionHint=s.readShort(r,a),a+=2,u.indexToLocFormat=s.readShort(r,a),a+=2,u.glyphDataFormat=s.readShort(r,a),a+=2,u},e.hhea={},e.hhea.parse=function(r,a,o){var s=e._bin,u={};return s.readFixed(r,a),a+=4,u.ascender=s.readShort(r,a),a+=2,u.descender=s.readShort(r,a),a+=2,u.lineGap=s.readShort(r,a),a+=2,u.advanceWidthMax=s.readUshort(r,a),a+=2,u.minLeftSideBearing=s.readShort(r,a),a+=2,u.minRightSideBearing=s.readShort(r,a),a+=2,u.xMaxExtent=s.readShort(r,a),a+=2,u.caretSlopeRise=s.readShort(r,a),a+=2,u.caretSlopeRun=s.readShort(r,a),a+=2,u.caretOffset=s.readShort(r,a),a+=2,a+=8,u.metricDataFormat=s.readShort(r,a),a+=2,u.numberOfHMetrics=s.readUshort(r,a),a+=2,u},e.hmtx={},e.hmtx.parse=function(r,a,o,s){for(var u=e._bin,c={aWidth:[],lsBearing:[]},d=0,p=0,g=0;g<s.maxp.numGlyphs;g++)g<s.hhea.numberOfHMetrics&&(d=u.readUshort(r,a),a+=2,p=u.readShort(r,a),a+=2),c.aWidth.push(d),c.lsBearing.push(p);return c},e.kern={},e.kern.parse=function(r,a,o,s){var u=e._bin,c=u.readUshort(r,a);if(a+=2,c==1)return e.kern.parseV1(r,a-2,o,s);var d=u.readUshort(r,a);a+=2;for(var p={glyph1:[],rval:[]},g=0;g<d;g++){a+=2,o=u.readUshort(r,a),a+=2;var y=u.readUshort(r,a);a+=2;var b=y>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;a=e.kern.readFormat0(r,a,p)}return p},e.kern.parseV1=function(r,a,o,s){var u=e._bin;u.readFixed(r,a),a+=4;var c=u.readUint(r,a);a+=4;for(var d={glyph1:[],rval:[]},p=0;p<c;p++){u.readUint(r,a),a+=4;var g=u.readUshort(r,a);a+=2,u.readUshort(r,a),a+=2;var y=g>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;a=e.kern.readFormat0(r,a,d)}return d},e.kern.readFormat0=function(r,a,o){var s=e._bin,u=-1,c=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2;for(var d=0;d<c;d++){var p=s.readUshort(r,a);a+=2;var g=s.readUshort(r,a);a+=2;var y=s.readShort(r,a);a+=2,p!=u&&(o.glyph1.push(p),o.rval.push({glyph2:[],vals:[]}));var b=o.rval[o.rval.length-1];b.glyph2.push(g),b.vals.push(y),u=p}return a},e.loca={},e.loca.parse=function(r,a,o,s){var u=e._bin,c=[],d=s.head.indexToLocFormat,p=s.maxp.numGlyphs+1;if(d==0)for(var g=0;g<p;g++)c.push(u.readUshort(r,a+(g<<1))<<1);if(d==1)for(g=0;g<p;g++)c.push(u.readUint(r,a+(g<<2)));return c},e.maxp={},e.maxp.parse=function(r,a,o){var s=e._bin,u={},c=s.readUint(r,a);return a+=4,u.numGlyphs=s.readUshort(r,a),a+=2,c==65536&&(u.maxPoints=s.readUshort(r,a),a+=2,u.maxContours=s.readUshort(r,a),a+=2,u.maxCompositePoints=s.readUshort(r,a),a+=2,u.maxCompositeContours=s.readUshort(r,a),a+=2,u.maxZones=s.readUshort(r,a),a+=2,u.maxTwilightPoints=s.readUshort(r,a),a+=2,u.maxStorage=s.readUshort(r,a),a+=2,u.maxFunctionDefs=s.readUshort(r,a),a+=2,u.maxInstructionDefs=s.readUshort(r,a),a+=2,u.maxStackElements=s.readUshort(r,a),a+=2,u.maxSizeOfInstructions=s.readUshort(r,a),a+=2,u.maxComponentElements=s.readUshort(r,a),a+=2,u.maxComponentDepth=s.readUshort(r,a),a+=2),u},e.name={},e.name.parse=function(r,a,o){var s=e._bin,u={};s.readUshort(r,a),a+=2;var c=s.readUshort(r,a);a+=2,s.readUshort(r,a);for(var d,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],g=a+=2,y=0;y<c;y++){var b=s.readUshort(r,a);a+=2;var T=s.readUshort(r,a);a+=2;var S=s.readUshort(r,a);a+=2;var A=s.readUshort(r,a);a+=2;var R=s.readUshort(r,a);a+=2;var I=s.readUshort(r,a);a+=2;var N,D=p[A],U=g+12*c+I;if(b==0)N=s.readUnicode(r,U,R/2);else if(b==3&&T==0)N=s.readUnicode(r,U,R/2);else if(T==0)N=s.readASCII(r,U,R);else if(T==1)N=s.readUnicode(r,U,R/2);else if(T==3)N=s.readUnicode(r,U,R/2);else{if(b!=1)throw"unknown encoding "+T+", platformID: "+b;N=s.readASCII(r,U,R),console.debug("reading unknown MAC encoding "+T+" as ASCII")}var k="p"+b+","+S.toString(16);u[k]==null&&(u[k]={}),u[k][D!==void 0?D:A]=N,u[k]._lang=S}for(var z in u)if(u[z].postScriptName!=null&&u[z]._lang==1033)return u[z];for(var z in u)if(u[z].postScriptName!=null&&u[z]._lang==0)return u[z];for(var z in u)if(u[z].postScriptName!=null&&u[z]._lang==3084)return u[z];for(var z in u)if(u[z].postScriptName!=null)return u[z];for(var z in u){d=z;break}return console.debug("returning name table with languageID "+u[d]._lang),u[d]},e["OS/2"]={},e["OS/2"].parse=function(r,a,o){var s=e._bin.readUshort(r,a);a+=2;var u={};if(s==0)e["OS/2"].version0(r,a,u);else if(s==1)e["OS/2"].version1(r,a,u);else if(s==2||s==3||s==4)e["OS/2"].version2(r,a,u);else{if(s!=5)throw"unknown OS/2 table version: "+s;e["OS/2"].version5(r,a,u)}return u},e["OS/2"].version0=function(r,a,o){var s=e._bin;return o.xAvgCharWidth=s.readShort(r,a),a+=2,o.usWeightClass=s.readUshort(r,a),a+=2,o.usWidthClass=s.readUshort(r,a),a+=2,o.fsType=s.readUshort(r,a),a+=2,o.ySubscriptXSize=s.readShort(r,a),a+=2,o.ySubscriptYSize=s.readShort(r,a),a+=2,o.ySubscriptXOffset=s.readShort(r,a),a+=2,o.ySubscriptYOffset=s.readShort(r,a),a+=2,o.ySuperscriptXSize=s.readShort(r,a),a+=2,o.ySuperscriptYSize=s.readShort(r,a),a+=2,o.ySuperscriptXOffset=s.readShort(r,a),a+=2,o.ySuperscriptYOffset=s.readShort(r,a),a+=2,o.yStrikeoutSize=s.readShort(r,a),a+=2,o.yStrikeoutPosition=s.readShort(r,a),a+=2,o.sFamilyClass=s.readShort(r,a),a+=2,o.panose=s.readBytes(r,a,10),a+=10,o.ulUnicodeRange1=s.readUint(r,a),a+=4,o.ulUnicodeRange2=s.readUint(r,a),a+=4,o.ulUnicodeRange3=s.readUint(r,a),a+=4,o.ulUnicodeRange4=s.readUint(r,a),a+=4,o.achVendID=[s.readInt8(r,a),s.readInt8(r,a+1),s.readInt8(r,a+2),s.readInt8(r,a+3)],a+=4,o.fsSelection=s.readUshort(r,a),a+=2,o.usFirstCharIndex=s.readUshort(r,a),a+=2,o.usLastCharIndex=s.readUshort(r,a),a+=2,o.sTypoAscender=s.readShort(r,a),a+=2,o.sTypoDescender=s.readShort(r,a),a+=2,o.sTypoLineGap=s.readShort(r,a),a+=2,o.usWinAscent=s.readUshort(r,a),a+=2,o.usWinDescent=s.readUshort(r,a),a+=2},e["OS/2"].version1=function(r,a,o){var s=e._bin;return a=e["OS/2"].version0(r,a,o),o.ulCodePageRange1=s.readUint(r,a),a+=4,o.ulCodePageRange2=s.readUint(r,a),a+=4},e["OS/2"].version2=function(r,a,o){var s=e._bin;return a=e["OS/2"].version1(r,a,o),o.sxHeight=s.readShort(r,a),a+=2,o.sCapHeight=s.readShort(r,a),a+=2,o.usDefault=s.readUshort(r,a),a+=2,o.usBreak=s.readUshort(r,a),a+=2,o.usMaxContext=s.readUshort(r,a),a+=2},e["OS/2"].version5=function(r,a,o){var s=e._bin;return a=e["OS/2"].version2(r,a,o),o.usLowerOpticalPointSize=s.readUshort(r,a),a+=2,o.usUpperOpticalPointSize=s.readUshort(r,a),a+=2},e.post={},e.post.parse=function(r,a,o){var s=e._bin,u={};return u.version=s.readFixed(r,a),a+=4,u.italicAngle=s.readFixed(r,a),a+=4,u.underlinePosition=s.readShort(r,a),a+=2,u.underlineThickness=s.readShort(r,a),a+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,a){var o=r.cmap,s=-1;if(o.p0e4!=null?s=o.p0e4:o.p3e1!=null?s=o.p3e1:o.p1e0!=null?s=o.p1e0:o.p0e3!=null&&(s=o.p0e3),s==-1)throw"no familiar platform and encoding!";var u=o.tables[s];if(u.format==0)return a>=u.map.length?0:u.map[a];if(u.format==4){for(var c=-1,d=0;d<u.endCount.length;d++)if(a<=u.endCount[d]){c=d;break}return c==-1||u.startCount[c]>a?0:65535&(u.idRangeOffset[c]!=0?u.glyphIdArray[a-u.startCount[c]+(u.idRangeOffset[c]>>1)-(u.idRangeOffset.length-c)]:a+u.idDelta[c])}if(u.format==12){if(a>u.groups[u.groups.length-1][1])return 0;for(d=0;d<u.groups.length;d++){var p=u.groups[d];if(p[0]<=a&&a<=p[1])return p[2]+(a-p[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(r,a){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[a]){var s=r.SVG.entries[a];return s==null?o:(typeof s=="string"&&(s=e.SVG.toPath(s),r.SVG.entries[a]=s),s)}if(r.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,d=r.CFF.Private;if(c.ROS){for(var p=0;c.FDSelect[p+2]<=a;)p+=2;d=c.FDArray[c.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[a],u,c,d,o)}else r.glyf&&e.U._drawGlyf(a,r,o);return o},e.U._drawGlyf=function(r,a,o){var s=a.glyf[r];s==null&&(s=a.glyf[r]=e.glyf._parseGlyf(a,r)),s!=null&&(s.noc>-1?e.U._simpleGlyph(s,o):e.U._compoGlyph(s,a,o))},e.U._simpleGlyph=function(r,a){for(var o=0;o<r.noc;o++){for(var s=o==0?0:r.endPts[o-1]+1,u=r.endPts[o],c=s;c<=u;c++){var d=c==s?u:c-1,p=c==u?s:c+1,g=1&r.flags[c],y=1&r.flags[d],b=1&r.flags[p],T=r.xs[c],S=r.ys[c];if(c==s)if(g){if(!y){e.U.P.moveTo(a,T,S);continue}e.U.P.moveTo(a,r.xs[d],r.ys[d])}else y?e.U.P.moveTo(a,r.xs[d],r.ys[d]):e.U.P.moveTo(a,(r.xs[d]+T)/2,(r.ys[d]+S)/2);g?y&&e.U.P.lineTo(a,T,S):b?e.U.P.qcurveTo(a,T,S,r.xs[p],r.ys[p]):e.U.P.qcurveTo(a,T,S,(T+r.xs[p])/2,(S+r.ys[p])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(r,a,o){for(var s=0;s<r.parts.length;s++){var u={cmds:[],crds:[]},c=r.parts[s];e.U._drawGlyf(c.glyphIndex,a,u);for(var d=c.m,p=0;p<u.crds.length;p+=2){var g=u.crds[p],y=u.crds[p+1];o.crds.push(g*d.a+y*d.b+d.tx),o.crds.push(g*d.c+y*d.d+d.ty)}for(p=0;p<u.cmds.length;p++)o.cmds.push(u.cmds[p])}},e.U._getGlyphClass=function(r,a){var o=e._lctf.getInterval(a,r);return o==-1?0:a[o+2]},e.U._applySubs=function(r,a,o,s){for(var u=r.length-a-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var d,p=o.tabs[c];if(!p.coverage||(d=e._lctf.coverageIndex(p.coverage,r[a]))!=-1){if(o.ltype==1)r[a],p.fmt==1?r[a]=r[a]+p.delta:r[a]=p.newg[d];else if(o.ltype==4)for(var g=p.vals[d],y=0;y<g.length;y++){var b=g[y],T=b.chain.length;if(!(T>u)){for(var S=!0,A=0,R=0;R<T;R++){for(;r[a+A+(1+R)]==-1;)A++;b.chain[R]!=r[a+A+(1+R)]&&(S=!1)}if(S){for(r[a]=b.nglyph,R=0;R<T+A;R++)r[a+R+1]=-1;break}}}else if(o.ltype==5&&p.fmt==2)for(var I=e._lctf.getInterval(p.cDef,r[a]),N=p.cDef[I+2],D=p.scset[N],U=0;U<D.length;U++){var k=D[U],z=k.input;if(!(z.length>u)){for(S=!0,R=0;R<z.length;R++){var L=e._lctf.getInterval(p.cDef,r[a+1+R]);if(I==-1&&p.cDef[L+2]!=z[R]){S=!1;break}}if(S){var F=k.substLookupRecords;for(y=0;y<F.length;y+=2)F[y],F[y+1]}}}else if(o.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,a-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,a)||!e.U._glsCovered(r,p.ahedCvg,a+p.inptCvg.length))continue;var j=p.lookupRec;for(U=0;U<j.length;U+=2){I=j[U];var W=s[j[U+1]];e.U._applySubs(r,a+I,W,s)}}}}},e.U._glsCovered=function(r,a,o){for(var s=0;s<a.length;s++)if(e._lctf.coverageIndex(a[s],r[o+s])==-1)return!1;return!0},e.U.glyphsToPath=function(r,a,o){for(var s={cmds:[],crds:[]},u=0,c=0;c<a.length;c++){var d=a[c];if(d!=-1){for(var p=c<a.length-1&&a[c+1]!=-1?a[c+1]:0,g=e.U.glyphToPath(r,d),y=0;y<g.crds.length;y+=2)s.crds.push(g.crds[y]+u),s.crds.push(g.crds[y+1]);for(o&&s.cmds.push(o),y=0;y<g.cmds.length;y++)s.cmds.push(g.cmds[y]);o&&s.cmds.push("X"),u+=r.hmtx.aWidth[d],c<a.length-1&&(u+=e.U.getPairAdjustment(r,d,p))}}return s},e.U.P={},e.U.P.moveTo=function(r,a,o){r.cmds.push("M"),r.crds.push(a,o)},e.U.P.lineTo=function(r,a,o){r.cmds.push("L"),r.crds.push(a,o)},e.U.P.curveTo=function(r,a,o,s,u,c,d){r.cmds.push("C"),r.crds.push(a,o,s,u,c,d)},e.U.P.qcurveTo=function(r,a,o,s,u){r.cmds.push("Q"),r.crds.push(a,o,s,u)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,a,o,s,u){for(var c=a.stack,d=a.nStems,p=a.haveWidth,g=a.width,y=a.open,b=0,T=a.x,S=a.y,A=0,R=0,I=0,N=0,D=0,U=0,k=0,z=0,L=0,F=0,j={val:0,size:0};b<r.length;){e.CFF.getCharString(r,b,j);var W=j.val;if(b+=j.size,W=="o1"||W=="o18")c.length%2!=0&&!p&&(g=c.shift()+s.nominalWidthX),d+=c.length>>1,c.length=0,p=!0;else if(W=="o3"||W=="o23")c.length%2!=0&&!p&&(g=c.shift()+s.nominalWidthX),d+=c.length>>1,c.length=0,p=!0;else if(W=="o4")c.length>1&&!p&&(g=c.shift()+s.nominalWidthX,p=!0),y&&e.U.P.closePath(u),S+=c.pop(),e.U.P.moveTo(u,T,S),y=!0;else if(W=="o5")for(;c.length>0;)T+=c.shift(),S+=c.shift(),e.U.P.lineTo(u,T,S);else if(W=="o6"||W=="o7")for(var X=c.length,Q=W=="o6",ae=0;ae<X;ae++){var $=c.shift();Q?T+=$:S+=$,Q=!Q,e.U.P.lineTo(u,T,S)}else if(W=="o8"||W=="o24"){X=c.length;for(var ie=0;ie+6<=X;)A=T+c.shift(),R=S+c.shift(),I=A+c.shift(),N=R+c.shift(),T=I+c.shift(),S=N+c.shift(),e.U.P.curveTo(u,A,R,I,N,T,S),ie+=6;W=="o24"&&(T+=c.shift(),S+=c.shift(),e.U.P.lineTo(u,T,S))}else{if(W=="o11")break;if(W=="o1234"||W=="o1235"||W=="o1236"||W=="o1237")W=="o1234"&&(R=S,I=(A=T+c.shift())+c.shift(),F=N=R+c.shift(),U=N,z=S,T=(k=(D=(L=I+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(u,A,R,I,N,L,F),e.U.P.curveTo(u,D,U,k,z,T,S)),W=="o1235"&&(A=T+c.shift(),R=S+c.shift(),I=A+c.shift(),N=R+c.shift(),L=I+c.shift(),F=N+c.shift(),D=L+c.shift(),U=F+c.shift(),k=D+c.shift(),z=U+c.shift(),T=k+c.shift(),S=z+c.shift(),c.shift(),e.U.P.curveTo(u,A,R,I,N,L,F),e.U.P.curveTo(u,D,U,k,z,T,S)),W=="o1236"&&(A=T+c.shift(),R=S+c.shift(),I=A+c.shift(),F=N=R+c.shift(),U=N,k=(D=(L=I+c.shift())+c.shift())+c.shift(),z=U+c.shift(),T=k+c.shift(),e.U.P.curveTo(u,A,R,I,N,L,F),e.U.P.curveTo(u,D,U,k,z,T,S)),W=="o1237"&&(A=T+c.shift(),R=S+c.shift(),I=A+c.shift(),N=R+c.shift(),L=I+c.shift(),F=N+c.shift(),D=L+c.shift(),U=F+c.shift(),k=D+c.shift(),z=U+c.shift(),Math.abs(k-T)>Math.abs(z-S)?T=k+c.shift():S=z+c.shift(),e.U.P.curveTo(u,A,R,I,N,L,F),e.U.P.curveTo(u,D,U,k,z,T,S));else if(W=="o14"){if(c.length>0&&!p&&(g=c.shift()+o.nominalWidthX,p=!0),c.length==4){var me=c.shift(),pe=c.shift(),de=c.shift(),H=c.shift(),ne=e.CFF.glyphBySE(o,de),le=e.CFF.glyphBySE(o,H);e.U._drawCFF(o.CharStrings[ne],a,o,s,u),a.x=me,a.y=pe,e.U._drawCFF(o.CharStrings[le],a,o,s,u)}y&&(e.U.P.closePath(u),y=!1)}else if(W=="o19"||W=="o20")c.length%2!=0&&!p&&(g=c.shift()+s.nominalWidthX),d+=c.length>>1,c.length=0,p=!0,b+=d+7>>3;else if(W=="o21")c.length>2&&!p&&(g=c.shift()+s.nominalWidthX,p=!0),S+=c.pop(),T+=c.pop(),y&&e.U.P.closePath(u),e.U.P.moveTo(u,T,S),y=!0;else if(W=="o22")c.length>1&&!p&&(g=c.shift()+s.nominalWidthX,p=!0),T+=c.pop(),y&&e.U.P.closePath(u),e.U.P.moveTo(u,T,S),y=!0;else if(W=="o25"){for(;c.length>6;)T+=c.shift(),S+=c.shift(),e.U.P.lineTo(u,T,S);A=T+c.shift(),R=S+c.shift(),I=A+c.shift(),N=R+c.shift(),T=I+c.shift(),S=N+c.shift(),e.U.P.curveTo(u,A,R,I,N,T,S)}else if(W=="o26")for(c.length%2&&(T+=c.shift());c.length>0;)A=T,R=S+c.shift(),T=I=A+c.shift(),S=(N=R+c.shift())+c.shift(),e.U.P.curveTo(u,A,R,I,N,T,S);else if(W=="o27")for(c.length%2&&(S+=c.shift());c.length>0;)R=S,I=(A=T+c.shift())+c.shift(),N=R+c.shift(),T=I+c.shift(),S=N,e.U.P.curveTo(u,A,R,I,N,T,S);else if(W=="o10"||W=="o29"){var ge=W=="o10"?s:o;if(c.length==0)console.debug("error: empty stack");else{var _e=c.pop(),re=ge.Subrs[_e+ge.Bias];a.x=T,a.y=S,a.nStems=d,a.haveWidth=p,a.width=g,a.open=y,e.U._drawCFF(re,a,o,s,u),T=a.x,S=a.y,d=a.nStems,p=a.haveWidth,g=a.width,y=a.open}}else if(W=="o30"||W=="o31"){var oe=c.length,Ee=(ie=0,W=="o31");for(ie+=oe-(X=-3&oe);ie<X;)Ee?(R=S,I=(A=T+c.shift())+c.shift(),S=(N=R+c.shift())+c.shift(),X-ie==5?(T=I+c.shift(),ie++):T=I,Ee=!1):(A=T,R=S+c.shift(),I=A+c.shift(),N=R+c.shift(),T=I+c.shift(),X-ie==5?(S=N+c.shift(),ie++):S=N,Ee=!0),e.U.P.curveTo(u,A,R,I,N,T,S),ie+=4}else{if((W+"").charAt(0)=="o")throw console.debug("Unknown operation: "+W,r),W;c.push(W)}}}a.x=T,a.y=S,a.nStems=d,a.haveWidth=p,a.width=g,a.open=y};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Owe(){return(function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(W,X){for(var Q=new n(31),ae=0;ae<31;++ae)Q[ae]=X+=1<<W[ae-1];var $=new i(Q[30]);for(ae=1;ae<30;++ae)for(var ie=Q[ae];ie<Q[ae+1];++ie)$[ie]=ie-Q[ae]<<5|ae;return[Q,$]},u=s(r,2),c=u[0],d=u[1];c[28]=258,d[258]=28;for(var p=s(a,0)[0],g=new n(32768),y=0;y<32768;++y){var b=(43690&y)>>>1|(21845&y)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,g[y]=((65280&b)>>>8|(255&b)<<8)>>>1}var T=function(W,X,Q){for(var ae=W.length,$=0,ie=new n(X);$<ae;++$)++ie[W[$]-1];var me,pe=new n(X);for($=0;$<X;++$)pe[$]=pe[$-1]+ie[$-1]<<1;{me=new n(1<<X);var de=15-X;for($=0;$<ae;++$)if(W[$])for(var H=$<<4|W[$],ne=X-W[$],le=pe[W[$]-1]++<<ne,ge=le|(1<<ne)-1;le<=ge;++le)me[g[le]>>>de]=H}return me},S=new e(288);for(y=0;y<144;++y)S[y]=8;for(y=144;y<256;++y)S[y]=9;for(y=256;y<280;++y)S[y]=7;for(y=280;y<288;++y)S[y]=8;var A=new e(32);for(y=0;y<32;++y)A[y]=5;var R=T(S,9),I=T(A,5),N=function(W){for(var X=W[0],Q=1;Q<W.length;++Q)W[Q]>X&&(X=W[Q]);return X},D=function(W,X,Q){var ae=X/8|0;return(W[ae]|W[ae+1]<<8)>>(7&X)&Q},U=function(W,X){var Q=X/8|0;return(W[Q]|W[Q+1]<<8|W[Q+2]<<16)>>(7&X)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(W,X,Q){var ae=new Error(X||k[W]);if(ae.code=W,Error.captureStackTrace&&Error.captureStackTrace(ae,z),!Q)throw ae;return ae},L=function(W,X,Q){var ae=W.length;if(!ae||Q&&!Q.l&&ae<5)return X||new e(0);var $=!X||Q,ie=!Q||Q.i;Q||(Q={}),X||(X=new e(3*ae));var me,pe=function(et){var ue=X.length;if(et>ue){var we=new e(Math.max(2*ue,et));we.set(X),X=we}},de=Q.f||0,H=Q.p||0,ne=Q.b||0,le=Q.l,ge=Q.d,_e=Q.m,re=Q.n,oe=8*ae;do{if(!le){Q.f=de=D(W,H,1);var Ee=D(W,H+1,3);if(H+=3,!Ee){var ce=W[(je=((me=H)/8|0)+(7&me&&1)+4)-4]|W[je-3]<<8,Ce=je+ce;if(Ce>ae){ie&&z(0);break}$&&pe(ne+ce),X.set(W.subarray(je,Ce),ne),Q.b=ne+=ce,Q.p=H=8*Ce;continue}if(Ee==1)le=R,ge=I,_e=9,re=5;else if(Ee==2){var Ue=D(W,H,31)+257,ve=D(W,H+10,15)+4,ft=Ue+D(W,H+5,31)+1;H+=14;for(var Se=new e(ft),Oe=new e(19),Me=0;Me<ve;++Me)Oe[o[Me]]=D(W,H+3*Me,7);H+=3*ve;var Je=N(Oe),Z=(1<<Je)-1,it=T(Oe,Je);for(Me=0;Me<ft;){var je,Re=it[D(W,H,Z)];if(H+=15&Re,(je=Re>>>4)<16)Se[Me++]=je;else{var He=0,Y=0;for(je==16?(Y=3+D(W,H,3),H+=2,He=Se[Me-1]):je==17?(Y=3+D(W,H,7),H+=3):je==18&&(Y=11+D(W,H,127),H+=7);Y--;)Se[Me++]=He}}var q=Se.subarray(0,Ue),fe=Se.subarray(Ue);_e=N(q),re=N(fe),le=T(q,_e),ge=T(fe,re)}else z(1);if(H>oe){ie&&z(0);break}}$&&pe(ne+131072);for(var Le=(1<<_e)-1,Ie=(1<<re)-1,Te=H;;Te=H){var ot=(He=le[U(W,H)&Le])>>>4;if((H+=15&He)>oe){ie&&z(0);break}if(He||z(2),ot<256)X[ne++]=ot;else{if(ot==256){Te=H,le=null;break}var rt=ot-254;if(ot>264){var mt=r[Me=ot-257];rt=D(W,H,(1<<mt)-1)+c[Me],H+=mt}var xt=ge[U(W,H)&Ie],We=xt>>>4;if(xt||z(3),H+=15&xt,fe=p[We],We>3&&(mt=a[We],fe+=U(W,H)&(1<<mt)-1,H+=mt),H>oe){ie&&z(0);break}$&&pe(ne+131072);for(var Ke=ne+rt;ne<Ke;ne+=4)X[ne]=X[ne-fe],X[ne+1]=X[ne+1-fe],X[ne+2]=X[ne+2-fe],X[ne+3]=X[ne+3-fe];ne=Ke}}Q.l=le,Q.p=Te,Q.b=ne,le&&(de=1,Q.m=_e,Q.d=ge,Q.n=re)}while(!de);return ne==X.length?X:(function(et,ue,we){(we==null||we>et.length)&&(we=et.length);var ht=new(et instanceof n?n:et instanceof i?i:e)(we-ue);return ht.set(et.subarray(ue,we)),ht})(X,0,ne)},F=new e(0),j=typeof TextDecoder<"u"&&new TextDecoder;try{j.decode(F,{stream:!0})}catch{}return t.convert_streams=function(W){var X=new DataView(W),Q=0;function ae(){var Ue=X.getUint16(Q);return Q+=2,Ue}function $(){var Ue=X.getUint32(Q);return Q+=4,Ue}function ie(Ue){ce.setUint16(Ce,Ue),Ce+=2}function me(Ue){ce.setUint32(Ce,Ue),Ce+=4}for(var pe={signature:$(),flavor:$(),length:$(),numTables:ae(),reserved:ae(),totalSfntSize:$(),majorVersion:ae(),minorVersion:ae(),metaOffset:$(),metaLength:$(),metaOrigLength:$(),privOffset:$(),privLength:$()},de=0;Math.pow(2,de)<=pe.numTables;)de++;de--;for(var H=16*Math.pow(2,de),ne=16*pe.numTables-H,le=12,ge=[],_e=0;_e<pe.numTables;_e++)ge.push({tag:$(),offset:$(),compLength:$(),origLength:$(),origChecksum:$()}),le+=16;var re,oe=new Uint8Array(12+16*ge.length+ge.reduce((function(Ue,ve){return Ue+ve.origLength+4}),0)),Ee=oe.buffer,ce=new DataView(Ee),Ce=0;return me(pe.flavor),ie(pe.numTables),ie(H),ie(de),ie(ne),ge.forEach((function(Ue){me(Ue.tag),me(Ue.origChecksum),me(le),me(Ue.origLength),Ue.outOffset=le,(le+=Ue.origLength)%4!=0&&(le+=4-le%4)})),ge.forEach((function(Ue){var ve,ft=W.slice(Ue.offset,Ue.offset+Ue.compLength);if(Ue.compLength!=Ue.origLength){var Se=new Uint8Array(Ue.origLength);ve=new Uint8Array(ft,2),L(ve,Se)}else Se=new Uint8Array(ft);oe.set(Se,Ue.outOffset);var Oe=0;(le=Ue.outOffset+Ue.origLength)%4!=0&&(Oe=4-le%4),oe.set(new Uint8Array(Oe).buffer,Ue.outOffset+Ue.origLength),re=le+Oe})),Ee.slice(0,re)},Object.defineProperty(t,"__esModule",{value:!0}),t})({}).convert_streams}function Lwe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,a=2,o=4,s=8,u=16,c=32;let d;function p(k){if(!d){const z={R:a,L:r,D:o,C:u,U:c,T:s};d=new Map;for(let L in i){let F=0;i[L].split(",").forEach(j=>{let[W,X]=j.split("+");W=parseInt(W,36),X=X?parseInt(X,36):0,d.set(F+=W,z[L]);for(let Q=X;Q--;)d.set(++F,z[L])})}}return d.get(k)||c}const g=1,y=2,b=3,T=4,S=[null,"isol","init","fina","medi"];function A(k){const z=new Uint8Array(k.length);let L=c,F=g,j=-1;for(let W=0;W<k.length;W++){const X=k.codePointAt(W);let Q=p(X)|0,ae=g;Q&s||(L&(r|o|u)?Q&(a|o|u)?(ae=b,(F===g||F===b)&&z[j]++):Q&(r|c)&&(F===y||F===T)&&z[j]--:L&(a|c)&&(F===y||F===T)&&z[j]--,F=z[W]=ae,L=Q,j=W,X>65535&&W++)}return z}function R(k,z){const L=[];for(let j=0;j<z.length;j++){const W=z.codePointAt(j);W>65535&&j++,L.push(t.U.codeToGlyph(k,W))}const F=k.GSUB;if(F){const{lookupList:j,featureList:W}=F;let X;const Q=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ae=[];W.forEach($=>{if(Q.test($.tag))for(let ie=0;ie<$.tab.length;ie++){if(ae[$.tab[ie]])continue;ae[$.tab[ie]]=!0;const me=j[$.tab[ie]],pe=/^(isol|init|fina|medi)$/.test($.tag);pe&&!X&&(X=A(z));for(let de=0;de<L.length;de++)(!X||!pe||S[X[de]]===$.tag)&&t.U._applySubs(L,de,me,j)}})}return L}function I(k,z){const L=new Int16Array(z.length*3);let F=0;for(;F<z.length;F++){const Q=z[F];if(Q===-1)continue;L[F*3+2]=k.hmtx.aWidth[Q];const ae=k.GPOS;if(ae){const $=ae.lookupList;for(let ie=0;ie<$.length;ie++){const me=$[ie];for(let pe=0;pe<me.tabs.length;pe++){const de=me.tabs[pe];if(me.ltype===1){if(t._lctf.coverageIndex(de.coverage,Q)!==-1&&de.pos){X(de.pos,F);break}}else if(me.ltype===2){let H=null,ne=j();if(ne!==-1){const le=t._lctf.coverageIndex(de.coverage,z[ne]);if(le!==-1){if(de.fmt===1){const ge=de.pairsets[le];for(let _e=0;_e<ge.length;_e++)ge[_e].gid2===Q&&(H=ge[_e])}else if(de.fmt===2){const ge=t.U._getGlyphClass(z[ne],de.classDef1),_e=t.U._getGlyphClass(Q,de.classDef2);H=de.matrix[ge][_e]}if(H){H.val1&&X(H.val1,ne),H.val2&&X(H.val2,F);break}}}}else if(me.ltype===4){const H=t._lctf.coverageIndex(de.markCoverage,Q);if(H!==-1){const ne=j(W),le=ne===-1?-1:t._lctf.coverageIndex(de.baseCoverage,z[ne]);if(le!==-1){const ge=de.markArray[H],_e=de.baseArray[le][ge.markClass];L[F*3]=_e.x-ge.x+L[ne*3]-L[ne*3+2],L[F*3+1]=_e.y-ge.y+L[ne*3+1];break}}}else if(me.ltype===6){const H=t._lctf.coverageIndex(de.mark1Coverage,Q);if(H!==-1){const ne=j();if(ne!==-1){const le=z[ne];if(N(k,le)===3){const ge=t._lctf.coverageIndex(de.mark2Coverage,le);if(ge!==-1){const _e=de.mark1Array[H],re=de.mark2Array[ge][_e.markClass];L[F*3]=re.x-_e.x+L[ne*3]-L[ne*3+2],L[F*3+1]=re.y-_e.y+L[ne*3+1];break}}}}}}}}else if(k.kern&&!k.cff){const $=j();if($!==-1){const ie=k.kern.glyph1.indexOf(z[$]);if(ie!==-1){const me=k.kern.rval[ie].glyph2.indexOf(Q);me!==-1&&(L[$*3+2]+=k.kern.rval[ie].vals[me])}}}}return L;function j(Q){for(let ae=F-1;ae>=0;ae--)if(z[ae]!==-1&&(!Q||Q(z[ae])))return ae;return-1}function W(Q){return N(k,Q)===1}function X(Q,ae){for(let $=0;$<3;$++)L[ae*3+$]+=Q[$]||0}}function N(k,z){const L=k.GDEF&&k.GDEF.glyphClassDef;return L?t.U._getGlyphClass(z,L):0}function D(...k){for(let z=0;z<k.length;z++)if(typeof k[z]=="number")return k[z]}function U(k){const z=Object.create(null),L=k["OS/2"],F=k.hhea,j=k.head.unitsPerEm,W=D(L&&L.sTypoAscender,F&&F.ascender,j),X={unitsPerEm:j,ascender:W,descender:D(L&&L.sTypoDescender,F&&F.descender,0),capHeight:D(L&&L.sCapHeight,W),xHeight:D(L&&L.sxHeight,W),lineGap:D(L&&L.sTypoLineGap,F&&F.lineGap),supportsCodePoint(Q){return t.U.codeToGlyph(k,Q)>0},forEachGlyph(Q,ae,$,ie){let me=0;const pe=1/X.unitsPerEm*ae,de=R(k,Q);let H=0;const ne=I(k,de);return de.forEach((le,ge)=>{if(le!==-1){let _e=z[le];if(!_e){const{cmds:re,crds:oe}=t.U.glyphToPath(k,le);let Ee="",ce=0;for(let Se=0,Oe=re.length;Se<Oe;Se++){const Me=n[re[Se]];Ee+=re[Se];for(let Je=1;Je<=Me;Je++)Ee+=(Je>1?",":"")+oe[ce++]}let Ce,Ue,ve,ft;if(oe.length){Ce=Ue=1/0,ve=ft=-1/0;for(let Se=0,Oe=oe.length;Se<Oe;Se+=2){let Me=oe[Se],Je=oe[Se+1];Me<Ce&&(Ce=Me),Je<Ue&&(Ue=Je),Me>ve&&(ve=Me),Je>ft&&(ft=Je)}}else Ce=ve=Ue=ft=0;_e=z[le]={index:le,advanceWidth:k.hmtx.aWidth[le],xMin:Ce,yMin:Ue,xMax:ve,yMax:ft,path:Ee}}ie.call(null,_e,me+ne[ge*3]*pe,ne[ge*3+1]*pe,H),me+=ne[ge*3+2]*pe,$&&(me+=$*ae)}H+=Q.codePointAt(H)>65535?2:1}),me}};return X}return function(z){const L=new Uint8Array(z,0,4),F=t._bin.readASCII(L,0,4);if(F==="wOFF")z=e(z);else if(F==="wOF2")throw new Error("woff2 fonts not supported");return U(t.parse(z)[0])}}const Uwe=Wg({name:"Typr Font Parser",dependencies:[Dwe,Owe,Lwe],init(t,e,n){const i=t(),r=e();return n(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Fwe(){return(function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(I){var N=I>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&I))},e.prototype.has=function(I){var N=this.buckets.get(I>>5);return N!==void 0&&(N&1<<(31&I))!=0},e.prototype.serialize=function(){var I=[];return this.buckets.forEach((function(N,D){I.push((+D).toString(36)+":"+N.toString(36))})),I.join(",")},e.prototype.deserialize=function(I){var N=this;this.buckets.clear(),I.split(",").forEach((function(D){var U=D.split(":");N.buckets.set(parseInt(U[0],36),parseInt(U[1],36))}))};var n=Math.pow(2,8),i=n-1,r=~i;function a(I){var N=(function(U){return U&r})(I).toString(16),D=(function(U){return(U&r)+n-1})(I).toString(16);return"codepoint-index/plane"+(I>>16)+"/"+N+"-"+D+".json"}function o(I,N){var D=I&i,U=N.codePointAt(D/6|0);return((U=(U||48)-48)&1<<D%6)!=0}function s(I,N){var D;(D=I,D.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(U){return U.split("-").map((function(k){return parseInt(k.trim(),16)}))}))).forEach((function(U){var k=U[0],z=U[1];z===void 0&&(z=k),N(k,z)}))}function u(I,N){s(I,(function(D,U){for(var k=D;k<=U;k++)N(k)}))}var c={},d={},p=new WeakMap,g="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(I){var N=p.get(I);return N||(N=new e,u(I.ranges,(function(D){return N.add(D)})),p.set(I,N)),N}var b,T=new Map;function S(I,N,D){return I[N]?N:I[D]?D:(function(U){for(var k in U)return k})(I)}function A(I,N){var D=N;if(!I.includes(D)){D=1/0;for(var U=0;U<I.length;U++)Math.abs(I[U]-N)<Math.abs(D-N)&&(D=I[U])}return D}function R(I){return b||(b=new Set,u("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(N){b.add(N)}))),b.has(I)}return t.CodePointSet=e,t.clearCache=function(){c={},d={}},t.getFontsForString=function(I,N){N===void 0&&(N={});var D,U=N.lang;U===void 0&&(U=new RegExp("\\p{Script=Hangul}","u").test(D=I)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(D)?"ja":"en");var k=N.category;k===void 0&&(k="sans-serif");var z=N.style;z===void 0&&(z="normal");var L=N.weight;L===void 0&&(L=400);var F=(N.dataUrl||g).replace(/\/$/g,""),j=new Map,W=new Uint8Array(I.length),X={},Q={},ae=new Array(I.length),$=new Map,ie=!1;function me(H){var ne=T.get(H);return ne||(ne=fetch(F+"/"+H).then((function(le){if(!le.ok)throw new Error(le.statusText);return le.json().then((function(ge){if(!Array.isArray(ge)||ge[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ge[0]);return ge[1]}))})).catch((function(le){if(F!==g)return ie||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+F+'", trying default CDN. '+le.message),ie=!0),F=g,T.delete(H),me(H);throw le})),T.set(H,ne)),ne}for(var pe=function(H){var ne=I.codePointAt(H),le=a(ne);ae[H]=le,c[le]||$.has(le)||$.set(le,me(le).then((function(ge){c[le]=ge}))),ne>65535&&(H++,de=H)},de=0;de<I.length;de++)pe(de);return Promise.all($.values()).then((function(){$.clear();for(var H=function(le){var ge=I.codePointAt(le),_e=null,re=c[ae[le]],oe=void 0;for(var Ee in re){var ce=Q[Ee];if(ce===void 0&&(ce=Q[Ee]=new RegExp(Ee).test(U||"en")),ce){for(var Ce in oe=Ee,re[Ee])if(o(ge,re[Ee][Ce])){_e=Ce;break}break}}if(!_e){e:for(var Ue in re)if(Ue!==oe){for(var ve in re[Ue])if(o(ge,re[Ue][ve])){_e=ve;break e}}}_e||(console.debug("No font coverage for U+"+ge.toString(16)),_e="latin"),ae[le]=_e,d[_e]||$.has(_e)||$.set(_e,me("font-meta/"+_e+".json").then((function(ft){d[_e]=ft}))),ge>65535&&(le++,ne=le)},ne=0;ne<I.length;ne++)H(ne);return Promise.all($.values())})).then((function(){for(var H,ne=null,le=0;le<I.length;le++){var ge=I.codePointAt(le);if(ne&&(R(ge)||y(ne).has(ge)))W[le]=W[le-1];else{ne=d[ae[le]];var _e=X[ne.id];if(!_e){var re=ne.typeforms,oe=S(re,k,"sans-serif"),Ee=S(re[oe],z,"normal"),ce=A((H=re[oe])===null||H===void 0?void 0:H[Ee],L);_e=X[ne.id]=F+"/font-files/"+ne.id+"/"+oe+"."+Ee+"."+ce+".woff"}var Ce=j.get(_e);Ce==null&&(Ce=j.size,j.set(_e,Ce)),W[le]=Ce}ge>65535&&(le++,W[le]=W[le-1])}return{fontUrls:Array.from(j.keys()),chars:W}}))},Object.defineProperty(t,"__esModule",{value:!0}),t})({})}function kwe(t,e){const n=Object.create(null),i=Object.create(null);function r(o,s){const u=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)u(new Error(c.statusText));else if(c.status>0)try{const d=t(c.response);d.src=o,s(d)}catch(d){u(d)}},c.onerror=u,c.send()}catch(c){u(c)}}function a(o,s){let u=n[o];u?s(u):i[o]?i[o].push(s):(i[o]=[s],r(o,c=>{c.src=o,n[o]=c,i[o].forEach(d=>d(c)),delete i[o]}))}return function(o,s,{lang:u,fonts:c=[],style:d="normal",weight:p="normal",unicodeFontsURL:g}={}){const y=new Uint8Array(o.length),b=[];o.length||R();const T=new Map,S=[];if(d!=="italic"&&(d="normal"),typeof p!="number"&&(p=p==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(N=>!N.lang||N.lang.test(u)).reverse(),c.length){let k=0;(function z(L=0){for(let F=L,j=o.length;F<j;F++){const W=o.codePointAt(F);if(k===1&&b[y[F-1]].supportsCodePoint(W)||F>0&&/\s/.test(o[F]))y[F]=y[F-1],k===2&&(S[S.length-1][1]=F);else for(let X=y[F],Q=c.length;X<=Q;X++)if(X===Q){const ae=k===2?S[S.length-1]:S[S.length]=[F,F];ae[1]=F,k=2}else{y[F]=X;const{src:ae,unicodeRange:$}=c[X];if(!$||I(W,$)){const ie=n[ae];if(!ie){a(ae,()=>{z(F)});return}if(ie.supportsCodePoint(W)){let me=T.get(ie);typeof me!="number"&&(me=b.length,b.push(ie),T.set(ie,me)),y[F]=me,k=1;break}}}W>65535&&F+1<j&&(y[F+1]=y[F],F++,k===2&&(S[S.length-1][1]=F))}A()})()}else S.push([0,o.length-1]),A();function A(){if(S.length){const N=S.map(D=>o.substring(D[0],D[1]+1)).join(`
`);e.getFontsForString(N,{lang:u||void 0,style:d,weight:p,dataUrl:g}).then(({fontUrls:D,chars:U})=>{const k=b.length;let z=0;S.forEach(F=>{for(let j=0,W=F[1]-F[0];j<=W;j++)y[F[0]+j]=U[z++]+k;z++});let L=0;D.forEach((F,j)=>{a(F,W=>{b[j+k]=W,++L===D.length&&R()})})})}else R()}function R(){s({chars:y,fonts:b})}function I(N,D){for(let U=0;U<D.length;U++){const[k,z=k]=D[U];if(k<=N&&N<=z)return!0}return!1}}}const Bwe=Wg({name:"FontResolver",dependencies:[kwe,Uwe,Fwe],init(t,e,n){return t(e,n())}});function zwe(t,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",a=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:b,lang:T,fonts:S,style:A,weight:R,preResolvedFonts:I,unicodeFontsURL:N},D){const U=({chars:k,fonts:z})=>{let L,F;const j=[];for(let W=0;W<k.length;W++)k[W]!==F?(F=k[W],j.push(L={start:W,end:W,fontObj:z[k[W]]})):L.end=W;D(j)};I?U(I):t(b,U,{lang:T,fonts:S,style:A,weight:R,unicodeFontsURL:N})}function s({text:b="",font:T,lang:S,sdfGlyphSize:A=64,fontSize:R=400,fontWeight:I=1,fontStyle:N="normal",letterSpacing:D=0,lineHeight:U="normal",maxWidth:k=1/0,direction:z,textAlign:L="left",textIndent:F=0,whiteSpace:j="normal",overflowWrap:W="normal",anchorX:X=0,anchorY:Q=0,metricsOnly:ae=!1,unicodeFontsURL:$,preResolvedFonts:ie=null,includeCaretPositions:me=!1,chunkedBoundsSize:pe=8192,colorRanges:de=null},H){const ne=p(),le={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),R=+R,D=+D,k=+k,U=U||"normal",F=+F,o({text:b,lang:S,style:N,weight:I,fonts:typeof T=="string"?[{src:T}]:T,unicodeFontsURL:$,preResolvedFonts:ie},ge=>{le.fontLoad=p()-ne;const _e=isFinite(k);let re=null,oe=null,Ee=null,ce=null,Ce=null,Ue=null,ve=null,ft=null,Se=0,Oe=0,Me=j!=="nowrap";const Je=new Map,Z=p();let it=F,je=0,Re=new g;const He=[Re];ge.forEach(Ie=>{const{fontObj:Te}=Ie,{ascender:ot,descender:rt,unitsPerEm:mt,lineGap:xt,capHeight:We,xHeight:Ke}=Te;let et=Je.get(Te);if(!et){const Ye=R/mt,tt=U==="normal"?(ot-rt+xt)*Ye:U*R,vt=(tt-(ot-rt)*Ye)/2,nt=Math.min(tt,(ot-rt)*Ye),Be=(ot+rt)/2*Ye+nt/2;et={index:Je.size,src:Te.src,fontObj:Te,fontSizeMult:Ye,unitsPerEm:mt,ascender:ot*Ye,descender:rt*Ye,capHeight:We*Ye,xHeight:Ke*Ye,lineHeight:tt,baseline:-vt-ot*Ye,caretTop:Be,caretBottom:Be-nt},Je.set(Te,et)}const{fontSizeMult:ue}=et,we=b.slice(Ie.start,Ie.end+1);let ht,he;Te.forEachGlyph(we,R,D,(Ye,tt,vt,nt)=>{tt+=je,nt+=Ie.start,ht=tt,he=Ye;const Be=b.charAt(nt),lt=Ye.advanceWidth*ue,Et=Re.count;let St;if("isEmpty"in Ye||(Ye.isWhitespace=!!Be&&new RegExp(r).test(Be),Ye.canBreakAfter=!!Be&&a.test(Be),Ye.isEmpty=Ye.xMin===Ye.xMax||Ye.yMin===Ye.yMax||i.test(Be)),!Ye.isWhitespace&&!Ye.isEmpty&&Oe++,Me&&_e&&!Ye.isWhitespace&&tt+lt+it>k&&Et){if(Re.glyphAt(Et-1).glyphObj.canBreakAfter)St=new g,it=-tt;else for(let vn=Et;vn--;)if(vn===0&&W==="break-word"){St=new g,it=-tt;break}else if(Re.glyphAt(vn).glyphObj.canBreakAfter){St=Re.splitAt(vn+1);const wn=St.glyphAt(0).x;it-=wn;for(let Qn=St.count;Qn--;)St.glyphAt(Qn).x-=wn;break}St&&(Re.isSoftWrapped=!0,Re=St,He.push(Re),Se=k)}let Lt=Re.glyphAt(Re.count);Lt.glyphObj=Ye,Lt.x=tt+it,Lt.y=vt,Lt.width=lt,Lt.charIndex=nt,Lt.fontData=et,Be===`
`&&(Re=new g,He.push(Re),it=-(tt+lt+D*R)+F)}),je=ht+he.advanceWidth*ue+D*R});let Y=0;He.forEach(Ie=>{let Te=!0;for(let ot=Ie.count;ot--;){const rt=Ie.glyphAt(ot);Te&&!rt.glyphObj.isWhitespace&&(Ie.width=rt.x+rt.width,Ie.width>Se&&(Se=Ie.width),Te=!1);let{lineHeight:mt,capHeight:xt,xHeight:We,baseline:Ke}=rt.fontData;mt>Ie.lineHeight&&(Ie.lineHeight=mt);const et=Ke-Ie.baseline;et<0&&(Ie.baseline+=et,Ie.cap+=et,Ie.ex+=et),Ie.cap=Math.max(Ie.cap,Ie.baseline+xt),Ie.ex=Math.max(Ie.ex,Ie.baseline+We)}Ie.baseline-=Y,Ie.cap-=Y,Ie.ex-=Y,Y+=Ie.lineHeight});let q=0,fe=0;if(X&&(typeof X=="number"?q=-X:typeof X=="string"&&(q=-Se*(X==="left"?0:X==="center"?.5:X==="right"?1:c(X)))),Q&&(typeof Q=="number"?fe=-Q:typeof Q=="string"&&(fe=Q==="top"?0:Q==="top-baseline"?-He[0].baseline:Q==="top-cap"?-He[0].cap:Q==="top-ex"?-He[0].ex:Q==="middle"?Y/2:Q==="bottom"?Y:Q==="bottom-baseline"?-He[He.length-1].baseline:c(Q)*Y)),!ae){const Ie=e.getEmbeddingLevels(b,z);re=new Uint16Array(Oe),oe=new Uint8Array(Oe),Ee=new Float32Array(Oe*2),ce={},ve=[1/0,1/0,-1/0,-1/0],ft=[],me&&(Ue=new Float32Array(b.length*4)),de&&(Ce=new Uint8Array(Oe*3));let Te=0,ot=-1,rt=-1,mt,xt;if(He.forEach((We,Ke)=>{let{count:et,width:ue}=We;if(et>0){let we=0;for(let nt=et;nt--&&We.glyphAt(nt).glyphObj.isWhitespace;)we++;let ht=0,he=0;if(L==="center")ht=(Se-ue)/2;else if(L==="right")ht=Se-ue;else if(L==="justify"&&We.isSoftWrapped){let nt=0;for(let Be=et-we;Be--;)We.glyphAt(Be).glyphObj.isWhitespace&&nt++;he=(Se-ue)/nt}if(he||ht){let nt=0;for(let Be=0;Be<et;Be++){let lt=We.glyphAt(Be);const Et=lt.glyphObj;lt.x+=ht+nt,he!==0&&Et.isWhitespace&&Be<et-we&&(nt+=he,lt.width+=he)}}const Ye=e.getReorderSegments(b,Ie,We.glyphAt(0).charIndex,We.glyphAt(We.count-1).charIndex);for(let nt=0;nt<Ye.length;nt++){const[Be,lt]=Ye[nt];let Et=1/0,St=-1/0;for(let Lt=0;Lt<et;Lt++)if(We.glyphAt(Lt).charIndex>=Be){let vn=Lt,wn=Lt;for(;wn<et;wn++){let Qn=We.glyphAt(wn);if(Qn.charIndex>lt)break;wn<et-we&&(Et=Math.min(Et,Qn.x),St=Math.max(St,Qn.x+Qn.width))}for(let Qn=vn;Qn<wn;Qn++){const nr=We.glyphAt(Qn);nr.x=St-(nr.x+nr.width-Et)}break}}let tt;const vt=nt=>tt=nt;for(let nt=0;nt<et;nt++){const Be=We.glyphAt(nt);tt=Be.glyphObj;const lt=tt.index,Et=Ie.levels[Be.charIndex]&1;if(Et){const St=e.getMirroredCharacter(b[Be.charIndex]);St&&Be.fontData.fontObj.forEachGlyph(St,0,0,vt)}if(me){const{charIndex:St,fontData:Lt}=Be,vn=Be.x+q,wn=Be.x+Be.width+q;Ue[St*4]=Et?wn:vn,Ue[St*4+1]=Et?vn:wn,Ue[St*4+2]=We.baseline+Lt.caretBottom+fe,Ue[St*4+3]=We.baseline+Lt.caretTop+fe;const Qn=St-ot;Qn>1&&d(Ue,ot,Qn),ot=St}if(de){const{charIndex:St}=Be;for(;St>rt;)rt++,de.hasOwnProperty(rt)&&(xt=de[rt])}if(!tt.isWhitespace&&!tt.isEmpty){const St=Te++,{fontSizeMult:Lt,src:vn,index:wn}=Be.fontData,Qn=ce[vn]||(ce[vn]={});Qn[lt]||(Qn[lt]={path:tt.path,pathBounds:[tt.xMin,tt.yMin,tt.xMax,tt.yMax]});const nr=Be.x+q,Jr=Be.y+We.baseline+fe;Ee[St*2]=nr,Ee[St*2+1]=Jr;const xr=nr+tt.xMin*Lt,Sr=Jr+tt.yMin*Lt,pa=nr+tt.xMax*Lt,ai=Jr+tt.yMax*Lt;xr<ve[0]&&(ve[0]=xr),Sr<ve[1]&&(ve[1]=Sr),pa>ve[2]&&(ve[2]=pa),ai>ve[3]&&(ve[3]=ai),St%pe===0&&(mt={start:St,end:St,rect:[1/0,1/0,-1/0,-1/0]},ft.push(mt)),mt.end++;const $n=mt.rect;if(xr<$n[0]&&($n[0]=xr),Sr<$n[1]&&($n[1]=Sr),pa>$n[2]&&($n[2]=pa),ai>$n[3]&&($n[3]=ai),re[St]=lt,oe[St]=wn,de){const zn=St*3;Ce[zn]=xt>>16&255,Ce[zn+1]=xt>>8&255,Ce[zn+2]=xt&255}}}}}),Ue){const We=b.length-ot;We>1&&d(Ue,ot,We)}}const Le=[];Je.forEach(({index:Ie,src:Te,unitsPerEm:ot,ascender:rt,descender:mt,lineHeight:xt,capHeight:We,xHeight:Ke})=>{Le[Ie]={src:Te,unitsPerEm:ot,ascender:rt,descender:mt,lineHeight:xt,capHeight:We,xHeight:Ke}}),le.typesetting=p()-Z,H({glyphIds:re,glyphFontIndices:oe,glyphPositions:Ee,glyphData:ce,fontData:Le,caretPositions:Ue,glyphColors:Ce,chunkedBounds:ft,fontSize:R,topBaseline:fe+He[0].baseline,blockBounds:[q,fe-Y,q+Se,fe],visibleBounds:ve,timings:le})})}function u(b,T){s({...b,metricsOnly:!0},S=>{const[A,R,I,N]=S.blockBounds;T({width:I-A,height:N-R})})}function c(b){let T=b.match(/^([\d.]+)%$/),S=T?parseFloat(T[1]):NaN;return isNaN(S)?0:S/100}function d(b,T,S){const A=b[T*4],R=b[T*4+1],I=b[T*4+2],N=b[T*4+3],D=(R-A)/S;for(let U=0;U<S;U++){const k=(T+U)*4;b[k]=A+D*U,b[k+1]=A+D*(U+1),b[k+2]=I,b[k+3]=N}}function p(){return(self.performance||Date).now()}function g(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return g.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(b){let T=g.flyweight;return T.data=this.data,T.index=b,T},splitAt(b){let T=new g;return T.data=this.data.splice(b*y.length),T}},g.flyweight=y.reduce((b,T,S,A)=>(Object.defineProperty(b,T,{get(){return this.data[this.index*y.length+S]},set(R){this.data[this.index*y.length+S]=R}}),b),{data:null,index:0}),{typeset:s,measure:u}}const Zh=()=>(self.performance||Date).now(),cA=j7();let PB;function Gwe(t,e,n,i,r,a,o,s,u,c,d=!0){return d?Hwe(t,e,n,i,r,a,o,s,u,c).then(null,p=>(PB||(console.warn("WebGL SDF generation failed, falling back to JS",p),PB=!0),DB(t,e,n,i,r,a,o,s,u,c))):DB(t,e,n,i,r,a,o,s,u,c)}const PS=[],Vwe=5;let EI=0;function Y7(){const t=Zh();for(;PS.length&&Zh()-t<Vwe;)PS.shift()();EI=PS.length?setTimeout(Y7,0):0}const Hwe=(...t)=>new Promise((e,n)=>{PS.push(()=>{const i=Zh();try{cA.webgl.generateIntoCanvas(...t),e({timing:Zh()-i})}catch(r){n(r)}}),EI||(EI=setTimeout(Y7,0))}),qwe=4,Wwe=2e3,NB={};let jwe=0;function DB(t,e,n,i,r,a,o,s,u,c){const d="TroikaTextSDFGenerator_JS_"+jwe++%qwe;let p=NB[d];return p||(p=NB[d]={workerModule:Wg({name:d,workerId:d,dependencies:[j7,Zh],init(g,y){const b=g().javascript.generate;return function(...T){const S=y();return{textureData:b(...T),timing:y()-S}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(t,e,n,i,r,a).then(({textureData:g,timing:y})=>{const b=Zh(),T=new Uint8Array(g.length*4);for(let S=0;S<g.length;S++)T[S*4+c]=g[S];return cA.webglUtils.renderImageData(o,T,s,u,t,e,1<<3-c),y+=Zh()-b,--p.requests===0&&(p.idleTimer=setTimeout(()=>{Ewe(d)},Wwe)),{timing:y}})}function Xwe(t){t._warm||(cA.webgl.isSupported(t),t._warm=!0)}const Ywe=cA.webglUtils.resizeWebGLCanvasWithoutClearing,W0={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},$we=new Ct;function jm(){return(self.performance||Date).now()}const OB=Object.create(null);function $7(t,e){t=Zwe({},t);const n=jm(),i=[];if(t.font&&i.push({label:"user",src:Qwe(t.font)}),t.font=i,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||W0.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||W0.unicodeFontsURL,t.colorRanges!=null){let g={};for(let y in t.colorRanges)if(t.colorRanges.hasOwnProperty(y)){let b=t.colorRanges[y];typeof b!="number"&&(b=$we.set(b).getHex()),g[y]=b}t.colorRanges=g}Object.freeze(t);const{textureWidth:r,sdfExponent:a}=W0,{sdfGlyphSize:o}=t,s=r/o*4;let u=OB[o];if(!u){const g=document.createElement("canvas");g.width=r,g.height=o*256/s,u=OB[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:g,sdfTexture:new Qi(g,void 0,void 0,void 0,mi,mi),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,Kwe(u)}const{sdfTexture:c,sdfCanvas:d}=u;Z7(t).then(g=>{const{glyphIds:y,glyphFontIndices:b,fontData:T,glyphPositions:S,fontSize:A,timings:R}=g,I=[],N=new Float32Array(y.length*4);let D=0,U=0;const k=jm(),z=T.map(X=>{let Q=u.glyphsByFont.get(X.src);return Q||u.glyphsByFont.set(X.src,Q=new Map),Q});y.forEach((X,Q)=>{const ae=b[Q],{src:$,unitsPerEm:ie}=T[ae];let me=z[ae].get(X);if(!me){const{path:le,pathBounds:ge}=g.glyphData[$][X],_e=Math.max(ge[2]-ge[0],ge[3]-ge[1])/o*(W0.sdfMargin*o+.5),re=u.glyphCount++,oe=[ge[0]-_e,ge[1]-_e,ge[2]+_e,ge[3]+_e];z[ae].set(X,me={path:le,atlasIndex:re,sdfViewBox:oe}),I.push(me)}const{sdfViewBox:pe}=me,de=S[U++],H=S[U++],ne=A/ie;N[D++]=de+pe[0]*ne,N[D++]=H+pe[1]*ne,N[D++]=de+pe[2]*ne,N[D++]=H+pe[3]*ne,y[Q]=me.atlasIndex}),R.quads=(R.quads||0)+(jm()-k);const L=jm();R.sdf={};const F=d.height,j=Math.ceil(u.glyphCount/s),W=Math.pow(2,Math.ceil(Math.log2(j*o)));W>F&&(console.info(`Increasing SDF texture size ${F}->${W}`),Ywe(d,r,W),c.dispose()),Promise.all(I.map(X=>K7(X,u,t.gpuAccelerateSDF).then(({timing:Q})=>{R.sdf[X.atlasIndex]=Q}))).then(()=>{I.length&&!u.contextLost&&(J7(u),c.needsUpdate=!0),R.sdfTotal=jm()-L,R.total=jm()-n,e(Object.freeze({parameters:t,sdfTexture:c,sdfGlyphSize:o,sdfExponent:a,glyphBounds:N,glyphAtlasIndices:y,glyphColors:g.glyphColors,caretPositions:g.caretPositions,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{u.contextLost||Xwe(d)})}function K7({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:a},o){if(a)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:u}=W0,c=Math.max(n[2]-n[0],n[3]-n[1]),d=Math.floor(e/4),p=d%(s/i)*i,g=Math.floor(d/(s/i))*i,y=e%4;return Gwe(i,i,t,n,c,u,r,p,g,y,o)}function Kwe(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(a=>{i.push(K7(a,t,!0))})}),Promise.all(i).then(()=>{J7(t),t.sdfTexture.needsUpdate=!0})})}function Jwe({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;$7({font:t,sdfGlyphSize:n,text:r},i)}function Zwe(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let pS;function Qwe(t){return pS||(pS=typeof document>"u"?{}:document.createElement("a")),pS.href=t,pS.href}function J7(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,a=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,o)}}const eCe=Wg({name:"Typesetter",dependencies:[zwe,Bwe,Awe],init(t,e,n){return t(e,n())}}),Z7=Wg({name:"Typesetter",dependencies:[eCe],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}});Z7.onMainThread;const LB={};function tCe(t){let e=LB[t];return e||(e=LB[t]=new mf(1,1,t,t).translate(.5,.5,0)),e}const nCe="aTroikaGlyphBounds",UB="aTroikaGlyphIndex",iCe="aTroikaGlyphColor";class rCe extends uD{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ca,this.boundingBox=new ua}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=tCe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=n.attributes[i].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,i,r,a){this.updateAttributeData(nCe,e,4),this.updateAttributeData(UB,n,1),this.updateAttributeData(iCe,a,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:i}=this;if(n){const{PI:r,floor:a,min:o,max:s,sin:u,cos:c}=Math,d=r/2,p=r*2,g=Math.abs(n),y=e[0]/g,b=e[2]/g,T=a((y+d)/p)!==a((b+d)/p)?-g:o(u(y)*g,u(b)*g),S=a((y-d)/p)!==a((b-d)/p)?g:s(u(y)*g,u(b)*g),A=a((y+r)/p)!==a((b+r)/p)?g*2:s(g-c(y)*g,g-c(b)*g);i.min.set(T,e[1],n<0?-A:0),i.max.set(S,e[3],n<0?0:A)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(UB).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){n=i[r].end;let a=i[r].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=n}updateAttributeData(e,n,i){const r=this.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(this.setAttribute(e,new lp(n,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const aCe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,oCe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,sCe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,lCe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function uCe(t){const e=SI(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new st},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new ri(0,0,0,0)},uTroikaClipRect:{value:new ri(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new st},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ct},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new un},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:aCe,vertexTransform:oCe,fragmentDefs:sCe,fragmentColorTransform:lCe,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(X7,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const _D=new pf({color:16777215,side:Vl,transparent:!0}),FB=8421504,kB=new en,mS=new se,OC=new se,U0=[],cCe=new se,LC="+x+y";function BB(t){return Array.isArray(t)?t[0]:t}let Q7=()=>{const t=new er(new mf(1,1),_D);return Q7=()=>t,t},eW=()=>{const t=new er(new mf(1,1,32,1),_D);return eW=()=>t,t};const fCe={type:"syncstart"},dCe={type:"synccomplete"},tW=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],hCe=tW.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let nW=class extends er{constructor(){const e=new rCe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=FB,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=LC,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(fCe),$7({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(dCe),e&&e()})))}onBeforeRender(e,n,i,r,a,o){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return uCe(e)}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=_D.clone());if((!e||!e.isDerivedFrom(n))&&(e=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function i(){n.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return BB(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return BB(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const n=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:s,blockBounds:u}=r;i.uTroikaSDFTexture.value=s,i.uTroikaSDFTextureSize.value.set(s.image.width,s.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(u),i.uTroikaUseGlyphColors.value=!n&&!!r.glyphColors;let c=0,d=0,p=0,g,y,b,T=0,S=0;if(n){let{outlineWidth:R,outlineOffsetX:I,outlineOffsetY:N,outlineBlur:D,outlineOpacity:U}=this;c=this._parsePercent(R)||0,d=Math.max(0,this._parsePercent(D)||0),g=U,T=this._parsePercent(I)||0,S=this._parsePercent(N)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??FB),y=this.strokeOpacity,y==null&&(y=1)),g=this.fillOpacity;i.uTroikaEdgeOffset.value=c,i.uTroikaPositionOffset.value.set(T,S),i.uTroikaBlurRadius.value=d,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=y,i.uTroikaFillOpacity.value=g??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let A=this.clipRect;if(A&&Array.isArray(A)&&A.length===4)i.uTroikaClipRect.value.fromArray(A);else{const R=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(u[0]-R,u[1]-R,u[2]+R,u[3]+R)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const a=n?this.outlineColor||0:this.color;if(a==null)delete e.color;else{const s=e.hasOwnProperty("color")?e.color:e.color=new Ct;(a!==s._input||typeof a=="object")&&s.set(s._input=a)}let o=this.orientation||LC;if(o!==e._orientation){let s=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let u=o!==LC&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,c,d,p,g]=u;mS.set(0,0,0)[d]=c==="-"?1:-1,OC.set(0,0,0)[g]=p==="-"?-1:1,kB.lookAt(cCe,mS.cross(OC),OC),s.setFromMatrix4(kB)}else s.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),i=n?parseFloat(n[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new st){n.copy(e);const i=this.curveRadius;return i&&(n.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),n}worldPositionToTextCoords(e,n=new st){return mS.copy(e),this.localPositionToTextCoords(this.worldToLocal(mS),n)}raycast(e,n){const{textRenderInfo:i,curveRadius:r}=this;if(i){const a=i.blockBounds,o=r?eW():Q7(),s=o.geometry,{position:u,uv:c}=s.attributes;for(let d=0;d<c.count;d++){let p=a[0]+c.getX(d)*(a[2]-a[0]);const g=a[1]+c.getY(d)*(a[3]-a[1]);let y=0;r&&(y=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),u.setXYZ(d,p,g,y)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,U0.length=0,o.raycast(e,U0);for(let d=0;d<U0.length;d++)U0[d].object=this,n.push(U0[d])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,hCe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};tW.forEach(t=>{const e="_private_"+t;Object.defineProperty(nW.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});new ua;new Ct;const pCe=G.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:i,fontSize:r=1,children:a,characters:o,onSync:s,...u},c)=>{const d=Uc(({invalidate:b})=>b),[p]=G.useState(()=>new nW),[g,y]=G.useMemo(()=>{const b=[];let T="";return G.Children.forEach(a,S=>{typeof S=="string"||typeof S=="number"?T+=S:b.push(S)}),[b,T]},[a]);return uMe(()=>new Promise(b=>Jwe({font:i,characters:o},b)),["troika-text",i,o]),G.useLayoutEffect(()=>void p.sync(()=>{d(),s&&s(p)})),G.useEffect(()=>()=>p.dispose(),[p]),G.createElement("primitive",ME({object:p,ref:c,font:i,text:y,anchorX:e,anchorY:n,fontSize:r,sdfGlyphSize:t},u),g)}),mCe=()=>parseInt(f_.replace(/\D+/g,"")),gCe=mCe(),vCe=G.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:o,onStart:s,onEnd:u,...c},d)=>{const p=Uc(U=>U.invalidate),g=Uc(U=>U.camera),y=Uc(U=>U.gl),b=Uc(U=>U.events),T=Uc(U=>U.setEvents),S=Uc(U=>U.set),A=Uc(U=>U.get),R=Uc(U=>U.performance),I=e||g,N=i||b.connected||y.domElement,D=G.useMemo(()=>new ywe(I),[I]);return lA(()=>{D.enabled&&D.update()},-1),G.useEffect(()=>(a&&D.connect(a===!0?N:a),D.connect(N),()=>void D.dispose()),[a,N,n,D,p]),G.useEffect(()=>{const U=L=>{p(),n&&R.regress(),o&&o(L)},k=L=>{s&&s(L)},z=L=>{u&&u(L)};return D.addEventListener("change",U),D.addEventListener("start",k),D.addEventListener("end",z),()=>{D.removeEventListener("start",k),D.removeEventListener("end",z),D.removeEventListener("change",U)}},[o,s,u,D,p,T]),G.useEffect(()=>{if(t){const U=A().controls;return S({controls:D}),()=>S({controls:U})}},[t,D]),G.createElement("primitive",ME({ref:d,object:D,enableDamping:r},c))}),yCe=G.forwardRef(({children:t,enabled:e=!0,speed:n=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:o=!1,...s},u)=>{const c=G.useRef(null);G.useImperativeHandle(u,()=>c.current,[]);const d=G.useRef(Math.random()*1e4);return lA(p=>{var g,y;if(!e||n===0)return;o&&p.invalidate();const b=d.current+p.clock.elapsedTime;c.current.rotation.x=Math.cos(b/4*n)/8*i,c.current.rotation.y=Math.sin(b/4*n)/8*i,c.current.rotation.z=Math.sin(b/4*n)/20*i;let T=Math.sin(b/4*n)/10;T=xq.mapLinear(T,-.1,.1,(g=a==null?void 0:a[0])!==null&&g!==void 0?g:-.1,(y=a==null?void 0:a[1])!==null&&y!==void 0?y:.1),c.current.position.y=T*r,c.current.updateMatrix()}),G.createElement("group",s,G.createElement("group",{ref:c,matrixAutoUpdate:!1},t))});class _Ce extends Ts{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${gCe>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const bCe=t=>new se().setFromSpherical(new xE(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),xCe=G.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:i=0,factor:r=4,fade:a=!1,speed:o=1},s)=>{const u=G.useRef(null),[c,d,p]=G.useMemo(()=>{const y=[],b=[],T=Array.from({length:n},()=>(.5+.5*Math.random())*r),S=new Ct;let A=t+e;const R=e/n;for(let I=0;I<n;I++)A-=R*Math.random(),y.push(...bCe(A).toArray()),S.setHSL(I/n,i,.9),b.push(S.r,S.g,S.b);return[new Float32Array(y),new Float32Array(b),new Float32Array(T)]},[n,e,r,t,i]);lA(y=>u.current&&(u.current.uniforms.time.value=y.clock.elapsedTime*o));const[g]=G.useState(()=>new _Ce);return G.createElement("points",{ref:s},G.createElement("bufferGeometry",null,G.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),G.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),G.createElement("bufferAttribute",{attach:"attributes-size",args:[p,1]})),G.createElement("primitive",{ref:u,object:g,attach:"material",blending:C1,"uniforms-fade-value":a,depthWrite:!1,transparent:!0,vertexColors:!0}))}),SCe=({text:t,position:e,onClick:n})=>{const[i,r]=G.useState(!1);return lA(a=>{}),ee.jsx(yCe,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:ee.jsx(pCe,{position:e,fontSize:i?.8:.5,color:i?"#60a5fa":"#94a3b8",anchorX:"center",anchorY:"middle",onPointerOver:()=>{document.body.style.cursor="pointer",r(!0)},onPointerOut:()=>{document.body.style.cursor="auto",r(!1)},onClick:()=>n(t),children:t})})},ECe=({tags:t,onTagClick:e})=>{const n=G.useMemo(()=>{const i=[],r=Math.PI*(3-Math.sqrt(5));for(let a=0;a<t.length;a++){const o=1-a/(t.length-1)*2,s=Math.sqrt(1-o*o),u=r*a,c=Math.cos(u)*s,d=Math.sin(u)*s,p=8;i.push({position:[c*p,o*p,d*p],text:t[a]})}return i},[t]);return ee.jsx("group",{children:n.map((i,r)=>ee.jsx(SCe,{text:i.text,position:i.position,onClick:e},r))})},TCe=({history:t})=>{const e=wg(),n=G.useMemo(()=>{const r=new Set;return t.forEach(a=>{a.audit.banderas_rojas&&a.audit.banderas_rojas.forEach(u=>{u&&u.length>2&&u.length<40&&u!==a.title&&r.add(u)});const o=a.audit.tipologia;o&&o.length>2&&o.length<40&&o!==a.title&&r.add(o);const s=a.audit.comunidad_autonoma;s&&s.length>2&&s.length<40&&r.add(s)}),Array.from(r)},[t]),i=r=>{e(`/history?tag=${encodeURIComponent(r)}`)};return n.length===0?ee.jsx("div",{className:"h-[600px] flex items-center justify-center text-slate-500",children:"No hay suficientes datos para generar la nube de etiquetas 3D."}):ee.jsxs("div",{className:"h-[80vh] w-full bg-slate-900/20 rounded-3xl border border-slate-800 overflow-hidden relative",children:[ee.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-slate-900/80 p-4 rounded-xl backdrop-blur-md border border-slate-700",children:[ee.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Universo de Opacidad"}),ee.jsx("p",{className:"text-xs text-slate-400",children:"Navega por los conceptos detectados en el BOE"}),ee.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Arrastra para rotar  Rueda para zoom"})]}),ee.jsxs(cwe,{dpr:[1,2],camera:{position:[0,0,15],fov:60},children:[ee.jsx("fog",{attach:"fog",args:["#020617",0,40]}),ee.jsx("ambientLight",{intensity:.5}),ee.jsx("pointLight",{position:[10,10,10]}),ee.jsx(xCe,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),ee.jsx(ECe,{tags:n,onTagClick:i}),ee.jsx(vCe,{autoRotate:!0,autoRotateSpeed:.5,enablePan:!1})]})]})},ACe=()=>{const[t,e]=G.useState(()=>localStorage.getItem("boe_pref_lang")||"es"),[n,i]=G.useState(()=>localStorage.getItem("boe_agent_session")==="active"),[r,a]=G.useState(!1),[o,s]=G.useState(""),[u,c]=G.useState(!1),[d,p]=G.useState(""),[g,y]=G.useState([]),[b,T]=G.useState(!1),[S,A]=G.useState([]),[R,I]=G.useState(1),N=5,[D,U]=G.useState(!1),k=wg(),z=sf(),[L,F]=G.useState({loading:!1,error:null,result:null,scrapingResults:void 0,isScraping:!1}),j=Pg[t],W="test1234X";G.useEffect(()=>{localStorage.setItem("boe_pref_lang",t)},[t]),G.useEffect(()=>{Q(),X()},[]);const X=async()=>{U(!0);const re=new Date().toISOString().slice(0,10).replace(/-/g,""),oe=new Date(Date.now()-864e5).toISOString().slice(0,10).replace(/-/g,""),Ee=[`https://www.boe.es/datosabiertos/api/boe/sumario/${re}`,`https://www.boe.es/datosabiertos/api/boe/sumario/${oe}`,"https://www.boe.es/diario_boe/xml.php"];let ce=[];for(const Ce of Ee){if(ce.length>0)break;try{console.log(` Try fetching BOE from: ${Ce}`);const Ue=await fetch(Ce,{headers:{Accept:"application/xml","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AuditoriaCvica/1.0"}});if(!Ue.ok)continue;const ve=await Ue.text(),Oe=new DOMParser().parseFromString(ve,"text/xml").querySelectorAll("item");if(Oe.length===0)continue;ce=Array.from(Oe).map(Me=>{var Y,q,fe,Le;const Je=Me.getAttribute("id")||((Y=Me.querySelector("identificador"))==null?void 0:Y.textContent)||"",Z=((q=Me.querySelector("titulo"))==null?void 0:q.textContent)||"Sin ttulo",it=Me.closest("departamento"),je=(it==null?void 0:it.getAttribute("nombre"))||((fe=it==null?void 0:it.querySelector("nombre"))==null?void 0:fe.textContent)||"Varios",Re=Me.closest("seccion"),He=(Re==null?void 0:Re.getAttribute("nombre"))||((Le=Re==null?void 0:Re.querySelector("nombre"))==null?void 0:Le.textContent)||"I";return{id:Je,titulo:Z,departamento:je,seccion:He}})}catch(Ue){console.warn(`Failed to fetch from ${Ce}:`,Ue)}}ce.length>0?A(ce):(console.warn("Using sources as fallback"),A(kY.map(Ce=>({id:Ce.id,titulo:Ce.title,departamento:Ce.category,seccion:"I"})))),U(!1)},Q=async()=>{const re=await hie();y(re),T(!0)},ae=()=>{window.confirm(j.confirmClear)&&(pie(),y([]))},$=()=>e(re=>re==="es"?"en":"es"),ie=()=>{o===W?(i(!0),localStorage.setItem("boe_agent_session","active"),c(!1),a(!1)):(c(!0),setTimeout(()=>c(!1),3e3))},me=()=>{i(!1),localStorage.removeItem("boe_agent_session"),ne()},pe=re=>{k(`/audit/${re}`)},de=async(re,oe)=>{const Ee=g.find(ce=>ce.boeId===re);if(Ee){p(re),F(ce=>({...ce,loading:!1,error:null,result:Ee.audit}));return}if(!n){a(!0);return}p(re),F(ce=>({...ce,loading:!0,error:null,result:null,scrapingResults:void 0}));try{let ce="",Ce=oe||(t==="es"?"Documento BOE":"Gazette Document");try{const ve=await fetch(`https://www.boe.es/diario_boe/xml.php?id=${re}`);if(!ve.ok)throw new Error("CORS Blocked");ce=await ve.text();const Oe=new DOMParser().parseFromString(ce,"text/xml").querySelector("titulo");Oe&&(Ce=Oe.textContent||Ce)}catch{ce=`<boe><diario id="BOE-S-2024"><titulo>BOE</titulo><item id="${re}"><titulo>${Ce}</titulo><texto>Contenido simulado para auditora...</texto></item></diario></boe>`}const Ue=await Qte(ce,t);await B0(re,Ce,Ue),await Q(),F(ve=>({...ve,loading:!1,error:null,result:Ue}))}catch(ce){F(Ce=>({...Ce,loading:!1,error:ce.message||"Error during analysis"}))}},H=async re=>{try{if(Array.isArray(re))for(const oe of re)oe.boeId&&oe.title&&oe.audit&&await B0(oe.boeId,oe.title,oe.audit);else if(re.boe_id&&re.report)await B0(re.boe_id,re.title||re.boe_id,re.report);else if(re.boeId&&re.audit)await B0(re.boeId,re.title||re.boeId,re.audit);else throw new Error("Invalid Format");await Q(),alert(j.importSuccess)}catch(oe){console.error("Import failed",oe),alert(j.importError)}},ne=()=>{F({loading:!1,error:null,result:null,scrapingResults:void 0,isScraping:!1}),p("")},le=()=>z.pathname==="/"?"home":z.pathname==="/history"?"history":z.pathname==="/tags"?"tags":z.pathname.startsWith("/audit/")?"audit":"home",ge=re=>g.some(oe=>oe.boeId===re),_e=()=>ee.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/80 backdrop-blur-sm animate-in fade-in duration-300",children:ee.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 p-8 md:p-12 rounded-[2.5rem] shadow-2xl text-center space-y-8 relative animate-in zoom-in duration-300",children:[ee.jsx("button",{onClick:()=>a(!1),className:"absolute top-6 right-6 text-slate-500 hover:text-white transition-colors",children:ee.jsx(uz,{size:24})}),ee.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-600/10 rounded-3xl border border-blue-600/20 text-blue-500 mb-2 rotate-3",children:ee.jsx(dY,{size:40})}),ee.jsxs("div",{className:"space-y-3",children:[ee.jsx("h2",{className:"text-3xl font-black text-white",children:j.loginTitle}),ee.jsx("p",{className:"text-slate-400 text-sm",children:j.loginSubtitle})]}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{className:"relative group",children:[ee.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors",children:ee.jsx(uY,{size:18})}),ee.jsx("input",{type:"password",placeholder:j.passwordPlaceholder,value:o,onChange:re=>s(re.target.value),onKeyDown:re=>re.key==="Enter"&&ie(),className:`w-full bg-slate-950/50 border ${u?"border-red-500 animate-shake":"border-slate-800 group-hover:border-slate-700 focus:border-blue-500"} rounded-2xl py-4 pl-12 pr-4 outline-none text-white transition-all font-mono`,autoFocus:!0}),u&&ee.jsx("p",{className:"text-[10px] text-red-400 mt-2 text-left font-medium",children:j.invalidPassword})]}),ee.jsxs("button",{onClick:ie,className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-blue-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2 group",children:[ee.jsx(j0,{size:20,className:"group-hover:scale-110 transition-transform"}),j.loginBtn]})]})]})});return ee.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-200 selection:bg-blue-500/30",children:[ee.jsx(vie,{}),ee.jsx(gie,{currentView:le(),resetState:ne,lang:t,toggleLang:$,isLoggedIn:n,handleLogout:me,setShowLogin:a,t:j}),ee.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-4 pb-16 md:pt-4 md:pb-24 mt-20 md:mt-24",children:[z.pathname==="/"&&ee.jsxs("header",{className:"mb-12 text-center relative",children:[ee.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-900/30 px-4 py-2 rounded-full border border-blue-500/30 text-blue-400 mb-6",children:[ee.jsx(OY,{size:16}),ee.jsxs("span",{className:"text-sm font-bold tracking-widest uppercase",children:["Agent #0412  ",j.badge]})]}),ee.jsx("h1",{className:"text-3xl md:text-4xl font-black mb-4 bg-gradient-to-r from-white via-slate-400 to-slate-600 bg-clip-text text-transparent",children:j.title}),ee.jsx("p",{className:"text-slate-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed",children:j.subtitle})]}),ee.jsxs(Yj,{children:[ee.jsx(F0,{path:"/",element:ee.jsxs("div",{className:"space-y-16 animate-in fade-in duration-500",children:[ee.jsx(AS,{title:j.title+" - "+j.subtitle,description:"Plataforma de auditora ciudadana del BOE utilizando inteligencia artificial para detectar opacidad y red flags.",keywords:["BOE","Auditora","Transparencia","IA","Civic Tech","Espaa","Leyes"]}),ee.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[ee.jsxs("section",{className:"space-y-6",children:[ee.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-800 p-8 rounded-3xl shadow-2xl",children:[ee.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-4 text-center",children:"Explorar por Nivel de Opacidad"}),ee.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[ee.jsxs("button",{onClick:()=>k("/history?min=0&max=33"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-red-900/10 border border-red-900/20 hover:bg-red-900/20 transition-all group",children:[ee.jsx("span",{className:"text-xs font-bold text-red-400",children:"0 - 33%"}),ee.jsxs("span",{className:"text-xs font-black text-red-500/70 font-mono uppercase tracking-tighter group-hover:text-red-400",children:["Crtico (",g.filter(re=>re.audit.nivel_transparencia<=33).length,")"]})]}),ee.jsxs("button",{onClick:()=>k("/history?min=34&max=66"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-amber-900/10 border border-amber-900/20 hover:bg-amber-900/20 transition-all group",children:[ee.jsx("span",{className:"text-xs font-bold text-amber-400",children:"34 - 66%"}),ee.jsxs("span",{className:"text-xs font-black text-amber-500/70 font-mono uppercase tracking-tighter group-hover:text-amber-400",children:["Advertencia (",g.filter(re=>re.audit.nivel_transparencia>33&&re.audit.nivel_transparencia<=66).length,")"]})]}),ee.jsxs("button",{onClick:()=>k("/history?min=67&max=100"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-emerald-900/10 border border-emerald-900/20 hover:bg-emerald-600/10 transition-all group",children:[ee.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"67 - 100%"}),ee.jsxs("span",{className:"text-xs font-black text-emerald-500/70 font-mono uppercase tracking-tighter group-hover:text-emerald-400",children:["Transparente (",g.filter(re=>re.audit.nivel_transparencia>66).length,")"]})]})]})]}),ee.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 pb-4",children:[ee.jsxs("div",{children:[ee.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-white",children:[ee.jsx(A3,{className:"text-red-500 animate-pulse",size:24}),j.latestRadarTitle]}),ee.jsx("p",{className:"text-slate-500 text-xs font-medium uppercase tracking-widest",children:j.latestRadarSubtitle})]}),ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsxs("button",{onClick:()=>X(),disabled:D,className:"p-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-300 transition-all flex items-center gap-2 text-xs font-bold border border-slate-700 disabled:opacity-50",title:j.refreshBtn,children:[ee.jsx(A3,{size:14,className:D?"animate-pulse":""}),j.refreshBtn]}),D&&ee.jsx(hz,{className:"animate-spin text-slate-500",size:20})]})]}),ee.jsx("div",{className:"space-y-3 max-h-[700px] overflow-y-auto pr-2 custom-scrollbar",children:S.slice((R-1)*N,R*N).map(re=>{const oe=ge(re.id);return ee.jsxs("div",{className:`bg-slate-900/40 border p-4 rounded-2xl transition-all flex flex-col justify-between group relative overflow-hidden ${oe?"border-emerald-500/20":"border-slate-800 hover:border-blue-500/30"}`,children:[oe&&ee.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-emerald-900/40 text-emerald-400 px-2 py-0.5 rounded text-[9px] font-bold border border-emerald-500/30",children:[ee.jsx(FX,{size:10}),j.alreadyAudited]}),ee.jsxs("div",{children:[ee.jsx("span",{className:"text-[10px] font-mono text-slate-500 block mb-1",children:re.departamento}),ee.jsx("h3",{className:"text-sm font-bold text-slate-200 line-clamp-2 leading-snug group-hover:text-white",children:re.titulo})]}),ee.jsxs("div",{className:"flex items-center justify-between mt-4",children:[ee.jsxs("a",{href:`https://www.boe.es/buscar/doc.php?id=${re.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-slate-600 font-mono hover:text-blue-400 transition-colors flex items-center gap-1",children:[re.id," ",ee.jsx(RI,{size:10})]}),(n||oe)&&ee.jsxs(RE,{to:`/audit/${re.id}`,className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-2 ${oe?"bg-emerald-600/10 text-emerald-400 border border-emerald-600/20 hover:bg-emerald-600 hover:text-white":"bg-blue-600/10 text-blue-400 border border-blue-600/20 hover:bg-blue-600 hover:text-white"}`,children:[ee.jsx(GC,{size:10}),oe?j.goToAudit:j.auditWithGemini]})]})]},re.id)})}),ee.jsx(yG,{currentPage:R,totalPages:Math.ceil(S.length/N),onPageChange:I,itemsPerPage:N,totalItems:S.length,label:"Artculos"})]}),ee.jsx("section",{className:"space-y-6 flex flex-col",children:ee.jsx("div",{className:"bg-slate-900/50 backdrop-blur-md border border-slate-800 p-8 rounded-3xl shadow-2xl flex flex-col justify-center gap-8",children:n?ee.jsxs(ee.Fragment,{children:[ee.jsxs("div",{className:"text-center space-y-4",children:[ee.jsx("div",{className:"w-16 h-16 bg-blue-600/10 rounded-2xl border border-blue-600/20 flex items-center justify-center mx-auto text-blue-500 shadow-xl shadow-blue-900/10",children:ee.jsx(mz,{size:32})}),ee.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:"Bsqueda Inteligente"}),ee.jsx("p",{className:"text-slate-500 text-sm max-w-xs mx-auto",children:"Introduce el identificador del BOE para realizar una auditora instantnea."})]}),ee.jsxs("div",{className:"flex flex-col gap-3",children:[ee.jsx("input",{type:"text",placeholder:j.searchPlaceholder,className:"w-full bg-slate-950 border border-slate-800 rounded-2xl py-5 px-6 outline-none text-white text-lg focus:border-blue-500 transition-all font-mono placeholder:text-slate-700",value:d,onChange:re=>p(re.target.value),onKeyDown:re=>re.key==="Enter"&&d&&pe(d)}),ee.jsx("button",{onClick:()=>pe(d),disabled:!d,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-slate-800 disabled:text-slate-600 text-white py-5 rounded-2xl font-black text-xl transition-all transform active:scale-[0.98] shadow-2xl shadow-blue-900/20",children:j.analyzeBtn})]})]}):ee.jsxs("div",{className:"text-center space-y-4 mb-4",children:[ee.jsx("div",{className:"w-16 h-16 bg-blue-600/10 rounded-2xl border border-blue-600/20 flex items-center justify-center mx-auto text-blue-500 shadow-xl shadow-blue-900/10",children:ee.jsx(j0,{size:32})}),ee.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:"Acceso Restringido"}),ee.jsx("p",{className:"text-slate-500 text-sm max-w-xs mx-auto",children:"Inicia sesin como Agente para realizar nuevas auditoras personalizadas."})]})})})]})]})}),ee.jsx(F0,{path:"/history",element:ee.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[ee.jsx(AS,{title:`${j.historyTitle} - ${j.title}`,description:"Historial de auditoras y anlisis de transparencia de documentos del Boletn Oficial del Estado (BOE).",keywords:["BOE","Historial","Auditoras","Transparencia","Archivo"]}),ee.jsxs("div",{className:"border-b border-slate-800 pb-6 flex items-center justify-between",children:[ee.jsxs("div",{children:[ee.jsxs("h2",{className:"text-3xl font-black flex items-center gap-3 text-white",children:[ee.jsx(BC,{className:"text-purple-500",size:32}),j.historyTitle]}),ee.jsx("p",{className:"text-slate-500 text-sm font-medium uppercase tracking-widest mt-1",children:j.historySubtitle})]}),g.length>0&&ee.jsxs("span",{className:"bg-purple-950/40 text-purple-400 px-4 py-1.5 rounded-full text-xs font-bold border border-purple-900/50",children:[g.length," Auditoras"]})]}),ee.jsx("div",{className:"bg-slate-900/20 border border-slate-800 rounded-3xl min-h-[500px]",children:g.length===0?ee.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-slate-600 opacity-40 italic text-sm",children:[ee.jsx(ZX,{size:64,className:"mb-6"}),"No hay auditoras procesadas an"]}):ee.jsx(mie,{history:g,onClear:ae,onImport:H,lang:t,isLoggedIn:n})})]})}),ee.jsx(F0,{path:"/tags",element:ee.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[ee.jsx(AS,{title:`${j.tagsTitle||"Universo 3D"} - ${j.title}`,description:"Visualizacin 3D interactiva de los conceptos y banderas rojas detectados en el BOE.",keywords:["BOE","3D","Visualizacin","Datos","React Three Fiber"]}),ee.jsx(TCe,{history:g})]})}),ee.jsx(F0,{path:"/audit/:boeId",element:ee.jsx(_ye,{performAudit:de,state:L,t:j,isLoggedIn:n,searchId:d,lang:t,resetState:ne,history:g,isHistoryLoaded:b})})]}),ee.jsx("footer",{className:"mt-24 pt-12 border-t border-slate-800 text-center text-slate-500 text-sm",children:ee.jsxs("p",{children:[" 2026 Spanish BOE Transparency Auditor. ",j.footerDesc]})}),r&&ee.jsx(_e,{})]})]})},iW=document.getElementById("root");if(!iW)throw new Error("Could not find root element to mount to");const MCe=KW.createRoot(iW);MCe.render(ee.jsx(ds.StrictMode,{children:ee.jsx(_X,{basename:"/",children:ee.jsx(ACe,{})})}));
